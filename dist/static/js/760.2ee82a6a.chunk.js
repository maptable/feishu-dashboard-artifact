"use strict";(self.webpackChunkmaptable_frontend=self.webpackChunkmaptable_frontend||[]).push([[760],{43760:(e,t,a)=>{a.r(t),a.d(t,{FieldRender:()=>V,default:()=>K});var i=a(57435),n=a(33718),l=a(8942),r=a.n(l),o=a(19611),d=a(49544),s=a(17087),u=a(63796),c=a(39306),m=a(85521),v=a(85790),p=a(48863),h=a(85513),j=a(28827),y=a(89084),x=a(31973),_=a(62502),b=a(41484),f=a(30423),g=a(53936),I=a(68429),N=a(58590);const C="coordinateFieldRender_renderer__z5MJf",R="coordinateFieldRender_text__+oVBu",T="coordinateFieldRender_mapPin__NcIRW";var k=a(94553);function O(e){const{value:t,tableNodeId:a,rowId:i,columnId:l,editable:r=!0,className:o}=e,d=(0,f.I)();return(0,k.jsxs)("div",{className:(0,n.default)(C,o),children:[(0,k.jsx)("div",{className:R,children:t||""}),t&&r?(0,k.jsx)(I.Z,{"data-coordinate":"openModal",type:"mapPin",onClick:function(){a&&i&&d(N.Nw.updateCoordinateEditor({visible:!0,trigger:"open",readonly:!0,tableNode:{id:a,rowId:i,cells:{[l]:t}}}))},className:T}):null]})}var P=a(38981),w=a.n(P),Z=a(99540),z=a.n(Z);const F="formulaFieldRender_renderer__phFnb",L="formulaFieldRender_text__zKitA",S="formulaFieldRender_mapPin__l8LIb",A=e=>{let{value:t,tableNodeId:a,rowId:i,columnId:n,typeOptions:l,injector:r}=e;const{expectedType:o,numberPrecision:d,numberFormat:m}=null!==l&&void 0!==l?l:{},v="boolean"===(null===l||void 0===l?void 0:l.expectedType),p=(0,f.I)();return(0,k.jsxs)("div",{className:F,children:[(0,k.jsx)("div",{className:"coordinate"===o?L:void 0,children:"number"===o?(0,k.jsx)(s.xz,{value:null===t?void 0:z()(t),typeOptions:{precision:null!==d&&void 0!==d?d:0,format:m},injector:r}):"multiLineText"===o||v?(0,k.jsx)(c.qr,{value:w()(v?t?"true":"false":t),truncateLength:200}):"singleChoice"===o?(0,k.jsx)(u.V5,{value:t,typeOptions:null===l||void 0===l?void 0:l.lookupColumnTypeOptions}):t}),"coordinate"===o&&t&&(0,k.jsx)(I.Z,{"data-coordinate":"openModal",type:"mapPin",onClick:function(){a&&i&&p(N.Nw.updateCoordinateEditor({visible:!0,trigger:"open",readonly:!0,tableNode:{id:a,rowId:i,cells:{[n]:t}}}))},className:S})]})},q="fieldRender_block__Ke68q",E="fieldRender_select__zkFYy",M="fieldRender_hyperlink__mOvEs",B="fieldRender_alignLeft__4NyER",D="fieldRender_alignRight__BrDwc",H="fieldRender_attachmentRenderer__h7o38",V=e=>{const{item:t,className:a,imageHeight:l,truncateLength:I,members:N,timezone:C,editableCoordinate:R=!0,textAlignLeft:T=!1,isThirdPartyTable:P=!1,inDetailPanel:w=!1,getCell:Z}=e,z="singleChoice"===t.type||"multiChoice"===t.type,F="hyperlink"===t.type,L=(0,f.I)(),[S,V]=(0,i.useState)(),[K,J]=(0,i.useState)();function W(e){_.qf.emit({currentPreviewId:e,attachments:S,isThirdPartyTable:P||!1})}(0,i.useEffect)((()=>{var e;("attachment"===t.type||"lookup"===t.type&&"attachment"===(null===(e=t.typeOptions)||void 0===e?void 0:e.lookupColumnType))&&(P?null===Z||void 0===Z||Z(t).then((e=>{V((t=>{if(!r()(t,null===e||void 0===e?void 0:e.value))return null===e||void 0===e?void 0:e.value}))})):V(t.value)),"coordinate"===t.type&&(P?null===Z||void 0===Z||Z(t).then((e=>{J(null===e||void 0===e?void 0:e.value)})):J(t.value))}),[P,t,Z]);return(0,k.jsx)(o.C.Provider,{value:{getState:b.h.getState,dispatch:L,injector:g.Z},children:(0,k.jsx)("div",{className:(0,n.default)(q,{[E]:z,[M]:F&&w},a),children:(()=>{switch(t.type){case"coordinate":return P?(0,k.jsx)(c.jo,{value:K,isPlain:t.isPlain,textAlignLeft:!1,injector:g.Z}):(0,k.jsx)(O,{value:t.value,tableNodeId:t.tableNodeId,columnId:t.id,editable:R,rowId:t.rowId,className:T?B:D});case"multiLineText":return(0,k.jsx)(c.jo,{value:t.value,truncateLength:I,isPlain:t.isPlain,textAlignLeft:T,injector:g.Z});case"datetime":case"createTime":case"updateTime":return(0,k.jsx)(d.Io,{typeOptions:t.typeOptions,value:t.value,timezone:C,injector:g.Z});case"number":return(0,k.jsx)(s.xz,{typeOptions:t.typeOptions,value:t.value,injector:g.Z});case"singleChoice":case"multiChoice":return(0,k.jsx)(u.V5,{typeOptions:t.typeOptions,value:t.value});case"attachment":return(0,k.jsx)(m.c9,{value:S,onClickAttachment:W,imageHeight:l,imageStyle:"square",imageResizeMode:"center",isThirdPartyTable:P,className:(0,n.default)(T?B:D,H),injector:g.Z});case"formula":return(0,k.jsx)(A,{value:t.value,typeOptions:t.typeOptions,tableNodeId:t.tableNodeId,columnId:t.id,rowId:t.rowId,injector:g.Z});case"boolean":return(0,k.jsx)(v.v,{value:t.value,disabled:!0});case"creator":case"updater":return(0,k.jsx)(h.O,{value:t.value,members:N,injector:g.Z});case"member":return(0,k.jsx)(p.ro,{value:t.value,members:N,injector:g.Z});case"hyperlink":return(0,k.jsx)(j.jT,{value:t.value,injector:g.Z});case"related":return(0,k.jsx)(y.st,{wrapStyle:{alignItems:"end",flexDirection:"column"},itemStyle:{marginRight:0,marginBottom:8},value:t.value,isThirdPartyTable:P,injector:g.Z});case"lookup":return(0,k.jsx)(x.C2,{value:t.value,typeOptions:t.typeOptions,members:N,attachments:S,imageHeight:l,imageStyle:"square",imageResizeMode:"center",isThirdPartyTable:P,onClickAttachment:W,attachmentClassName:H,timezone:C,injector:g.Z});default:return(0,k.jsx)("div",{children:null===t||void 0===t?void 0:t.value})}})()})})},K=V}}]);
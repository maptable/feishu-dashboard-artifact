(self.webpackChunkmaptable_frontend=self.webpackChunkmaptable_frontend||[]).push([[32],{48305:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var s=i(91010),o=i(57435);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H212V212h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16zm-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H212V612h200v200zm452-268H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16zm-52 268H612V612h200v200z"}}]},name:"appstore",theme:"outlined"};var r=i(62873),l=function(e,t){return o.createElement(r.Z,(0,s.Z)({},e,{ref:t,icon:n}))};const a=o.forwardRef(l)},63668:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var s=i(91010),o=i(57435);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"};var r=i(62873),l=function(e,t){return o.createElement(r.Z,(0,s.Z)({},e,{ref:t,icon:n}))};const a=o.forwardRef(l)},85427:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var s=i(91010),o=i(57435);const n={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"};var r=i(62873),l=function(e,t){return o.createElement(r.Z,(0,s.Z)({},e,{ref:t,icon:n}))};const a=o.forwardRef(l)},89677:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var s=i(91010),o=i(57435),n=i(98855),r=i(62873),l=function(e,t){return o.createElement(r.Z,(0,s.Z)({},e,{ref:t,icon:n.Z}))};const a=o.forwardRef(l)},88338:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var s=i(91010),o=i(57435),n=i(33523),r=i(62873),l=function(e,t){return o.createElement(r.Z,(0,s.Z)({},e,{ref:t,icon:n.Z}))};const a=o.forwardRef(l)},32783:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var s=i(91010),o=i(57435),n=i(25541),r=i(62873),l=function(e,t){return o.createElement(r.Z,(0,s.Z)({},e,{ref:t,icon:n.Z}))};const a=o.forwardRef(l)},73681:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var s=i(91010),o=i(57435),n=i(15330),r=i(62873),l=function(e,t){return o.createElement(r.Z,(0,s.Z)({},e,{ref:t,icon:n.Z}))};const a=o.forwardRef(l)},9979:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var s=i(91010),o=i(57435),n=i(84142),r=i(62873),l=function(e,t){return o.createElement(r.Z,(0,s.Z)({},e,{ref:t,icon:n.Z}))};const a=o.forwardRef(l)},93862:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var s=i(91010),o=i(57435);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"}}]},name:"menu",theme:"outlined"};var r=i(62873),l=function(e,t){return o.createElement(r.Z,(0,s.Z)({},e,{ref:t,icon:n}))};const a=o.forwardRef(l)},6708:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var s=i(91010),o=i(57435),n=i(15815),r=i(62873),l=function(e,t){return o.createElement(r.Z,(0,s.Z)({},e,{ref:t,icon:n.Z}))};const a=o.forwardRef(l)},23131:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var s=i(2053),o=i(57435);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 184H712v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H384v-64c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v64H144c-17.7 0-32 14.3-32 32v664c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V216c0-17.7-14.3-32-32-32zm-40 656H184V460h656v380zM184 392V256h128v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h256v48c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-48h128v136H184z"}}]},name:"calendar",theme:"outlined"};var r=i(45265),l=function(e,t){return o.createElement(r.Z,(0,s.Z)({},e,{ref:t,icon:n}))};const a=o.forwardRef(l)},96042:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var s=i(2053),o=i(57435);const n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M686.7 638.6L544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"}}]},name:"clock-circle",theme:"outlined"};var r=i(45265),l=function(e,t){return o.createElement(r.Z,(0,s.Z)({},e,{ref:t,icon:n}))};const a=o.forwardRef(l)},52481:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var s=i(2053),o=i(57435);const n={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M873.1 596.2l-164-208A32 32 0 00684 376h-64.8c-6.7 0-10.4 7.7-6.3 13l144.3 183H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h695.9c26.8 0 41.7-30.8 25.2-51.8z"}}]},name:"swap-right",theme:"outlined"};var r=i(45265),l=function(e,t){return o.createElement(r.Z,(0,s.Z)({},e,{ref:t,icon:n}))};const a=o.forwardRef(l)},77842:function(e){e.exports=function(){"use strict";return function(e,t){var i=t.prototype,s=i.format;i.format=function(e){var t=this,i=this.$locale();if(!this.isValid())return s.bind(this)(e);var o=this.$utils(),n=(e||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,(function(e){switch(e){case"Q":return Math.ceil((t.$M+1)/3);case"Do":return i.ordinal(t.$D);case"gggg":return t.weekYear();case"GGGG":return t.isoWeekYear();case"wo":return i.ordinal(t.week(),"W");case"w":case"ww":return o.s(t.week(),"w"===e?1:2,"0");case"W":case"WW":return o.s(t.isoWeek(),"W"===e?1:2,"0");case"k":case"kk":return o.s(String(0===t.$H?24:t.$H),"k"===e?1:2,"0");case"X":return Math.floor(t.$d.getTime()/1e3);case"x":return t.$d.getTime();case"z":return"["+t.offsetName()+"]";case"zzz":return"["+t.offsetName("long")+"]";default:return e}}));return s.bind(this)(n)}}}()},29772:function(e){e.exports=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,i=/\d/,s=/\d\d/,o=/\d\d?/,n=/\d*[^-_:/,()\s\d]+/,r={},l=function(e){return(e=+e)+(e>68?1900:2e3)},a=function(e){return function(t){this[e]=+t}},d=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e)return 0;if("Z"===e)return 0;var t=e.match(/([+-]|\d\d)/g),i=60*t[1]+(+t[2]||0);return 0===i?0:"+"===t[0]?-i:i}(e)}],c=function(e){var t=r[e];return t&&(t.indexOf?t:t.s.concat(t.f))},u=function(e,t){var i,s=r.meridiem;if(s){for(var o=1;o<=24;o+=1)if(e.indexOf(s(o,0,t))>-1){i=o>12;break}}else i=e===(t?"pm":"PM");return i},h={A:[n,function(e){this.afternoon=u(e,!1)}],a:[n,function(e){this.afternoon=u(e,!0)}],Q:[i,function(e){this.month=3*(e-1)+1}],S:[i,function(e){this.milliseconds=100*+e}],SS:[s,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[o,a("seconds")],ss:[o,a("seconds")],m:[o,a("minutes")],mm:[o,a("minutes")],H:[o,a("hours")],h:[o,a("hours")],HH:[o,a("hours")],hh:[o,a("hours")],D:[o,a("day")],DD:[s,a("day")],Do:[n,function(e){var t=r.ordinal,i=e.match(/\d+/);if(this.day=i[0],t)for(var s=1;s<=31;s+=1)t(s).replace(/\[|\]/g,"")===e&&(this.day=s)}],w:[o,a("week")],ww:[s,a("week")],M:[o,a("month")],MM:[s,a("month")],MMM:[n,function(e){var t=c("months"),i=(c("monthsShort")||t.map((function(e){return e.slice(0,3)}))).indexOf(e)+1;if(i<1)throw new Error;this.month=i%12||i}],MMMM:[n,function(e){var t=c("months").indexOf(e)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\d+/,a("year")],YY:[s,function(e){this.year=l(e)}],YYYY:[/\d{4}/,a("year")],Z:d,ZZ:d};function p(i){var s,o;s=i,o=r&&r.formats;for(var n=(i=s.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,i,s){var n=s&&s.toUpperCase();return i||o[s]||e[s]||o[n].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,i){return t||i.slice(1)}))}))).match(t),l=n.length,a=0;a<l;a+=1){var d=n[a],c=h[d],u=c&&c[0],p=c&&c[1];n[a]=p?{regex:u,parser:p}:d.replace(/^\[|\]$/g,"")}return function(e){for(var t={},i=0,s=0;i<l;i+=1){var o=n[i];if("string"==typeof o)s+=o.length;else{var r=o.regex,a=o.parser,d=e.slice(s),c=r.exec(d)[0];a.call(t,c),e=e.replace(c,"")}}return function(e){var t=e.afternoon;if(void 0!==t){var i=e.hours;t?i<12&&(e.hours+=12):12===i&&(e.hours=0),delete e.afternoon}}(t),t}}return function(e,t,i){i.p.customParseFormat=!0,e&&e.parseTwoDigitYear&&(l=e.parseTwoDigitYear);var s=t.prototype,o=s.parse;s.parse=function(e){var t=e.date,s=e.utc,n=e.args;this.$u=s;var l=n[1];if("string"==typeof l){var a=!0===n[2],d=!0===n[3],c=a||d,u=n[2];d&&(u=n[2]),r=this.$locale(),!a&&u&&(r=i.Ls[u]),this.$d=function(e,t,i,s){try{if(["x","X"].indexOf(t)>-1)return new Date(("X"===t?1e3:1)*e);var o=p(t)(e),n=o.year,r=o.month,l=o.day,a=o.hours,d=o.minutes,c=o.seconds,u=o.milliseconds,h=o.zone,g=o.week,m=new Date,v=l||(n||r?1:m.getDate()),f=n||m.getFullYear(),C=0;n&&!r||(C=r>0?r-1:m.getMonth());var w,S=a||0,y=d||0,b=c||0,R=u||0;return h?new Date(Date.UTC(f,C,v,S,y,b,R+60*h.offset*1e3)):i?new Date(Date.UTC(f,C,v,S,y,b,R)):(w=new Date(f,C,v,S,y,b,R),g&&(w=s(w).week(g).toDate()),w)}catch(e){return new Date("")}}(t,l,s,i),this.init(),u&&!0!==u&&(this.$L=this.locale(u).$L),c&&t!=this.format(l)&&(this.$d=new Date("")),r={}}else if(l instanceof Array)for(var h=l.length,g=1;g<=h;g+=1){n[1]=l[g-1];var m=i.apply(this,n);if(m.isValid()){this.$d=m.$d,this.$L=m.$L,this.init();break}g===h&&(this.$d=new Date(""))}else o.call(this,e)}}}()},4884:function(e){e.exports=function(){"use strict";return function(e,t,i){var s=t.prototype,o=function(e){return e&&(e.indexOf?e:e.s)},n=function(e,t,i,s,n){var r=e.name?e:e.$locale(),l=o(r[t]),a=o(r[i]),d=l||a.map((function(e){return e.slice(0,s)}));if(!n)return d;var c=r.weekStart;return d.map((function(e,t){return d[(t+(c||0))%7]}))},r=function(){return i.Ls[i.locale()]},l=function(e,t){return e.formats[t]||function(e){return e.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,i){return t||i.slice(1)}))}(e.formats[t.toUpperCase()])},a=function(){var e=this;return{months:function(t){return t?t.format("MMMM"):n(e,"months")},monthsShort:function(t){return t?t.format("MMM"):n(e,"monthsShort","months",3)},firstDayOfWeek:function(){return e.$locale().weekStart||0},weekdays:function(t){return t?t.format("dddd"):n(e,"weekdays")},weekdaysMin:function(t){return t?t.format("dd"):n(e,"weekdaysMin","weekdays",2)},weekdaysShort:function(t){return t?t.format("ddd"):n(e,"weekdaysShort","weekdays",3)},longDateFormat:function(t){return l(e.$locale(),t)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};s.localeData=function(){return a.bind(this)()},i.localeData=function(){var e=r();return{firstDayOfWeek:function(){return e.weekStart||0},weekdays:function(){return i.weekdays()},weekdaysShort:function(){return i.weekdaysShort()},weekdaysMin:function(){return i.weekdaysMin()},months:function(){return i.months()},monthsShort:function(){return i.monthsShort()},longDateFormat:function(t){return l(e,t)},meridiem:e.meridiem,ordinal:e.ordinal}},i.months=function(){return n(r(),"months")},i.monthsShort=function(){return n(r(),"monthsShort","months",3)},i.weekdays=function(e){return n(r(),"weekdays",null,null,e)},i.weekdaysShort=function(e){return n(r(),"weekdaysShort","weekdays",3,e)},i.weekdaysMin=function(e){return n(r(),"weekdaysMin","weekdays",2,e)}}}()},63497:function(e){e.exports=function(){"use strict";var e="week",t="year";return function(i,s,o){var n=s.prototype;n.week=function(i){if(void 0===i&&(i=null),null!==i)return this.add(7*(i-this.week()),"day");var s=this.$locale().yearStart||1;if(11===this.month()&&this.date()>25){var n=o(this).startOf(t).add(1,t).date(s),r=o(this).endOf(e);if(n.isBefore(r))return 1}var l=o(this).startOf(t).date(s).startOf(e).subtract(1,"millisecond"),a=this.diff(l,e,!0);return a<0?o(this).startOf("week").week():Math.ceil(a)},n.weeks=function(e){return void 0===e&&(e=null),this.week(e)}}}()},49736:function(e){e.exports=function(){"use strict";return function(e,t){t.prototype.weekYear=function(){var e=this.month(),t=this.week(),i=this.year();return 1===t&&11===e?i+1:0===e&&t>=52?i-1:i}}}()},75303:function(e){e.exports=function(){"use strict";return function(e,t){t.prototype.weekday=function(e){var t=this.$locale().weekStart||0,i=this.$W,s=(i<t?i+7:i)-t;return this.$utils().u(e)?s:this.subtract(s,"day").add(e,"day")}}}()},80585:(e,t,i)=>{"use strict";!function(t){var i=/^(b|B)$/,s={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},o={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]};function n(e){var t,n,r,l,a,d,c,u,h,p,g,m,v,f,C,w=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},S=[],y=0,b=void 0,R=void 0;if(isNaN(e))throw new TypeError("Invalid number");return n=!0===w.bits,g=!0===w.unix,t=w.base||2,p=void 0!==w.round?w.round:g?1:2,d=void 0!==w.locale?w.locale:"",c=w.localeOptions||{},m=void 0!==w.separator?w.separator:"",v=void 0!==w.spacer?w.spacer:g?"":" ",C=w.symbols||{},f=2===t&&w.standard||"jedec",h=w.output||"string",l=!0===w.fullform,a=w.fullforms instanceof Array?w.fullforms:[],b=void 0!==w.exponent?w.exponent:-1,r=2<t?1e3:1024,(u=(R=Number(e))<0)&&(R=-R),(-1===b||isNaN(b))&&(b=Math.floor(Math.log(R)/Math.log(r)))<0&&(b=0),8<b&&(b=8),"exponent"===h?b:(0===R?(S[0]=0,S[1]=g?"":s[f][n?"bits":"bytes"][b]):(y=R/(2===t?Math.pow(2,10*b):Math.pow(1e3,b)),n&&r<=(y*=8)&&b<8&&(y/=r,b++),S[0]=Number(y.toFixed(0<b?p:0)),S[0]===r&&b<8&&void 0===w.exponent&&(S[0]=1,b++),S[1]=10===t&&1===b?n?"kb":"kB":s[f][n?"bits":"bytes"][b],g&&(S[1]="jedec"===f?S[1].charAt(0):0<b?S[1].replace(/B$/,""):S[1],i.test(S[1])&&(S[0]=Math.floor(S[0]),S[1]=""))),u&&(S[0]=-S[0]),S[1]=C[S[1]]||S[1],!0===d?S[0]=S[0].toLocaleString():0<d.length?S[0]=S[0].toLocaleString(d,c):0<m.length&&(S[0]=S[0].toString().replace(".",m)),"array"===h?S:(l&&(S[1]=a[b]?a[b]:o[f][b]+(n?"bit":"byte")+(1===S[0]?"":"s")),"object"===h?{value:S[0],symbol:S[1],exponent:b}:S.join(v)))}n.partial=function(e){return function(t){return n(t,e)}},e.exports=n}("undefined"!=typeof window?window:i.g)},4597:e=>{e.exports=function(e,t){return e<t}},19211:(e,t,i)=>{var s=i(72293),o=i(57170),n=i(62007),r=i(35710),l=i(78587),a=i(66718);e.exports=function(e){return o((function(t){var i=t.length,o=i,d=s.prototype.thru;for(e&&t.reverse();o--;){var c=t[o];if("function"!=typeof c)throw new TypeError("Expected a function");if(d&&!u&&"wrapper"==r(c))var u=new s([],!0)}for(o=u?o:i;++o<i;){c=t[o];var h=r(c),p="wrapper"==h?n(c):void 0;u=p&&a(p[0])&&424==p[1]&&!p[4].length&&1==p[9]?u[r(p[0])].apply(u,p[3]):1==c.length&&a(c)?u[h]():u.thru(c)}return function(){var e=arguments,s=e[0];if(u&&1==e.length&&l(s))return u.plant(s).value();for(var o=0,n=i?t[o].apply(this,e):s;++o<i;)n=t[o].call(this,n);return n}}))}},72406:(e,t,i)=>{var s=i(19211)(!0);e.exports=s},8651:(e,t,i)=>{var s=i(25126),o=i(4597),n=i(82675);e.exports=function(e){return e&&e.length?s(e,n,o):void 0}},34974:(e,t,i)=>{"use strict";i.d(t,{Z:()=>w});var s=i(43179),o=i.n(s),n=i(75303),r=i.n(n),l=i(4884),a=i.n(l),d=i(63497),c=i.n(d),u=i(49736),h=i.n(u),p=i(77842),g=i.n(p),m=i(29772),v=i.n(m);o().extend(v()),o().extend(g()),o().extend(r()),o().extend(a()),o().extend(c()),o().extend(h()),o().extend((function(e,t){var i=t.prototype,s=i.format;i.format=function(e){var t=(e||"").replace("Wo","wo");return s.bind(this)(t)}}));var f={bn_BD:"bn-bd",by_BY:"be",en_GB:"en-gb",en_US:"en",fr_BE:"fr",fr_CA:"fr-ca",hy_AM:"hy-am",kmr_IQ:"ku",nl_BE:"nl-be",pt_BR:"pt-br",zh_CN:"zh-cn",zh_HK:"zh-hk",zh_TW:"zh-tw"},C=function(e){return f[e]||e.split("_")[0]};const w={getNow:function(){var e=o()();return"function"===typeof e.tz?e.tz():e},getFixedDate:function(e){return o()(e,["YYYY-M-DD","YYYY-MM-DD"])},getEndDate:function(e){return e.endOf("month")},getWeekDay:function(e){var t=e.locale("en");return t.weekday()+t.localeData().firstDayOfWeek()},getYear:function(e){return e.year()},getMonth:function(e){return e.month()},getDate:function(e){return e.date()},getHour:function(e){return e.hour()},getMinute:function(e){return e.minute()},getSecond:function(e){return e.second()},getMillisecond:function(e){return e.millisecond()},addYear:function(e,t){return e.add(t,"year")},addMonth:function(e,t){return e.add(t,"month")},addDate:function(e,t){return e.add(t,"day")},setYear:function(e,t){return e.year(t)},setMonth:function(e,t){return e.month(t)},setDate:function(e,t){return e.date(t)},setHour:function(e,t){return e.hour(t)},setMinute:function(e,t){return e.minute(t)},setSecond:function(e,t){return e.second(t)},setMillisecond:function(e,t){return e.millisecond(t)},isAfter:function(e,t){return e.isAfter(t)},isValidate:function(e){return e.isValid()},locale:{getWeekFirstDay:function(e){return o()().locale(C(e)).localeData().firstDayOfWeek()},getWeekFirstDate:function(e,t){return t.locale(C(e)).weekday(0)},getWeek:function(e,t){return t.locale(C(e)).week()},getShortWeekDays:function(e){return o()().locale(C(e)).localeData().weekdaysMin()},getShortMonths:function(e){return o()().locale(C(e)).localeData().monthsShort()},format:function(e,t,i){return t.locale(C(e)).format(i)},parse:function(e,t,i){for(var s=C(e),n=0;n<i.length;n+=1){var r=i[n],l=t;if(r.includes("wo")||r.includes("Wo")){for(var a=l.split("-")[0],d=l.split("-")[1],c=o()(a,"YYYY").startOf("year").locale(s),u=0;u<=52;u+=1){var h=c.add(u,"week");if(h.format("Wo")===d)return h}return null}var p=o()(l,r,!0).locale(s);if(p.isValid())return p}return null}}}},4410:(e,t,i)=>{"use strict";i.d(t,{Sq:()=>mt,ZP:()=>bt});var s=i(2053),o=i(21054),n=i(98037),r=i(75234),l=i(46445),a=i(31991),d=i(69030),c=i(55261),u=i(73722),h=i(57435),p=i(57904),g=i(98177),m=i(12356),v=i.n(m);const f=h.createContext(null);var C={bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:1,adjustY:1}},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}}};const w=function(e){var t=e.popupElement,i=e.popupStyle,s=e.popupClassName,o=e.popupAlign,n=e.transitionName,r=e.getPopupContainer,l=e.children,a=e.range,d=e.placement,c=e.builtinPlacements,u=void 0===c?C:c,m=e.direction,w=e.visible,S=e.onClose,y=h.useContext(f).prefixCls,b="".concat(y,"-dropdown"),R=function(e,t){return void 0!==e?e:t?"bottomRight":"bottomLeft"}(d,"rtl"===m);return h.createElement(g.Z,{showAction:[],hideAction:["click"],popupPlacement:R,builtinPlacements:u,prefixCls:b,popupTransitionName:n,popup:t,popupAlign:o,popupVisible:w,popupClassName:v()(s,(0,p.Z)((0,p.Z)({},"".concat(b,"-range"),a),"".concat(b,"-rtl"),"rtl"===m)),popupStyle:i,stretch:"minWidth",getPopupContainer:r,onPopupVisibleChange:function(e){e||S()}},l)};function S(e,t){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0",s=String(e);s.length<t;)s="".concat(i).concat(s);return s}function y(e){return null===e||void 0===e?[]:Array.isArray(e)?e:[e]}function b(e,t,i){var s=(0,o.Z)(e);return s[t]=i,s}function R(e,t){var i={};return(t||Object.keys(e)).forEach((function(t){void 0!==e[t]&&(i[t]=e[t])})),i}function F(e,t,i){if(i)return i;switch(e){case"time":return t.fieldTimeFormat;case"datetime":return t.fieldDateTimeFormat;case"month":return t.fieldMonthFormat;case"year":return t.fieldYearFormat;case"quarter":return t.fieldQuarterFormat;case"week":return t.fieldWeekFormat;default:return t.fieldDateFormat}}function E(e,t,i){var s=void 0!==i?i:t[t.length-1],o=t.find((function(t){return e[t]}));return s!==o?e[o]:void 0}function x(e){return R(e,["placement","builtinPlacements","popupAlign","getPopupContainer","transitionName","direction"])}function P(e,t,i,s){var o=h.useMemo((function(){return e||function(e,s){var o=e;return t&&"date"===s.type?t(o,s.today):i&&"month"===s.type?i(o,s.locale):s.originNode}}),[e,i,t]);return h.useCallback((function(e,t){return o(e,(0,n.Z)((0,n.Z)({},t),{},{range:s}))}),[o,s])}function M(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=h.useState([!1,!1]),o=(0,r.Z)(s,2),n=o[0],l=o[1];return[h.useMemo((function(){return n.map((function(s,o){if(s)return!0;var n=e[o];return!!n&&(!i[o]&&!n||!(!n||!t(n,{activeIndex:o})))}))}),[e,n,t,i]),function(e,t){l((function(i){return b(i,t,e)}))}]}function D(e,t,i,s,o){var n="",r=[];return e&&r.push(o?"hh":"HH"),t&&r.push("mm"),i&&r.push("ss"),n=r.join(":"),s&&(n+=".SSS"),o&&(n+=" A"),n}function I(e,t){var i=t.showHour,s=t.showMinute,o=t.showSecond,r=t.showMillisecond,l=t.use12Hours;return h.useMemo((function(){return function(e,t,i,s,o,r){var l=e.fieldDateTimeFormat,a=e.fieldDateFormat,d=e.fieldTimeFormat,c=e.fieldMonthFormat,u=e.fieldYearFormat,h=e.fieldWeekFormat,p=e.fieldQuarterFormat,g=e.yearFormat,m=e.cellYearFormat,v=e.cellQuarterFormat,f=e.dayFormat,C=e.cellDateFormat,w=D(t,i,s,o,r);return(0,n.Z)((0,n.Z)({},e),{},{fieldDateTimeFormat:l||"YYYY-MM-DD ".concat(w),fieldDateFormat:a||"YYYY-MM-DD",fieldTimeFormat:d||w,fieldMonthFormat:c||"YYYY-MM",fieldYearFormat:u||"YYYY",fieldWeekFormat:h||"gggg-wo",fieldQuarterFormat:p||"YYYY-[Q]Q",yearFormat:g||"YYYY",cellYearFormat:m||"YYYY",cellQuarterFormat:v||"[Q]Q",cellDateFormat:C||f||"D"})}(e,i,s,o,r,l)}),[e,i,s,o,r,l])}var T=i(24744);function A(e,t,i){return null!==i&&void 0!==i?i:t.some((function(t){return e.includes(t)}))}var k=["showNow","showHour","showMinute","showSecond","showMillisecond","use12Hours","hourStep","minuteStep","secondStep","millisecondStep","hideDisabledOptions","defaultValue","disabledHours","disabledMinutes","disabledSeconds","disabledMilliseconds","disabledTime","changeOnScroll","defaultOpenValue"];function L(e){return e&&"string"===typeof e}function G(e,t,i,s){return[e,t,i,s].some((function(e){return void 0!==e}))}function N(e,t,i,s,o){var n=t,r=i,l=s;if(e||n||r||l||o){if(e){var a,d,c,u=[n,r,l].some((function(e){return!1===e})),h=[n,r,l].some((function(e){return!0===e})),p=!!u||!h;n=null!==(a=n)&&void 0!==a?a:p,r=null!==(d=r)&&void 0!==d?d:p,l=null!==(c=l)&&void 0!==c?c:p}}else n=!0,r=!0,l=!0;return[n,r,l,o]}function O(e){var t=e.showTime,i=function(e){var t=R(e,k),i=e.format,s=e.picker,o=null;return i&&(o=i,Array.isArray(o)&&(o=o[0]),o="object"===(0,T.Z)(o)?o.format:o),"time"===s&&(t.format=o),[t,o]}(e),s=(0,r.Z)(i,2),o=s[0],l=s[1],a=t&&"object"===(0,T.Z)(t)?t:{},d=(0,n.Z)((0,n.Z)({defaultOpenValue:a.defaultOpenValue||a.defaultValue},o),a),c=d.showMillisecond,u=d.showHour,h=d.showMinute,p=d.showSecond,g=N(G(u,h,p,c),u,h,p,c),m=(0,r.Z)(g,3);return u=m[0],h=m[1],p=m[2],[d,(0,n.Z)((0,n.Z)({},d),{},{showHour:u,showMinute:h,showSecond:p,showMillisecond:c}),d.format,l]}function B(e,t,i,s,o){if("datetime"===e||"time"===e){for(var l=s,a=F(e,o,null),d=[t,i],c=0;c<d.length;c+=1){var u=y(d[c])[0];if(L(u)){a=u;break}}var h=l.showHour,p=l.showMinute,g=l.showSecond,m=l.showMillisecond,v=A(a,["a","A","LT","LLL","LTS"],l.use12Hours),f=G(h,p,g,m);f||(h=A(a,["H","h","k","LT","LLL"]),p=A(a,["m","LT","LLL"]),g=A(a,["s","LTS"]),m=A(a,["SSS"]));var C=N(f,h,p,g,m),w=(0,r.Z)(C,3);h=w[0],p=w[1],g=w[2];var S=t||D(h,p,g,m,v);return(0,n.Z)((0,n.Z)({},l),{},{format:S,showHour:h,showMinute:p,showSecond:g,showMillisecond:m,use12Hours:v})}return null}function V(e,t,i){return!1===t?null:(t&&"object"===(0,T.Z)(t)?t:{}).clearIcon||i||h.createElement("span",{className:"".concat(e,"-clear-btn")})}var H=7;function W(e,t,i){return!e&&!t||e===t||!(!e||!t)&&i()}function z(e,t,i){return W(t,i,(function(){return Math.floor(e.getYear(t)/10)===Math.floor(e.getYear(i)/10)}))}function U(e,t,i){return W(t,i,(function(){return e.getYear(t)===e.getYear(i)}))}function _(e,t){return Math.floor(e.getMonth(t)/3)+1}function K(e,t,i){return W(t,i,(function(){return U(e,t,i)&&e.getMonth(t)===e.getMonth(i)}))}function Z(e,t,i){return W(t,i,(function(){return U(e,t,i)&&K(e,t,i)&&e.getDate(t)===e.getDate(i)}))}function j(e,t,i){return W(t,i,(function(){return e.getHour(t)===e.getHour(i)&&e.getMinute(t)===e.getMinute(i)&&e.getSecond(t)===e.getSecond(i)}))}function Y(e,t,i){return W(t,i,(function(){return Z(e,t,i)&&j(e,t,i)&&e.getMillisecond(t)===e.getMillisecond(i)}))}function q(e,t,i,s){return W(i,s,(function(){var o=e.locale.getWeekFirstDate(t,i),n=e.locale.getWeekFirstDate(t,s);return U(e,o,n)&&e.locale.getWeek(t,i)===e.locale.getWeek(t,s)}))}function Q(e,t,i,s,o){switch(o){case"date":return Z(e,i,s);case"week":return q(e,t.locale,i,s);case"month":return K(e,i,s);case"quarter":return function(e,t,i){return W(t,i,(function(){return U(e,t,i)&&_(e,t)===_(e,i)}))}(e,i,s);case"year":return U(e,i,s);case"decade":return z(e,i,s);case"time":return j(e,i,s);default:return Y(e,i,s)}}function X(e,t,i,s){return!!(t&&i&&s)&&(e.isAfter(s,t)&&e.isAfter(i,s))}function $(e,t,i,s,o){return!!Q(e,t,i,s,o)||e.isAfter(i,s)}function J(e,t){var i=t.generateConfig,s=t.locale,o=t.format;return e?"function"===typeof o?o(e):i.locale.format(s.locale,e,o):""}function ee(e,t,i){var s=t,o=["getHour","getMinute","getSecond","getMillisecond"];return["setHour","setMinute","setSecond","setMillisecond"].forEach((function(t,n){s=i?e[t](s,e[o[n]](i)):e[t](s,0)})),s}function te(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return h.useMemo((function(){var i=e?y(e):e;return t&&i&&(i[1]=i[1]||i[0]),i}),[e,t])}function ie(e,t){var i=e.generateConfig,s=e.locale,o=e.picker,a=void 0===o?"date":o,d=e.prefixCls,c=void 0===d?"rc-picker":d,u=e.styles,p=void 0===u?{}:u,g=e.classNames,m=void 0===g?{}:g,v=e.order,f=void 0===v||v,C=e.components,w=void 0===C?{}:C,S=e.inputRender,b=e.allowClear,R=e.clearIcon,E=e.needConfirm,x=e.multiple,P=e.format,M=e.inputReadOnly,D=e.disabledDate,A=e.minDate,k=e.maxDate,L=e.showTime,G=e.value,N=e.defaultValue,H=e.pickerValue,W=e.defaultPickerValue,z=te(G),U=te(N),_=te(H),K=te(W),Z="date"===a&&L?"datetime":a,j="time"===Z||"datetime"===Z,Y=j||x,q=null!==E&&void 0!==E?E:j,X=O(e),$=(0,r.Z)(X,4),J=$[0],ee=$[1],ie=$[2],se=$[3],oe=I(s,ee),ne=h.useMemo((function(){return B(Z,ie,se,J,oe)}),[Z,ie,se,J,oe]);var re=h.useMemo((function(){return(0,n.Z)((0,n.Z)({},e),{},{prefixCls:c,locale:oe,picker:a,styles:p,classNames:m,order:f,components:(0,n.Z)({input:S},w),clearIcon:V(c,b,R),showTime:ne,value:z,defaultValue:U,pickerValue:_,defaultPickerValue:K},null===t||void 0===t?void 0:t())}),[e]),le=function(e,t,i){return h.useMemo((function(){var s=y(F(e,t,i)),o=s[0],n="object"===(0,T.Z)(o)&&"mask"===o.type?o.format:null;return[s.map((function(e){return"string"===typeof e||"function"===typeof e?e:e.format})),n]}),[e,t,i])}(Z,oe,P),ae=(0,r.Z)(le,2),de=ae[0],ce=ae[1],ue=function(e,t,i){return!("function"!==typeof e[0]&&!i)||t}(de,M,x),he=function(e,t,i,s,o){return(0,l.zX)((function(n,r){return!(!i||!i(n,r))||!(!s||!e.isAfter(s,n)||Q(e,t,s,n,r.type))||!(!o||!e.isAfter(n,o)||Q(e,t,o,n,r.type))}))}(i,s,D,A,k),pe=function(e,t,i,s){return(0,l.zX)((function(o,r){var l=(0,n.Z)({type:t},r);if(delete l.activeIndex,!e.isValidate(o)||i&&i(o,l))return!0;if(("date"===t||"time"===t)&&s){var a,d=r&&1===r.activeIndex?"end":"start",c=(null===(a=s.disabledTime)||void 0===a?void 0:a.call(s,o,d,{from:l.from}))||{},u=c.disabledHours,h=c.disabledMinutes,p=c.disabledSeconds,g=c.disabledMilliseconds,m=s.disabledHours,v=s.disabledMinutes,f=s.disabledSeconds,C=u||m,w=h||v,S=p||f,y=e.getHour(o),b=e.getMinute(o),R=e.getSecond(o),F=e.getMillisecond(o);if(C&&C().includes(y))return!0;if(w&&w(y).includes(b))return!0;if(S&&S(y,b).includes(R))return!0;if(g&&g(y,b,R).includes(F))return!0}return!1}))}(i,a,he,ne);return[h.useMemo((function(){return(0,n.Z)((0,n.Z)({},re),{},{needConfirm:q,inputReadOnly:ue,disabledDate:he})}),[re,q,ue,he]),Z,Y,de,ce,pe]}var se=i(72197);function oe(e,t){var i=arguments.length>3?arguments[3]:void 0,s=function(e,t,i){var s=(0,l.C8)(t,{value:e}),o=(0,r.Z)(s,2),n=o[0],a=o[1],d=h.useRef(e),c=h.useRef(),u=function(){se.Z.cancel(c.current)},p=(0,l.zX)((function(){a(d.current),i&&n!==d.current&&i(d.current)})),g=(0,l.zX)((function(e,t){u(),d.current=e,e||t?p():c.current=(0,se.Z)(p)}));return h.useEffect((function(){return u}),[]),[n,g]}(!(arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]).every((function(e){return e}))&&e,t||!1,i),o=(0,r.Z)(s,2),n=o[0],a=o[1];return[n,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.inherit&&!n||a(e,t.force)}]}function ne(e){var t=h.useRef();return h.useImperativeHandle(e,(function(){var e;return{nativeElement:null===(e=t.current)||void 0===e?void 0:e.nativeElement,focus:function(e){var i;null===(i=t.current)||void 0===i||i.focus(e)},blur:function(){var e;null===(e=t.current)||void 0===e||e.blur()}}})),t}function re(e,t){return h.useMemo((function(){return e||(t?((0,u.ZP)(!1,"`ranges` is deprecated. Please use `presets` instead."),Object.entries(t).map((function(e){var t=(0,r.Z)(e,2);return{label:t[0],value:t[1]}}))):[])}),[e,t])}function le(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=h.useRef(t);s.current=t,(0,a.o)((function(){if(!e){var t=(0,se.Z)((function(){s.current(e)}),i);return function(){se.Z.cancel(t)}}s.current(e)}),[e])}function ae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=h.useState(0),o=(0,r.Z)(s,2),n=o[0],l=o[1],a=h.useState(!1),d=(0,r.Z)(a,2),c=d[0],u=d[1],p=h.useRef([]),g=h.useRef(null),m=h.useRef(null),v=function(e){g.current=e};return le(c||i,(function(){c||(p.current=[],v(null))})),h.useEffect((function(){c&&p.current.push(n)}),[c,n]),[c,function(e){u(e)},function(e){return e&&(m.current=e),m.current},n,l,function(i){var s=p.current,o=new Set(s.filter((function(e){return i[e]||t[e]}))),n=0===s[s.length-1]?1:0;return o.size>=2||e[n]?null:n},p.current,v,function(e){return g.current===e}]}function de(e,t,i,s){switch(t){case"date":case"week":return e.addMonth(i,s);case"month":case"quarter":return e.addYear(i,s);case"year":return e.addYear(i,10*s);case"decade":return e.addYear(i,100*s);default:return i}}var ce=[];function ue(e,t,i,s,o,n,d,c){var u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:ce,p=arguments.length>9&&void 0!==arguments[9]?arguments[9]:ce,g=arguments.length>10&&void 0!==arguments[10]?arguments[10]:ce,m=arguments.length>11?arguments[11]:void 0,v=arguments.length>12?arguments[12]:void 0,f=arguments.length>13?arguments[13]:void 0,C="time"===d,w=n||0,S=function(t){var s=e.getNow();return C&&(s=ee(e,s)),u[t]||i[t]||s},y=(0,r.Z)(p,2),b=y[0],R=y[1],F=(0,l.C8)((function(){return S(0)}),{value:b}),E=(0,r.Z)(F,2),x=E[0],P=E[1],M=(0,l.C8)((function(){return S(1)}),{value:R}),D=(0,r.Z)(M,2),I=D[0],T=D[1],A=h.useMemo((function(){var t=[x,I][w];return C?t:ee(e,t,g[w])}),[C,x,I,w,e,g]),k=function(i){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"panel";(0,[P,T][w])(i);var n=[x,I];n[w]=i,!m||Q(e,t,x,n[0],d)&&Q(e,t,I,n[1],d)||m(n,{source:o,range:1===w?"end":"start",mode:s})},L=h.useRef(null);return(0,a.Z)((function(){if(o&&!u[w]){var s=C?null:e.getNow();if(null!==L.current&&L.current!==w?s=[x,I][1^w]:i[w]?s=0===w?i[0]:function(i,s){if(c){var o={date:"month",week:"month",month:"year",quarter:"year"}[d];if(o&&!Q(e,t,i,s,o))return de(e,d,s,-1);if("year"===d&&i&&Math.floor(e.getYear(i)/10)!==Math.floor(e.getYear(s)/10))return de(e,d,s,-1)}return s}(i[0],i[1]):i[1^w]&&(s=i[1^w]),s){v&&e.isAfter(v,s)&&(s=v);var n=c?de(e,d,s,1):s;f&&e.isAfter(n,f)&&(s=c?de(e,d,f,-1):f),k(s,"reset")}}}),[o,w,i[w]]),h.useEffect((function(){L.current=o?w:null}),[o,w]),(0,a.Z)((function(){o&&u&&u[w]&&k(u[w],"reset")}),[o,w]),[A,k]}function he(e,t){var i=h.useRef(e),s=h.useState({}),o=(0,r.Z)(s,2)[1],n=function(e){return e&&void 0!==t?t:i.current};return[n,function(e){i.current=e,o({})},n(!0)]}var pe=[];function ge(e,t,i){return[function(s){return s.map((function(s){return J(s,{generateConfig:e,locale:t,format:i[0]})}))},function(t,i){for(var s=Math.max(t.length,i.length),o=-1,n=0;n<s;n+=1){var r=t[n]||null,l=i[n]||null;if(r!==l&&!Y(e,r,l)){o=n;break}}return[o<0,0!==o]}]}function me(e,t){return(0,o.Z)(e).sort((function(e,i){return t.isAfter(e,i)?1:-1}))}function ve(e,t,i,s,n,a,d,c,u){var p=(0,l.C8)(a,{value:d}),g=(0,r.Z)(p,2),m=g[0],v=g[1],f=m||pe,C=function(e){var t=he(e),i=(0,r.Z)(t,2),s=i[0],o=i[1],n=(0,l.zX)((function(){o(e)}));return h.useEffect((function(){n()}),[e]),[s,o]}(f),w=(0,r.Z)(C,2),S=w[0],y=w[1],b=ge(e,t,i),R=(0,r.Z)(b,2),F=R[0],E=R[1],x=(0,l.zX)((function(t){var i=(0,o.Z)(t);if(s)for(var l=0;l<2;l+=1)i[l]=i[l]||null;else n&&(i=me(i.filter((function(e){return e})),e));var a=E(S(),i),d=(0,r.Z)(a,2),u=d[0],h=d[1];if(!u&&(y(i),c)){var p=F(i);c(i,p,{range:h?"end":"start"})}}));return[f,v,S,x,function(){u&&u(S())}]}function fe(e,t,i,s,n,a,d,c,u,p){var g=e.generateConfig,m=e.locale,v=e.picker,f=e.onChange,C=e.allowEmpty,w=e.order,S=!a.some((function(e){return e}))&&w,y=ge(g,m,d),R=(0,r.Z)(y,2),F=R[0],E=R[1],x=he(t),P=(0,r.Z)(x,2),M=P[0],D=P[1],I=(0,l.zX)((function(){D(t)}));h.useEffect((function(){I()}),[t]);var T=(0,l.zX)((function(e){var s=null===e,l=(0,o.Z)(e||M());if(s)for(var d=Math.max(a.length,l.length),c=0;c<d;c+=1)a[c]||(l[c]=null);S&&l[0]&&l[1]&&(l=me(l,g)),n(l);var u=l,h=(0,r.Z)(u,2),y=h[0],b=h[1],R=!y,x=!b,P=!C||(!R||C[0])&&(!x||C[1]),D=!w||R||x||Q(g,m,y,b,v)||g.isAfter(b,y),I=(a[0]||!y||!p(y,{activeIndex:0}))&&(a[1]||!b||!p(b,{from:y,activeIndex:1})),T=s||P&&D&&I;if(T){i(l);var A=E(l,t),k=(0,r.Z)(A,1)[0];f&&!k&&f(s&&l.every((function(e){return!e}))?null:l,F(l))}return T})),A=(0,l.zX)((function(e,t){var i=b(M(),e,s()[e]);D(i),t&&T()})),k=!c&&!u;return le(!k,(function(){k&&(T(),n(t),I())}),2),[A,T]}function Ce(e,t,i,s,o){return("date"===t||"time"===t)&&(void 0!==i?i:void 0!==s?s:!o&&("date"===e||"time"===e))}var we=i(47421);function Se(){return[]}function ye(e,t){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2,r=[],l=i>=1?0|i:1,a=e;a<=t;a+=l){var d=o.includes(a);d&&s||r.push({label:S(a,n),value:a,disabled:d})}return r}function be(e){var t=arguments.length>2?arguments[2]:void 0,i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})||{},s=i.use12Hours,l=i.hourStep,a=void 0===l?1:l,d=i.minuteStep,c=void 0===d?1:d,u=i.secondStep,p=void 0===u?1:u,g=i.millisecondStep,m=void 0===g?100:g,v=i.hideDisabledOptions,f=i.disabledTime,C=i.disabledHours,w=i.disabledMinutes,y=i.disabledSeconds,b=h.useMemo((function(){return t||e.getNow()}),[t,e]),R=h.useCallback((function(e){var t=(null===f||void 0===f?void 0:f(e))||{};return[t.disabledHours||C||Se,t.disabledMinutes||w||Se,t.disabledSeconds||y||Se,t.disabledMilliseconds||Se]}),[f,C,w,y]),F=h.useMemo((function(){return R(b)}),[b,R]),E=(0,r.Z)(F,4),x=E[0],P=E[1],M=E[2],D=E[3],I=h.useCallback((function(e,t,i,o){var r=ye(0,23,a,v,e());return[s?r.map((function(e){return(0,n.Z)((0,n.Z)({},e),{},{label:S(e.value%12||12,2)})})):r,function(e){return ye(0,59,c,v,t(e))},function(e,t){return ye(0,59,p,v,i(e,t))},function(e,t,i){return ye(0,999,m,v,o(e,t,i),3)}]}),[v,a,s,m,c,p]),T=h.useMemo((function(){return I(x,P,M,D)}),[I,x,P,M,D]),A=(0,r.Z)(T,4),k=A[0],L=A[1],G=A[2],N=A[3];return[function(t,i){var s=function(){return k},n=L,l=G,a=N;if(i){var d=R(i),c=(0,r.Z)(d,4),u=c[0],h=c[1],p=c[2],g=c[3],m=I(u,h,p,g),v=(0,r.Z)(m,4),f=v[0];s=function(){return f},n=v[1],l=v[2],a=v[3]}var C=function(e,t,i,s,n,r){var l=e;function a(e,t,i){var s=r[e](l),n=i.find((function(e){return e.value===s}));if(!n||n.disabled){var a=i.filter((function(e){return!e.disabled})),d=(0,o.Z)(a).reverse().find((function(e){return e.value<=s}))||a[0];d&&(s=d.value,l=r[t](l,s))}return s}var d=a("getHour","setHour",t()),c=a("getMinute","setMinute",i(d)),u=a("getSecond","setSecond",s(d,c));return a("getMillisecond","setMillisecond",n(d,c,u)),l}(t,s,n,l,a,e);return C},k,L,G,N]}function Re(e){var t=e.mode,i=e.internalMode,s=e.renderExtraFooter,o=e.showNow,n=e.showTime,l=e.onSubmit,a=e.onNow,d=e.invalid,c=e.needConfirm,u=e.generateConfig,p=e.disabledDate,g=h.useContext(f),m=g.prefixCls,C=g.locale,w=g.button,S=void 0===w?"button":w,y=u.getNow(),b=be(u,n,y),R=(0,r.Z)(b,1)[0],F=null===s||void 0===s?void 0:s(t),E=p(y,{type:t}),x="".concat(m,"-now"),P="".concat(x,"-btn"),M=o&&h.createElement("li",{className:x},h.createElement("a",{className:v()(P,E&&"".concat(P,"-disabled")),"aria-disabled":E,onClick:function(){if(!E){var e=R(y);a(e)}}},"date"===i?C.today:C.now)),D=c&&h.createElement("li",{className:"".concat(m,"-ok")},h.createElement(S,{disabled:d,onClick:l},C.ok)),I=(M||D)&&h.createElement("ul",{className:"".concat(m,"-ranges")},M,D);return F||I?h.createElement("div",{className:"".concat(m,"-footer")},F&&h.createElement("div",{className:"".concat(m,"-footer-extra")},F),I):null}function Fe(e,t,i){return function(s,n){var r=s.findIndex((function(s){return Q(e,t,s,n,i)}));if(-1===r)return[].concat((0,o.Z)(s),[n]);var l=(0,o.Z)(s);return l.splice(r,1),l}}var Ee=h.createContext(null);function xe(){return h.useContext(Ee)}function Pe(e,t){var i=e.prefixCls,s=e.generateConfig,o=e.locale,n=e.disabledDate,r=e.minDate,l=e.maxDate,a=e.cellRender,d=e.hoverValue,c=e.hoverRangeValue,u=e.onHover,h=e.values,p=e.pickerValue,g=e.onSelect,m=e.prevIcon,v=e.nextIcon,f=e.superPrevIcon,C=e.superNextIcon,w=s.getNow();return[{now:w,values:h,pickerValue:p,prefixCls:i,disabledDate:n,minDate:r,maxDate:l,cellRender:a,hoverValue:d,hoverRangeValue:c,onHover:u,locale:o,generateConfig:s,onSelect:g,panelType:t,prevIcon:m,nextIcon:v,superPrevIcon:f,superNextIcon:C},w]}var Me=h.createContext({});function De(e){for(var t=e.rowNum,i=e.colNum,s=e.baseDate,o=e.getCellDate,l=e.prefixColumn,a=e.rowClassName,d=e.titleFormat,c=e.getCellText,u=e.getCellClassName,g=e.headerCells,m=e.cellSelection,f=void 0===m||m,C=e.disabledDate,w=xe(),S=w.prefixCls,y=w.panelType,b=w.now,R=w.disabledDate,F=w.cellRender,E=w.onHover,x=w.hoverValue,P=w.hoverRangeValue,M=w.generateConfig,D=w.values,I=w.locale,T=w.onSelect,A=C||R,k="".concat(S,"-cell"),L=h.useContext(Me).onCellDblClick,G=[],N=0;N<t;N+=1){for(var O=[],B=void 0,V=function(){var e=o(s,N*i+H),t=null===A||void 0===A?void 0:A(e,{type:y});0===H&&(B=e,l&&O.push(l(B)));var a=!1,g=!1,m=!1;if(f&&P){var C=(0,r.Z)(P,2),w=C[0],R=C[1];a=X(M,w,R,e),g=Q(M,I,e,w,y),m=Q(M,I,e,R,y)}var G,V=d?J(e,{locale:I,format:d,generateConfig:M}):void 0,W=h.createElement("div",{className:"".concat(k,"-inner")},c(e));O.push(h.createElement("td",{key:H,title:V,className:v()(k,(0,n.Z)((0,p.Z)((0,p.Z)((0,p.Z)((0,p.Z)((0,p.Z)((0,p.Z)({},"".concat(k,"-disabled"),t),"".concat(k,"-hover"),(x||[]).some((function(t){return Q(M,I,e,t,y)}))),"".concat(k,"-in-range"),a&&!g&&!m),"".concat(k,"-range-start"),g),"".concat(k,"-range-end"),m),"".concat(S,"-cell-selected"),!P&&"week"!==y&&(G=e,D.some((function(e){return e&&Q(M,I,G,e,y)})))),u(e))),onClick:function(){t||T(e)},onDoubleClick:function(){!t&&L&&L()},onMouseEnter:function(){t||null===E||void 0===E||E(e)},onMouseLeave:function(){t||null===E||void 0===E||E(null)}},F?F(e,{prefixCls:S,originNode:W,today:b,type:y,locale:I}):W))},H=0;H<i;H+=1)V();G.push(h.createElement("tr",{key:N,className:null===a||void 0===a?void 0:a(B)},O))}return h.createElement("div",{className:"".concat(S,"-body")},h.createElement("table",{className:"".concat(S,"-content")},g&&h.createElement("thead",null,h.createElement("tr",null,g)),h.createElement("tbody",null,G)))}var Ie={visibility:"hidden"};const Te=function(e){var t=e.offset,i=e.superOffset,s=e.onChange,o=e.getStart,n=e.getEnd,r=e.children,l=xe(),a=l.prefixCls,d=l.prevIcon,c=void 0===d?"\u2039":d,u=l.nextIcon,p=void 0===u?"\u203a":u,g=l.superPrevIcon,m=void 0===g?"\xab":g,f=l.superNextIcon,C=void 0===f?"\xbb":f,w=l.minDate,S=l.maxDate,y=l.generateConfig,b=l.locale,R=l.pickerValue,F=l.panelType,E="".concat(a,"-header"),x=h.useContext(Me),P=x.hidePrev,M=x.hideNext,D=x.hideHeader,I=h.useMemo((function(){if(!w||!t||!n)return!1;var e=n(t(-1,R));return!$(y,b,e,w,F)}),[w,t,R,n,y,b,F]),T=h.useMemo((function(){if(!w||!i||!n)return!1;var e=n(i(-1,R));return!$(y,b,e,w,F)}),[w,i,R,n,y,b,F]),A=h.useMemo((function(){if(!S||!t||!o)return!1;var e=o(t(1,R));return!$(y,b,S,e,F)}),[S,t,R,o,y,b,F]),k=h.useMemo((function(){if(!S||!i||!o)return!1;var e=o(i(1,R));return!$(y,b,S,e,F)}),[S,i,R,o,y,b,F]),L=function(e){t&&s(t(e,R))},G=function(e){i&&s(i(e,R))};if(D)return null;var N="".concat(E,"-prev-btn"),O="".concat(E,"-next-btn"),B="".concat(E,"-super-prev-btn"),V="".concat(E,"-super-next-btn");return h.createElement("div",{className:E},i&&h.createElement("button",{type:"button","aria-label":b.previousYear,onClick:function(){return G(-1)},tabIndex:-1,className:v()(B,T&&"".concat(B,"-disabled")),disabled:T,style:P?Ie:{}},m),t&&h.createElement("button",{type:"button","aria-label":b.previousMonth,onClick:function(){return L(-1)},tabIndex:-1,className:v()(N,I&&"".concat(N,"-disabled")),disabled:I,style:P?Ie:{}},c),h.createElement("div",{className:"".concat(E,"-view")},r),t&&h.createElement("button",{type:"button","aria-label":b.nextMonth,onClick:function(){return L(1)},tabIndex:-1,className:v()(O,A&&"".concat(O,"-disabled")),disabled:A,style:M?Ie:{}},p),i&&h.createElement("button",{type:"button","aria-label":b.nextYear,onClick:function(){return G(1)},tabIndex:-1,className:v()(V,k&&"".concat(V,"-disabled")),disabled:k,style:M?Ie:{}},C))};function Ae(e){var t=e.prefixCls,i=e.panelName,o=void 0===i?"date":i,n=e.locale,l=e.generateConfig,a=e.pickerValue,d=e.onPickerValueChange,c=e.onModeChange,u=e.mode,g=void 0===u?"date":u,m=e.disabledDate,f=e.onSelect,C=e.onHover,w=e.showWeek,S="".concat(t,"-").concat(o,"-panel"),y="".concat(t,"-cell"),b="week"===g,R=Pe(e,g),F=(0,r.Z)(R,2),E=F[0],x=F[1],P=l.locale.getWeekFirstDay(n.locale),M=l.setDate(a,1),D=function(e,t,i){var s=t.locale.getWeekFirstDay(e),o=t.setDate(i,1),n=t.getWeekDay(o),r=t.addDate(o,s-n);return t.getMonth(r)===t.getMonth(i)&&t.getDate(r)>1&&(r=t.addDate(r,-7)),r}(n.locale,l,M),I=l.getMonth(a),T=(void 0===w?b:w)?function(e){var t=null===m||void 0===m?void 0:m(e,{type:"week"});return h.createElement("td",{key:"week",className:v()(y,"".concat(y,"-week"),(0,p.Z)({},"".concat(y,"-disabled"),t)),onClick:function(){t||f(e)},onMouseEnter:function(){t||null===C||void 0===C||C(e)},onMouseLeave:function(){t||null===C||void 0===C||C(null)}},h.createElement("div",{className:"".concat(y,"-inner")},l.locale.getWeek(n.locale,e)))}:null,A=[],k=n.shortWeekDays||(l.locale.getShortWeekDays?l.locale.getShortWeekDays(n.locale):[]);T&&A.push(h.createElement("th",{key:"empty"},h.createElement("span",{style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},n.week)));for(var L=0;L<H;L+=1)A.push(h.createElement("th",{key:L},k[(L+P)%H]));var G=n.shortMonths||(l.locale.getShortMonths?l.locale.getShortMonths(n.locale):[]),N=h.createElement("button",{type:"button","aria-label":n.yearSelect,key:"year",onClick:function(){c("year",a)},tabIndex:-1,className:"".concat(t,"-year-btn")},J(a,{locale:n,format:n.yearFormat,generateConfig:l})),O=h.createElement("button",{type:"button","aria-label":n.monthSelect,key:"month",onClick:function(){c("month",a)},tabIndex:-1,className:"".concat(t,"-month-btn")},n.monthFormat?J(a,{locale:n,format:n.monthFormat,generateConfig:l}):G[I]),B=n.monthBeforeYear?[O,N]:[N,O];return h.createElement(Ee.Provider,{value:E},h.createElement("div",{className:v()(S,w&&"".concat(S,"-show-week"))},h.createElement(Te,{offset:function(e){return l.addMonth(a,e)},superOffset:function(e){return l.addYear(a,e)},onChange:d,getStart:function(e){return l.setDate(e,1)},getEnd:function(e){var t=l.setDate(e,1);return t=l.addMonth(t,1),l.addDate(t,-1)}},B),h.createElement(De,(0,s.Z)({titleFormat:n.fieldDateFormat},e,{colNum:H,rowNum:6,baseDate:D,headerCells:A,getCellDate:function(e,t){return l.addDate(e,t)},getCellText:function(e){return J(e,{locale:n,format:n.cellDateFormat,generateConfig:l})},getCellClassName:function(e){return(0,p.Z)((0,p.Z)({},"".concat(t,"-cell-in-view"),K(l,e,a)),"".concat(t,"-cell-today"),Z(l,e,x))},prefixColumn:T,cellSelection:!b}))))}var ke=i(11641),Le=1/3;var Ge=300;function Ne(e){return e.map((function(e){return[e.value,e.label,e.disabled].join(",")})).join(";")}function Oe(e){var t=e.units,i=e.value,s=e.optionalValue,n=e.type,d=e.onChange,c=e.onHover,u=e.onDblClick,g=e.changeOnScroll,m=xe(),f=m.prefixCls,C=m.cellRender,w=m.now,S=m.locale,y="".concat(f,"-time-panel"),b="".concat(f,"-time-panel-cell"),R=h.useRef(null),F=h.useRef(),E=function(){clearTimeout(F.current)},x=function(e,t){var i=h.useRef(!1),s=h.useRef(null),o=h.useRef(null),n=function(){se.Z.cancel(s.current),i.current=!1},r=h.useRef();return[(0,l.zX)((function(){var l=e.current;if(o.current=null,r.current=0,l){var a=l.querySelector('[data-value="'.concat(t,'"]')),d=l.querySelector("li");a&&d&&function e(){n(),i.current=!0,r.current+=1;var t=l.scrollTop,c=d.offsetTop,u=a.offsetTop,h=u-c;if(0===u&&a!==d||!(0,ke.Z)(l))r.current<=5&&(s.current=(0,se.Z)(e));else{var p=t+(h-t)*Le,g=Math.abs(h-p);if(null!==o.current&&o.current<g)n();else{if(o.current=g,g<=1)return l.scrollTop=h,void n();l.scrollTop=p,s.current=(0,se.Z)(e)}}}()}})),n,function(){return i.current}]}(R,null!==i&&void 0!==i?i:s),P=(0,r.Z)(x,3),M=P[0],D=P[1],I=P[2];(0,a.Z)((function(){return M(),E(),function(){D(),E()}}),[i,s,Ne(t)]);var T="".concat(y,"-column");return h.createElement("ul",{className:T,ref:R,"data-type":n,onScroll:function(e){E();var i=e.target;!I()&&g&&(F.current=setTimeout((function(){var e=R.current,s=e.querySelector("li").offsetTop,n=Array.from(e.querySelectorAll("li")).map((function(e){return e.offsetTop-s})).map((function(e,s){return t[s].disabled?Number.MAX_SAFE_INTEGER:Math.abs(e-i.scrollTop)})),r=Math.min.apply(Math,(0,o.Z)(n)),l=n.findIndex((function(e){return e===r})),a=t[l];a&&!a.disabled&&d(a.value)}),Ge))}},t.map((function(e){var t=e.label,s=e.value,o=e.disabled,r=h.createElement("div",{className:"".concat(b,"-inner")},t);return h.createElement("li",{key:s,className:v()(b,(0,p.Z)((0,p.Z)({},"".concat(b,"-selected"),i===s),"".concat(b,"-disabled"),o)),onClick:function(){o||d(s)},onDoubleClick:function(){!o&&u&&u()},onMouseEnter:function(){c(s)},onMouseLeave:function(){c(null)},"data-value":s},C?C(s,{prefixCls:f,originNode:r,today:w,type:"time",subType:n,locale:S}):r)})))}function Be(e){return e<12}function Ve(e){var t=e.showHour,i=e.showMinute,o=e.showSecond,n=e.showMillisecond,l=e.use12Hours,a=e.changeOnScroll,d=xe(),c=d.prefixCls,u=d.values,p=d.generateConfig,g=d.locale,m=d.onSelect,v=d.onHover,f=void 0===v?function(){}:v,C=d.pickerValue,w=(null===u||void 0===u?void 0:u[0])||null,S=h.useContext(Me).onCellDblClick,y=be(p,e,w),b=(0,r.Z)(y,5),R=b[0],F=b[1],E=b[2],x=b[3],P=b[4],M=function(e){return[w&&p[e](w),C&&p[e](C)]},D=M("getHour"),I=(0,r.Z)(D,2),T=I[0],A=I[1],k=M("getMinute"),L=(0,r.Z)(k,2),G=L[0],N=L[1],O=M("getSecond"),B=(0,r.Z)(O,2),V=B[0],H=B[1],W=M("getMillisecond"),z=(0,r.Z)(W,2),U=z[0],_=z[1],K=null===T?null:Be(T)?"am":"pm",Z=h.useMemo((function(){return l?Be(T)?F.filter((function(e){return Be(e.value)})):F.filter((function(e){return!Be(e.value)})):F}),[T,F,l]),j=function(e,t){var i,s=e.filter((function(e){return!e.disabled}));return null!==t&&void 0!==t?t:null===s||void 0===s||null===(i=s[0])||void 0===i?void 0:i.value},Y=j(F,T),q=h.useMemo((function(){return E(Y)}),[E,Y]),Q=j(q,G),X=h.useMemo((function(){return x(Y,Q)}),[x,Y,Q]),$=j(X,V),ee=h.useMemo((function(){return P(Y,Q,$)}),[P,Y,Q,$]),te=j(ee,U),ie=h.useMemo((function(){if(!l)return[];var e=p.getNow(),t=p.setHour(e,6),i=p.setHour(e,18),s=function(e,t){var i=g.cellMeridiemFormat;return i?J(e,{generateConfig:p,locale:g,format:i}):t};return[{label:s(t,"AM"),value:"am",disabled:F.every((function(e){return e.disabled||!Be(e.value)}))},{label:s(i,"PM"),value:"pm",disabled:F.every((function(e){return e.disabled||Be(e.value)}))}]}),[F,l,p,g]),se=function(e){var t=R(e);m(t)},oe=h.useMemo((function(){var e=w||C||p.getNow(),t=function(e){return null!==e&&void 0!==e};return t(T)?(e=p.setHour(e,T),e=p.setMinute(e,G),e=p.setSecond(e,V),e=p.setMillisecond(e,U)):t(A)?(e=p.setHour(e,A),e=p.setMinute(e,N),e=p.setSecond(e,H),e=p.setMillisecond(e,_)):t(Y)&&(e=p.setHour(e,Y),e=p.setMinute(e,Q),e=p.setSecond(e,$),e=p.setMillisecond(e,te)),e}),[w,C,T,G,V,U,Y,Q,$,te,A,N,H,_,p]),ne=function(e,t){return null===e?null:p[t](oe,e)},re=function(e){return ne(e,"setHour")},le=function(e){return ne(e,"setMinute")},ae=function(e){return ne(e,"setSecond")},de=function(e){return ne(e,"setMillisecond")},ce=function(e){return null===e?null:"am"!==e||Be(T)?"pm"===e&&Be(T)?p.setHour(oe,T+12):oe:p.setHour(oe,T-12)},ue={onDblClick:S,changeOnScroll:a};return h.createElement("div",{className:"".concat(c,"-content")},t&&h.createElement(Oe,(0,s.Z)({units:Z,value:T,optionalValue:A,type:"hour",onChange:function(e){se(re(e))},onHover:function(e){f(re(e))}},ue)),i&&h.createElement(Oe,(0,s.Z)({units:q,value:G,optionalValue:N,type:"minute",onChange:function(e){se(le(e))},onHover:function(e){f(le(e))}},ue)),o&&h.createElement(Oe,(0,s.Z)({units:X,value:V,optionalValue:H,type:"second",onChange:function(e){se(ae(e))},onHover:function(e){f(ae(e))}},ue)),n&&h.createElement(Oe,(0,s.Z)({units:ee,value:U,optionalValue:_,type:"millisecond",onChange:function(e){se(de(e))},onHover:function(e){f(de(e))}},ue)),l&&h.createElement(Oe,(0,s.Z)({units:ie,value:K,type:"meridiem",onChange:function(e){se(ce(e))},onHover:function(e){f(ce(e))}},ue)))}function He(e){var t=e.prefixCls,i=e.value,s=e.locale,o=e.generateConfig,n=e.showTime,l=(n||{}).format,a="".concat(t,"-time-panel"),d=Pe(e,"time"),c=(0,r.Z)(d,1)[0];return h.createElement(Ee.Provider,{value:c},h.createElement("div",{className:v()(a)},h.createElement(Te,null,i?J(i,{locale:s,format:l,generateConfig:o}):"\xa0"),h.createElement(Ve,n)))}var We={date:Ae,datetime:function(e){var t=e.prefixCls,i=e.generateConfig,o=e.showTime,n=e.onSelect,l=e.value,a=e.pickerValue,d=e.onHover,c="".concat(t,"-datetime-panel"),u=be(i,o),p=(0,r.Z)(u,1)[0],g=function(e){return ee(i,e,l||a)};return h.createElement("div",{className:c},h.createElement(Ae,(0,s.Z)({},e,{onSelect:function(e){var t=g(e);n(p(t,t))},onHover:function(e){null===d||void 0===d||d(e?g(e):e)}})),h.createElement(He,e))},week:function(e){var t=e.prefixCls,i=e.generateConfig,o=e.locale,n=e.value,l=e.hoverValue,a=e.hoverRangeValue,d=o.locale,c="".concat(t,"-week-panel-row");return h.createElement(Ae,(0,s.Z)({},e,{mode:"week",panelName:"week",rowClassName:function(e){var t={};if(a){var s=(0,r.Z)(a,2),o=s[0],u=s[1],h=q(i,d,o,e),g=q(i,d,u,e);t["".concat(c,"-range-start")]=h,t["".concat(c,"-range-end")]=g,t["".concat(c,"-range-hover")]=!h&&!g&&X(i,o,u,e)}return l&&(t["".concat(c,"-hover")]=l.some((function(t){return q(i,d,e,t)}))),v()(c,(0,p.Z)({},"".concat(c,"-selected"),!a&&q(i,d,n,e)),t)}}))},month:function(e){var t=e.prefixCls,i=e.locale,o=e.generateConfig,n=e.pickerValue,l=e.disabledDate,a=e.onPickerValueChange,d=e.onModeChange,c="".concat(t,"-month-panel"),u=Pe(e,"month"),g=(0,r.Z)(u,1)[0],m=o.setMonth(n,0),v=i.shortMonths||(o.locale.getShortMonths?o.locale.getShortMonths(i.locale):[]),f=l?function(e,t){var i=o.setDate(e,1),s=o.setMonth(i,o.getMonth(i)+1),n=o.addDate(s,-1);return l(i,t)&&l(n,t)}:null,C=h.createElement("button",{type:"button",key:"year","aria-label":i.yearSelect,onClick:function(){d("year")},tabIndex:-1,className:"".concat(t,"-year-btn")},J(n,{locale:i,format:i.yearFormat,generateConfig:o}));return h.createElement(Ee.Provider,{value:g},h.createElement("div",{className:c},h.createElement(Te,{superOffset:function(e){return o.addYear(n,e)},onChange:a,getStart:function(e){return o.setMonth(e,0)},getEnd:function(e){return o.setMonth(e,11)}},C),h.createElement(De,(0,s.Z)({},e,{disabledDate:f,titleFormat:i.fieldMonthFormat,colNum:3,rowNum:4,baseDate:m,getCellDate:function(e,t){return o.addMonth(e,t)},getCellText:function(e){var t=o.getMonth(e);return i.monthFormat?J(e,{locale:i,format:i.monthFormat,generateConfig:o}):v[t]},getCellClassName:function(){return(0,p.Z)({},"".concat(t,"-cell-in-view"),!0)}}))))},quarter:function(e){var t=e.prefixCls,i=e.locale,o=e.generateConfig,n=e.pickerValue,l=e.onPickerValueChange,a=e.onModeChange,d="".concat(t,"-quarter-panel"),c=Pe(e,"quarter"),u=(0,r.Z)(c,1)[0],g=o.setMonth(n,0),m=h.createElement("button",{type:"button",key:"year","aria-label":i.yearSelect,onClick:function(){a("year")},tabIndex:-1,className:"".concat(t,"-year-btn")},J(n,{locale:i,format:i.yearFormat,generateConfig:o}));return h.createElement(Ee.Provider,{value:u},h.createElement("div",{className:d},h.createElement(Te,{superOffset:function(e){return o.addYear(n,e)},onChange:l,getStart:function(e){return o.setMonth(e,0)},getEnd:function(e){return o.setMonth(e,11)}},m),h.createElement(De,(0,s.Z)({},e,{titleFormat:i.fieldQuarterFormat,colNum:4,rowNum:1,baseDate:g,getCellDate:function(e,t){return o.addMonth(e,3*t)},getCellText:function(e){return J(e,{locale:i,format:i.cellQuarterFormat,generateConfig:o})},getCellClassName:function(){return(0,p.Z)({},"".concat(t,"-cell-in-view"),!0)}}))))},year:function(e){var t=e.prefixCls,i=e.locale,o=e.generateConfig,n=e.pickerValue,l=e.disabledDate,a=e.onPickerValueChange,d=e.onModeChange,c="".concat(t,"-year-panel"),u=Pe(e,"year"),g=(0,r.Z)(u,1)[0],m=function(e){var t=10*Math.floor(o.getYear(e)/10);return o.setYear(e,t)},v=function(e){var t=m(e);return o.addYear(t,9)},f=m(n),C=v(n),w=o.addYear(f,-1),S=l?function(e,t){var i=o.setMonth(e,0),s=o.setDate(i,1),n=o.addYear(s,1),r=o.addDate(n,-1);return l(s,t)&&l(r,t)}:null,y=h.createElement("button",{type:"button",key:"decade","aria-label":i.decadeSelect,onClick:function(){d("decade")},tabIndex:-1,className:"".concat(t,"-decade-btn")},J(f,{locale:i,format:i.yearFormat,generateConfig:o}),"-",J(C,{locale:i,format:i.yearFormat,generateConfig:o}));return h.createElement(Ee.Provider,{value:g},h.createElement("div",{className:c},h.createElement(Te,{superOffset:function(e){return o.addYear(n,10*e)},onChange:a,getStart:m,getEnd:v},y),h.createElement(De,(0,s.Z)({},e,{disabledDate:S,titleFormat:i.fieldYearFormat,colNum:3,rowNum:4,baseDate:w,getCellDate:function(e,t){return o.addYear(e,t)},getCellText:function(e){return J(e,{locale:i,format:i.cellYearFormat,generateConfig:o})},getCellClassName:function(e){return(0,p.Z)({},"".concat(t,"-cell-in-view"),U(o,e,f)||U(o,e,C)||X(o,f,C,e))}}))))},decade:function(e){var t=e.prefixCls,i=e.locale,o=e.generateConfig,n=e.pickerValue,l=e.disabledDate,a=e.onPickerValueChange,d="".concat(t,"-decade-panel"),c=Pe(e,"decade"),u=(0,r.Z)(c,1)[0],g=function(e){var t=100*Math.floor(o.getYear(e)/100);return o.setYear(e,t)},m=function(e){var t=g(e);return o.addYear(t,99)},v=g(n),f=m(n),C=o.addYear(v,-10),w=l?function(e,t){var i=o.setDate(e,1),s=o.setMonth(i,0),n=o.setYear(s,10*Math.floor(o.getYear(s)/10)),r=o.addYear(n,10),a=o.addDate(r,-1);return l(n,t)&&l(a,t)}:null,S="".concat(J(v,{locale:i,format:i.yearFormat,generateConfig:o}),"-").concat(J(f,{locale:i,format:i.yearFormat,generateConfig:o}));return h.createElement(Ee.Provider,{value:u},h.createElement("div",{className:d},h.createElement(Te,{superOffset:function(e){return o.addYear(n,100*e)},onChange:a,getStart:g,getEnd:m},S),h.createElement(De,(0,s.Z)({},e,{disabledDate:w,colNum:3,rowNum:4,baseDate:C,getCellDate:function(e,t){return o.addYear(e,10*t)},getCellText:function(e){var t=i.cellYearFormat,s=J(e,{locale:i,format:t,generateConfig:o}),n=J(o.addYear(e,9),{locale:i,format:t,generateConfig:o});return"".concat(s,"-").concat(n)},getCellClassName:function(e){return(0,p.Z)({},"".concat(t,"-cell-in-view"),z(o,e,v)||z(o,e,f)||X(o,v,f,e))}}))))},time:He};function ze(e,t){var i,a=e.locale,d=e.generateConfig,c=e.direction,u=e.prefixCls,g=e.tabIndex,m=void 0===g?0:g,C=e.multiple,w=e.defaultValue,S=e.value,b=e.onChange,F=e.onSelect,E=e.defaultPickerValue,x=e.pickerValue,M=e.onPickerValueChange,D=e.mode,T=e.onPanelChange,A=e.picker,k=void 0===A?"date":A,L=e.showTime,G=e.hoverValue,N=e.hoverRangeValue,V=e.cellRender,H=e.dateRender,W=e.monthCellRender,z=e.components,U=void 0===z?{}:z,_=e.hideHeader,K=(null===(i=h.useContext(f))||void 0===i?void 0:i.prefixCls)||u||"rc-picker",Z=h.useRef();h.useImperativeHandle(t,(function(){return{nativeElement:Z.current}}));var j=O(e),Y=(0,r.Z)(j,4),q=Y[0],X=Y[1],$=Y[2],J=Y[3],ee=I(a,X),te="date"===k&&L?"datetime":k,ie=h.useMemo((function(){return B(te,$,J,q,ee)}),[te,$,J,q,ee]),se=d.getNow(),oe=(0,l.C8)(k,{value:D,postState:function(e){return e||"date"}}),ne=(0,r.Z)(oe,2),re=ne[0],le=ne[1],ae="date"===re&&ie?"datetime":re,de=Fe(d,a,te),ce=(0,l.C8)(w,{value:S}),ue=(0,r.Z)(ce,2),he=ue[0],pe=ue[1],ge=h.useMemo((function(){var e=y(he).filter((function(e){return e}));return C?e:e.slice(0,1)}),[he,C]),me=(0,l.zX)((function(e){pe(e),b&&(null===e||ge.length!==e.length||ge.some((function(t,i){return!Q(d,a,t,e[i],te)})))&&(null===b||void 0===b||b(C?e:e[0]))})),ve=(0,l.zX)((function(e){if(null===F||void 0===F||F(e),re===k){var t=C?de(ge,e):[e];me(t)}})),fe=(0,l.C8)(E||ge[0]||se,{value:x}),Ce=(0,r.Z)(fe,2),we=Ce[0],Se=Ce[1];h.useEffect((function(){ge[0]&&!x&&Se(ge[0])}),[ge[0]]);var ye=function(e,t){null===T||void 0===T||T(e||x,t||re)},be=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Se(e),null===M||void 0===M||M(e),t&&ye(e)},Re=function(e,t){le(e),t&&be(t),ye(t,e)},Ee=h.useMemo((function(){var e,t;if(Array.isArray(N)){var i=(0,r.Z)(N,2);e=i[0],t=i[1]}else e=N;return e||t?(e=e||t,t=t||e,d.isAfter(e,t)?[t,e]:[e,t]):null}),[N,d]),xe=P(V,H,W),Pe=U[ae]||We[ae]||Ae,De=h.useContext(Me),Ie=h.useMemo((function(){return(0,n.Z)((0,n.Z)({},De),{},{hideHeader:_})}),[De,_]);var Te="".concat(K,"-panel"),ke=R(e,["showWeek","prevIcon","nextIcon","superPrevIcon","superNextIcon","disabledDate","minDate","maxDate","onHover"]);return h.createElement(Me.Provider,{value:Ie},h.createElement("div",{ref:Z,tabIndex:m,className:v()(Te,(0,p.Z)({},"".concat(Te,"-rtl"),"rtl"===c))},h.createElement(Pe,(0,s.Z)({},ke,{showTime:ie,prefixCls:K,locale:ee,generateConfig:d,onModeChange:Re,pickerValue:we,onPickerValueChange:function(e){be(e,!0)},value:ge[0],onSelect:function(e){if(ve(e),be(e),re!==k){var t=["decade","year"],i=[].concat(t,["month"]),s={quarter:[].concat(t,["quarter"]),week:[].concat((0,o.Z)(i),["week"]),date:[].concat((0,o.Z)(i),["date"])}[k]||i,n=s.indexOf(re),r=s[n+1];r&&Re(r,e)}},values:ge,cellRender:xe,hoverRangeValue:Ee,hoverValue:G}))))}const Ue=h.memo(h.forwardRef(ze));function _e(e){var t=e.picker,i=e.multiplePanel,o=e.pickerValue,r=e.onPickerValueChange,l=e.needConfirm,a=e.onSubmit,d=e.range,c=e.hoverValue,u=h.useContext(f),p=u.prefixCls,g=u.generateConfig,m=h.useCallback((function(e,i){return de(g,t,e,i)}),[g,t]),v=h.useMemo((function(){return m(o,1)}),[o,m]),C={onCellDblClick:function(){l&&a()}},w="time"===t,S=(0,n.Z)((0,n.Z)({},e),{},{hoverValue:null,hoverRangeValue:null,hideHeader:w});return d?S.hoverRangeValue=c:S.hoverValue=c,i?h.createElement("div",{className:"".concat(p,"-panels")},h.createElement(Me.Provider,{value:(0,n.Z)((0,n.Z)({},C),{},{hideNext:!0})},h.createElement(Ue,S)),h.createElement(Me.Provider,{value:(0,n.Z)((0,n.Z)({},C),{},{hidePrev:!0})},h.createElement(Ue,(0,s.Z)({},S,{pickerValue:v,onPickerValueChange:function(e){r(m(e,-1))}})))):h.createElement(Me.Provider,{value:(0,n.Z)({},C)},h.createElement(Ue,S))}function Ke(e){return"function"===typeof e?e():e}function Ze(e){var t=e.prefixCls,i=e.presets,s=e.onClick,o=e.onHover;return i.length?h.createElement("div",{className:"".concat(t,"-presets")},h.createElement("ul",null,i.map((function(e,t){var i=e.label,n=e.value;return h.createElement("li",{key:t,onClick:function(){s(Ke(n))},onMouseEnter:function(){o(Ke(n))},onMouseLeave:function(){o(null)}},i)})))):null}function je(e){var t=e.panelRender,i=e.internalMode,o=e.picker,n=e.showNow,l=e.range,a=e.multiple,d=e.activeInfo,c=void 0===d?[0,0,0]:d,u=e.presets,g=e.onPresetHover,m=e.onPresetSubmit,C=e.onFocus,w=e.onBlur,S=e.onPanelMouseDown,b=e.direction,R=e.value,F=e.onSelect,E=e.isInvalid,x=e.defaultOpenValue,P=e.onOk,M=e.onSubmit,D=h.useContext(f).prefixCls,I="".concat(D,"-panel"),T="rtl"===b,A=h.useRef(null),k=h.useRef(null),L=h.useState(0),G=(0,r.Z)(L,2),N=G[0],O=G[1],B=h.useState(0),V=(0,r.Z)(B,2),H=V[0],W=V[1],z=h.useState(0),U=(0,r.Z)(z,2),_=U[0],K=U[1],Z=(0,r.Z)(c,3),j=Z[0],Y=Z[1],q=Z[2],Q=h.useState(0),X=(0,r.Z)(Q,2),$=X[0],J=X[1];function ee(e){return e.filter((function(e){return e}))}h.useEffect((function(){J(10)}),[j]),h.useEffect((function(){if(l&&k.current){var e,t=(null===(e=A.current)||void 0===e?void 0:e.offsetWidth)||0,i=k.current.getBoundingClientRect();if(!i.height||i.right<0)return void J((function(e){return Math.max(0,e-1)}));var s=(T?Y-t:j)-i.left;if(K(s),N&&N<q){var o=T?i.right-(Y-t+N):j+t-i.left-N,n=Math.max(0,o);W(n)}else W(0)}}),[$,T,N,j,Y,q,l]);var te=h.useMemo((function(){return ee(y(R))}),[R]),ie="time"===o&&!te.length,se=h.useMemo((function(){return ie?ee([x]):te}),[ie,te,x]),oe=ie?x:te,ne=h.useMemo((function(){return!se.length||se.some((function(e){return E(e)}))}),[se,E]),re=h.createElement("div",{className:"".concat(D,"-panel-layout")},h.createElement(Ze,{prefixCls:D,presets:u,onClick:m,onHover:g}),h.createElement("div",null,h.createElement(_e,(0,s.Z)({},e,{value:oe})),h.createElement(Re,(0,s.Z)({},e,{showNow:!a&&n,invalid:ne,onSubmit:function(){ie&&F(x),P(),M()}}))));t&&(re=t(re));var le="".concat(I,"-container"),ae="marginLeft",de="marginRight",ce=h.createElement("div",{onMouseDown:S,tabIndex:-1,className:v()(le,"".concat(D,"-").concat(i,"-panel-container")),style:(0,p.Z)((0,p.Z)({},T?de:ae,H),T?ae:de,"auto"),onFocus:C,onBlur:w},re);return l&&(ce=h.createElement("div",{onMouseDown:S,ref:k,className:v()("".concat(D,"-range-wrapper"),"".concat(D,"-").concat(o,"-range-wrapper"))},h.createElement("div",{ref:A,className:"".concat(D,"-range-arrow"),style:{left:_}}),h.createElement(we.Z,{onResize:function(e){e.width&&O(e.width)}},ce))),ce}var Ye=i(73191);function qe(e,t){var i=e.format,s=e.maskFormat,o=e.generateConfig,r=e.locale,l=e.preserveInvalidOnBlur,a=e.inputReadOnly,d=e.required,u=e["aria-required"],p=e.onSubmit,g=e.onFocus,m=e.onBlur,v=e.onInputChange,f=e.onInvalid,C=e.open,w=e.onOpenChange,S=e.onKeyDown,y=e.onChange,b=e.activeHelp,R=e.name,F=e.autoComplete,E=e.id,x=e.value,P=e.invalid,M=e.placeholder,D=e.disabled,I=e.activeIndex,T=e.allHelp,A=e.picker,k=function(e,t){var i=o.locale.parse(r.locale,e,[t]);return i&&o.isValidate(i)?i:null},L=i[0],G=h.useCallback((function(e){return J(e,{locale:r,format:L,generateConfig:o})}),[r,o,L]),N=h.useMemo((function(){return x.map(G)}),[x,G]),O=h.useMemo((function(){var e="time"===A?8:10,t="function"===typeof L?L(o.getNow()).length:L.length;return Math.max(e,t)+2}),[L,A,o]),B=function(e){for(var t=0;t<i.length;t+=1){var s=i[t];if("string"===typeof s){var o=k(e,s);if(o)return o}}return!1};return[function(i){function o(e){return void 0!==i?e[i]:e}var r=(0,c.Z)(e,{aria:!0,data:!0}),h=(0,n.Z)((0,n.Z)({},r),{},{format:s,validateFormat:function(e){return!!B(e)},preserveInvalidOnBlur:l,readOnly:a,required:d,"aria-required":u,name:R,autoComplete:F,size:O,id:o(E),value:o(N)||"",invalid:o(P),placeholder:o(M),active:I===i,helped:T||b&&I===i,disabled:o(D),onFocus:function(e){g(e,i)},onBlur:function(e){m(e,i)},onSubmit:p,onChange:function(e){v();var t=B(e);if(t)return f(!1,i),void y(t,i);f(!!e,i)},onHelp:function(){w(!0,{index:i})},onKeyDown:function(e){var t=!1;if(null===S||void 0===S||S(e,(function(){t=!0})),!e.defaultPrevented&&!t)switch(e.key){case"Escape":w(!1,{index:i});break;case"Enter":C||w(!0)}}},null===t||void 0===t?void 0:t({valueTexts:N}));return Object.keys(h).forEach((function(e){void 0===h[e]&&delete h[e]})),h},G]}var Qe=["onMouseEnter","onMouseLeave"];function Xe(e){return h.useMemo((function(){return R(e,Qe)}),[e])}var $e=["icon","type"],Je=["onClear"];function et(e){var t=e.icon,i=e.type,o=(0,Ye.Z)(e,$e),n=h.useContext(f).prefixCls;return t?h.createElement("span",(0,s.Z)({className:"".concat(n,"-").concat(i)},o),t):null}function tt(e){var t=e.onClear,i=(0,Ye.Z)(e,Je);return h.createElement(et,(0,s.Z)({},i,{type:"clear",role:"button",onMouseDown:function(e){e.preventDefault()},onClick:function(e){e.stopPropagation(),t()}}))}var it=i(73779),st=i(71374),ot=["YYYY","MM","DD","HH","mm","ss","SSS"],nt=function(){function e(t){(0,it.Z)(this,e),(0,p.Z)(this,"format",void 0),(0,p.Z)(this,"maskFormat",void 0),(0,p.Z)(this,"cells",void 0),(0,p.Z)(this,"maskCells",void 0),this.format=t;var i=ot.map((function(e){return"(".concat(e,")")})).join("|"),s=new RegExp(i,"g");this.maskFormat=t.replace(s,(function(e){return"\u9867".repeat(e.length)}));var o=new RegExp("(".concat(ot.join("|"),")")),n=(t.split(o)||[]).filter((function(e){return e})),r=0;this.cells=n.map((function(e){var t=ot.includes(e),i=r,s=r+e.length;return r=s,{text:e,mask:t,start:i,end:s}})),this.maskCells=this.cells.filter((function(e){return e.mask}))}return(0,st.Z)(e,[{key:"getSelection",value:function(e){var t=this.maskCells[e]||{};return[t.start||0,t.end||0]}},{key:"match",value:function(e){for(var t=0;t<this.maskFormat.length;t+=1){var i=this.maskFormat[t],s=e[t];if(!s||"\u9867"!==i&&i!==s)return!1}return!0}},{key:"size",value:function(){return this.maskCells.length}},{key:"getMaskCellIndex",value:function(e){for(var t=Number.MAX_SAFE_INTEGER,i=0,s=0;s<this.maskCells.length;s+=1){var o=this.maskCells[s],n=o.start,r=o.end;if(e>=n&&e<=r)return s;var l=Math.min(Math.abs(e-n),Math.abs(e-r));l<t&&(t=l,i=s)}return i}}]),e}();var rt=["active","showActiveCls","suffixIcon","format","validateFormat","onChange","onInput","helped","onHelp","onSubmit","onKeyDown","preserveInvalidOnBlur","invalid","clearIcon"];const lt=h.forwardRef((function(e,t){var i=e.active,o=e.showActiveCls,n=void 0===o||o,d=e.suffixIcon,c=e.format,u=e.validateFormat,g=e.onChange,m=(e.onInput,e.helped),C=e.onHelp,w=e.onSubmit,y=e.onKeyDown,b=e.preserveInvalidOnBlur,R=void 0!==b&&b,F=e.invalid,E=e.clearIcon,x=(0,Ye.Z)(e,rt),P=e.value,M=e.onFocus,D=e.onBlur,I=e.onMouseUp,T=h.useContext(f),A=T.prefixCls,k=T.input,L=void 0===k?"input":k,G="".concat(A,"-input"),N=h.useState(!1),O=(0,r.Z)(N,2),B=O[0],V=O[1],H=h.useState(P),W=(0,r.Z)(H,2),z=W[0],U=W[1],_=h.useState(""),K=(0,r.Z)(_,2),Z=K[0],j=K[1],Y=h.useState(null),q=(0,r.Z)(Y,2),Q=q[0],X=q[1],$=h.useState(null),J=(0,r.Z)($,2),ee=J[0],te=J[1],ie=z||"";h.useEffect((function(){U(P)}),[P]);var oe=h.useRef(),ne=h.useRef();h.useImperativeHandle(t,(function(){return{nativeElement:oe.current,inputElement:ne.current,focus:function(e){ne.current.focus(e)},blur:function(){ne.current.blur()}}}));var re=h.useMemo((function(){return new nt(c||"")}),[c]),ae=h.useMemo((function(){return m?[0,0]:re.getSelection(Q)}),[re,Q,m]),de=(0,r.Z)(ae,2),ce=de[0],ue=de[1],he=function(e){e&&e!==c&&e!==P&&C()},pe=(0,l.zX)((function(e){u(e)&&g(e),U(e),he(e)})),ge=h.useRef(!1),me=function(e){D(e)};le(i,(function(){i||R||U(P)}));var ve=function(e){"Enter"===e.key&&u(ie)&&w(),null===y||void 0===y||y(e)},fe=h.useRef();(0,a.Z)((function(){if(B&&c&&!ge.current){if(re.match(ie))return ne.current.setSelectionRange(ce,ue),fe.current=(0,se.Z)((function(){ne.current.setSelectionRange(ce,ue)})),function(){se.Z.cancel(fe.current)};pe(c)}}),[re,c,B,ie,Q,ce,ue,ee,pe]);var Ce=c?{onFocus:function(e){V(!0),X(0),j(""),M(e)},onBlur:function(e){V(!1),me(e)},onKeyDown:function(e){ve(e);var t=e.key,i=null,s=null,o=ue-ce,n=c.slice(ce,ue),l=function(e){X((function(t){var i=t+e;return i=Math.max(i,0),i=Math.min(i,re.size()-1)}))},a=function(e){var t=function(e){return{YYYY:[0,9999,(new Date).getFullYear()],MM:[1,12],DD:[1,31],HH:[0,23],mm:[0,59],ss:[0,59],SSS:[0,999]}[e]}(n),i=(0,r.Z)(t,3),s=i[0],o=i[1],l=i[2],a=ie.slice(ce,ue),d=Number(a);if(isNaN(d))return String(l||(e>0?s:o));var c=o-s+1;return String(s+(c+(d+e)-s)%c)};switch(t){case"Backspace":case"Delete":i="",s=n;break;case"ArrowLeft":i="",l(-1);break;case"ArrowRight":i="",l(1);break;case"ArrowUp":i="",s=a(1);break;case"ArrowDown":i="",s=a(-1);break;default:isNaN(Number(t))||(s=i=Z+t)}if(null!==i&&(j(i),i.length>=o&&(l(1),j(""))),null!==s){var d=ie.slice(0,ce)+S(s,o)+ie.slice(ue);pe(d.slice(0,c.length))}te({})},onMouseDown:function(){ge.current=!0},onMouseUp:function(e){var t=e.target.selectionStart,i=re.getMaskCellIndex(t);X(i),te({}),null===I||void 0===I||I(e),ge.current=!1},onPaste:function(e){var t=e.clipboardData.getData("text");u(t)&&pe(t)}}:{};return h.createElement("div",{ref:oe,className:v()(G,(0,p.Z)((0,p.Z)({},"".concat(G,"-active"),i&&n),"".concat(G,"-placeholder"),m))},h.createElement(L,(0,s.Z)({ref:ne,"aria-invalid":F,autoComplete:"off"},x,{onKeyDown:ve,onBlur:me},Ce,{value:ie,onChange:function(e){if(!c){var t=e.target.value;he(t),U(t),g(t)}}})),h.createElement(et,{type:"suffix",icon:d}),E)}));var at=["id","prefix","clearIcon","suffixIcon","separator","activeIndex","activeHelp","allHelp","focused","onFocus","onBlur","onKeyDown","locale","generateConfig","placeholder","className","style","onClick","onClear","value","onChange","onSubmit","onInputChange","format","maskFormat","preserveInvalidOnBlur","onInvalid","disabled","invalid","inputReadOnly","direction","onOpenChange","onActiveInfo","placement","onMouseDown","required","aria-required","autoFocus","tabIndex"],dt=["index"];function ct(e,t){var i=e.id,o=e.prefix,a=e.clearIcon,d=e.suffixIcon,c=e.separator,u=void 0===c?"~":c,g=e.activeIndex,m=(e.activeHelp,e.allHelp,e.focused),C=(e.onFocus,e.onBlur,e.onKeyDown,e.locale,e.generateConfig,e.placeholder),w=e.className,S=e.style,y=e.onClick,b=e.onClear,R=e.value,F=(e.onChange,e.onSubmit,e.onInputChange,e.format,e.maskFormat,e.preserveInvalidOnBlur,e.onInvalid,e.disabled),E=e.invalid,x=(e.inputReadOnly,e.direction),P=(e.onOpenChange,e.onActiveInfo),M=(e.placement,e.onMouseDown),D=(e.required,e["aria-required"],e.autoFocus),I=e.tabIndex,A=(0,Ye.Z)(e,at),k="rtl"===x,L=h.useContext(f).prefixCls,G=h.useMemo((function(){if("string"===typeof i)return[i];var e=i||{};return[e.start,e.end]}),[i]),N=h.useRef(),O=h.useRef(),B=h.useRef(),V=function(e){var t;return null===(t=[O,B][e])||void 0===t?void 0:t.current};h.useImperativeHandle(t,(function(){return{nativeElement:N.current,focus:function(e){if("object"===(0,T.Z)(e)){var t,i=e||{},s=i.index,o=void 0===s?0:s,n=(0,Ye.Z)(i,dt);null===(t=V(o))||void 0===t||t.focus(n)}else{var r;null===(r=V(null!==e&&void 0!==e?e:0))||void 0===r||r.focus()}},blur:function(){var e,t;null===(e=V(0))||void 0===e||e.blur(),null===(t=V(1))||void 0===t||t.blur()}}}));var H=Xe(A),W=h.useMemo((function(){return Array.isArray(C)?C:[C,C]}),[C]),z=qe((0,n.Z)((0,n.Z)({},e),{},{id:G,placeholder:W})),U=(0,r.Z)(z,1)[0],_=h.useState({position:"absolute",width:0}),K=(0,r.Z)(_,2),Z=K[0],j=K[1],Y=(0,l.zX)((function(){var e=V(g);if(e){var t=e.nativeElement.getBoundingClientRect(),i=N.current.getBoundingClientRect(),s=t.left-i.left;j((function(e){return(0,n.Z)((0,n.Z)({},e),{},{width:t.width,left:s})})),P([t.left,t.right,i.width])}}));h.useEffect((function(){Y()}),[g]);var q=a&&(R[0]&&!F[0]||R[1]&&!F[1]),Q=D&&!F[0],X=D&&!Q&&!F[1];return h.createElement(we.Z,{onResize:Y},h.createElement("div",(0,s.Z)({},H,{className:v()(L,"".concat(L,"-range"),(0,p.Z)((0,p.Z)((0,p.Z)((0,p.Z)({},"".concat(L,"-focused"),m),"".concat(L,"-disabled"),F.every((function(e){return e}))),"".concat(L,"-invalid"),E.some((function(e){return e}))),"".concat(L,"-rtl"),k),w),style:S,ref:N,onClick:y,onMouseDown:function(e){var t=e.target;t!==O.current.inputElement&&t!==B.current.inputElement&&e.preventDefault(),null===M||void 0===M||M(e)}}),o&&h.createElement("div",{className:"".concat(L,"-prefix")},o),h.createElement(lt,(0,s.Z)({ref:O},U(0),{autoFocus:Q,tabIndex:I,"date-range":"start"})),h.createElement("div",{className:"".concat(L,"-range-separator")},u),h.createElement(lt,(0,s.Z)({ref:B},U(1),{autoFocus:X,tabIndex:I,"date-range":"end"})),h.createElement("div",{className:"".concat(L,"-active-bar"),style:Z}),h.createElement(et,{type:"suffix",icon:d}),q&&h.createElement(tt,{icon:a,onClear:b})))}const ut=h.forwardRef(ct);function ht(e,t){var i=null!==e&&void 0!==e?e:t;return Array.isArray(i)?i:[i,i]}function pt(e){return 1===e?"end":"start"}function gt(e,t){var i=ie(e,(function(){var t=e.disabled,i=e.allowEmpty;return{disabled:ht(t,!1),allowEmpty:ht(i,!1)}})),u=(0,r.Z)(i,6),p=u[0],g=u[1],m=u[2],v=u[3],C=u[4],S=u[5],R=p.prefixCls,F=p.styles,D=p.classNames,I=p.defaultValue,T=p.value,A=p.needConfirm,k=p.onKeyDown,L=p.disabled,G=p.allowEmpty,N=p.disabledDate,O=p.minDate,B=p.maxDate,V=p.defaultOpen,H=p.open,W=p.onOpenChange,z=p.locale,U=p.generateConfig,_=p.picker,K=p.showNow,Z=p.showToday,j=p.showTime,Y=p.mode,q=p.onPanelChange,X=p.onCalendarChange,$=p.onOk,J=p.defaultPickerValue,ee=p.pickerValue,te=p.onPickerValueChange,se=p.inputReadOnly,le=p.suffixIcon,de=p.onFocus,ce=p.onBlur,he=p.presets,pe=p.ranges,ge=p.components,me=p.cellRender,we=p.dateRender,Se=p.monthCellRender,ye=p.onClick,be=ne(t),Re=oe(H,V,L,W),Fe=(0,r.Z)(Re,2),Ee=Fe[0],xe=Fe[1],Pe=function(e,t){!L.some((function(e){return!e}))&&e||xe(e,t)},Me=ve(U,z,v,!0,!1,I,T,X,$),De=(0,r.Z)(Me,5),Ie=De[0],Te=De[1],Ae=De[2],ke=De[3],Le=De[4],Ge=Ae(),Ne=ae(L,G,Ee),Oe=(0,r.Z)(Ne,9),Be=Oe[0],Ve=Oe[1],He=Oe[2],We=Oe[3],ze=Oe[4],Ue=Oe[5],_e=Oe[6],Ke=Oe[7],Ze=Oe[8],Ye=function(e,t){Ve(!0),null===de||void 0===de||de(e,{range:pt(null!==t&&void 0!==t?t:We)})},qe=function(e,t){Ve(!1),null===ce||void 0===ce||ce(e,{range:pt(null!==t&&void 0!==t?t:We)})},Qe=h.useMemo((function(){if(!j)return null;var e=j.disabledTime,t=e?function(t){var i=pt(We),s=E(Ge,_e,We);return e(t,i,{from:s})}:void 0;return(0,n.Z)((0,n.Z)({},j),{},{disabledTime:t})}),[j,We,Ge,_e]),Xe=(0,l.C8)([_,_],{value:Y}),$e=(0,r.Z)(Xe,2),Je=$e[0],et=$e[1],tt=Je[We]||_,it="date"===tt&&Qe?"datetime":tt,st=it===_&&"time"!==it,ot=Ce(_,tt,K,Z,!0),nt=fe(p,Ie,Te,Ae,ke,L,v,Be,Ee,S),rt=(0,r.Z)(nt,2),lt=rt[0],at=rt[1],dt=function(e,t,i,s,o,l){var a=i[i.length-1];return function(d,c){var u=(0,r.Z)(e,2),h=u[0],p=u[1],g=(0,n.Z)((0,n.Z)({},c),{},{from:E(e,i)});return!(1!==a||!t[0]||!h||Q(s,o,h,d,g.type)||!s.isAfter(h,d))||!(0!==a||!t[1]||!p||Q(s,o,p,d,g.type)||!s.isAfter(d,p))||(null===l||void 0===l?void 0:l(d,g))}}(Ge,L,_e,U,z,N),ct=M(Ge,S,G),gt=(0,r.Z)(ct,2),mt=gt[0],vt=gt[1],ft=ue(U,z,Ge,Je,Ee,We,g,st,J,ee,null===Qe||void 0===Qe?void 0:Qe.defaultOpenValue,te,O,B),Ct=(0,r.Z)(ft,2),wt=Ct[0],St=Ct[1],yt=(0,l.zX)((function(e,t,i){var s=b(Je,We,t);if(s[0]===Je[0]&&s[1]===Je[1]||et(s),q&&!1!==i){var n=(0,o.Z)(Ge);e&&(n[We]=e),q(n,s)}})),bt=function(e,t){return b(Ge,t,e)},Rt=function(e,t){var i=Ge;e&&(i=bt(e,We)),Ke(We);var s=Ue(i);ke(i),lt(We,null===s),null===s?Pe(!1,{force:!0}):t||be.current.focus({index:s})},Ft=h.useState(null),Et=(0,r.Z)(Ft,2),xt=Et[0],Pt=Et[1],Mt=h.useState(null),Dt=(0,r.Z)(Mt,2),It=Dt[0],Tt=Dt[1],At=h.useMemo((function(){return It||Ge}),[Ge,It]);h.useEffect((function(){Ee||Tt(null)}),[Ee]);var kt=h.useState([0,0,0]),Lt=(0,r.Z)(kt,2),Gt=Lt[0],Nt=Lt[1],Ot=re(he,pe),Bt=P(me,we,Se,pt(We)),Vt=Ge[We]||null,Ht=(0,l.zX)((function(e){return S(e,{activeIndex:We})})),Wt=h.useMemo((function(){var e=(0,c.Z)(p,!1);return(0,d.Z)(p,[].concat((0,o.Z)(Object.keys(e)),["onChange","onCalendarChange","style","className","onPanelChange","disabledTime"]))}),[p]),zt=h.createElement(je,(0,s.Z)({},Wt,{showNow:ot,showTime:Qe,range:!0,multiplePanel:st,activeInfo:Gt,disabledDate:dt,onFocus:function(e){Pe(!0),Ye(e)},onBlur:qe,onPanelMouseDown:function(){He("panel")},picker:_,mode:tt,internalMode:it,onPanelChange:yt,format:C,value:Vt,isInvalid:Ht,onChange:null,onSelect:function(e){var t=b(Ge,We,e);ke(t),A||m||g!==it||Rt(e)},pickerValue:wt,defaultOpenValue:y(null===j||void 0===j?void 0:j.defaultOpenValue)[We],onPickerValueChange:St,hoverValue:At,onHover:function(e){Tt(e?bt(e,We):null),Pt("cell")},needConfirm:A,onSubmit:Rt,onOk:Le,presets:Ot,onPresetHover:function(e){Tt(e),Pt("preset")},onPresetSubmit:function(e){at(e)&&Pe(!1,{force:!0})},onNow:function(e){Rt(e)},cellRender:Bt})),Ut=h.useMemo((function(){return{prefixCls:R,locale:z,generateConfig:U,button:ge.button,input:ge.input}}),[R,z,U,ge.button,ge.input]);return(0,a.Z)((function(){Ee&&void 0!==We&&yt(null,_,!1)}),[Ee,We,_]),(0,a.Z)((function(){var e=He();Ee||"input"!==e||(Pe(!1),Rt(null,!0)),Ee||!m||A||"panel"!==e||(Pe(!0),Rt())}),[Ee]),h.createElement(f.Provider,{value:Ut},h.createElement(w,(0,s.Z)({},x(p),{popupElement:zt,popupStyle:F.popup,popupClassName:D.popup,visible:Ee,onClose:function(){Pe(!1)},range:!0}),h.createElement(ut,(0,s.Z)({},p,{ref:be,suffixIcon:le,activeIndex:Be||Ee?We:null,activeHelp:!!It,allHelp:!!It&&"preset"===xt,focused:Be,onFocus:function(e,t){var i=_e.length,s=_e[i-1];i&&s!==t&&A&&!G[s]&&!Ze(s)&&Ge[s]?be.current.focus({index:s}):(He("input"),Pe(!0,{inherit:!0}),We!==t&&Ee&&!A&&m&&Rt(null,!0),ze(t),Ye(e,t))},onBlur:function(e,t){if(Pe(!1),!A&&"input"===He()){var i=Ue(Ge);lt(We,null===i)}qe(e,t)},onKeyDown:function(e,t){"Tab"===e.key&&Rt(null,!0),null===k||void 0===k||k(e,t)},onSubmit:Rt,value:At,maskFormat:C,onChange:function(e,t){var i=bt(e,t);ke(i)},onInputChange:function(){He("input")},format:v,inputReadOnly:se,disabled:L,open:Ee,onOpenChange:Pe,onClick:function(e){var t,i=e.target.getRootNode();if(!be.current.nativeElement.contains(null!==(t=i.activeElement)&&void 0!==t?t:document.activeElement)){var s=L.findIndex((function(e){return!e}));s>=0&&be.current.focus({index:s})}Pe(!0),null===ye||void 0===ye||ye(e)},onClear:function(){at(null),Pe(!1,{force:!0})},invalid:mt,onInvalid:vt,onActiveInfo:Nt}))))}const mt=h.forwardRef(gt);var vt=i(55752);function ft(e){var t=e.prefixCls,i=e.value,s=e.onRemove,o=e.removeIcon,n=void 0===o?"\xd7":o,r=e.formatDate,l=e.disabled,a=e.maxTagCount,d=e.placeholder,c="".concat(t,"-selector"),u="".concat(t,"-selection"),p="".concat(u,"-overflow");function g(e,t){return h.createElement("span",{className:v()("".concat(u,"-item")),title:"string"===typeof e?e:null},h.createElement("span",{className:"".concat(u,"-item-content")},e),!l&&t&&h.createElement("span",{onMouseDown:function(e){e.preventDefault()},onClick:t,className:"".concat(u,"-item-remove")},n))}return h.createElement("div",{className:c},h.createElement(vt.Z,{prefixCls:p,data:i,renderItem:function(e){return g(r(e),(function(t){t&&t.stopPropagation(),s(e)}))},renderRest:function(e){return g("+ ".concat(e.length," ..."))},itemKey:function(e){return r(e)},maxCount:a}),!i.length&&h.createElement("span",{className:"".concat(t,"-selection-placeholder")},d))}var Ct=["id","open","prefix","clearIcon","suffixIcon","activeHelp","allHelp","focused","onFocus","onBlur","onKeyDown","locale","generateConfig","placeholder","className","style","onClick","onClear","internalPicker","value","onChange","onSubmit","onInputChange","multiple","maxTagCount","format","maskFormat","preserveInvalidOnBlur","onInvalid","disabled","invalid","inputReadOnly","direction","onOpenChange","onMouseDown","required","aria-required","autoFocus","tabIndex","removeIcon"];function wt(e,t){e.id;var i=e.open,o=e.prefix,l=e.clearIcon,a=e.suffixIcon,d=(e.activeHelp,e.allHelp,e.focused),c=(e.onFocus,e.onBlur,e.onKeyDown,e.locale),u=e.generateConfig,g=e.placeholder,m=e.className,C=e.style,w=e.onClick,S=e.onClear,y=e.internalPicker,b=e.value,R=e.onChange,F=e.onSubmit,E=(e.onInputChange,e.multiple),x=e.maxTagCount,P=(e.format,e.maskFormat,e.preserveInvalidOnBlur,e.onInvalid,e.disabled),M=e.invalid,D=(e.inputReadOnly,e.direction),I=(e.onOpenChange,e.onMouseDown),T=(e.required,e["aria-required"],e.autoFocus),A=e.tabIndex,k=e.removeIcon,L=(0,Ye.Z)(e,Ct),G="rtl"===D,N=h.useContext(f).prefixCls,O=h.useRef(),B=h.useRef();h.useImperativeHandle(t,(function(){return{nativeElement:O.current,focus:function(e){var t;null===(t=B.current)||void 0===t||t.focus(e)},blur:function(){var e;null===(e=B.current)||void 0===e||e.blur()}}}));var V=Xe(L),H=qe((0,n.Z)((0,n.Z)({},e),{},{onChange:function(e){R([e])}}),(function(e){return{value:e.valueTexts[0]||"",active:d}})),W=(0,r.Z)(H,2),z=W[0],U=W[1],_=!(!l||!b.length||P),K=E?h.createElement(h.Fragment,null,h.createElement(ft,{prefixCls:N,value:b,onRemove:function(e){var t=b.filter((function(t){return t&&!Q(u,c,t,e,y)}));R(t),i||F()},formatDate:U,maxTagCount:x,disabled:P,removeIcon:k,placeholder:g}),h.createElement("input",{className:"".concat(N,"-multiple-input"),value:b.map(U).join(","),ref:B,readOnly:!0,autoFocus:T,tabIndex:A}),h.createElement(et,{type:"suffix",icon:a}),_&&h.createElement(tt,{icon:l,onClear:S})):h.createElement(lt,(0,s.Z)({ref:B},z(),{autoFocus:T,tabIndex:A,suffixIcon:a,clearIcon:_&&h.createElement(tt,{icon:l,onClear:S}),showActiveCls:!1}));return h.createElement("div",(0,s.Z)({},V,{className:v()(N,(0,p.Z)((0,p.Z)((0,p.Z)((0,p.Z)((0,p.Z)({},"".concat(N,"-multiple"),E),"".concat(N,"-focused"),d),"".concat(N,"-disabled"),P),"".concat(N,"-invalid"),M),"".concat(N,"-rtl"),G),m),style:C,ref:O,onClick:w,onMouseDown:function(e){var t;e.target!==(null===(t=B.current)||void 0===t?void 0:t.inputElement)&&e.preventDefault(),null===I||void 0===I||I(e)}}),o&&h.createElement("div",{className:"".concat(N,"-prefix")},o),K)}const St=h.forwardRef(wt);function yt(e,t){var i=ie(e),u=(0,r.Z)(i,6),p=u[0],g=u[1],m=u[2],v=u[3],C=u[4],S=u[5],b=p,R=b.prefixCls,F=b.styles,E=b.classNames,D=b.order,I=b.defaultValue,T=b.value,A=b.needConfirm,k=b.onChange,L=b.onKeyDown,G=b.disabled,N=b.disabledDate,O=b.minDate,B=b.maxDate,V=b.defaultOpen,H=b.open,W=b.onOpenChange,z=b.locale,U=b.generateConfig,_=b.picker,K=b.showNow,Z=b.showToday,j=b.showTime,Y=b.mode,q=b.onPanelChange,Q=b.onCalendarChange,X=b.onOk,$=b.multiple,J=b.defaultPickerValue,ee=b.pickerValue,te=b.onPickerValueChange,se=b.inputReadOnly,le=b.suffixIcon,de=b.removeIcon,ce=b.onFocus,he=b.onBlur,pe=b.presets,ge=b.components,me=b.cellRender,we=b.dateRender,Se=b.monthCellRender,ye=b.onClick,be=ne(t);function Re(e){return null===e?null:$?e:e[0]}var Ee=Fe(U,z,g),xe=oe(H,V,[G],W),Pe=(0,r.Z)(xe,2),Me=Pe[0],De=Pe[1],Ie=ve(U,z,v,!1,D,I,T,(function(e,t,i){if(Q){var s=(0,n.Z)({},i);delete s.range,Q(Re(e),Re(t),s)}}),(function(e){null===X||void 0===X||X(Re(e))})),Te=(0,r.Z)(Ie,5),Ae=Te[0],ke=Te[1],Le=Te[2],Ge=Te[3],Ne=Te[4],Oe=Le(),Be=ae([G]),Ve=(0,r.Z)(Be,4),He=Ve[0],We=Ve[1],ze=Ve[2],Ue=Ve[3],_e=function(e){We(!0),null===ce||void 0===ce||ce(e,{})},Ke=function(e){We(!1),null===he||void 0===he||he(e,{})},Ze=(0,l.C8)(_,{value:Y}),Ye=(0,r.Z)(Ze,2),qe=Ye[0],Qe=Ye[1],Xe="date"===qe&&j?"datetime":qe,$e=Ce(_,qe,K,Z),Je=k&&function(e,t){k(Re(e),Re(t))},et=fe((0,n.Z)((0,n.Z)({},p),{},{onChange:Je}),Ae,ke,Le,Ge,[],v,He,Me,S),tt=(0,r.Z)(et,2)[1],it=M(Oe,S),st=(0,r.Z)(it,2),ot=st[0],nt=st[1],rt=h.useMemo((function(){return ot.some((function(e){return e}))}),[ot]),lt=ue(U,z,Oe,[qe],Me,Ue,g,!1,J,ee,y(null===j||void 0===j?void 0:j.defaultOpenValue),(function(e,t){if(te){var i=(0,n.Z)((0,n.Z)({},t),{},{mode:t.mode[0]});delete i.range,te(e[0],i)}}),O,B),at=(0,r.Z)(lt,2),dt=at[0],ct=at[1],ut=(0,l.zX)((function(e,t,i){if(Qe(t),q&&!1!==i){var s=e||Oe[Oe.length-1];q(s,t)}})),ht=function(){tt(Le()),De(!1,{force:!0})},pt=h.useState(null),gt=(0,r.Z)(pt,2),mt=gt[0],vt=gt[1],ft=h.useState(null),Ct=(0,r.Z)(ft,2),wt=Ct[0],yt=Ct[1],bt=h.useMemo((function(){var e=[wt].concat((0,o.Z)(Oe)).filter((function(e){return e}));return $?e:e.slice(0,1)}),[Oe,wt,$]),Rt=h.useMemo((function(){return!$&&wt?[wt]:Oe.filter((function(e){return e}))}),[Oe,wt,$]);h.useEffect((function(){Me||yt(null)}),[Me]);var Ft=re(pe),Et=function(e){var t=$?Ee(Le(),e):[e];tt(t)&&!$&&De(!1,{force:!0})},xt=P(me,we,Se),Pt=h.useMemo((function(){var e=(0,c.Z)(p,!1),t=(0,d.Z)(p,[].concat((0,o.Z)(Object.keys(e)),["onChange","onCalendarChange","style","className","onPanelChange"]));return(0,n.Z)((0,n.Z)({},t),{},{multiple:p.multiple})}),[p]),Mt=h.createElement(je,(0,s.Z)({},Pt,{showNow:$e,showTime:j,disabledDate:N,onFocus:function(e){De(!0),_e(e)},onBlur:Ke,picker:_,mode:qe,internalMode:Xe,onPanelChange:ut,format:C,value:Oe,isInvalid:S,onChange:null,onSelect:function(e){if(ze("panel"),!$||Xe===_){var t=$?Ee(Le(),e):[e];Ge(t),A||m||g!==Xe||ht()}},pickerValue:dt,defaultOpenValue:null===j||void 0===j?void 0:j.defaultOpenValue,onPickerValueChange:ct,hoverValue:bt,onHover:function(e){yt(e),vt("cell")},needConfirm:A,onSubmit:ht,onOk:Ne,presets:Ft,onPresetHover:function(e){yt(e),vt("preset")},onPresetSubmit:Et,onNow:function(e){Et(e)},cellRender:xt})),Dt=h.useMemo((function(){return{prefixCls:R,locale:z,generateConfig:U,button:ge.button,input:ge.input}}),[R,z,U,ge.button,ge.input]);return(0,a.Z)((function(){Me&&void 0!==Ue&&ut(null,_,!1)}),[Me,Ue,_]),(0,a.Z)((function(){var e=ze();Me||"input"!==e||(De(!1),ht()),Me||!m||A||"panel"!==e||ht()}),[Me]),h.createElement(f.Provider,{value:Dt},h.createElement(w,(0,s.Z)({},x(p),{popupElement:Mt,popupStyle:F.popup,popupClassName:E.popup,visible:Me,onClose:function(){De(!1)}}),h.createElement(St,(0,s.Z)({},p,{ref:be,suffixIcon:le,removeIcon:de,activeHelp:!!wt,allHelp:!!wt&&"preset"===mt,focused:He,onFocus:function(e){ze("input"),De(!0,{inherit:!0}),_e(e)},onBlur:function(e){De(!1),Ke(e)},onKeyDown:function(e,t){"Tab"===e.key&&ht(),null===L||void 0===L||L(e,t)},onSubmit:ht,value:Rt,maskFormat:C,onChange:function(e){Ge(e)},onInputChange:function(){ze("input")},internalPicker:g,format:v,inputReadOnly:se,disabled:G,open:Me,onOpenChange:De,onClick:function(e){G||be.current.nativeElement.contains(document.activeElement)||be.current.focus(),De(!0),null===ye||void 0===ye||ye(e)},onClear:function(){tt(null),De(!1,{force:!0})},invalid:rt,onInvalid:function(e){nt(e,0)}}))))}const bt=h.forwardRef(yt)},12897:(e,t,i)=>{"use strict";var s=i(57435);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=Object.prototype.hasOwnProperty,r=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,l={},a={};function d(e){return!!n.call(a,e)||!n.call(l,e)&&(r.test(e)?a[e]=!0:(l[e]=!0,!1))}function c(e,t,i,s,o,n,r){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=s,this.attributeNamespace=o,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=n,this.removeEmptyString=r}var u={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){u[e]=new c(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];u[t]=new c(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){u[e]=new c(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){u[e]=new c(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){u[e]=new c(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){u[e]=new c(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){u[e]=new c(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){u[e]=new c(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){u[e]=new c(e,5,!1,e.toLowerCase(),null,!1,!1)}));var h=/[\-:]([a-z])/g;function p(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(h,p);u[t]=new c(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(h,p);u[t]=new c(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(h,p);u[t]=new c(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){u[e]=new c(e,1,!1,e.toLowerCase(),null,!1,!1)})),u.xlinkHref=new c("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){u[e]=new c(e,1,!1,e.toLowerCase(),null,!0,!0)}));var g={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},m=["Webkit","ms","Moz","O"];Object.keys(g).forEach((function(e){m.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),g[t]=g[e]}))}));var v=/["'&<>]/;function f(e){if("boolean"===typeof e||"number"===typeof e)return""+e;e=""+e;var t=v.exec(e);if(t){var i,s="",o=0;for(i=t.index;i<e.length;i++){switch(e.charCodeAt(i)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}o!==i&&(s+=e.substring(o,i)),o=i+1,s+=t}e=o!==i?s+e.substring(o,i):s}return e}var C=/([A-Z])/g,w=/^ms-/,S=Array.isArray;function y(e,t){return{insertionMode:e,selectedValue:t}}var b=new Map;function R(e,t,i){if("object"!==typeof i)throw Error(o(62));for(var s in t=!0,i)if(n.call(i,s)){var r=i[s];if(null!=r&&"boolean"!==typeof r&&""!==r){if(0===s.indexOf("--")){var l=f(s);r=f((""+r).trim())}else{l=s;var a=b.get(l);void 0!==a||(a=f(l.replace(C,"-$1").toLowerCase().replace(w,"-ms-")),b.set(l,a)),l=a,r="number"===typeof r?0===r||n.call(g,s)?""+r:r+"px":f((""+r).trim())}t?(t=!1,e.push(' style="',l,":",r)):e.push(";",l,":",r)}}t||e.push('"')}function F(e,t,i,s){switch(i){case"style":return void R(e,t,s);case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<i.length)||"o"!==i[0]&&"O"!==i[0]||"n"!==i[1]&&"N"!==i[1])if(null!==(t=u.hasOwnProperty(i)?u[i]:null)){switch(typeof s){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(i=t.attributeName,t.type){case 3:s&&e.push(" ",i,'=""');break;case 4:!0===s?e.push(" ",i,'=""'):!1!==s&&e.push(" ",i,'="',f(s),'"');break;case 5:isNaN(s)||e.push(" ",i,'="',f(s),'"');break;case 6:!isNaN(s)&&1<=s&&e.push(" ",i,'="',f(s),'"');break;default:t.sanitizeURL&&(s=""+s),e.push(" ",i,'="',f(s),'"')}}else if(d(i)){switch(typeof s){case"function":case"symbol":return;case"boolean":if("data-"!==(t=i.toLowerCase().slice(0,5))&&"aria-"!==t)return}e.push(" ",i,'="',f(s),'"')}}function E(e,t,i){if(null!=t){if(null!=i)throw Error(o(60));if("object"!==typeof t||!("__html"in t))throw Error(o(61));null!==(t=t.__html)&&void 0!==t&&e.push(""+t)}}function x(e,t,i,s){e.push(D(i));var o,r=i=null;for(o in t)if(n.call(t,o)){var l=t[o];if(null!=l)switch(o){case"children":i=l;break;case"dangerouslySetInnerHTML":r=l;break;default:F(e,s,o,l)}}return e.push(">"),E(e,r,i),"string"===typeof i?(e.push(f(i)),null):i}var P=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,M=new Map;function D(e){var t=M.get(e);if(void 0===t){if(!P.test(e))throw Error(o(65,e));t="<"+e,M.set(e,t)}return t}function I(e,t,i,r,l){switch(t){case"select":e.push(D("select"));var a=null,c=null;for(g in i)if(n.call(i,g)){var u=i[g];if(null!=u)switch(g){case"children":a=u;break;case"dangerouslySetInnerHTML":c=u;break;case"defaultValue":case"value":break;default:F(e,r,g,u)}}return e.push(">"),E(e,c,a),a;case"option":c=l.selectedValue,e.push(D("option"));var h=u=null,p=null,g=null;for(a in i)if(n.call(i,a)){var m=i[a];if(null!=m)switch(a){case"children":u=m;break;case"selected":p=m;break;case"dangerouslySetInnerHTML":g=m;break;case"value":h=m;default:F(e,r,a,m)}}if(null!=c)if(i=null!==h?""+h:function(e){var t="";return s.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(u),S(c)){for(r=0;r<c.length;r++)if(""+c[r]===i){e.push(' selected=""');break}}else""+c===i&&e.push(' selected=""');else p&&e.push(' selected=""');return e.push(">"),E(e,g,u),u;case"textarea":for(u in e.push(D("textarea")),g=c=a=null,i)if(n.call(i,u)&&null!=(h=i[u]))switch(u){case"children":g=h;break;case"value":a=h;break;case"defaultValue":c=h;break;case"dangerouslySetInnerHTML":throw Error(o(91));default:F(e,r,u,h)}if(null===a&&null!==c&&(a=c),e.push(">"),null!=g){if(null!=a)throw Error(o(92));if(S(g)&&1<g.length)throw Error(o(93));a=""+g}return"string"===typeof a&&"\n"===a[0]&&e.push("\n"),null!==a&&e.push(f(""+a)),null;case"input":for(c in e.push(D("input")),h=g=u=a=null,i)if(n.call(i,c)&&null!=(p=i[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(o(399,"input"));case"defaultChecked":h=p;break;case"defaultValue":u=p;break;case"checked":g=p;break;case"value":a=p;break;default:F(e,r,c,p)}return null!==g?F(e,r,"checked",g):null!==h&&F(e,r,"checked",h),null!==a?F(e,r,"value",a):null!==u&&F(e,r,"value",u),e.push("/>"),null;case"menuitem":for(var v in e.push(D("menuitem")),i)if(n.call(i,v)&&null!=(a=i[v]))switch(v){case"children":case"dangerouslySetInnerHTML":throw Error(o(400));default:F(e,r,v,a)}return e.push(">"),null;case"title":for(m in e.push(D("title")),a=null,i)if(n.call(i,m)&&null!=(c=i[m]))switch(m){case"children":a=c;break;case"dangerouslySetInnerHTML":throw Error(o(434));default:F(e,r,m,c)}return e.push(">"),a;case"listing":case"pre":for(h in e.push(D(t)),c=a=null,i)if(n.call(i,h)&&null!=(u=i[h]))switch(h){case"children":a=u;break;case"dangerouslySetInnerHTML":c=u;break;default:F(e,r,h,u)}if(e.push(">"),null!=c){if(null!=a)throw Error(o(60));if("object"!==typeof c||!("__html"in c))throw Error(o(61));null!==(i=c.__html)&&void 0!==i&&("string"===typeof i&&0<i.length&&"\n"===i[0]?e.push("\n",i):e.push(""+i))}return"string"===typeof a&&"\n"===a[0]&&e.push("\n"),a;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":for(var C in e.push(D(t)),i)if(n.call(i,C)&&null!=(a=i[C]))switch(C){case"children":case"dangerouslySetInnerHTML":throw Error(o(399,t));default:F(e,r,C,a)}return e.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return x(e,i,t,r);case"html":return 0===l.insertionMode&&e.push("<!DOCTYPE html>"),x(e,i,t,r);default:if(-1===t.indexOf("-")&&"string"!==typeof i.is)return x(e,i,t,r);for(p in e.push(D(t)),c=a=null,i)if(n.call(i,p)&&null!=(u=i[p]))switch(p){case"children":a=u;break;case"dangerouslySetInnerHTML":c=u;break;case"style":R(e,r,u);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:d(p)&&"function"!==typeof u&&"symbol"!==typeof u&&e.push(" ",p,'="',f(u),'"')}return e.push(">"),E(e,c,a),a}}function T(e,t,i){if(e.push('\x3c!--$?--\x3e<template id="'),null===i)throw Error(o(395));return e.push(i),e.push('"></template>')}var A=/[<\u2028\u2029]/g;function k(e){return JSON.stringify(e).replace(A,(function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}}))}function L(e,t,i,s){return i.generateStaticMarkup?(e.push(f(t)),!1):(""===t?e=s:(s&&e.push("\x3c!-- --\x3e"),e.push(f(t)),e=!0),e)}var G=Object.assign,N=Symbol.for("react.element"),O=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),W=Symbol.for("react.provider"),z=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),Y=Symbol.for("react.scope"),q=Symbol.for("react.debug_trace_mode"),Q=Symbol.for("react.legacy_hidden"),X=Symbol.for("react.default_value"),$=Symbol.iterator;function J(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case B:return"Fragment";case O:return"Portal";case H:return"Profiler";case V:return"StrictMode";case _:return"Suspense";case K:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case z:return(e.displayName||"Context")+".Consumer";case W:return(e._context.displayName||"Context")+".Provider";case U:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case Z:return null!==(t=e.displayName||null)?t:J(e.type)||"Memo";case j:t=e._payload,e=e._init;try{return J(e(t))}catch(i){}}return null}var ee={};function te(e,t){if(!(e=e.contextTypes))return ee;var i,s={};for(i in e)s[i]=t[i];return s}var ie=null;function se(e,t){if(e!==t){e.context._currentValue2=e.parentValue,e=e.parent;var i=t.parent;if(null===e){if(null!==i)throw Error(o(401))}else{if(null===i)throw Error(o(401));se(e,i)}t.context._currentValue2=t.value}}function oe(e){e.context._currentValue2=e.parentValue,null!==(e=e.parent)&&oe(e)}function ne(e){var t=e.parent;null!==t&&ne(t),e.context._currentValue2=e.value}function re(e,t){if(e.context._currentValue2=e.parentValue,null===(e=e.parent))throw Error(o(402));e.depth===t.depth?se(e,t):re(e,t)}function le(e,t){var i=t.parent;if(null===i)throw Error(o(402));e.depth===i.depth?se(e,i):le(e,i),t.context._currentValue2=t.value}function ae(e){var t=ie;t!==e&&(null===t?ne(e):null===e?oe(t):t.depth===e.depth?se(t,e):t.depth>e.depth?re(t,e):le(t,e),ie=e)}var de={isMounted:function(){return!1},enqueueSetState:function(e,t){null!==(e=e._reactInternals).queue&&e.queue.push(t)},enqueueReplaceState:function(e,t){(e=e._reactInternals).replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function ce(e,t,i,s){var o=void 0!==e.state?e.state:null;e.updater=de,e.props=i,e.state=o;var n={queue:[],replace:!1};e._reactInternals=n;var r=t.contextType;if(e.context="object"===typeof r&&null!==r?r._currentValue2:s,"function"===typeof(r=t.getDerivedStateFromProps)&&(o=null===(r=r(i,o))||void 0===r?o:G({},o,r),e.state=o),"function"!==typeof t.getDerivedStateFromProps&&"function"!==typeof e.getSnapshotBeforeUpdate&&("function"===typeof e.UNSAFE_componentWillMount||"function"===typeof e.componentWillMount))if(t=e.state,"function"===typeof e.componentWillMount&&e.componentWillMount(),"function"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),t!==e.state&&de.enqueueReplaceState(e,e.state,null),null!==n.queue&&0<n.queue.length)if(t=n.queue,r=n.replace,n.queue=null,n.replace=!1,r&&1===t.length)e.state=t[0];else{for(n=r?t[0]:e.state,o=!0,r=r?1:0;r<t.length;r++){var l=t[r];null!=(l="function"===typeof l?l.call(e,n,i,s):l)&&(o?(o=!1,n=G({},n,l)):G(n,l))}e.state=n}else n.queue=null}var ue={id:1,overflow:""};function he(e,t,i){var s=e.id;e=e.overflow;var o=32-pe(s)-1;s&=~(1<<o),i+=1;var n=32-pe(t)+o;if(30<n){var r=o-o%5;return n=(s&(1<<r)-1).toString(32),s>>=r,o-=r,{id:1<<32-pe(t)+o|i<<o|s,overflow:n+e}}return{id:1<<n|i<<o|s,overflow:e}}var pe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ge(e)/me|0)|0},ge=Math.log,me=Math.LN2;var ve="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},fe=null,Ce=null,we=null,Se=null,ye=!1,be=!1,Re=0,Fe=null,Ee=0;function xe(){if(null===fe)throw Error(o(321));return fe}function Pe(){if(0<Ee)throw Error(o(312));return{memoizedState:null,queue:null,next:null}}function Me(){return null===Se?null===we?(ye=!1,we=Se=Pe()):(ye=!0,Se=we):null===Se.next?(ye=!1,Se=Se.next=Pe()):(ye=!0,Se=Se.next),Se}function De(){Ce=fe=null,be=!1,we=null,Ee=0,Se=Fe=null}function Ie(e,t){return"function"===typeof t?t(e):t}function Te(e,t,i){if(fe=xe(),Se=Me(),ye){var s=Se.queue;if(t=s.dispatch,null!==Fe&&void 0!==(i=Fe.get(s))){Fe.delete(s),s=Se.memoizedState;do{s=e(s,i.action),i=i.next}while(null!==i);return Se.memoizedState=s,[s,t]}return[Se.memoizedState,t]}return e=e===Ie?"function"===typeof t?t():t:void 0!==i?i(t):t,Se.memoizedState=e,e=(e=Se.queue={last:null,dispatch:null}).dispatch=ke.bind(null,fe,e),[Se.memoizedState,e]}function Ae(e,t){if(fe=xe(),t=void 0===t?null:t,null!==(Se=Me())){var i=Se.memoizedState;if(null!==i&&null!==t){var s=i[1];e:if(null===s)s=!1;else{for(var o=0;o<s.length&&o<t.length;o++)if(!ve(t[o],s[o])){s=!1;break e}s=!0}if(s)return i[0]}}return e=e(),Se.memoizedState=[e,t],e}function ke(e,t,i){if(25<=Ee)throw Error(o(301));if(e===fe)if(be=!0,e={action:i,next:null},null===Fe&&(Fe=new Map),void 0===(i=Fe.get(t)))Fe.set(t,e);else{for(t=i;null!==t.next;)t=t.next;t.next=e}}function Le(){throw Error(o(394))}function Ge(){}var Ne={readContext:function(e){return e._currentValue2},useContext:function(e){return xe(),e._currentValue2},useMemo:Ae,useReducer:Te,useRef:function(e){fe=xe();var t=(Se=Me()).memoizedState;return null===t?(e={current:e},Se.memoizedState=e):t},useState:function(e){return Te(Ie,e)},useInsertionEffect:Ge,useLayoutEffect:function(){},useCallback:function(e,t){return Ae((function(){return e}),t)},useImperativeHandle:Ge,useEffect:Ge,useDebugValue:Ge,useDeferredValue:function(e){return xe(),e},useTransition:function(){return xe(),[!1,Le]},useId:function(){var e=Ce.treeContext,t=e.overflow;e=((e=e.id)&~(1<<32-pe(e)-1)).toString(32)+t;var i=Oe;if(null===i)throw Error(o(404));return t=Re++,e=":"+i.idPrefix+"R"+e,0<t&&(e+="H"+t.toString(32)),e+":"},useMutableSource:function(e,t){return xe(),t(e._source)},useSyncExternalStore:function(e,t,i){if(void 0===i)throw Error(o(407));return i()}},Oe=null,Be=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function Ve(e){return console.error(e),null}function He(){}function We(e,t,i,s,o,n,r,l){e.allPendingTasks++,null===i?e.pendingRootTasks++:i.pendingTasks++;var a={node:t,ping:function(){var t=e.pingedTasks;t.push(a),1===t.length&&it(e)},blockedBoundary:i,blockedSegment:s,abortSet:o,legacyContext:n,context:r,treeContext:l};return o.add(a),a}function ze(e,t,i,s,o,n){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:s,boundary:i,lastPushedText:o,textEmbedded:n}}function Ue(e,t){if(null!=(e=e.onError(t))&&"string"!==typeof e)throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof e+'" instead');return e}function _e(e,t){var i=e.onShellError;i(t),(i=e.onFatalError)(t),null!==e.destination?(e.status=2,e.destination.destroy(t)):(e.status=1,e.fatalError=t)}function Ke(e,t,i,s,o){for(fe={},Ce=t,Re=0,e=i(s,o);be;)be=!1,Re=0,Ee+=1,Se=null,e=i(s,o);return De(),e}function Ze(e,t,i,s){var n=i.render(),r=s.childContextTypes;if(null!==r&&void 0!==r){var l=t.legacyContext;if("function"!==typeof i.getChildContext)s=l;else{for(var a in i=i.getChildContext())if(!(a in r))throw Error(o(108,J(s)||"Unknown",a));s=G({},l,i)}t.legacyContext=s,qe(e,t,n),t.legacyContext=l}else qe(e,t,n)}function je(e,t){if(e&&e.defaultProps){for(var i in t=G({},t),e=e.defaultProps)void 0===t[i]&&(t[i]=e[i]);return t}return t}function Ye(e,t,i,s,n){if("function"===typeof i)if(i.prototype&&i.prototype.isReactComponent){n=te(i,t.legacyContext);var r=i.contextType;ce(r=new i(s,"object"===typeof r&&null!==r?r._currentValue2:n),i,s,n),Ze(e,t,r,i)}else{n=Ke(e,t,i,s,r=te(i,t.legacyContext));var l=0!==Re;if("object"===typeof n&&null!==n&&"function"===typeof n.render&&void 0===n.$$typeof)ce(n,i,s,r),Ze(e,t,n,i);else if(l){s=t.treeContext,t.treeContext=he(s,1,0);try{qe(e,t,n)}finally{t.treeContext=s}}else qe(e,t,n)}else{if("string"!==typeof i){switch(i){case Q:case q:case V:case H:case B:case K:return void qe(e,t,s.children);case Y:throw Error(o(343));case _:e:{i=t.blockedBoundary,n=t.blockedSegment,r=s.fallback,s=s.children;var a={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:l=new Set,errorDigest:null},d=ze(0,n.chunks.length,a,n.formatContext,!1,!1);n.children.push(d),n.lastPushedText=!1;var c=ze(0,0,null,n.formatContext,!1,!1);c.parentFlushed=!0,t.blockedBoundary=a,t.blockedSegment=c;try{if(Xe(e,t,s),e.responseState.generateStaticMarkup||c.lastPushedText&&c.textEmbedded&&c.chunks.push("\x3c!-- --\x3e"),c.status=1,et(a,c),0===a.pendingTasks)break e}catch(u){c.status=4,a.forceClientRender=!0,a.errorDigest=Ue(e,u)}finally{t.blockedBoundary=i,t.blockedSegment=n}t=We(e,r,i,d,l,t.legacyContext,t.context,t.treeContext),e.pingedTasks.push(t)}return}if("object"===typeof i&&null!==i)switch(i.$$typeof){case U:if(s=Ke(e,t,i.render,s,n),0!==Re){i=t.treeContext,t.treeContext=he(i,1,0);try{qe(e,t,s)}finally{t.treeContext=i}}else qe(e,t,s);return;case Z:return void Ye(e,t,i=i.type,s=je(i,s),n);case W:if(n=s.children,i=i._context,s=s.value,r=i._currentValue2,i._currentValue2=s,ie=s={parent:l=ie,depth:null===l?0:l.depth+1,context:i,parentValue:r,value:s},t.context=s,qe(e,t,n),null===(e=ie))throw Error(o(403));return s=e.parentValue,e.context._currentValue2=s===X?e.context._defaultValue:s,e=ie=e.parent,void(t.context=e);case z:return void qe(e,t,s=(s=s.children)(i._currentValue2));case j:return void Ye(e,t,i=(n=i._init)(i._payload),s=je(i,s),void 0)}throw Error(o(130,null==i?i:typeof i,""))}switch(r=I((n=t.blockedSegment).chunks,i,s,e.responseState,n.formatContext),n.lastPushedText=!1,l=n.formatContext,n.formatContext=function(e,t,i){switch(t){case"select":return y(1,null!=i.value?i.value:i.defaultValue);case"svg":return y(2,null);case"math":return y(3,null);case"foreignObject":return y(1,null);case"table":return y(4,null);case"thead":case"tbody":case"tfoot":return y(5,null);case"colgroup":return y(7,null);case"tr":return y(6,null)}return 4<=e.insertionMode||0===e.insertionMode?y(1,null):e}(l,i,s),Xe(e,t,r),n.formatContext=l,i){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:n.chunks.push("</",i,">")}n.lastPushedText=!1}}function qe(e,t,i){if(t.node=i,"object"===typeof i&&null!==i){switch(i.$$typeof){case N:return void Ye(e,t,i.type,i.props,i.ref);case O:throw Error(o(257));case j:var s=i._init;return void qe(e,t,i=s(i._payload))}if(S(i))return void Qe(e,t,i);if(null===i||"object"!==typeof i?s=null:s="function"===typeof(s=$&&i[$]||i["@@iterator"])?s:null,s&&(s=s.call(i))){if(!(i=s.next()).done){var n=[];do{n.push(i.value),i=s.next()}while(!i.done);Qe(e,t,n)}return}throw e=Object.prototype.toString.call(i),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(i).join(", ")+"}":e))}"string"===typeof i?(s=t.blockedSegment).lastPushedText=L(t.blockedSegment.chunks,i,e.responseState,s.lastPushedText):"number"===typeof i&&((s=t.blockedSegment).lastPushedText=L(t.blockedSegment.chunks,""+i,e.responseState,s.lastPushedText))}function Qe(e,t,i){for(var s=i.length,o=0;o<s;o++){var n=t.treeContext;t.treeContext=he(n,s,o);try{Xe(e,t,i[o])}finally{t.treeContext=n}}}function Xe(e,t,i){var s=t.blockedSegment.formatContext,o=t.legacyContext,n=t.context;try{return qe(e,t,i)}catch(a){if(De(),"object"!==typeof a||null===a||"function"!==typeof a.then)throw t.blockedSegment.formatContext=s,t.legacyContext=o,t.context=n,ae(n),a;i=a;var r=t.blockedSegment,l=ze(0,r.chunks.length,null,r.formatContext,r.lastPushedText,!0);r.children.push(l),r.lastPushedText=!1,e=We(e,t.node,t.blockedBoundary,l,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,i.then(e,e),t.blockedSegment.formatContext=s,t.legacyContext=o,t.context=n,ae(n)}}function $e(e){var t=e.blockedBoundary;(e=e.blockedSegment).status=3,tt(this,t,e)}function Je(e,t,i){var s=e.blockedBoundary;e.blockedSegment.status=3,null===s?(t.allPendingTasks--,2!==t.status&&(t.status=2,null!==t.destination&&t.destination.push(null))):(s.pendingTasks--,s.forceClientRender||(s.forceClientRender=!0,e=void 0===i?Error(o(432)):i,s.errorDigest=t.onError(e),s.parentFlushed&&t.clientRenderedBoundaries.push(s)),s.fallbackAbortableTasks.forEach((function(e){return Je(e,t,i)})),s.fallbackAbortableTasks.clear(),t.allPendingTasks--,0===t.allPendingTasks&&(s=t.onAllReady)())}function et(e,t){if(0===t.chunks.length&&1===t.children.length&&null===t.children[0].boundary){var i=t.children[0];i.id=t.id,i.parentFlushed=!0,1===i.status&&et(e,i)}else e.completedSegments.push(t)}function tt(e,t,i){if(null===t){if(i.parentFlushed){if(null!==e.completedRootSegment)throw Error(o(389));e.completedRootSegment=i}e.pendingRootTasks--,0===e.pendingRootTasks&&(e.onShellError=He,(t=e.onShellReady)())}else t.pendingTasks--,t.forceClientRender||(0===t.pendingTasks?(i.parentFlushed&&1===i.status&&et(t,i),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach($e,e),t.fallbackAbortableTasks.clear()):i.parentFlushed&&1===i.status&&(et(t,i),1===t.completedSegments.length&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--,0===e.allPendingTasks&&(e=e.onAllReady)()}function it(e){if(2!==e.status){var t=ie,i=Be.current;Be.current=Ne;var s=Oe;Oe=e.responseState;try{var o,n=e.pingedTasks;for(o=0;o<n.length;o++){var r=n[o],l=e,a=r.blockedSegment;if(0===a.status){ae(r.context);try{qe(l,r,r.node),l.responseState.generateStaticMarkup||a.lastPushedText&&a.textEmbedded&&a.chunks.push("\x3c!-- --\x3e"),r.abortSet.delete(r),a.status=1,tt(l,r.blockedBoundary,a)}catch(p){if(De(),"object"===typeof p&&null!==p&&"function"===typeof p.then){var d=r.ping;p.then(d,d)}else{r.abortSet.delete(r),a.status=4;var c=r.blockedBoundary,u=p,h=Ue(l,u);if(null===c?_e(l,u):(c.pendingTasks--,c.forceClientRender||(c.forceClientRender=!0,c.errorDigest=h,c.parentFlushed&&l.clientRenderedBoundaries.push(c))),l.allPendingTasks--,0===l.allPendingTasks)(0,l.onAllReady)()}}}}n.splice(0,o),null!==e.destination&&at(e,e.destination)}catch(p){Ue(e,p),_e(e,p)}finally{Oe=s,Be.current=i,i===Ne&&ae(t)}}}function st(e,t,i){switch(i.parentFlushed=!0,i.status){case 0:var s=i.id=e.nextSegmentId++;return i.lastPushedText=!1,i.textEmbedded=!1,e=e.responseState,t.push('<template id="'),t.push(e.placeholderPrefix),e=s.toString(16),t.push(e),t.push('"></template>');case 1:i.status=2;var n=!0;s=i.chunks;var r=0;i=i.children;for(var l=0;l<i.length;l++){for(n=i[l];r<n.index;r++)t.push(s[r]);n=ot(e,t,n)}for(;r<s.length-1;r++)t.push(s[r]);return r<s.length&&(n=t.push(s[r])),n;default:throw Error(o(390))}}function ot(e,t,i){var s=i.boundary;if(null===s)return st(e,t,i);if(s.parentFlushed=!0,s.forceClientRender)return e.responseState.generateStaticMarkup||(s=s.errorDigest,t.push("\x3c!--$!--\x3e"),t.push("<template"),s&&(t.push(' data-dgst="'),s=f(s),t.push(s),t.push('"')),t.push("></template>")),st(e,t,i),e=!!e.responseState.generateStaticMarkup||t.push("\x3c!--/$--\x3e");if(0<s.pendingTasks){s.rootSegmentID=e.nextSegmentId++,0<s.completedSegments.length&&e.partialBoundaries.push(s);var n=e.responseState,r=n.nextSuspenseID++;return n=n.boundaryPrefix+r.toString(16),s=s.id=n,T(t,e.responseState,s),st(e,t,i),t.push("\x3c!--/$--\x3e")}if(s.byteSize>e.progressiveChunkSize)return s.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(s),T(t,e.responseState,s.id),st(e,t,i),t.push("\x3c!--/$--\x3e");if(e.responseState.generateStaticMarkup||t.push("\x3c!--$--\x3e"),1!==(i=s.completedSegments).length)throw Error(o(391));return ot(e,t,i[0]),e=!!e.responseState.generateStaticMarkup||t.push("\x3c!--/$--\x3e")}function nt(e,t,i){return function(e,t,i,s){switch(i.insertionMode){case 0:case 1:return e.push('<div hidden id="'),e.push(t.segmentPrefix),t=s.toString(16),e.push(t),e.push('">');case 2:return e.push('<svg aria-hidden="true" style="display:none" id="'),e.push(t.segmentPrefix),t=s.toString(16),e.push(t),e.push('">');case 3:return e.push('<math aria-hidden="true" style="display:none" id="'),e.push(t.segmentPrefix),t=s.toString(16),e.push(t),e.push('">');case 4:return e.push('<table hidden id="'),e.push(t.segmentPrefix),t=s.toString(16),e.push(t),e.push('">');case 5:return e.push('<table hidden><tbody id="'),e.push(t.segmentPrefix),t=s.toString(16),e.push(t),e.push('">');case 6:return e.push('<table hidden><tr id="'),e.push(t.segmentPrefix),t=s.toString(16),e.push(t),e.push('">');case 7:return e.push('<table hidden><colgroup id="'),e.push(t.segmentPrefix),t=s.toString(16),e.push(t),e.push('">');default:throw Error(o(397))}}(t,e.responseState,i.formatContext,i.id),ot(e,t,i),function(e,t){switch(t.insertionMode){case 0:case 1:return e.push("</div>");case 2:return e.push("</svg>");case 3:return e.push("</math>");case 4:return e.push("</table>");case 5:return e.push("</tbody></table>");case 6:return e.push("</tr></table>");case 7:return e.push("</colgroup></table>");default:throw Error(o(397))}}(t,i.formatContext)}function rt(e,t,i){for(var s=i.completedSegments,n=0;n<s.length;n++)lt(e,t,i,s[n]);if(s.length=0,e=e.responseState,s=i.id,i=i.rootSegmentID,t.push(e.startInlineScript),e.sentCompleteBoundaryFunction?t.push('$RC("'):(e.sentCompleteBoundaryFunction=!0,t.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),null===s)throw Error(o(395));return i=i.toString(16),t.push(s),t.push('","'),t.push(e.segmentPrefix),t.push(i),t.push('")<\/script>')}function lt(e,t,i,s){if(2===s.status)return!0;var n=s.id;if(-1===n){if(-1===(s.id=i.rootSegmentID))throw Error(o(392));return nt(e,t,s)}return nt(e,t,s),e=e.responseState,t.push(e.startInlineScript),e.sentCompleteSegmentFunction?t.push('$RS("'):(e.sentCompleteSegmentFunction=!0,t.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),t.push(e.segmentPrefix),n=n.toString(16),t.push(n),t.push('","'),t.push(e.placeholderPrefix),t.push(n),t.push('")<\/script>')}function at(e,t){try{var i=e.completedRootSegment;if(null!==i&&0===e.pendingRootTasks){ot(e,t,i),e.completedRootSegment=null;var s=e.responseState.bootstrapChunks;for(i=0;i<s.length-1;i++)t.push(s[i]);i<s.length&&t.push(s[i])}var n,r=e.clientRenderedBoundaries;for(n=0;n<r.length;n++){var l=r[n];s=t;var a=e.responseState,d=l.id,c=l.errorDigest,u=l.errorMessage,h=l.errorComponentStack;if(s.push(a.startInlineScript),a.sentClientRenderFunction?s.push('$RX("'):(a.sentClientRenderFunction=!0,s.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),null===d)throw Error(o(395));if(s.push(d),s.push('"'),c||u||h){s.push(",");var p=k(c||"");s.push(p)}if(u||h){s.push(",");var g=k(u||"");s.push(g)}if(h){s.push(",");var m=k(h);s.push(m)}if(!s.push(")<\/script>"))return e.destination=null,n++,void r.splice(0,n)}r.splice(0,n);var v=e.completedBoundaries;for(n=0;n<v.length;n++)if(!rt(e,t,v[n]))return e.destination=null,n++,void v.splice(0,n);v.splice(0,n);var f=e.partialBoundaries;for(n=0;n<f.length;n++){var C=f[n];e:{r=e,l=t;var w=C.completedSegments;for(a=0;a<w.length;a++)if(!lt(r,l,C,w[a])){a++,w.splice(0,a);var S=!1;break e}w.splice(0,a),S=!0}if(!S)return e.destination=null,n++,void f.splice(0,n)}f.splice(0,n);var y=e.completedBoundaries;for(n=0;n<y.length;n++)if(!rt(e,t,y[n]))return e.destination=null,n++,void y.splice(0,n);y.splice(0,n)}finally{0===e.allPendingTasks&&0===e.pingedTasks.length&&0===e.clientRenderedBoundaries.length&&0===e.completedBoundaries.length&&t.push(null)}}function dt(e,t){try{var i=e.abortableTasks;i.forEach((function(i){return Je(i,e,t)})),i.clear(),null!==e.destination&&at(e,e.destination)}catch(s){Ue(e,s),_e(e,s)}}function ct(){}function ut(e,t,i,s){var n=!1,r=null,l="",a={push:function(e){return null!==e&&(l+=e),!0},destroy:function(e){n=!0,r=e}},d=!1;if(e=function(e,t,i,s,o,n,r,l,a){var d=[],c=new Set;return(i=ze(t={destination:null,responseState:t,progressiveChunkSize:void 0===s?12800:s,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:c,pingedTasks:d,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:void 0===o?Ve:o,onAllReady:void 0===n?He:n,onShellReady:void 0===r?He:r,onShellError:void 0===l?He:l,onFatalError:void 0===a?He:a},0,null,i,!1,!1)).parentFlushed=!0,e=We(t,e,null,i,c,ee,null,ue),d.push(e),t}(e,function(e,t){return{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:(t=void 0===t?"":t)+"P:",segmentPrefix:t+"S:",boundaryPrefix:t+"B:",idPrefix:t,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:e}}(i,t?t.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,ct,void 0,(function(){d=!0}),void 0,void 0),it(e),dt(e,s),1===e.status)e.status=2,a.destroy(e.fatalError);else if(2!==e.status&&null===e.destination){e.destination=a;try{at(e,a)}catch(c){Ue(e,c),_e(e,c)}}if(n)throw r;if(!d)throw Error(o(426));return l}t.renderToNodeStream=function(){throw Error(o(207))},t.renderToStaticMarkup=function(e,t){return ut(e,t,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},t.renderToStaticNodeStream=function(){throw Error(o(208))},t.renderToString=function(e,t){return ut(e,t,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')},t.version="18.2.0"},19419:(e,t,i)=>{"use strict";var s=i(57435);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=null,r=0;function l(e,t){if(0!==t.length)if(512<t.length)0<r&&(e.enqueue(new Uint8Array(n.buffer,0,r)),n=new Uint8Array(512),r=0),e.enqueue(t);else{var i=n.length-r;i<t.length&&(0===i?e.enqueue(n):(n.set(t.subarray(0,i),r),e.enqueue(n),t=t.subarray(i)),n=new Uint8Array(512),r=0),n.set(t,r),r+=t.length}}function a(e,t){return l(e,t),!0}function d(e){n&&0<r&&(e.enqueue(new Uint8Array(n.buffer,0,r)),n=null,r=0)}var c=new TextEncoder;function u(e){return c.encode(e)}function h(e){return c.encode(e)}function p(e,t){"function"===typeof e.error?e.error(t):e.close()}var g=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},f={};function C(e){return!!g.call(f,e)||!g.call(v,e)&&(m.test(e)?f[e]=!0:(v[e]=!0,!1))}function w(e,t,i,s,o,n,r){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=s,this.attributeNamespace=o,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=n,this.removeEmptyString=r}var S={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){S[e]=new w(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];S[t]=new w(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){S[e]=new w(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){S[e]=new w(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){S[e]=new w(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){S[e]=new w(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){S[e]=new w(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){S[e]=new w(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){S[e]=new w(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,b);S[t]=new w(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,b);S[t]=new w(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,b);S[t]=new w(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){S[e]=new w(e,1,!1,e.toLowerCase(),null,!1,!1)})),S.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){S[e]=new w(e,1,!1,e.toLowerCase(),null,!0,!0)}));var R={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},F=["Webkit","ms","Moz","O"];Object.keys(R).forEach((function(e){F.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),R[t]=R[e]}))}));var E=/["'&<>]/;function x(e){if("boolean"===typeof e||"number"===typeof e)return""+e;e=""+e;var t=E.exec(e);if(t){var i,s="",o=0;for(i=t.index;i<e.length;i++){switch(e.charCodeAt(i)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}o!==i&&(s+=e.substring(o,i)),o=i+1,s+=t}e=o!==i?s+e.substring(o,i):s}return e}var P=/([A-Z])/g,M=/^ms-/,D=Array.isArray,I=h("<script>"),T=h("<\/script>"),A=h('<script src="'),k=h('<script type="module" src="'),L=h('" async=""><\/script>'),G=/(<\/|<)(s)(cript)/gi;function N(e,t,i,s){return t+("s"===i?"\\u0073":"\\u0053")+s}function O(e,t){return{insertionMode:e,selectedValue:t}}var B=h("\x3c!-- --\x3e");function V(e,t,i,s){return""===t?s:(s&&e.push(B),e.push(u(x(t))),!0)}var H=new Map,W=h(' style="'),z=h(":"),U=h(";");function _(e,t,i){if("object"!==typeof i)throw Error(o(62));for(var s in t=!0,i)if(g.call(i,s)){var n=i[s];if(null!=n&&"boolean"!==typeof n&&""!==n){if(0===s.indexOf("--")){var r=u(x(s));n=u(x((""+n).trim()))}else{r=s;var l=H.get(r);void 0!==l||(l=h(x(r.replace(P,"-$1").toLowerCase().replace(M,"-ms-"))),H.set(r,l)),r=l,n="number"===typeof n?0===n||g.call(R,s)?u(""+n):u(n+"px"):u(x((""+n).trim()))}t?(t=!1,e.push(W,r,z,n)):e.push(U,r,z,n)}}t||e.push(j)}var K=h(" "),Z=h('="'),j=h('"'),Y=h('=""');function q(e,t,i,s){switch(i){case"style":return void _(e,t,s);case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<i.length)||"o"!==i[0]&&"O"!==i[0]||"n"!==i[1]&&"N"!==i[1])if(null!==(t=S.hasOwnProperty(i)?S[i]:null)){switch(typeof s){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(i=u(t.attributeName),t.type){case 3:s&&e.push(K,i,Y);break;case 4:!0===s?e.push(K,i,Y):!1!==s&&e.push(K,i,Z,u(x(s)),j);break;case 5:isNaN(s)||e.push(K,i,Z,u(x(s)),j);break;case 6:!isNaN(s)&&1<=s&&e.push(K,i,Z,u(x(s)),j);break;default:t.sanitizeURL&&(s=""+s),e.push(K,i,Z,u(x(s)),j)}}else if(C(i)){switch(typeof s){case"function":case"symbol":return;case"boolean":if("data-"!==(t=i.toLowerCase().slice(0,5))&&"aria-"!==t)return}e.push(K,u(i),Z,u(x(s)),j)}}var Q=h(">"),X=h("/>");function $(e,t,i){if(null!=t){if(null!=i)throw Error(o(60));if("object"!==typeof t||!("__html"in t))throw Error(o(61));null!==(t=t.__html)&&void 0!==t&&e.push(u(""+t))}}var J=h(' selected=""');function ee(e,t,i,s){e.push(oe(i));var o,n=i=null;for(o in t)if(g.call(t,o)){var r=t[o];if(null!=r)switch(o){case"children":i=r;break;case"dangerouslySetInnerHTML":n=r;break;default:q(e,s,o,r)}}return e.push(Q),$(e,n,i),"string"===typeof i?(e.push(u(x(i))),null):i}var te=h("\n"),ie=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,se=new Map;function oe(e){var t=se.get(e);if(void 0===t){if(!ie.test(e))throw Error(o(65,e));t=h("<"+e),se.set(e,t)}return t}var ne=h("<!DOCTYPE html>");function re(e,t,i,n,r){switch(t){case"select":e.push(oe("select"));var l=null,a=null;for(p in i)if(g.call(i,p)){var d=i[p];if(null!=d)switch(p){case"children":l=d;break;case"dangerouslySetInnerHTML":a=d;break;case"defaultValue":case"value":break;default:q(e,n,p,d)}}return e.push(Q),$(e,a,l),l;case"option":a=r.selectedValue,e.push(oe("option"));var c=d=null,h=null,p=null;for(l in i)if(g.call(i,l)){var m=i[l];if(null!=m)switch(l){case"children":d=m;break;case"selected":h=m;break;case"dangerouslySetInnerHTML":p=m;break;case"value":c=m;default:q(e,n,l,m)}}if(null!=a)if(i=null!==c?""+c:function(e){var t="";return s.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(d),D(a)){for(n=0;n<a.length;n++)if(""+a[n]===i){e.push(J);break}}else""+a===i&&e.push(J);else h&&e.push(J);return e.push(Q),$(e,p,d),d;case"textarea":for(d in e.push(oe("textarea")),p=a=l=null,i)if(g.call(i,d)&&null!=(c=i[d]))switch(d){case"children":p=c;break;case"value":l=c;break;case"defaultValue":a=c;break;case"dangerouslySetInnerHTML":throw Error(o(91));default:q(e,n,d,c)}if(null===l&&null!==a&&(l=a),e.push(Q),null!=p){if(null!=l)throw Error(o(92));if(D(p)&&1<p.length)throw Error(o(93));l=""+p}return"string"===typeof l&&"\n"===l[0]&&e.push(te),null!==l&&e.push(u(x(""+l))),null;case"input":for(a in e.push(oe("input")),c=p=d=l=null,i)if(g.call(i,a)&&null!=(h=i[a]))switch(a){case"children":case"dangerouslySetInnerHTML":throw Error(o(399,"input"));case"defaultChecked":c=h;break;case"defaultValue":d=h;break;case"checked":p=h;break;case"value":l=h;break;default:q(e,n,a,h)}return null!==p?q(e,n,"checked",p):null!==c&&q(e,n,"checked",c),null!==l?q(e,n,"value",l):null!==d&&q(e,n,"value",d),e.push(X),null;case"menuitem":for(var v in e.push(oe("menuitem")),i)if(g.call(i,v)&&null!=(l=i[v]))switch(v){case"children":case"dangerouslySetInnerHTML":throw Error(o(400));default:q(e,n,v,l)}return e.push(Q),null;case"title":for(m in e.push(oe("title")),l=null,i)if(g.call(i,m)&&null!=(a=i[m]))switch(m){case"children":l=a;break;case"dangerouslySetInnerHTML":throw Error(o(434));default:q(e,n,m,a)}return e.push(Q),l;case"listing":case"pre":for(c in e.push(oe(t)),a=l=null,i)if(g.call(i,c)&&null!=(d=i[c]))switch(c){case"children":l=d;break;case"dangerouslySetInnerHTML":a=d;break;default:q(e,n,c,d)}if(e.push(Q),null!=a){if(null!=l)throw Error(o(60));if("object"!==typeof a||!("__html"in a))throw Error(o(61));null!==(i=a.__html)&&void 0!==i&&("string"===typeof i&&0<i.length&&"\n"===i[0]?e.push(te,u(i)):e.push(u(""+i)))}return"string"===typeof l&&"\n"===l[0]&&e.push(te),l;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":for(var f in e.push(oe(t)),i)if(g.call(i,f)&&null!=(l=i[f]))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(o(399,t));default:q(e,n,f,l)}return e.push(X),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return ee(e,i,t,n);case"html":return 0===r.insertionMode&&e.push(ne),ee(e,i,t,n);default:if(-1===t.indexOf("-")&&"string"!==typeof i.is)return ee(e,i,t,n);for(h in e.push(oe(t)),a=l=null,i)if(g.call(i,h)&&null!=(d=i[h]))switch(h){case"children":l=d;break;case"dangerouslySetInnerHTML":a=d;break;case"style":_(e,n,d);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:C(h)&&"function"!==typeof d&&"symbol"!==typeof d&&e.push(K,u(h),Z,u(x(d)),j)}return e.push(Q),$(e,a,l),l}}var le=h("</"),ae=h(">"),de=h('<template id="'),ce=h('"></template>'),ue=h("\x3c!--$--\x3e"),he=h('\x3c!--$?--\x3e<template id="'),pe=h('"></template>'),ge=h("\x3c!--$!--\x3e"),me=h("\x3c!--/$--\x3e"),ve=h("<template"),fe=h('"'),Ce=h(' data-dgst="');h(' data-msg="'),h(' data-stck="');var we=h("></template>");function Se(e,t,i){if(l(e,he),null===i)throw Error(o(395));return l(e,i),a(e,pe)}var ye=h('<div hidden id="'),be=h('">'),Re=h("</div>"),Fe=h('<svg aria-hidden="true" style="display:none" id="'),Ee=h('">'),xe=h("</svg>"),Pe=h('<math aria-hidden="true" style="display:none" id="'),Me=h('">'),De=h("</math>"),Ie=h('<table hidden id="'),Te=h('">'),Ae=h("</table>"),ke=h('<table hidden><tbody id="'),Le=h('">'),Ge=h("</tbody></table>"),Ne=h('<table hidden><tr id="'),Oe=h('">'),Be=h("</tr></table>"),Ve=h('<table hidden><colgroup id="'),He=h('">'),We=h("</colgroup></table>");var ze=h('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),Ue=h('$RS("'),_e=h('","'),Ke=h('")<\/script>'),Ze=h('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),je=h('$RC("'),Ye=h('","'),qe=h('")<\/script>'),Qe=h('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),Xe=h('$RX("'),$e=h('"'),Je=h(")<\/script>"),et=h(","),tt=/[<\u2028\u2029]/g;function it(e){return JSON.stringify(e).replace(tt,(function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}}))}var st=Object.assign,ot=Symbol.for("react.element"),nt=Symbol.for("react.portal"),rt=Symbol.for("react.fragment"),lt=Symbol.for("react.strict_mode"),at=Symbol.for("react.profiler"),dt=Symbol.for("react.provider"),ct=Symbol.for("react.context"),ut=Symbol.for("react.forward_ref"),ht=Symbol.for("react.suspense"),pt=Symbol.for("react.suspense_list"),gt=Symbol.for("react.memo"),mt=Symbol.for("react.lazy"),vt=Symbol.for("react.scope"),ft=Symbol.for("react.debug_trace_mode"),Ct=Symbol.for("react.legacy_hidden"),wt=Symbol.for("react.default_value"),St=Symbol.iterator;function yt(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case rt:return"Fragment";case nt:return"Portal";case at:return"Profiler";case lt:return"StrictMode";case ht:return"Suspense";case pt:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case ct:return(e.displayName||"Context")+".Consumer";case dt:return(e._context.displayName||"Context")+".Provider";case ut:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case gt:return null!==(t=e.displayName||null)?t:yt(e.type)||"Memo";case mt:t=e._payload,e=e._init;try{return yt(e(t))}catch(i){}}return null}var bt={};function Rt(e,t){if(!(e=e.contextTypes))return bt;var i,s={};for(i in e)s[i]=t[i];return s}var Ft=null;function Et(e,t){if(e!==t){e.context._currentValue=e.parentValue,e=e.parent;var i=t.parent;if(null===e){if(null!==i)throw Error(o(401))}else{if(null===i)throw Error(o(401));Et(e,i)}t.context._currentValue=t.value}}function xt(e){e.context._currentValue=e.parentValue,null!==(e=e.parent)&&xt(e)}function Pt(e){var t=e.parent;null!==t&&Pt(t),e.context._currentValue=e.value}function Mt(e,t){if(e.context._currentValue=e.parentValue,null===(e=e.parent))throw Error(o(402));e.depth===t.depth?Et(e,t):Mt(e,t)}function Dt(e,t){var i=t.parent;if(null===i)throw Error(o(402));e.depth===i.depth?Et(e,i):Dt(e,i),t.context._currentValue=t.value}function It(e){var t=Ft;t!==e&&(null===t?Pt(e):null===e?xt(t):t.depth===e.depth?Et(t,e):t.depth>e.depth?Mt(t,e):Dt(t,e),Ft=e)}var Tt={isMounted:function(){return!1},enqueueSetState:function(e,t){null!==(e=e._reactInternals).queue&&e.queue.push(t)},enqueueReplaceState:function(e,t){(e=e._reactInternals).replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function At(e,t,i,s){var o=void 0!==e.state?e.state:null;e.updater=Tt,e.props=i,e.state=o;var n={queue:[],replace:!1};e._reactInternals=n;var r=t.contextType;if(e.context="object"===typeof r&&null!==r?r._currentValue:s,"function"===typeof(r=t.getDerivedStateFromProps)&&(o=null===(r=r(i,o))||void 0===r?o:st({},o,r),e.state=o),"function"!==typeof t.getDerivedStateFromProps&&"function"!==typeof e.getSnapshotBeforeUpdate&&("function"===typeof e.UNSAFE_componentWillMount||"function"===typeof e.componentWillMount))if(t=e.state,"function"===typeof e.componentWillMount&&e.componentWillMount(),"function"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),t!==e.state&&Tt.enqueueReplaceState(e,e.state,null),null!==n.queue&&0<n.queue.length)if(t=n.queue,r=n.replace,n.queue=null,n.replace=!1,r&&1===t.length)e.state=t[0];else{for(n=r?t[0]:e.state,o=!0,r=r?1:0;r<t.length;r++){var l=t[r];null!=(l="function"===typeof l?l.call(e,n,i,s):l)&&(o?(o=!1,n=st({},n,l)):st(n,l))}e.state=n}else n.queue=null}var kt={id:1,overflow:""};function Lt(e,t,i){var s=e.id;e=e.overflow;var o=32-Gt(s)-1;s&=~(1<<o),i+=1;var n=32-Gt(t)+o;if(30<n){var r=o-o%5;return n=(s&(1<<r)-1).toString(32),s>>=r,o-=r,{id:1<<32-Gt(t)+o|i<<o|s,overflow:n+e}}return{id:1<<n|i<<o|s,overflow:e}}var Gt=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(Nt(e)/Ot|0)|0},Nt=Math.log,Ot=Math.LN2;var Bt="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Vt=null,Ht=null,Wt=null,zt=null,Ut=!1,_t=!1,Kt=0,Zt=null,jt=0;function Yt(){if(null===Vt)throw Error(o(321));return Vt}function qt(){if(0<jt)throw Error(o(312));return{memoizedState:null,queue:null,next:null}}function Qt(){return null===zt?null===Wt?(Ut=!1,Wt=zt=qt()):(Ut=!0,zt=Wt):null===zt.next?(Ut=!1,zt=zt.next=qt()):(Ut=!0,zt=zt.next),zt}function Xt(){Ht=Vt=null,_t=!1,Wt=null,jt=0,zt=Zt=null}function $t(e,t){return"function"===typeof t?t(e):t}function Jt(e,t,i){if(Vt=Yt(),zt=Qt(),Ut){var s=zt.queue;if(t=s.dispatch,null!==Zt&&void 0!==(i=Zt.get(s))){Zt.delete(s),s=zt.memoizedState;do{s=e(s,i.action),i=i.next}while(null!==i);return zt.memoizedState=s,[s,t]}return[zt.memoizedState,t]}return e=e===$t?"function"===typeof t?t():t:void 0!==i?i(t):t,zt.memoizedState=e,e=(e=zt.queue={last:null,dispatch:null}).dispatch=ti.bind(null,Vt,e),[zt.memoizedState,e]}function ei(e,t){if(Vt=Yt(),t=void 0===t?null:t,null!==(zt=Qt())){var i=zt.memoizedState;if(null!==i&&null!==t){var s=i[1];e:if(null===s)s=!1;else{for(var o=0;o<s.length&&o<t.length;o++)if(!Bt(t[o],s[o])){s=!1;break e}s=!0}if(s)return i[0]}}return e=e(),zt.memoizedState=[e,t],e}function ti(e,t,i){if(25<=jt)throw Error(o(301));if(e===Vt)if(_t=!0,e={action:i,next:null},null===Zt&&(Zt=new Map),void 0===(i=Zt.get(t)))Zt.set(t,e);else{for(t=i;null!==t.next;)t=t.next;t.next=e}}function ii(){throw Error(o(394))}function si(){}var oi={readContext:function(e){return e._currentValue},useContext:function(e){return Yt(),e._currentValue},useMemo:ei,useReducer:Jt,useRef:function(e){Vt=Yt();var t=(zt=Qt()).memoizedState;return null===t?(e={current:e},zt.memoizedState=e):t},useState:function(e){return Jt($t,e)},useInsertionEffect:si,useLayoutEffect:function(){},useCallback:function(e,t){return ei((function(){return e}),t)},useImperativeHandle:si,useEffect:si,useDebugValue:si,useDeferredValue:function(e){return Yt(),e},useTransition:function(){return Yt(),[!1,ii]},useId:function(){var e=Ht.treeContext,t=e.overflow;e=((e=e.id)&~(1<<32-Gt(e)-1)).toString(32)+t;var i=ni;if(null===i)throw Error(o(404));return t=Kt++,e=":"+i.idPrefix+"R"+e,0<t&&(e+="H"+t.toString(32)),e+":"},useMutableSource:function(e,t){return Yt(),t(e._source)},useSyncExternalStore:function(e,t,i){if(void 0===i)throw Error(o(407));return i()}},ni=null,ri=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function li(e){return console.error(e),null}function ai(){}function di(e,t,i,s,o,n,r,l){e.allPendingTasks++,null===i?e.pendingRootTasks++:i.pendingTasks++;var a={node:t,ping:function(){var t=e.pingedTasks;t.push(a),1===t.length&&Fi(e)},blockedBoundary:i,blockedSegment:s,abortSet:o,legacyContext:n,context:r,treeContext:l};return o.add(a),a}function ci(e,t,i,s,o,n){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:s,boundary:i,lastPushedText:o,textEmbedded:n}}function ui(e,t){if(null!=(e=e.onError(t))&&"string"!==typeof e)throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof e+'" instead');return e}function hi(e,t){var i=e.onShellError;i(t),(i=e.onFatalError)(t),null!==e.destination?(e.status=2,p(e.destination,t)):(e.status=1,e.fatalError=t)}function pi(e,t,i,s,o){for(Vt={},Ht=t,Kt=0,e=i(s,o);_t;)_t=!1,Kt=0,jt+=1,zt=null,e=i(s,o);return Xt(),e}function gi(e,t,i,s){var n=i.render(),r=s.childContextTypes;if(null!==r&&void 0!==r){var l=t.legacyContext;if("function"!==typeof i.getChildContext)s=l;else{for(var a in i=i.getChildContext())if(!(a in r))throw Error(o(108,yt(s)||"Unknown",a));s=st({},l,i)}t.legacyContext=s,fi(e,t,n),t.legacyContext=l}else fi(e,t,n)}function mi(e,t){if(e&&e.defaultProps){for(var i in t=st({},t),e=e.defaultProps)void 0===t[i]&&(t[i]=e[i]);return t}return t}function vi(e,t,i,s,n){if("function"===typeof i)if(i.prototype&&i.prototype.isReactComponent){n=Rt(i,t.legacyContext);var r=i.contextType;At(r=new i(s,"object"===typeof r&&null!==r?r._currentValue:n),i,s,n),gi(e,t,r,i)}else{n=pi(e,t,i,s,r=Rt(i,t.legacyContext));var l=0!==Kt;if("object"===typeof n&&null!==n&&"function"===typeof n.render&&void 0===n.$$typeof)At(n,i,s,r),gi(e,t,n,i);else if(l){s=t.treeContext,t.treeContext=Lt(s,1,0);try{fi(e,t,n)}finally{t.treeContext=s}}else fi(e,t,n)}else{if("string"!==typeof i){switch(i){case Ct:case ft:case lt:case at:case rt:case pt:return void fi(e,t,s.children);case vt:throw Error(o(343));case ht:e:{i=t.blockedBoundary,n=t.blockedSegment,r=s.fallback,s=s.children;var a={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:l=new Set,errorDigest:null},d=ci(0,n.chunks.length,a,n.formatContext,!1,!1);n.children.push(d),n.lastPushedText=!1;var c=ci(0,0,null,n.formatContext,!1,!1);c.parentFlushed=!0,t.blockedBoundary=a,t.blockedSegment=c;try{if(wi(e,t,s),c.lastPushedText&&c.textEmbedded&&c.chunks.push(B),c.status=1,bi(a,c),0===a.pendingTasks)break e}catch(h){c.status=4,a.forceClientRender=!0,a.errorDigest=ui(e,h)}finally{t.blockedBoundary=i,t.blockedSegment=n}t=di(e,r,i,d,l,t.legacyContext,t.context,t.treeContext),e.pingedTasks.push(t)}return}if("object"===typeof i&&null!==i)switch(i.$$typeof){case ut:if(s=pi(e,t,i.render,s,n),0!==Kt){i=t.treeContext,t.treeContext=Lt(i,1,0);try{fi(e,t,s)}finally{t.treeContext=i}}else fi(e,t,s);return;case gt:return void vi(e,t,i=i.type,s=mi(i,s),n);case dt:if(n=s.children,i=i._context,s=s.value,r=i._currentValue,i._currentValue=s,Ft=s={parent:l=Ft,depth:null===l?0:l.depth+1,context:i,parentValue:r,value:s},t.context=s,fi(e,t,n),null===(e=Ft))throw Error(o(403));return s=e.parentValue,e.context._currentValue=s===wt?e.context._defaultValue:s,e=Ft=e.parent,void(t.context=e);case ct:return void fi(e,t,s=(s=s.children)(i._currentValue));case mt:return void vi(e,t,i=(n=i._init)(i._payload),s=mi(i,s),void 0)}throw Error(o(130,null==i?i:typeof i,""))}switch(r=re((n=t.blockedSegment).chunks,i,s,e.responseState,n.formatContext),n.lastPushedText=!1,l=n.formatContext,n.formatContext=function(e,t,i){switch(t){case"select":return O(1,null!=i.value?i.value:i.defaultValue);case"svg":return O(2,null);case"math":return O(3,null);case"foreignObject":return O(1,null);case"table":return O(4,null);case"thead":case"tbody":case"tfoot":return O(5,null);case"colgroup":return O(7,null);case"tr":return O(6,null)}return 4<=e.insertionMode||0===e.insertionMode?O(1,null):e}(l,i,s),wi(e,t,r),n.formatContext=l,i){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:n.chunks.push(le,u(i),ae)}n.lastPushedText=!1}}function fi(e,t,i){if(t.node=i,"object"===typeof i&&null!==i){switch(i.$$typeof){case ot:return void vi(e,t,i.type,i.props,i.ref);case nt:throw Error(o(257));case mt:var s=i._init;return void fi(e,t,i=s(i._payload))}if(D(i))return void Ci(e,t,i);if(null===i||"object"!==typeof i?s=null:s="function"===typeof(s=St&&i[St]||i["@@iterator"])?s:null,s&&(s=s.call(i))){if(!(i=s.next()).done){var n=[];do{n.push(i.value),i=s.next()}while(!i.done);Ci(e,t,n)}return}throw e=Object.prototype.toString.call(i),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(i).join(", ")+"}":e))}"string"===typeof i?(s=t.blockedSegment).lastPushedText=V(t.blockedSegment.chunks,i,e.responseState,s.lastPushedText):"number"===typeof i&&((s=t.blockedSegment).lastPushedText=V(t.blockedSegment.chunks,""+i,e.responseState,s.lastPushedText))}function Ci(e,t,i){for(var s=i.length,o=0;o<s;o++){var n=t.treeContext;t.treeContext=Lt(n,s,o);try{wi(e,t,i[o])}finally{t.treeContext=n}}}function wi(e,t,i){var s=t.blockedSegment.formatContext,o=t.legacyContext,n=t.context;try{return fi(e,t,i)}catch(a){if(Xt(),"object"!==typeof a||null===a||"function"!==typeof a.then)throw t.blockedSegment.formatContext=s,t.legacyContext=o,t.context=n,It(n),a;i=a;var r=t.blockedSegment,l=ci(0,r.chunks.length,null,r.formatContext,r.lastPushedText,!0);r.children.push(l),r.lastPushedText=!1,e=di(e,t.node,t.blockedBoundary,l,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,i.then(e,e),t.blockedSegment.formatContext=s,t.legacyContext=o,t.context=n,It(n)}}function Si(e){var t=e.blockedBoundary;(e=e.blockedSegment).status=3,Ri(this,t,e)}function yi(e,t,i){var s=e.blockedBoundary;e.blockedSegment.status=3,null===s?(t.allPendingTasks--,2!==t.status&&(t.status=2,null!==t.destination&&t.destination.close())):(s.pendingTasks--,s.forceClientRender||(s.forceClientRender=!0,e=void 0===i?Error(o(432)):i,s.errorDigest=t.onError(e),s.parentFlushed&&t.clientRenderedBoundaries.push(s)),s.fallbackAbortableTasks.forEach((function(e){return yi(e,t,i)})),s.fallbackAbortableTasks.clear(),t.allPendingTasks--,0===t.allPendingTasks&&(s=t.onAllReady)())}function bi(e,t){if(0===t.chunks.length&&1===t.children.length&&null===t.children[0].boundary){var i=t.children[0];i.id=t.id,i.parentFlushed=!0,1===i.status&&bi(e,i)}else e.completedSegments.push(t)}function Ri(e,t,i){if(null===t){if(i.parentFlushed){if(null!==e.completedRootSegment)throw Error(o(389));e.completedRootSegment=i}e.pendingRootTasks--,0===e.pendingRootTasks&&(e.onShellError=ai,(t=e.onShellReady)())}else t.pendingTasks--,t.forceClientRender||(0===t.pendingTasks?(i.parentFlushed&&1===i.status&&bi(t,i),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach(Si,e),t.fallbackAbortableTasks.clear()):i.parentFlushed&&1===i.status&&(bi(t,i),1===t.completedSegments.length&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--,0===e.allPendingTasks&&(e=e.onAllReady)()}function Fi(e){if(2!==e.status){var t=Ft,i=ri.current;ri.current=oi;var s=ni;ni=e.responseState;try{var o,n=e.pingedTasks;for(o=0;o<n.length;o++){var r=n[o],l=e,a=r.blockedSegment;if(0===a.status){It(r.context);try{fi(l,r,r.node),a.lastPushedText&&a.textEmbedded&&a.chunks.push(B),r.abortSet.delete(r),a.status=1,Ri(l,r.blockedBoundary,a)}catch(p){if(Xt(),"object"===typeof p&&null!==p&&"function"===typeof p.then){var d=r.ping;p.then(d,d)}else{r.abortSet.delete(r),a.status=4;var c=r.blockedBoundary,u=p,h=ui(l,u);if(null===c?hi(l,u):(c.pendingTasks--,c.forceClientRender||(c.forceClientRender=!0,c.errorDigest=h,c.parentFlushed&&l.clientRenderedBoundaries.push(c))),l.allPendingTasks--,0===l.allPendingTasks)(0,l.onAllReady)()}}}}n.splice(0,o),null!==e.destination&&Ii(e,e.destination)}catch(p){ui(e,p),hi(e,p)}finally{ni=s,ri.current=i,i===oi&&It(t)}}}function Ei(e,t,i){switch(i.parentFlushed=!0,i.status){case 0:var s=i.id=e.nextSegmentId++;return i.lastPushedText=!1,i.textEmbedded=!1,e=e.responseState,l(t,de),l(t,e.placeholderPrefix),l(t,e=u(s.toString(16))),a(t,ce);case 1:i.status=2;var n=!0;s=i.chunks;var r=0;i=i.children;for(var d=0;d<i.length;d++){for(n=i[d];r<n.index;r++)l(t,s[r]);n=xi(e,t,n)}for(;r<s.length-1;r++)l(t,s[r]);return r<s.length&&(n=a(t,s[r])),n;default:throw Error(o(390))}}function xi(e,t,i){var s=i.boundary;if(null===s)return Ei(e,t,i);if(s.parentFlushed=!0,s.forceClientRender)s=s.errorDigest,a(t,ge),l(t,ve),s&&(l(t,Ce),l(t,u(x(s))),l(t,fe)),a(t,we),Ei(e,t,i);else if(0<s.pendingTasks){s.rootSegmentID=e.nextSegmentId++,0<s.completedSegments.length&&e.partialBoundaries.push(s);var n=e.responseState,r=n.nextSuspenseID++;n=h(n.boundaryPrefix+r.toString(16)),s=s.id=n,Se(t,e.responseState,s),Ei(e,t,i)}else if(s.byteSize>e.progressiveChunkSize)s.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(s),Se(t,e.responseState,s.id),Ei(e,t,i);else{if(a(t,ue),1!==(i=s.completedSegments).length)throw Error(o(391));xi(e,t,i[0])}return a(t,me)}function Pi(e,t,i){return function(e,t,i,s){switch(i.insertionMode){case 0:case 1:return l(e,ye),l(e,t.segmentPrefix),l(e,u(s.toString(16))),a(e,be);case 2:return l(e,Fe),l(e,t.segmentPrefix),l(e,u(s.toString(16))),a(e,Ee);case 3:return l(e,Pe),l(e,t.segmentPrefix),l(e,u(s.toString(16))),a(e,Me);case 4:return l(e,Ie),l(e,t.segmentPrefix),l(e,u(s.toString(16))),a(e,Te);case 5:return l(e,ke),l(e,t.segmentPrefix),l(e,u(s.toString(16))),a(e,Le);case 6:return l(e,Ne),l(e,t.segmentPrefix),l(e,u(s.toString(16))),a(e,Oe);case 7:return l(e,Ve),l(e,t.segmentPrefix),l(e,u(s.toString(16))),a(e,He);default:throw Error(o(397))}}(t,e.responseState,i.formatContext,i.id),xi(e,t,i),function(e,t){switch(t.insertionMode){case 0:case 1:return a(e,Re);case 2:return a(e,xe);case 3:return a(e,De);case 4:return a(e,Ae);case 5:return a(e,Ge);case 6:return a(e,Be);case 7:return a(e,We);default:throw Error(o(397))}}(t,i.formatContext)}function Mi(e,t,i){for(var s=i.completedSegments,n=0;n<s.length;n++)Di(e,t,i,s[n]);if(s.length=0,e=e.responseState,s=i.id,i=i.rootSegmentID,l(t,e.startInlineScript),e.sentCompleteBoundaryFunction?l(t,je):(e.sentCompleteBoundaryFunction=!0,l(t,Ze)),null===s)throw Error(o(395));return i=u(i.toString(16)),l(t,s),l(t,Ye),l(t,e.segmentPrefix),l(t,i),a(t,qe)}function Di(e,t,i,s){if(2===s.status)return!0;var n=s.id;if(-1===n){if(-1===(s.id=i.rootSegmentID))throw Error(o(392));return Pi(e,t,s)}return Pi(e,t,s),l(t,(e=e.responseState).startInlineScript),e.sentCompleteSegmentFunction?l(t,Ue):(e.sentCompleteSegmentFunction=!0,l(t,ze)),l(t,e.segmentPrefix),l(t,n=u(n.toString(16))),l(t,_e),l(t,e.placeholderPrefix),l(t,n),a(t,Ke)}function Ii(e,t){n=new Uint8Array(512),r=0;try{var i=e.completedRootSegment;if(null!==i&&0===e.pendingRootTasks){xi(e,t,i),e.completedRootSegment=null;var s=e.responseState.bootstrapChunks;for(i=0;i<s.length-1;i++)l(t,s[i]);i<s.length&&a(t,s[i])}var c,h=e.clientRenderedBoundaries;for(c=0;c<h.length;c++){var p=h[c];s=t;var g=e.responseState,m=p.id,v=p.errorDigest,f=p.errorMessage,C=p.errorComponentStack;if(l(s,g.startInlineScript),g.sentClientRenderFunction?l(s,Xe):(g.sentClientRenderFunction=!0,l(s,Qe)),null===m)throw Error(o(395));if(l(s,m),l(s,$e),(v||f||C)&&(l(s,et),l(s,u(it(v||"")))),(f||C)&&(l(s,et),l(s,u(it(f||"")))),C&&(l(s,et),l(s,u(it(C)))),!a(s,Je))return e.destination=null,c++,void h.splice(0,c)}h.splice(0,c);var w=e.completedBoundaries;for(c=0;c<w.length;c++)if(!Mi(e,t,w[c]))return e.destination=null,c++,void w.splice(0,c);w.splice(0,c),d(t),n=new Uint8Array(512),r=0;var S=e.partialBoundaries;for(c=0;c<S.length;c++){var y=S[c];e:{h=e,p=t;var b=y.completedSegments;for(g=0;g<b.length;g++)if(!Di(h,p,y,b[g])){g++,b.splice(0,g);var R=!1;break e}b.splice(0,g),R=!0}if(!R)return e.destination=null,c++,void S.splice(0,c)}S.splice(0,c);var F=e.completedBoundaries;for(c=0;c<F.length;c++)if(!Mi(e,t,F[c]))return e.destination=null,c++,void F.splice(0,c);F.splice(0,c)}finally{d(t),0===e.allPendingTasks&&0===e.pingedTasks.length&&0===e.clientRenderedBoundaries.length&&0===e.completedBoundaries.length&&t.close()}}function Ti(e,t){try{var i=e.abortableTasks;i.forEach((function(i){return yi(i,e,t)})),i.clear(),null!==e.destination&&Ii(e,e.destination)}catch(s){ui(e,s),hi(e,s)}}t.renderToReadableStream=function(e,t){return new Promise((function(i,s){var o,n,r=new Promise((function(e,t){n=e,o=t})),l=function(e,t,i,s,o,n,r,l,a){var d=[],c=new Set;return(i=ci(t={destination:null,responseState:t,progressiveChunkSize:void 0===s?12800:s,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:c,pingedTasks:d,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:void 0===o?li:o,onAllReady:void 0===n?ai:n,onShellReady:void 0===r?ai:r,onShellError:void 0===l?ai:l,onFatalError:void 0===a?ai:a},0,null,i,!1,!1)).parentFlushed=!0,e=di(t,e,null,i,c,bt,null,kt),d.push(e),t}(e,function(e,t,i,s,o){e=void 0===e?"":e,t=void 0===t?I:h('<script nonce="'+x(t)+'">');var n=[];if(void 0!==i&&n.push(t,u((""+i).replace(G,N)),T),void 0!==s)for(i=0;i<s.length;i++)n.push(A,u(x(s[i])),L);if(void 0!==o)for(s=0;s<o.length;s++)n.push(k,u(x(o[s])),L);return{bootstrapChunks:n,startInlineScript:t,placeholderPrefix:h(e+"P:"),segmentPrefix:h(e+"S:"),boundaryPrefix:e+"B:",idPrefix:e,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}(t?t.identifierPrefix:void 0,t?t.nonce:void 0,t?t.bootstrapScriptContent:void 0,t?t.bootstrapScripts:void 0,t?t.bootstrapModules:void 0),function(e){return O("http://www.w3.org/2000/svg"===e?2:"http://www.w3.org/1998/Math/MathML"===e?3:0,null)}(t?t.namespaceURI:void 0),t?t.progressiveChunkSize:void 0,t?t.onError:void 0,n,(function(){var e=new ReadableStream({type:"bytes",pull:function(e){if(1===l.status)l.status=2,p(e,l.fatalError);else if(2!==l.status&&null===l.destination){l.destination=e;try{Ii(l,e)}catch(t){ui(l,t),hi(l,t)}}},cancel:function(){Ti(l)}},{highWaterMark:0});e.allReady=r,i(e)}),(function(e){r.catch((function(){})),s(e)}),o);if(t&&t.signal){var a=t.signal,d=function(){Ti(l,a.reason),a.removeEventListener("abort",d)};a.addEventListener("abort",d)}Fi(l)}))},t.version="18.2.0"},46940:(e,t,i)=>{"use strict";var s,o;s=i(12897),o=i(19419),t.version=s.version,t.renderToString=s.renderToString,t.renderToStaticMarkup=s.renderToStaticMarkup,t.renderToNodeStream=s.renderToNodeStream,t.renderToStaticNodeStream=s.renderToStaticNodeStream,t.renderToReadableStream=o.renderToReadableStream},74051:(e,t,i)=>{"use strict";i.d(t,{I:()=>g});var s=i(30845),o=class{constructor(e,t,i,s,o,n){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=e,this.gos=t,this.eventService=i,this.funcColsService=s,this.beans=n,this.selectionService=o,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id="ROOT_NODE_ID",this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}getCopyOfNodesMap(){return(0,s.n9G)(this.allNodesMap)}getRowNode(e){return this.allNodesMap[e]}setRowData(e){if("string"===typeof e)return void(0,s.Brh)("rowData must be an array.");this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e);const t=this.rootNode,i=this.rootNode.sibling;t.childrenAfterFilter=null,t.childrenAfterGroup=null,t.childrenAfterAggFilter=null,t.childrenAfterSort=null,t.childrenMapped=null,t.updateHasChildren(),this.nextId=0,this.allNodesMap={},e?t.allLeafChildren=e.map((e=>this.createNode(e,this.rootNode,0))):(t.allLeafChildren=[],t.childrenAfterGroup=[]),i&&(i.childrenAfterFilter=t.childrenAfterFilter,i.childrenAfterGroup=t.childrenAfterGroup,i.childrenAfterAggFilter=t.childrenAfterAggFilter,i.childrenAfterSort=t.childrenAfterSort,i.childrenMapped=t.childrenMapped,i.allLeafChildren=t.allLeafChildren)}updateRowData(e,t){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e.add);const i={remove:[],update:[],add:[]},o=[];return this.executeRemove(e,i,o),this.executeUpdate(e,i,o),this.executeAdd(e,i),this.updateSelection(o,"rowDataChanged"),t&&(0,s.LIW)(this.rootNode.allLeafChildren,t),i}isRowCountReady(){return this.rowCountReady}dispatchRowDataUpdateStartedEvent(e){const t={type:"rowDataUpdateStarted",firstRowData:null!==e&&void 0!==e&&e.length?e[0]:null};this.eventService.dispatchEvent(t)}updateSelection(e,t){const i=e.length>0;if(i&&this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),this.selectionService.updateGroupsFromChildrenSelections(t),i){const e={type:"selectionChanged",source:t};this.eventService.dispatchEvent(e)}}executeAdd(e,t){const{add:i,addIndex:o}=e;if((0,s.vfG)(i))return;const n=i.map((e=>this.createNode(e,this.rootNode,0))),r=this.rootNode.allLeafChildren;if("number"===typeof o&&o>=0){const e=r.length;let t=o;if(this.gos.get("treeData")&&o>0&&e>0)for(let n=0;n<e;n++){var l;if((null===(l=r[n])||void 0===l?void 0:l.rowIndex)==o-1){t=n+1;break}}const i=r.slice(0,t),s=r.slice(t,r.length);this.rootNode.allLeafChildren=[...i,...n,...s]}else this.rootNode.allLeafChildren=[...r,...n];this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=r),t.add=n}executeRemove(e,t,i){var o,n;const{remove:r}=e;if((0,s.vfG)(r))return;const l={};r.forEach((e=>{const s=this.lookupRowNode(e);s&&(s.isSelected()&&i.push(s),s.clearRowTopAndRowIndex(),l[s.id]=!0,delete this.allNodesMap[s.id],t.remove.push(s))})),this.rootNode.allLeafChildren=null!==(o=null===(n=this.rootNode.allLeafChildren)||void 0===n?void 0:n.filter((e=>!l[e.id])))&&void 0!==o?o:null,this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(e,t,i){const{update:o}=e;(0,s.vfG)(o)||o.forEach((e=>{const s=this.lookupRowNode(e);s&&(s.updateData(e),!s.selectable&&s.isSelected()&&i.push(s),this.setMasterForRow(s,e,0,!1),t.update.push(s))}))}lookupRowNode(e){const t=this.gos.getRowIdCallback();let i;if(t){const o=t({data:e,level:0});if(i=this.allNodesMap[o],!i)return(0,s.AHw)("could not find row id=".concat(o,", data item was not found for this id")),null}else{var o;if(i=null===(o=this.rootNode.allLeafChildren)||void 0===o?void 0:o.find((t=>t.data===e)),!i)return(0,s.AHw)("could not find data item as object was not found",e),(0,s.AHw)("Consider using getRowId to help the Grid find matching row data"),null}return i||null}createNode(e,t,i){const o=new s.Fxk(this.beans);return o.group=!1,this.setMasterForRow(o,e,i,!0),t&&(o.parent=t),o.level=i,o.setDataAndId(e,this.nextId.toString()),this.allNodesMap[o.id]&&(0,s.Brh)("duplicate node id '".concat(o.id,"' detected from getRowId callback, this could cause issues in your grid.")),this.allNodesMap[o.id]=o,this.nextId++,o}setMasterForRow(e,t,i,s){if(this.gos.get("treeData"))e.setMaster(!1),s&&(e.expanded=!1);else{if(this.gos.get("masterDetail")){const i=this.gos.get("isRowMaster");i?e.setMaster(i(t)):e.setMaster(!0)}else e.setMaster(!1);if(s){const t=this.funcColsService.getRowGroupColumns(),s=i+(t?t.length:0);e.expanded=!!e.master&&this.isExpanded(s)}}}isExpanded(e){const t=this.gos.get("groupDefaultExpanded");return-1===t||e<t}},n=class extends s.AS9{constructor(){super(...arguments),this.beanName="rowModel",this.onRowHeightChanged_debounced=(0,s.eTz)(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[],this.hasStarted=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowCountReady=!1}wireBeans(e){this.beans=e,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.selectionService=e.selectionService,this.valueCache=e.valueCache,this.environment=e.environment,this.filterStage=e.filterStage,this.sortStage=e.sortStage,this.flattenStage=e.flattenStage,this.groupStage=e.groupStage,this.aggregationStage=e.aggregationStage,this.pivotStage=e.pivotStage,this.filterAggregatesStage=e.filterAggregatesStage}postConstruct(){const e=this.refreshModel.bind(this,{step:s.j_r.EVERYTHING}),t=!this.gos.get("suppressAnimationFrame"),i=this.refreshModel.bind(this,{step:s.j_r.EVERYTHING,afterColumnsChanged:!0,keepRenderedRows:!0,animate:t});this.addManagedEventListeners({newColumnsLoaded:i,columnRowGroupChanged:e,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:s.j_r.PIVOT}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:e,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this)}),this.addPropertyListeners(),this.rootNode=new s.Fxk(this.beans),this.nodeManager=new o(this.rootNode,this.gos,this.eventService,this.funcColsService,this.selectionService,this.beans)}addPropertyListeners(){const e=new Set(["treeData","masterDetail"]),t=new Set(["groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),i=new Set(["excludeChildrenWhenTreeDataFiltering"]),o=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),n=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly","grandTotalRow"]),r=new Set(["postSortRows","groupDisplayType","accentedSort"]),l=new Set([]),a=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter","groupTotalRow"]),d=[...e,...t,...i,...o,...o,...n,...r,...l,...a];this.addManagedPropertyListeners(d,(d=>{var c;const u=null===(c=d.changeSet)||void 0===c?void 0:c.properties;if(!u)return;const h=e=>u.some((t=>e.has(t)));h(e)?this.setRowData(this.rootNode.allLeafChildren.map((e=>e.data))):h(t)?this.refreshModel({step:s.j_r.EVERYTHING}):h(i)?this.refreshModel({step:s.j_r.FILTER}):h(o)?this.refreshModel({step:s.j_r.PIVOT}):h(n)?this.refreshModel({step:s.j_r.AGGREGATE}):h(r)?this.refreshModel({step:s.j_r.SORT}):h(l)?this.refreshModel({step:s.j_r.FILTER_AGGREGATES}):h(a)&&this.refreshModel({step:s.j_r.MAP})})),this.addManagedPropertyListener("rowHeight",(()=>this.resetRowHeights()))}start(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()}setInitialData(){const e=this.gos.get("rowData");e&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(e))}ensureRowHeightsValid(e,t,i,s){let o,n=!1;do{o=!1;const r=this.getRowIndexAtPixel(e),l=this.getRowIndexAtPixel(t),a=Math.max(r,i),d=Math.min(l,s);for(let e=a;e<=d;e++){const t=this.getRow(e);if(t.rowHeightEstimated){const e=this.gos.getRowHeightForNode(t);t.setRowHeight(e.height),o=!0,n=!0}}o&&this.setRowTopAndRowIndex()}while(o);return n}setRowTopAndRowIndex(){const e=this.environment.getDefaultRowHeight();let t=0;const i=new Set,s=this.gos.isDomLayout("normal");for(let o=0;o<this.rowsToDisplay.length;o++){const n=this.rowsToDisplay[o];if(null!=n.id&&i.add(n.id),null==n.rowHeight){const t=this.gos.getRowHeightForNode(n,s,e);n.setRowHeight(t.height,t.estimated)}n.setRowTop(t),n.setRowIndex(o),t+=n.rowHeight}return i}clearRowTopAndRowIndex(e,t){const i=e.isActive(),s=e=>{e&&null!=e.id&&!t.has(e.id)&&e.clearRowTopAndRowIndex()},o=e=>{if(s(e),s(e.detailNode),s(e.sibling),e.hasChildren()&&e.childrenAfterGroup){const t=-1==e.level;i&&!t&&!e.expanded||e.childrenAfterGroup.forEach(o)}};o(this.rootNode)}ensureRowsAtPixel(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const o=this.getRowIndexAtPixel(t),n=this.getRow(o),r=!this.gos.get("suppressAnimationFrame");return n!==e[0]&&(e.forEach((e=>{(0,s.Pi9)(this.rootNode.allLeafChildren,e)})),e.forEach(((e,t)=>{(0,s.E_0)(this.rootNode.allLeafChildren,e,Math.max(o+i,0)+t)})),this.refreshModel({step:s.j_r.EVERYTHING,keepRenderedRows:!0,keepEditingRows:!0,animate:r}),!0)}highlightRowAtPixel(e,t){const i=null!=t?this.getRowIndexAtPixel(t):null,s=null!=i?this.getRow(i):null;if(!s||!e||s===e||null==t)return void(this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null));const o=this.getHighlightPosition(t,s);this.lastHighlightedRow&&this.lastHighlightedRow!==s&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),s.setHighlighted(o),this.lastHighlightedRow=s}getHighlightPosition(e,t){if(!t){const i=this.getRowIndexAtPixel(e);if(!(t=this.getRow(i||0)))return s.oh5.Below}const{rowTop:i,rowHeight:o}=t;return e-i<o/2?s.oh5.Above:s.oh5.Below}getLastHighlightedRowNode(){return this.lastHighlightedRow}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;const e=this.rootNode.sibling?1:0,t=this.rootNode.childrenAfterAggFilter;return(t?t.length:0)+e}getTopLevelRowDisplayedIndex(e){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return e;let t=e;if(this.rowsToDisplay[0].footer){if(0===e)return 0;t-=1}let i=this.rootNode.childrenAfterSort[t];if(this.gos.get("groupHideOpenParents"))for(;i.expanded&&i.childrenAfterSort&&i.childrenAfterSort.length>0;)i=i.childrenAfterSort[0];return i.rowIndex}getRowBounds(e){if((0,s.n92)(this.rowsToDisplay))return null;const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){const e=this.gos.isAnimateRows();this.refreshModel({step:s.j_r.MAP,keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;const t=this.gos.isAnimateRows(),i=0===e.columns.length||e.columns.some((e=>e.isPrimary()))?s.j_r.FILTER:s.j_r.FILTER_AGGREGATES;this.refreshModel({step:i,keepRenderedRows:!0,animate:t})}onSortChanged(){const e=this.gos.isAnimateRows();this.refreshModel({step:s.j_r.SORT,keepRenderedRows:!0,animate:e,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:s.j_r.PIVOT}):this.refreshModel({step:s.j_r.AGGREGATE})}createChangePath(e){const t=(0,s.vfG)(e),i=new s.Dkq(!1,this.rootNode);return(t||this.gos.get("treeData"))&&i.setInactive(),i}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction"))return!1;if(null==e.rowNodeTransactions)return!1;const t=e.rowNodeTransactions.filter((e=>null!=e.add&&e.add.length>0||null!=e.remove&&e.remove.length>0));return null==t||0==t.length}buildRefreshModelParams(e){let t=s.j_r.EVERYTHING;const i={everything:s.j_r.EVERYTHING,group:s.j_r.EVERYTHING,filter:s.j_r.FILTER,map:s.j_r.MAP,aggregate:s.j_r.AGGREGATE,sort:s.j_r.SORT,pivot:s.j_r.PIVOT};if((0,s.fTC)(e)&&(t=i[e]),(0,s.n92)(t))return void(0,s.AHw)("invalid step ".concat(e,", available steps are ").concat(Object.keys(i).join(", ")));return{step:t,keepRenderedRows:!0,keepEditingRows:!0,animate:!this.gos.get("suppressAnimationFrame")}}refreshModel(e){if(!this.hasStarted||this.isRefreshingModel||this.columnModel.isChangeEventsDispatching())return;const t="object"===typeof e&&"step"in e?e:this.buildRefreshModelParams(e);if(!t)return;if(this.isSuppressModelUpdateAfterUpdateTransaction(t))return;const i=this.createChangePath(t.rowNodeTransactions);switch(this.isRefreshingModel=!0,t.step){case s.j_r.EVERYTHING:this.doRowGrouping(t.rowNodeTransactions,t.rowNodeOrder,i,!!t.afterColumnsChanged);case s.j_r.FILTER:this.doFilter(i);case s.j_r.PIVOT:this.doPivot(i);case s.j_r.AGGREGATE:this.doAggregate(i);case s.j_r.FILTER_AGGREGATES:this.doFilterAggregates(i);case s.j_r.SORT:this.doSort(t.rowNodeTransactions,i);case s.j_r.MAP:this.doRowsToDisplay()}const o=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(i,o),this.isRefreshingModel=!1;const n={type:"modelUpdated",animate:t.animate,keepRenderedRows:t.keepRenderedRows,newData:t.newData,newPage:!1,keepUndoRedoStack:t.keepUndoRedoStack};this.eventService.dispatchEvent(n)}isEmpty(){const e=(0,s.n92)(this.rootNode.allLeafChildren)||0===this.rootNode.allLeafChildren.length;return(0,s.n92)(this.rootNode)||e||!this.columnModel.isReady()}isRowsToRender(){return(0,s.fTC)(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let i=!1,s=!1;const o=[],n=this.gos.get("groupSelectsChildren");return this.forEachNodeAfterFilterAndSort((r=>{if(s)return;if(i&&(r===t||r===e)&&(s=!0,r.group&&n))return void o.push(...r.allLeafChildren);if(!i){if(r!==t&&r!==e)return;i=!0}(!r.group||!n)&&o.push(r)})),o}setDatasource(e){(0,s.AHw)("should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){if(this.isEmpty()||0===this.rowsToDisplay.length)return-1;let t=0,i=this.rowsToDisplay.length-1;if(e<=0)return 0;if((0,s._O9)(this.rowsToDisplay).rowTop<=e)return this.rowsToDisplay.length-1;let o=-1,n=-1;for(;;){const s=Math.floor((t+i)/2),r=this.rowsToDisplay[s];if(this.isRowInPixel(r,e))return s;r.rowTop<e?t=s+1:r.rowTop>e&&(i=s-1);if(o===t&&n===i)return s;o=t,n=i}}isRowInPixel(e,t){const i=e.rowTop,s=e.rowTop+e.rowHeight;return i<=t&&s>t}forEachLeafNode(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach(((t,i)=>e(t,i)))}forEachNode(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:e,recursionType:0,index:0,includeFooterNodes:t})}forEachNodeAfterFilter(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:e,recursionType:1,index:0,includeFooterNodes:t})}forEachNodeAfterFilterAndSort(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:e,recursionType:2,index:0,includeFooterNodes:t})}forEachPivotNode(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:e,recursionType:3,index:0,includeFooterNodes:t})}recursivelyWalkNodesAndCallback(e){const{nodes:t,callback:i,recursionType:s,includeFooterNodes:o}=e;let{index:n}=e;const r=e=>{var s;const r=null===(s=t[0])||void 0===s?void 0:s.parent;if(!r)return;const l=o&&this.gos.getGrandTotalRow(),a=this.gos.getGroupTotalRowCallback(),d=o&&a({node:r});r===this.rootNode?l===e&&(r.createFooter(),i(r.sibling,n++)):d===e&&(r.createFooter(),i(r.sibling,n++))};r("top");for(let l=0;l<t.length;l++){const e=t[l];if(i(e,n++),e.hasChildren()&&!e.footer){let t=null;switch(s){case 0:t=e.childrenAfterGroup;break;case 1:t=e.childrenAfterAggFilter;break;case 2:t=e.childrenAfterSort;break;case 3:t=e.leafGroup?null:e.childrenAfterSort}t&&(n=this.recursivelyWalkNodesAndCallback({nodes:[...t],callback:i,recursionType:s,index:n,includeFooterNodes:o}))}}return r("bottom"),n}doAggregate(e){var t;null===(t=this.aggregationStage)||void 0===t||t.execute({rowNode:this.rootNode,changedPath:e})}doFilterAggregates(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(e){const t=this.gos.get("treeData"),i=this.columnModel.isPivotActive(),o=n=>{n&&n.forEach((n=>{const r=()=>{n.expanded=e,o(n.childrenAfterGroup)};if(t){return void((0,s.fTC)(n.childrenAfterGroup)&&r())}if(i){return void(!n.leafGroup&&r())}n.group&&r()}))};this.rootNode&&o(this.rootNode.childrenAfterGroup),this.refreshModel({step:s.j_r.MAP});const n={type:"expandOrCollapseAll",source:e?"expandAll":"collapseAll"};this.eventService.dispatchEvent(n)}doSort(e,t){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:t})}doRowGrouping(e,t,i,s){if(this.groupStage){if(e?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,rowNodeOrder:t,changedPath:i}):this.groupStage.execute({rowNode:this.rootNode,changedPath:i,afterColumnsChanged:s}),this.gos.get("groupSelectsChildren")){if(this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",i)){const e={type:"selectionChanged",source:"rowGroupChanged"};this.eventService.dispatchEvent(e)}}}else this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren();this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})}doPivot(e){var t;null===(t=this.pivotStage)||void 0===t||t.execute({rowNode:this.rootNode,changedPath:e})}getCopyOfNodesMap(){return this.nodeManager.getCopyOfNodesMap()}getRowNode(e){if("string"==typeof e&&0==e.indexOf(s.Fxk.ID_PREFIX_ROW_GROUP)){let t;return this.forEachNode((i=>{i.id===e&&(t=i)})),t}return this.nodeManager.getRowNode(e)}setRowData(e){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(e),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()}dispatchUpdateEventsAndRefresh(){this.eventService.dispatchEvent({type:"rowDataUpdated"}),this.refreshModel({step:s.j_r.EVERYTHING,newData:!0})}batchUpdateRowData(e,t){if(null==this.applyAsyncTransactionsTimeout){this.rowDataTransactionBatch=[];const e=this.gos.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout((()=>{this.executeBatchUpdateRowData()}),e)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){null!=this.applyAsyncTransactionsTimeout&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache.onDataChanged();const e=[],t=[];let i=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach((s=>{const o=this.nodeManager.updateRowData(s.rowDataTransaction,void 0);t.push(o),s.callback&&e.push(s.callback.bind(null,o)),"number"===typeof s.rowDataTransaction.addIndex&&(i=!0)})),this.commonUpdateRowData(t,void 0,i),e.length>0&&window.setTimeout((()=>{e.forEach((e=>e()))}),0),t.length>0){const e={type:"asyncTransactionsFlushed",results:t};this.eventService.dispatchEvent(e)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e,t){this.valueCache.onDataChanged();const i=this.nodeManager.updateRowData(e,t),s="number"===typeof e.addIndex;return this.commonUpdateRowData([i],t,s),i}createRowNodeOrder(){if(this.gos.get("suppressMaintainUnsortedOrder"))return;const e={};if(this.rootNode&&this.rootNode.allLeafChildren)for(let t=0;t<this.rootNode.allLeafChildren.length;t++){e[this.rootNode.allLeafChildren[t].id]=t}return e}commonUpdateRowData(e,t,i){if(!this.hasStarted)return;const o=!this.gos.get("suppressAnimationFrame");i&&(t=this.createRowNodeOrder());this.eventService.dispatchEvent({type:"rowDataUpdated"}),this.refreshModel({step:s.j_r.EVERYTHING,rowNodeTransactions:e,rowNodeOrder:t,keepRenderedRows:!0,keepEditingRows:!0,animate:o})}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:s.j_r.MAP,keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){const e=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),e&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode((t=>{t.setRowHeight(t.rowHeight,!0);const i=t.detailNode;i&&i.setRowHeight(i.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0})),e}onGridStylesChanges(e){if(e.rowHeightChanged){if(this.columnModel.isAutoRowHeightActive())return;this.resetRowHeights()}}onGridReady(){this.hasStarted||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}};var r=class extends s.AS9{constructor(){super(...arguments),this.beanName="filterStage"}wireBeans(e){this.filterManager=e.filterManager}execute(e){const{changedPath:t}=e;this.filter(t)}filter(e){var t;const i=!(null===(t=this.filterManager)||void 0===t||!t.isChildFilterPresent());this.filterNodes(i,e)}filterNodes(e,t){const i=(t,i)=>{t.hasChildren()?t.childrenAfterFilter=e&&!i?t.childrenAfterGroup.filter((e=>{const t=e.childrenAfterFilter&&e.childrenAfterFilter.length>0,i=e.data&&this.filterManager.doesRowPassFilter({rowNode:e});return t||i})):t.childrenAfterGroup:t.childrenAfterFilter=t.childrenAfterGroup,t.sibling&&(t.sibling.childrenAfterFilter=t.childrenAfterFilter)};if(this.doingTreeDataFiltering()){const e=(t,s)=>{if(t.childrenAfterGroup)for(let o=0;o<t.childrenAfterGroup.length;o++){const n=t.childrenAfterGroup[o],r=s||this.filterManager.doesRowPassFilter({rowNode:n});n.childrenAfterGroup?e(t.childrenAfterGroup[o],r):i(n,r)}i(t,s)},s=t=>e(t,!1);t.executeFromRootNode(s)}else{const e=e=>i(e,!1);t.forEachChangedNodeDepthFirst(e,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},l=class extends s.AS9{constructor(){super(...arguments),this.beanName="flattenStage"}wireBeans(e){this.beans=e,this.columnModel=e.columnModel}execute(e){const t=e.rowNode,i=[],s=this.columnModel.isPivotMode(),o=s&&t.leafGroup,n=o?[t]:t.childrenAfterSort,r=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(r,n,i,s,0);if(!o&&i.length>0&&r.grandTotalRow){t.createFooter();const e="top"===r.grandTotalRow;this.addRowNodeToRowsToDisplay(r,t.sibling,i,0,e)}return i}getFlattenDetails(){const e=this.gos.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!e&&this.gos.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:e,isGroupMultiAutoColumn:this.gos.isGroupMultiAutoColumn(),hideOpenParents:this.gos.get("groupHideOpenParents"),grandTotalRow:this.gos.getGrandTotalRow(),groupTotalRow:this.gos.getGroupTotalRowCallback()}}recursivelyAddToRowsToDisplay(e,t,i,o,n){if(!(0,s.vfG)(t))for(let s=0;s<t.length;s++){const r=t[s],l=r.hasChildren(),a=o&&!l,d=e.groupRemoveSingleChildren&&l&&1===r.childrenAfterGroup.length,c=e.groupRemoveLowestSingleChildren&&l&&r.leafGroup&&1===r.childrenAfterGroup.length,u=o&&r.leafGroup,h=e.hideOpenParents&&r.expanded&&!r.master&&!u;if(!a&&!h&&!d&&!c&&this.addRowNodeToRowsToDisplay(e,r,i,n),!o||!r.leafGroup)if(l){const t=d||c;if(r.expanded||t){const s=e.groupTotalRow({node:r});s||r.destroyFooter();const l=t?n:n+1;"top"===s&&(r.createFooter(),this.addRowNodeToRowsToDisplay(e,r.sibling,i,l)),this.recursivelyAddToRowsToDisplay(e,r.childrenAfterSort,i,o,l),"bottom"===s&&(r.createFooter(),this.addRowNodeToRowsToDisplay(e,r.sibling,i,l))}}else if(r.master&&r.expanded){const t=this.createDetailNode(r);this.addRowNodeToRowsToDisplay(e,t,i,n)}}}addRowNodeToRowsToDisplay(e,t,i,s,o){o?i.unshift(t):i.push(t),t.setUiLevel(e.isGroupMultiAutoColumn?0:s)}createDetailNode(e){if((0,s.fTC)(e.detailNode))return e.detailNode;const t=new s.Fxk(this.beans);return t.detail=!0,t.selectable=!1,t.parent=e,(0,s.fTC)(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1,e.detailNode=t,t}},a=class extends s.AS9{constructor(){super(...arguments),this.beanName="immutableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){"clientSide"===this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",(()=>this.onRowDataUpdated())))}isActive(){const e=this.gos.exists("getRowId");return!this.gos.get("resetRowDataOnUpdate")&&e}setRowData(e){const t=this.createTransactionForRowData(e);if(!t)return;const[i,s]=t;this.clientSideRowModel.updateRowData(i,s)}createTransactionForRowData(e){if((0,s.n92)(this.clientSideRowModel))return void(0,s.AHw)("ImmutableService only works with ClientSideRowModel");const t=this.gos.getRowIdCallback();if(null==t)return void(0,s.AHw)("ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!");const i={remove:[],update:[],add:[]},o=this.clientSideRowModel.getCopyOfNodesMap(),n=this.gos.get("suppressMaintainUnsortedOrder")?void 0:{};return(0,s.fTC)(e)&&e.forEach(((e,s)=>{const r=t({data:e,level:0}),l=o[r];if(n&&(n[r]=s),l){l.data!==e&&i.update.push(e),o[r]=void 0}else i.add.push(e)})),(0,s.jXQ)(o,((e,t)=>{t&&i.remove.push(t.data)})),[i,n]}onRowDataUpdated(){const e=this.gos.get("rowData");e&&(this.isActive()?this.setRowData(e):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(e)))}},d=class extends s.AS9{constructor(){super(...arguments),this.beanName="sortService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.rowNodeSorter=e.rowNodeSorter,this.showRowGroupColsService=e.showRowGroupColsService}sort(e,t,i,s,o,n){const r=this.gos.get("groupMaintainOrder"),l=this.columnModel.getCols().some((e=>e.isRowGroupActive()));let a={};i&&s&&(a=this.calculateDirtyNodes(s));const d=this.columnModel.isPivotMode(),c=this.gos.getCallback("postSortRows"),u=s=>{this.pullDownGroupDataForHideOpenParents(s.childrenAfterAggFilter,!0);const u=d&&s.leafGroup;if(r&&l&&!s.leafGroup&&!n){var h;const e=null===(h=this.funcColsService.getRowGroupColumns())||void 0===h?void 0:h[s.level+1],t=null===(null===e||void 0===e?void 0:e.getSort()),i=s.childrenAfterAggFilter.slice(0);if(s.childrenAfterSort&&!t){const e={};s.childrenAfterSort.forEach(((t,i)=>{e[t.id]=i})),i.sort(((t,i)=>{var s,o;return(null!==(s=e[t.id])&&void 0!==s?s:0)-(null!==(o=e[i.id])&&void 0!==o?o:0)}))}s.childrenAfterSort=i}else s.childrenAfterSort=!t||u?s.childrenAfterAggFilter.slice(0):i?this.doDeltaSort(s,a,o,e):this.rowNodeSorter.doFullSort(s.childrenAfterAggFilter,e);if(s.sibling&&(s.sibling.childrenAfterSort=s.childrenAfterSort),this.updateChildIndexes(s),c){const e={nodes:s.childrenAfterSort};c(e)}};o&&o.forEachChangedNodeDepthFirst(u),this.updateGroupDataForHideOpenParents(o)}calculateDirtyNodes(e){const t={},i=e=>{e&&e.forEach((e=>t[e.id]=!0))};return e&&e.forEach((e=>{i(e.add),i(e.update),i(e.remove)})),t}doDeltaSort(e,t,i,s){const o=e.childrenAfterAggFilter,n=e.childrenAfterSort;if(!n)return this.rowNodeSorter.doFullSort(o,s);const r={},l=[];o.forEach((e=>{t[e.id]||!i.canSkip(e)?l.push(e):r[e.id]=!0}));const a=n.filter((e=>r[e.id])),d=(e,t)=>({currentPos:t,rowNode:e}),c=l.map(d).sort(((e,t)=>this.rowNodeSorter.compareRowNodes(s,e,t)));return this.mergeSortedArrays(s,c,a.map(d)).map((e=>{let{rowNode:t}=e;return t}))}mergeSortedArrays(e,t,i){const s=[];let o=0,n=0;for(;o<t.length&&n<i.length;){this.rowNodeSorter.compareRowNodes(e,t[o],i[n])<0?s.push(t[o++]):s.push(i[n++])}for(;o<t.length;)s.push(t[o++]);for(;n<i.length;)s.push(i[n++]);return s}updateChildIndexes(e){if((0,s.n92)(e.childrenAfterSort))return;const t=e.childrenAfterSort;for(let i=0;i<t.length;i++){const s=t[i],o=0===i,n=i===e.childrenAfterSort.length-1;s.setFirstChild(o),s.setLastChild(n),s.setChildIndex(i)}}updateGroupDataForHideOpenParents(e){if(!this.gos.get("groupHideOpenParents"))return;if(this.gos.get("treeData"))return(0,s.Brh)("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;const t=e=>{this.pullDownGroupDataForHideOpenParents(e.childrenAfterSort,!1),e.childrenAfterSort.forEach((e=>{e.hasChildren()&&t(e)}))};e&&e.executeFromRootNode((e=>t(e)))}pullDownGroupDataForHideOpenParents(e,t){this.gos.get("groupHideOpenParents")&&!(0,s.n92)(e)&&e.forEach((e=>{var i,o;(null!==(i=null===(o=this.showRowGroupColsService)||void 0===o?void 0:o.getShowRowGroupCols())&&void 0!==i?i:[]).forEach((i=>{const o=i.getColDef().showRowGroup;if("string"!==typeof o)return void(0,s.AHw)("groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");const n=o,r=this.columnModel.getColDefCol(n);if(!(r===e.rowGroupColumn))if(t)e.setGroupValue(i.getId(),void 0);else{const t=e.getFirstChildOfFirstChild(r);t&&e.setGroupValue(i.getId(),t.key)}}))}))}},c=class extends s.AS9{constructor(){super(...arguments),this.beanName="sortStage"}wireBeans(e){this.sortService=e.sortService,this.sortController=e.sortController}execute(e){const t=this.sortController.getSortOptions(),i=(0,s.fTC)(t)&&t.length>0,o=i&&(0,s.fTC)(e.rowNodeTransactions)&&this.gos.get("deltaSort"),n=t.some((e=>this.gos.isColumnsSortingCoupledToGroup()?e.column.isPrimary()&&e.column.isRowGroupActive():!!e.column.getColDef().showRowGroup));this.sortService.sort(t,i,o,e.rowNodeTransactions,e.changedPath,n)}},u="32.0.1",h={version:u,moduleName:"".concat(s.GXE.ClientSideRowModelModule,"-core"),rowModel:"clientSide",beans:[n,r,c,l,d,a]},p={version:u,moduleName:"".concat(s.GXE.ClientSideRowModelModule,"-api"),beans:[s.iO9],apiFunctions:{onGroupExpandedOrCollapsed:function(e){e.expansionService.onGroupExpandedOrCollapsed()},refreshClientSideRowModel:function(e,t){var i;null===(i=e.rowModelHelperService)||void 0===i||null===(i=i.getClientSideRowModel())||void 0===i||i.refreshModel(t)},forEachLeafNode:function(e,t){var i;null===(i=e.rowModelHelperService)||void 0===i||null===(i=i.getClientSideRowModel())||void 0===i||i.forEachLeafNode(t)},forEachNodeAfterFilter:function(e,t){var i;null===(i=e.rowModelHelperService)||void 0===i||null===(i=i.getClientSideRowModel())||void 0===i||i.forEachNodeAfterFilter(t)},forEachNodeAfterFilterAndSort:function(e,t){var i;null===(i=e.rowModelHelperService)||void 0===i||null===(i=i.getClientSideRowModel())||void 0===i||i.forEachNodeAfterFilterAndSort(t)},resetRowHeights:function(e){var t;e.columnModel.isAutoRowHeightActive()?(0,s.Brh)("calling gridApi.resetRowHeights() makes no sense when using Auto Row Height."):null===(t=e.rowModelHelperService)||void 0===t||null===(t=t.getClientSideRowModel())||void 0===t||t.resetRowHeights()},applyTransaction:function(e,t){return e.frameworkOverrides.wrapIncoming((()=>{var i;return null===(i=e.rowModelHelperService)||void 0===i||null===(i=i.getClientSideRowModel())||void 0===i?void 0:i.updateRowData(t)}))},applyTransactionAsync:function(e,t,i){e.frameworkOverrides.wrapIncoming((()=>{var s;return null===(s=e.rowModelHelperService)||void 0===s||null===(s=s.getClientSideRowModel())||void 0===s?void 0:s.batchUpdateRowData(t,i)}))},flushAsyncTransactions:function(e){e.frameworkOverrides.wrapIncoming((()=>{var t;return null===(t=e.rowModelHelperService)||void 0===t||null===(t=t.getClientSideRowModel())||void 0===t?void 0:t.flushAsyncTransactions()}))},getBestCostNodeSelection:function(e){return e.selectionService.getBestCostNodeSelection()}},dependantModules:[h,s.GR0]},g={version:u,moduleName:s.GXE.ClientSideRowModelModule,dependantModules:[h,p]}},30845:(e,t,i)=>{"use strict";i.d(t,{A6C:()=>sn,AHw:()=>se,AS9:()=>F,BSb:()=>Ln,BYN:()=>ke,Brh:()=>ie,BxR:()=>ll,CUI:()=>Ri,Cvn:()=>Ts,D19:()=>rl,DIH:()=>Yt,D_6:()=>Zs,Dkq:()=>Qa,E0s:()=>Ae,E_0:()=>u,Ekq:()=>Zn,F97:()=>Xe,FN9:()=>Mt,Fxk:()=>Hs,GLL:()=>Be,GR0:()=>cd,GXE:()=>Li,Gxm:()=>_s,I$4:()=>_i,I1_:()=>Kt,INo:()=>lo,Iul:()=>mi,Key:()=>St,KxL:()=>Tt,LAH:()=>Xl,LIW:()=>pd,LRm:()=>Rt,Lm6:()=>Hn,LwM:()=>Xo,MSU:()=>s,N0I:()=>bo,Nk3:()=>hd,NlK:()=>$r,NuV:()=>Lo,O3h:()=>Ni,OMQ:()=>yt,OtO:()=>xt,Pi9:()=>c,PmN:()=>Ht,QgP:()=>W,Qk6:()=>Xr,Qnv:()=>Et,RXA:()=>kt,RiB:()=>gr,StC:()=>Wn,TjA:()=>nr,Tpu:()=>Yo,TsN:()=>bn,UgJ:()=>$e,VDZ:()=>Vi,Vgs:()=>r,VzM:()=>Ft,W7Q:()=>g,WU1:()=>R,Y4l:()=>di,Z0d:()=>ud,ZJj:()=>Ti,Znd:()=>pt,_O9:()=>n,_P_:()=>Mn,at1:()=>Ci,awi:()=>ci,cM1:()=>Ro,eHy:()=>ge,eTz:()=>de,fAI:()=>b,fGY:()=>I,fKg:()=>Fs,fRQ:()=>at,fTC:()=>P,fkf:()=>He,fqf:()=>Jr,g02:()=>h,gA7:()=>nn,gCM:()=>It,gr4:()=>X,hbE:()=>a,iO9:()=>dd,iVQ:()=>xn,icB:()=>wt,jHe:()=>L,jXQ:()=>B,j_S:()=>is,j_r:()=>Er,jvp:()=>ao,l1x:()=>Gs,l3s:()=>zl,lJf:()=>Jt,laX:()=>$t,lsF:()=>Fn,mmg:()=>bt,n92:()=>M,n9G:()=>V,nN0:()=>il,nPL:()=>Ps,nQv:()=>l,nTy:()=>sl,naX:()=>ue,oh5:()=>As,p71:()=>S,pAL:()=>Q,pPQ:()=>ka,qX8:()=>ee,rYP:()=>ko,rYX:()=>xr,rvo:()=>Ds,rwP:()=>Di,s$r:()=>nl,s8e:()=>te,scM:()=>Pi,t3s:()=>Y,taW:()=>li,ucE:()=>ft,ucQ:()=>xi,vA3:()=>ul,vfG:()=>D,w4P:()=>yi,wA2:()=>Fi,wGv:()=>eo,wa4:()=>x,wox:()=>Tn,wvc:()=>ri,x1i:()=>q,xER:()=>mt,yE0:()=>he,yQX:()=>Ws,yeK:()=>ta,yth:()=>w,zRb:()=>gt,zev:()=>z,zmG:()=>ad,zn:()=>ol,zwR:()=>o});var s=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,i){const s=t?this.allAsyncListeners:this.allSyncListeners;let o=s.get(e);return!o&&i&&(o=new Set,s.set(e,o)),o}noRegisteredListenersExist(){return 0===this.allSyncListeners.size&&0===this.allAsyncListeners.size&&0===this.globalSyncListeners.size&&0===this.globalAsyncListeners.size}addEventListener(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.getListeners(e,i,!0).add(t)}removeEventListener(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=this.getListeners(e,i,!1);if(s&&(s.delete(t),0===s.size)){(i?this.allAsyncListeners:this.allSyncListeners).delete(e)}}addGlobalListener(e){(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.globalAsyncListeners:this.globalSyncListeners).add(e)}removeGlobalListener(e){(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.globalAsyncListeners:this.globalSyncListeners).delete(e)}dispatchEvent(e){const t=e;this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){var i;const s=e.type;if(t&&"event"in e){const t=e.event;t instanceof Event&&(e.eventPath=t.composedPath())}const o=(i,s)=>i.forEach((i=>{if(!s.has(i))return;const o=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming((()=>i(e))):()=>i(e);t?this.dispatchAsync(o):o()})),n=null!==(i=this.getListeners(s,t,!1))&&void 0!==i?i:new Set,r=new Set(n);r.size>0&&o(r,n);new Set(t?this.globalAsyncListeners:this.globalSyncListeners).forEach((i=>{const o=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming((()=>i(s,e))):()=>i(s,e);t?this.dispatchAsync(o):o()}))}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){const e=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(e):e(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach((e=>e()))}};function o(e){return null!=e&&e.length>0}function n(e){if(e&&e.length)return e[e.length-1]}function r(e,t,i){return null==e&&null==t||null!=e&&null!=t&&e.length===t.length&&e.every(((e,s)=>i?i(e,t[s]):t[s]===e))}function l(e,t){return r(e,t)}function a(e,t){if(e)for(let i=e.length-2;i>=0;i--){const s=e[i]===t,o=e[i+1]===t;s&&o&&e.splice(i+1,1)}}function d(e,t){const i=e.indexOf(t);i>=0&&(e[i]=e[e.length-1],e.pop())}function c(e,t){const i=e.indexOf(t);i>=0&&e.splice(i,1)}function u(e,t,i){e.splice(i,0,t)}function h(e,t,i){if(null!=e&&null!=t)for(let s=t.length-1;s>=0;s--){u(e,t[s],i)}}function p(e,t,i){!function(e,t){for(let i=0;i<t.length;i++)c(e,t[i])}(e,t),t.slice().reverse().forEach((t=>u(e,t,i)))}function g(e,t){return e.indexOf(t)>-1}function m(e,t){null!=t&&null!=e&&t.forEach((t=>e.push(t)))}var v="__ag_Grid_Stop_Propagation",f=["touchstart","touchend","touchmove","touchcancel","scroll"],C={};function w(e){e[v]=!0}function S(e){return!0===e[v]}var y=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return t=>{if("boolean"===typeof C[t])return C[t];const i=document.createElement(e[t]||"div");return C[t="on"+t]=t in i}})();function b(e,t,i){let s=t;for(;s;){const t=e.getDomData(s,i);if(t)return t;s=s.parentElement}return null}function R(e,t){return!(!t||!e)&&function(e){const t=e;if(t.path)return t.path;if(t.composedPath)return t.composedPath();return function(e){const t=[];let i=e.target;for(;i;)t.push(i),i=i.parentElement;return t}(t)}(t).indexOf(e)>=0}var F=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.gridId=e.context.getGridId(),this.frameworkOverrides=e.frameworkOverrides,this.stubContext=e.context,this.eventService=e.eventService,this.gos=e.gos,this.localeService=e.localeService}getFrameworkOverrides(){return this.frameworkOverrides}destroy(){for(let e=0;e<this.destroyFunctions.length;e++)this.destroyFunctions[e]();this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t){this.localEventService||(this.localEventService=new s),this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService&&this.localEventService.removeEventListener(e,t)}dispatchLocalEvent(e){this.localEventService&&this.localEventService.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventService,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){const i=[];for(const s in t){const o=t[s];o&&i.push(this._setupListener(e,s,o))}return i}_setupListener(e,t,i){if(this.destroyed)return()=>null;e instanceof HTMLElement?function(e,t,i,s){const o=g(f,i)?{passive:!0}:void 0;e&&e.addEventListener&&e.addEventListener(t,i,s,o)}(this.getFrameworkOverrides(),e,t,i):e.addEventListener(t,i);const s=()=>(e.removeEventListener(t,i),null);return this.destroyFunctions.push(s),()=>(s(),this.destroyFunctions=this.destroyFunctions.filter((e=>e!==s)),null)}setupGridOptionListener(e,t){this.gos.addPropertyEventListener(e,t);const i=()=>(this.gos.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter((e=>e!==i)),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupGridOptionListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const i=e.join("-")+this.propertyListenerId++,s=e=>{if(e.changeSet){if(e.changeSet&&e.changeSet.id===this.lastChangeSetIdLookup[i])return;this.lastChangeSetIdLookup[i]=e.changeSet.id}const s={type:"gridPropertyChanged",changeSet:e.changeSet,source:e.source};t(s)};e.forEach((e=>this.setupGridOptionListener(e,s)))}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createManagedBean(e,t){const i=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),i}createBean(e,t,i){return(t||this.stubContext).createBean(e,i)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}},E=class{constructor(e){this.frameworkOverrides=e,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=t=>{this.frameworkOverrides.wrapOutgoing((()=>e(t)))},this.wrappedListeners.set(e,t)),t}wrapGlobal(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=(t,i)=>{this.frameworkOverrides.wrapOutgoing((()=>e(t,i)))},this.wrappedGlobalListeners.set(e,t)),t}unwrap(e){var t;return null!==(t=this.wrappedListeners.get(e))&&void 0!==t?t:e}unwrapGlobal(e){var t;return null!==(t=this.wrappedGlobalListeners.get(e))&&void 0!==t?t:e}};function x(e){return null==e||""===e?null:e}function P(e){return null!=e&&(""!==e||arguments.length>1&&void 0!==arguments[1]&&arguments[1])}function M(e){return!P(e)}function D(e){return null==e||0===e.length}function I(e){return null!=e&&"function"===typeof e.toString?e.toString():null}function T(e){if(void 0===e)return;if(null===e||""===e)return null;if("number"===typeof e)return isNaN(e)?void 0:e;const t=parseInt(e,10);return isNaN(t)?void 0:t}function A(e){if(void 0!==e)return null!==e&&""!==e&&k(e)}function k(e){return"boolean"===typeof e?e:"string"===typeof e&&("TRUE"===e.toUpperCase()||""==e)}function L(e,t){return(e?JSON.stringify(e):null)===(t?JSON.stringify(t):null)}function G(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=null==e,o=null==t;if(e&&e.toNumber&&(e=e.toNumber()),t&&t.toNumber&&(t=t.toNumber()),s&&o)return 0;if(s)return-1;if(o)return 1;function n(e,t){return e>t?1:e<t?-1:0}if("string"!==typeof e)return n(e,t);if(!i)return n(e,t);try{return e.localeCompare(t)}catch(r){return n(e,t)}}function N(e){if(e instanceof Set||e instanceof Map){const t=[];return e.forEach((e=>t.push(e))),t}return Object.values(e)}var O=new Set(["__proto__","constructor","prototype"]);function B(e,t){if(null!=e)if(Array.isArray(e))for(let i=0;i<e.length;i++)t(i.toString(),e[i]);else for(const[i,s]of Object.entries(e))t(i,s)}function V(e){const t={},i=Object.keys(e);for(let s=0;s<i.length;s++){if(O.has(i[s]))continue;const o=i[s],n=e[o];t[o]=n}return t}function H(e,t){if(!e)return;const i=e,s={};return Object.keys(i).forEach((e=>{if(t&&t.indexOf(e)>=0||O.has(e))return;const o=i[e],n=_(o)&&o.constructor===Object;s[e]=n?H(o):o})),s}function W(e){if(!e)return[];const t=Object;if("function"===typeof t.values)return t.values(e);const i=[];for(const s in e)e.hasOwnProperty(s)&&e.propertyIsEnumerable(s)&&i.push(e[s]);return i}function z(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];P(t)&&B(t,((t,o)=>{if(O.has(t))return;let n=e[t];if(n!==o){if(s){if(null==n&&null!=o){"object"===typeof o&&o.constructor===Object&&(n={},e[t]=n)}}_(o)&&_(n)&&!Array.isArray(n)?z(n,o,i,s):(i||void 0!==o)&&(e[t]=o)}}))}function U(e,t,i){if(!t||!e)return;if(!i)return e[t];const s=t.split(".");let o=e;for(let n=0;n<s.length;n++){if(null==o)return;o=o[s[n]]}return o}function _(e){return"object"===typeof e&&null!==e}var K={resizable:!0,sortable:!0},Z=0;function j(){return Z++}function Y(e){return e instanceof q}var q=class extends F{constructor(e,t,i,o){super(),this.isColumn=!0,this.instanceId=j(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.columnEventService=new s,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=e,this.userProvidedColDef=t,this.colId=i,this.primary=o,this.setState(e)}wireBeans(e){this.columnHoverService=e.columnHoverService}getInstanceId(){return this.instanceId}setState(e){void 0!==e.sort?"asc"!==e.sort&&"desc"!==e.sort||(this.sort=e.sort):"asc"!==e.initialSort&&"desc"!==e.initialSort||(this.sort=e.initialSort);const t=e.sortIndex,i=e.initialSortIndex;void 0!==t?null!==t&&(this.sortIndex=t):null!==i&&(this.sortIndex=i);const s=e.hide,o=e.initialHide;this.visible=void 0!==s?!s:!o,void 0!==e.pinned?this.setPinned(e.pinned):this.setPinned(e.initialPinned);const n=e.flex,r=e.initialFlex;void 0!==n?this.flex=n:void 0!==r&&(this.flex=r)}setColDef(e,t,i){this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.columnEventService.dispatchEvent(this.createColumnEvent("colDefChanged",i))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(e){this.parent=e}getParent(){return this.parent}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}postConstruct(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){const e=this.gos.get("suppressFieldDotNotation");this.fieldContainsDots=P(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!e,this.tooltipFieldContainsDots=P(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!e}initMinAndMaxWidths(){var e,t;const i=this.colDef;this.minWidth=null!==(e=i.minWidth)&&void 0!==e?e:20,this.maxWidth=null!==(t=i.maxWidth)&&void 0!==t?t:Number.MAX_SAFE_INTEGER}initTooltip(){this.tooltipEnabled=P(this.colDef.tooltipField)||P(this.colDef.tooltipValueGetter)||P(this.colDef.tooltipComponent)}resetActualWidth(e){const t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t;const i=T(e.width),s=T(e.initialWidth);return t=null!=i?i:null!=s?s:200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){if(M(this.colDef)||M(this.colDef.showRowGroup))return!1;const t=!0===this.colDef.showRowGroup,i=this.colDef.showRowGroup===e;return t||i}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}addEventListener(e,t){var i,s;this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.columnEventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new E(this.frameworkOverrides));const o=null!==(i=null===(s=this.frameworkEventListenerService)||void 0===s?void 0:s.wrap(t))&&void 0!==i?i:t;this.columnEventService.addEventListener(e,o)}removeEventListener(e,t){var i,s;const o=null!==(i=null===(s=this.frameworkEventListenerService)||void 0===s?void 0:s.unwrap(t))&&void 0!==i?i:t;this.columnEventService.removeEventListener(e,o)}createColumnFunctionCallbackParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){if("boolean"===typeof this.colDef.suppressNavigable)return this.colDef.suppressNavigable;if("function"===typeof this.colDef.suppressNavigable){const t=this.createColumnFunctionCallbackParams(e);return(0,this.colDef.suppressNavigable)(t)}return!1}isCellEditable(e){return!(e.group&&!this.gos.get("enableGroupEdit"))&&this.isColumnFunc(e,this.colDef.editable)}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){return this.isColumnFunc(e,this.colDef.checkboxSelection)}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){var t;return null!==(t=this.colDef[e])&&void 0!==t?t:K[e]}isColumnFunc(e,t){if("boolean"===typeof t)return t;if("function"===typeof t){return t(this.createColumnFunctionCallbackParams(e))}return!1}setMoving(e,t){this.moving=e,this.columnEventService.dispatchEvent(this.createColumnEvent("movingChanged",t))}createColumnEvent(e,t){return this.gos.addGridCommonParams({type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}setSort(e,t){this.sort!==e&&(this.sort=e,this.columnEventService.dispatchEvent(this.createColumnEvent("sortChanged",t))),this.dispatchStateUpdatedEvent("sort")}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return"asc"===this.sort}isSortDescending(){return"desc"===this.sort}isSortNone(){return M(this.sort)}isSorting(){return P(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(e){this.sortIndex=e,this.dispatchStateUpdatedEvent("sortIndex")}setMenuVisible(e,t){this.menuVisible!==e&&(this.menuVisible=e,this.columnEventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",t)))}isMenuVisible(){return this.menuVisible}setAggFunc(e){this.aggFunc=e,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.columnEventService.dispatchEvent(this.createColumnEvent("leftChanged",t)))}isFilterActive(){return this.filterActive}setFilterActive(e,t,i){this.filterActive!==e&&(this.filterActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",t)));const s=this.createColumnEvent("filterChanged",t);i&&z(s,i),this.columnEventService.dispatchEvent(s)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(e){this.pinned=!0===e||"left"===e?"left":"right"===e?"right":null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",t)))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",t)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return"left"===this.pinned||"right"===this.pinned}isPinnedLeft(){return"left"===this.pinned}isPinnedRight(){return"right"===this.pinned}getPinned(){return this.pinned}setVisible(e,t){const i=!0===e;this.visible!==i&&(this.visible=i,this.columnEventService.dispatchEvent(this.createColumnEvent("visibleChanged",t))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){const e=this.getColDef();return!e.suppressSpanHeaderHeight&&!e.autoHeaderHeight}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const t=e.getPaddingLevel()+1;let i=!0;for(;e;){if(!e.isPadding()){i=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:i}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(M(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.colSpan(t);return Math.max(i,1)}getRowSpan(e){if(M(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.rowSpan(t);return Math.max(i,1)}setActualWidth(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex&&"flex"!==t&&"gridInitializing"!==t&&(this.flex=null),i||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.columnEventService.dispatchEvent(this.createColumnEvent("widthChanged",e))}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(e){this.flex!==e&&(this.flex=e),this.dispatchStateUpdatedEvent("flex")}setMinimum(e){this.setActualWidth(this.minWidth,e)}setRowGroupActive(e,t){this.rowGroupActive!==e&&(this.rowGroupActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",t))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(e,t){this.pivotActive!==e&&(this.pivotActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",t))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(e,t){this.aggregationActive!==e&&(this.aggregationActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnValueChanged",t)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return!0===this.colDef.enablePivot}isAllowValue(){return!0===this.colDef.enableValue}isAllowRowGroup(){return!0===this.colDef.enableRowGroup}dispatchStateUpdatedEvent(e){this.columnEventService.dispatchEvent({type:"columnStateUpdated",key:e})}};function Q(e){return e instanceof X}var X=class extends F{constructor(e,t,i,s){super(),this.isColumn=!1,this.expandable=!1,this.instanceId=j(),this.expandableListenerRemoveCallback=null,this.colGroupDef=e,this.groupId=t,this.expanded=!!e&&!!e.openByDefault,this.padding=i,this.level=s}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return!!this.children&&this.children.some((e=>e.isVisible()))}isPadding(){return this.padding}setExpanded(e){this.expanded=void 0!==e&&e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}addLeafColumns(e){this.children&&this.children.forEach((t=>{Y(t)?e.push(t):Q(t)&&t.addLeafColumns(e)}))}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach((t=>t.addEventListener("visibleChanged",e))),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach((t=>t.removeEventListener("visibleChanged",e))),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,i=!1;const s=this.findChildrenRemovingPadding();for(let n=0,r=s.length;n<r;n++){const o=s[n];if(!o.isVisible())continue;const r=o.getColumnGroupShow();"open"===r?(e=!0,i=!0):"closed"===r?(t=!0,i=!0):(e=!0,t=!0)}const o=e&&t&&i;this.expandable!==o&&(this.expandable=o,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const e=[],t=i=>{i.forEach((i=>{Q(i)&&i.isPadding()?t(i.children):e.push(i)}))};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},$={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},J={};function ee(e,t){J[t]||(e(),J[t]=!0)}function te(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];console.log("AG Grid: "+e,...i)}function ie(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];ee((()=>console.warn("AG Grid: "+e,...i)),e+(null===i||void 0===i?void 0:i.join("")))}function se(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];ee((()=>console.error("AG Grid: "+e,...i)),e+(null===i||void 0===i?void 0:i.join("")))}function oe(e){return!!(e&&e.constructor&&e.call&&e.apply)}function ne(e){!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.length>0&&window.setTimeout((()=>e.forEach((e=>e()))),t)}(e,400)}var re=[],le=!1;function ae(e){re.push(e),le||(le=!0,window.setTimeout((()=>{const e=re.slice();re.length=0,le=!1,e.forEach((e=>e()))}),0))}function de(e,t){let i;return function(){for(var s=arguments.length,o=new Array(s),n=0;n<s;n++)o[n]=arguments[n];const r=this;window.clearTimeout(i),i=window.setTimeout((function(){e.apply(r,o)}),t)}}function ce(e,t){let i=0;return function(){const s=(new Date).getTime();if(!(s-i<t)){i=s;for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];e.apply(this,n)}}}function ue(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,s=arguments.length>3?arguments[3]:void 0;const o=(new Date).getTime();let n=null,r=!1;const l=()=>{const l=(new Date).getTime()-o>i;(e()||l)&&(t(),r=!0,null!=n&&(window.clearInterval(n),n=null),l&&s&&ie(s))};l(),r||(n=window.setInterval(l,10))}function he(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return e=>t.reduce(((e,t)=>t(e)),e)}var pe=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=I(e);let i=0;for(;;){let s;if(e?(s=e,0!==i&&(s+="_"+i)):t?(s=t,0!==i&&(s+="_"+i)):s=i,!this.existingKeys[s])return this.existingKeys[s]=!0,String(s);i++}}},ge="ag-Grid-AutoColumn";function me(e){const t=[],i=e=>{for(let s=0;s<e.length;s++){const o=e[s];Y(o)?t.push(o):Q(o)&&i(o.getChildren())}};return i(e),t}function ve(e){return e.reduce(((e,t)=>e+t.getActualWidth()),0)}function fe(e,t,i){const s={};if(!t)return;ye(null,t,(e=>{s[e.getInstanceId()]=e})),i&&ye(null,i,(e=>{s[e.getInstanceId()]=null}));const o=Object.values(s).filter((e=>null!=e));e.destroyBeans(o)}function Ce(e){return e.getId().startsWith(ge)}function we(e){let t=[];if(e instanceof Array){e.some((e=>"string"!==typeof e))?ie("if colDef.type is supplied an array it should be of type 'string[]'"):t=e}else"string"===typeof e?t=e.split(","):ie("colDef.type should be of type 'string' | 'string[]'");return t}var Se=class extends F{constructor(){super(...arguments),this.beanName="columnFactory"}wireBeans(e){this.dataTypeService=e.dataTypeService}createColumnTree(e,t,i,s){const o=new pe,{existingCols:n,existingGroups:r,existingColKeys:l}=this.extractExistingTreeData(i);o.addExistingKeys(l);const a=this.recursivelyCreateColumns(e,0,t,n,o,r,s),d=this.findMaxDept(a,0),c=this.balanceColumnTree(a,0,d,o);return ye(null,c,((e,t)=>{Q(e)&&e.setupExpandable(),e.setOriginalParent(t)})),{columnTree:c,treeDept:d}}extractExistingTreeData(e){const t=[],i=[],s=[];return e&&ye(null,e,(e=>{if(Q(e)){const t=e;i.push(t)}else{const i=e;s.push(i.getId()),t.push(i)}})),{existingCols:t,existingGroups:i,existingColKeys:s}}createForAutoGroups(e,t){const i=[],s=this.findDepth(t);return e.forEach((e=>{let t=e;for(let i=s-1;i>=0;i--){const s=new X(null,"FAKE_PATH_".concat(e.getId(),"}_").concat(i),!0,i);this.createBean(s),s.setChildren([t]),t.setOriginalParent(s),t=s}0===s&&e.setOriginalParent(null),i.push(t)})),[i,s]}findDepth(e){let t=0,i=e;for(;i&&i[0]&&Q(i[0]);)t++,i=i[0].getChildren();return t}balanceColumnTree(e,t,i,s){const o=[];for(let n=0;n<e.length;n++){const r=e[n];if(Q(r)){const e=r,n=this.balanceColumnTree(e.getChildren(),t+1,i,s);e.setChildren(n),o.push(e)}else{let n,l;for(let e=i-1;e>=t;e--){const e=s.getUniqueKey(null,null),i=this.createMergedColGroupDef(null),o=new X(i,e,!0,t);this.createBean(o),l&&l.setChildren([o]),l=o,n||(n=l)}if(n&&l){o.push(n);if(e.some((e=>Q(e)))){l.setChildren([r]);continue}l.setChildren(e);break}o.push(r)}}return o}findMaxDept(e,t){let i=t;for(let s=0;s<e.length;s++){const o=e[s];if(Q(o)){const e=o,s=this.findMaxDept(e.getChildren(),t+1);i<s&&(i=s)}}return i}recursivelyCreateColumns(e,t,i,s,o,n,r){if(!e)return[];const l=new Array(e.length);for(let a=0;a<l.length;a++){const d=e[a];this.isColumnGroup(d)?l[a]=this.createColumnGroup(i,d,t,s,o,n,r):l[a]=this.createColumn(i,d,s,o,r)}return l}createColumnGroup(e,t,i,s,o,n,r){const l=this.createMergedColGroupDef(t),a=o.getUniqueKey(l.groupId||null,null),d=new X(l,a,!1,i);this.createBean(d);const c=this.findExistingGroup(t,n);c&&n.splice(c.idx,1);const u=null===c||void 0===c?void 0:c.group;u&&d.setExpanded(u.isExpanded());const h=this.recursivelyCreateColumns(l.children,i+1,e,s,o,n,r);return d.setChildren(h),d}createMergedColGroupDef(e){const t={};return Object.assign(t,this.gos.get("defaultColGroupDef")),Object.assign(t,e),t}createColumn(e,t,i,s,o){var n;const r=this.findExistingColumn(t,i);r&&(null===i||void 0===i||i.splice(r.idx,1));let l=null===r||void 0===r?void 0:r.column;if(l){const e=this.addColumnDefaultAndTypes(t,l.getColId());l.setColDef(e,t,o),this.applyColumnState(l,e,o)}else{const i=s.getUniqueKey(t.colId,t.field),o=this.addColumnDefaultAndTypes(t,i);l=new q(o,t,i,e),this.createBean(l)}return null===(n=this.dataTypeService)||void 0===n||n.addColumnListeners(l),l}applyColumnState(e,t,i){const s=T(t.flex);void 0!==s&&e.setFlex(s);if(e.getFlex()<=0){const s=T(t.width);if(null!=s)e.setActualWidth(s,i);else{const t=e.getActualWidth();e.setActualWidth(t,i)}}void 0!==t.sort&&("asc"==t.sort||"desc"==t.sort?e.setSort(t.sort,i):e.setSort(void 0,i));const o=T(t.sortIndex);void 0!==o&&e.setSortIndex(o);const n=A(t.hide);void 0!==n&&e.setVisible(!n,i),void 0!==t.pinned&&e.setPinned(t.pinned)}findExistingColumn(e,t){if(t)for(let i=0;i<t.length;i++){const s=t[i].getUserProvidedColDef();if(!s)continue;if(null!=e.colId){if(t[i].getId()===e.colId)return{idx:i,column:t[i]};continue}if(null!=e.field){if(s.field===e.field)return{idx:i,column:t[i]}}else if(s===e)return{idx:i,column:t[i]}}}findExistingGroup(e,t){if(null!=e.groupId)for(let i=0;i<t.length;i++){const s=t[i];if(s.getColGroupDef()&&s.getId()===e.groupId)return{idx:i,group:s}}}addColumnDefaultAndTypes(e,t){var i;const s={};z(s,this.gos.get("defaultColDef"),!1,!0);const o=this.updateColDefAndGetColumnType(s,e,t);o&&this.assignColumnTypes(o,s),z(s,e,!1,!0);const n=this.gos.get("autoGroupColumnDef"),r=this.gos.isColumnsSortingCoupledToGroup();return e.rowGroup&&n&&r&&z(s,{sort:n.sort,initialSort:n.initialSort},!1,!0),null===(i=this.dataTypeService)||void 0===i||i.validateColDef(s),s}updateColDefAndGetColumnType(e,t,i){var s,o,n;const r=null===(s=this.dataTypeService)||void 0===s?void 0:s.updateColDefAndGetColumnType(e,t,i),l=null!==(o=null!==(n=t.type)&&void 0!==n?n:r)&&void 0!==o?o:e.type;return e.type=l,l?we(l):void 0}assignColumnTypes(e,t){if(!e.length)return;const i=Object.assign({},$);B(this.gos.get("columnTypes")||{},((e,t)=>{if(e in i)ie("the column type '".concat(e,"' is a default column type and cannot be overridden."));else{t.type&&ie("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),i[e]=t}})),e.forEach((e=>{const s=i[e.trim()];s?z(t,s,!1,!0):ie("colDef.type '"+e+"' does not correspond to defined gridOptions.columnTypes")}))}isColumnGroup(e){return void 0!==e.children}};function ye(e,t,i){if(t)for(let s=0;s<t.length;s++){const o=t[s];Q(o)&&ye(o,o.getChildren(),i),i(o,e)}}var be=class extends F{constructor(){super(...arguments),this.beanName="columnModel",this.pivotMode=!1,this.autoHeightActiveAtLeastOnce=!1,this.ready=!1,this.changeEventsDispatching=!1,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}wireBeans(e){this.context=e.context,this.columnFactory=e.columnFactory,this.columnSizeService=e.columnSizeService,this.visibleColsService=e.visibleColsService,this.columnViewportService=e.columnViewportService,this.pivotResultColsService=e.pivotResultColsService,this.columnAnimationService=e.columnAnimationService,this.autoColService=e.autoColService,this.valueCache=e.valueCache,this.columnDefFactory=e.columnDefFactory,this.columnApplyStateService=e.columnApplyStateService,this.columnGroupStateService=e.columnGroupStateService,this.eventDispatcher=e.columnEventDispatcher,this.columnMoveService=e.columnMoveService,this.columnAutosizeService=e.columnAutosizeService,this.funcColsService=e.funcColsService,this.quickFilterService=e.quickFilterService,this.showRowGroupColsService=e.showRowGroupColsService,this.environment=e.environment}postConstruct(){const e=this.gos.get("pivotMode");this.isPivotSettingAllowed(e)&&(this.pivotMode=e),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],(e=>this.refreshAll(Re(e.source)))),this.addManagedPropertyListener("autoGroupColumnDef",(e=>this.onAutoGroupColumnDefChanged(Re(e.source)))),this.addManagedPropertyListeners(["defaultColDef","columnTypes","suppressFieldDotNotation"],(e=>this.recreateColumnDefs(Re(e.source)))),this.addManagedPropertyListener("pivotMode",(e=>this.setPivotMode(this.gos.get("pivotMode"),Re(e.source)))),this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered()})}createColsFromColDefs(e,t){var i;const s=e?this.columnApplyStateService.compareColumnStatesAndDispatchEvents(t):void 0;this.valueCache.expire();const o=this.colDefCols&&this.colDefCols.list,n=this.colDefCols&&this.colDefCols.tree,r=this.columnFactory.createColumnTree(this.colDefs,!0,n,t);fe(this.context,null===(i=this.colDefCols)||void 0===i?void 0:i.tree,r.columnTree);const l=r.columnTree,a=r.treeDept,d=me(l),c={};d.forEach((e=>c[e.getId()]=e)),this.colDefCols={tree:l,treeDepth:a,list:d,map:c},this.funcColsService.extractCols(t,o),this.ready=!0,this.refreshCols();e&&!this.showingPivotResult&&!this.gos.get("maintainColumnOrder")&&this.orderColsLikeColDefCols(),this.visibleColsService.refresh(t),this.columnViewportService.checkViewportColumns(),this.eventDispatcher.everythingChanged(t),s&&(this.changeEventsDispatching=!0,s(),this.changeEventsDispatching=!1),this.eventDispatcher.newColumnsLoaded(t),"gridInitializing"===t&&this.columnSizeService.applyAutosizeStrategy()}refreshCols(){var e,t,i;if(!this.colDefCols)return;const s=null===(e=this.cols)||void 0===e?void 0:e.tree;this.saveColOrder(),this.selectCols(),this.createAutoCols(),this.addAutoCols(),this.restoreColOrder(),this.positionLockedCols(),null===(t=this.showRowGroupColsService)||void 0===t||t.refresh(),null===(i=this.quickFilterService)||void 0===i||i.refreshQuickFilterCols(),this.setColSpanActive(),this.setAutoHeightActive(),this.visibleColsService.clear(),this.columnViewportService.clear();!r(s,this.cols.tree)&&this.eventDispatcher.gridColumns()}selectCols(){const e=this.pivotResultColsService.getPivotResultCols();if(this.showingPivotResult=null!=e,e){const{map:t,list:i,tree:s,treeDepth:o}=e;this.cols={list:i.slice(),map:{...t},tree:s.slice(),treeDepth:o};e.list.some((e=>{var t;return void 0!==(null===(t=this.cols)||void 0===t?void 0:t.map[e.getColId()])}))||(this.lastPivotOrder=null)}else{const{map:e,list:t,tree:i,treeDepth:s}=this.colDefCols;this.cols={list:t.slice(),map:{...e},tree:i.slice(),treeDepth:s}}}getColsToShow(){const e=this.isPivotMode()&&!this.isShowingPivotResult(),t=this.funcColsService.getValueColumns();return this.cols.list.filter((i=>{const s=Ce(i);if(e){const e=t&&g(t,i);return s||e}return s||i.isVisible()}))}addAutoCols(){var e;null!=this.autoCols&&(this.cols.list=this.autoCols.list.concat(this.cols.list),this.cols.tree=this.autoCols.tree.concat(this.cols.tree),(e=this.cols).map={},e.list.forEach((t=>e.map[t.getId()]=t)))}createAutoCols(){var e,t,i;const s=this.gos.isGroupUseEntireRow(this.pivotMode),o=this.pivotMode?this.gos.get("pivotSuppressAutoColumn"):this.isSuppressAutoCol(),n=this.funcColsService.getRowGroupColumns(),l=()=>{this.autoCols&&(fe(this.context,this.autoCols.tree),this.autoCols=null)};if(!(n.length>0||this.gos.get("treeData"))||o||s||!this.autoColService)return void l();const a=null!==(e=this.autoColService.createAutoCols(n))&&void 0!==e?e:[],d=(c=a,u=(null===(t=this.autoCols)||void 0===t?void 0:t.list)||null,r(c,u,((e,t)=>e.getColId()===t.getColId())));var c,u;const h=this.cols.treeDepth,p=this.autoCols?this.autoCols.treeDepth:-1;if(d&&p==h)return;l();const[g,m]=this.columnFactory.createForAutoGroups(a,null===(i=this.cols)||void 0===i?void 0:i.tree);this.autoCols={list:a,tree:g,treeDepth:m,map:{}};const v=e=>{if(!e)return null;const t=e.filter((e=>!Ce(e)));return[...a,...t]};this.lastOrder=v(this.lastOrder),this.lastPivotOrder=v(this.lastPivotOrder)}refreshAll(e){this.isReady()&&(this.refreshCols(),this.visibleColsService.refresh(e))}setColsVisible(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;this.columnApplyStateService.applyColumnState({state:e.map((e=>({colId:"string"===typeof e?e:e.getColId(),hide:!t})))},i)}setColsPinned(e,t,i){if(!this.cols)return;if(D(e))return;if(this.gos.isDomLayout("print"))return void ie("Changing the column pinning status is not allowed with domLayout='print'");let s;this.columnAnimationService.start(),s=!0===t||"left"===t?"left":"right"===t?"right":null;const o=[];e.forEach((e=>{if(!e)return;const t=this.getCol(e);t&&t.getPinned()!==s&&(t.setPinned(s),o.push(t))})),o.length&&(this.visibleColsService.refresh(i),this.eventDispatcher.columnPinned(o,i)),this.columnAnimationService.finish()}setColumnGroupOpened(e,t,i){let s;s=Q(e)?e.getId():e||"",this.columnGroupStateService.setColumnGroupState([{groupId:s,open:t}],i)}getProvidedColGroup(e){var t;let i=null;return ye(null,null===(t=this.cols)||void 0===t?void 0:t.tree,(t=>{Q(t)&&t.getId()===e&&(i=t)})),i}isColGroupLocked(e){const t=this.gos.get("groupLockGroupColumns");if(!e.isRowGroupActive()||0===t)return!1;if(-1===t)return!0;return t>this.funcColsService.getRowGroupColumns().findIndex((t=>t.getColId()===e.getColId()))}isSuppressAutoCol(){if("custom"===this.gos.get("groupDisplayType"))return!0;return"custom"===this.gos.get("treeDataDisplayType")}setAutoHeightActive(){if(this.autoHeightActive=this.cols.list.some((e=>e.isAutoHeight())),this.autoHeightActive){this.autoHeightActiveAtLeastOnce=!0;this.gos.isRowModelType("clientSide")||this.gos.isRowModelType("serverSide")||ie("autoHeight columns only work with Client Side Row Model and Server Side Row Model.")}}restoreColOrder(){const e=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!e)return;const t=new Map(e.map(((e,t)=>[e,t])));if(!this.cols.list.some((e=>t.has(e))))return;const i=new Map(this.cols.list.map((e=>[e,!0]))),s=e.filter((e=>i.has(e))),o=new Map(s.map((e=>[e,!0]))),n=this.cols.list.filter((e=>!o.has(e))),r=s.slice();n.forEach((e=>{let t=e.getOriginalParent();if(!t)return void r.push(e);const i=[];for(;!i.length&&t;){t.getLeafColumns().forEach((e=>{const t=r.indexOf(e)>=0,s=i.indexOf(e)<0;t&&s&&i.push(e)})),t=t.getOriginalParent()}if(!i.length)return void r.push(e);const s=i.map((e=>r.indexOf(e))),o=Math.max(...s);u(r,e,o+1)})),this.cols.list=r}orderColsLikeColDefCols(){if(!this.colDefCols||!this.cols)return;const e=this.colDefCols.list.filter((e=>this.cols.list.indexOf(e)>=0)),t=this.cols.list.filter((t=>e.indexOf(t)<0));this.cols.list=[...t,...e],this.cols.list=this.columnMoveService.placeLockedColumns(this.cols.list)}sortColsLikeKeys(e){if(null==this.cols)return;let t=[];const i={};e.forEach((e=>{if(i[e])return;const s=this.cols.map[e];s&&(t.push(s),i[e]=!0)}));let s=0;this.cols.list.forEach((e=>{const o=e.getColId();if(null!=i[o])return;o.startsWith(ge)?u(t,e,s++):t.push(e)})),t=this.columnMoveService.placeLockedColumns(t),this.columnMoveService.doesMovePassMarryChildren(t)?this.cols.list=t:ie("Applying column order broke a group where columns should be married together. Applying new order has been discarded.")}sortColsLikeCols(e){if(!e||e.length<=1)return;e.filter((e=>this.cols.list.indexOf(e)<0)).length>0||e.sort(((e,t)=>this.cols.list.indexOf(e)-this.cols.list.indexOf(t)))}resetColDefIntoCol(e,t){const i=e.getUserProvidedColDef();if(!i)return!1;const s=this.columnFactory.addColumnDefaultAndTypes(i,e.getColId());return e.setColDef(s,i,t),!0}queueResizeOperations(){this.shouldQueueResizeOperations=!0}isShouldQueueResizeOperations(){return this.shouldQueueResizeOperations}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach((e=>e())),this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}moveInCols(e,t,i){var s;p(null===(s=this.cols)||void 0===s?void 0:s.list,e,t),this.visibleColsService.refresh(i)}positionLockedCols(){this.cols.list=this.columnMoveService.placeLockedColumns(this.cols.list)}saveColOrder(){var e,t;this.showingPivotResult?this.lastPivotOrder=null===(e=this.cols)||void 0===e?void 0:e.list:this.lastOrder=null===(t=this.cols)||void 0===t?void 0:t.list}getColumnDefs(){if(!this.colDefCols)return;const e=this.colDefCols.list.slice();this.showingPivotResult?e.sort(((e,t)=>this.lastOrder.indexOf(e)-this.lastOrder.indexOf(t))):this.lastOrder&&e.sort(((e,t)=>this.cols.list.indexOf(e)-this.cols.list.indexOf(t)));const t=this.funcColsService.getRowGroupColumns(),i=this.funcColsService.getPivotColumns();return this.columnDefFactory.buildColumnDefs(e,t,i)}isShowingPivotResult(){return this.showingPivotResult}isChangeEventsDispatching(){return this.changeEventsDispatching}isColSpanActive(){return this.colSpanActive}isProvidedColGroupsPresent(){var e;return(null===(e=this.colDefCols)||void 0===e?void 0:e.treeDepth)>0}setColSpanActive(){this.colSpanActive=this.cols.list.some((e=>null!=e.getColDef().colSpan))}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}getHeaderRowCount(){return this.cols?this.cols.treeDepth+1:-1}isReady(){return this.ready}isPivotMode(){return this.pivotMode}setPivotMode(e,t){e!==this.pivotMode&&this.isPivotSettingAllowed(this.pivotMode)&&(this.pivotMode=e,this.ready&&(this.refreshCols(),this.visibleColsService.refresh(t),this.eventDispatcher.pivotModeChanged()))}isPivotSettingAllowed(e){return!e||!this.gos.get("treeData")||(ie("Pivot mode not available with treeData."),!1)}isPivotActive(){const e=this.funcColsService.getPivotColumns();return this.pivotMode&&!D(e)}recreateColumnDefs(e){this.cols&&(this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e),this.createColsFromColDefs(!0,e))}setColumnDefs(e,t){const i=!!this.colDefs;this.colDefs=e,this.createColsFromColDefs(i,t)}destroy(){var e,t;fe(this.context,null===(e=this.colDefCols)||void 0===e?void 0:e.tree),fe(this.context,null===(t=this.autoCols)||void 0===t?void 0:t.tree),super.destroy()}getColTree(){return this.cols.tree}getColDefColTree(){return this.colDefCols.tree}getColDefCols(){var e;return null!==(e=this.colDefCols)&&void 0!==e&&e.list?this.colDefCols.list:null}getCols(){var e,t;return null!==(e=null===(t=this.cols)||void 0===t?void 0:t.list)&&void 0!==e?e:[]}getAllCols(){var e,t;const i=this.pivotResultColsService.getPivotResultCols(),s=null===i||void 0===i?void 0:i.list;return[].concat((null===(e=this.colDefCols)||void 0===e?void 0:e.list)||[],(null===(t=this.autoCols)||void 0===t?void 0:t.list)||[],s||[])}getColsForKeys(e){if(!e)return[];return e.map((e=>this.getCol(e))).filter((e=>null!=e))}getColDefCol(e){var t;return null!==(t=this.colDefCols)&&void 0!==t&&t.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return null==e?null:this.getColFromCollection(e,this.cols)}getColFromCollection(e,t){if(null==t)return null;const{map:i,list:s}=t;if("string"==typeof e&&i[e])return i[e];for(let o=0;o<s.length;o++)if(Fe(s[o],e))return s[o];return this.getAutoCol(e)}getAutoCol(e){return null==this.autoCols?null:this.autoCols.list.find((t=>Fe(t,e)))||null}getAutoCols(){var e;return(null===(e=this.autoCols)||void 0===e?void 0:e.list)||null}setColHeaderHeight(e,t){e.setAutoHeaderHeight(t)&&this.eventDispatcher.headerHeight(e)}getColumnGroupHeaderRowHeight(){return this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight()}getColumnHeaderRowHeight(){const e=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),t=this.visibleColsService.getAllCols().filter((e=>e.isAutoHeaderHeight())).map((e=>e.getAutoHeaderHeight()||0));return Math.max(e,...t)}getHeaderHeight(){var e;return null!==(e=this.gos.get("headerHeight"))&&void 0!==e?e:this.environment.getDefaultHeaderHeight()}getFloatingFiltersHeight(){var e;return null!==(e=this.gos.get("floatingFiltersHeight"))&&void 0!==e?e:this.getHeaderHeight()}getGroupHeaderHeight(){var e;return null!==(e=this.gos.get("groupHeaderHeight"))&&void 0!==e?e:this.getHeaderHeight()}getPivotHeaderHeight(){var e;return null!==(e=this.gos.get("pivotHeaderHeight"))&&void 0!==e?e:this.getHeaderHeight()}getPivotGroupHeaderHeight(){var e;return null!==(e=this.gos.get("pivotGroupHeaderHeight"))&&void 0!==e?e:this.getGroupHeaderHeight()}onFirstDataRendered(){const e=this.gos.get("autoSizeStrategy");if("fitCellContents"!==(null===e||void 0===e?void 0:e.type))return;const{colIds:t,skipHeader:i}=e;setTimeout((()=>{t?this.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:i,source:"autosizeColumns"}):this.columnAutosizeService.autoSizeAllColumns("autosizeColumns",i)}))}onAutoGroupColumnDefChanged(e){this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e)}};function Re(e){return"gridOptionsUpdated"===e?"gridOptionsChanged":e}function Fe(e,t){const i=e===t,s=e.getColDef()===t,o=e.getColId()==t;return i||s||o}var Ee=class extends F{constructor(){super(...arguments),this.beanName="columnAutosizeService",this.timesDelayed=0}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.animationFrameService=e.animationFrameService,this.autoWidthCalculator=e.autoWidthCalculator,this.eventDispatcher=e.columnEventDispatcher,this.ctrlsService=e.ctrlsService,this.renderStatusService=e.renderStatusService}autoSizeCols(e){if(this.columnModel.isShouldQueueResizeOperations())return void this.columnModel.pushResizeOperation((()=>this.autoSizeCols(e)));const{colKeys:t,skipHeader:i,skipHeaderGroups:s,stopAtGroup:o,source:n="api"}=e;if(this.animationFrameService.flushAllFrames(),this.timesDelayed<5&&this.renderStatusService&&!this.renderStatusService.areHeaderCellsRendered())return this.timesDelayed++,void setTimeout((()=>this.autoSizeCols(e)));this.timesDelayed=0;const r=[];let l=-1;const a=null!=i?i:this.gos.get("skipHeaderOnAutoSize"),d=null!=s?s:a;for(;0!==l;){l=0;const e=[];t.forEach((t=>{if(!t)return;const i=this.columnModel.getCol(t);if(!i)return;if(r.indexOf(i)>=0)return;const s=this.autoWidthCalculator.getPreferredWidthForColumn(i,a);if(s>0){const e=this.normaliseColumnWidth(i,s);i.setActualWidth(e,n),r.push(i),l++}e.push(i)})),e.length&&this.visibleColsService.refresh(n)}d||this.autoSizeColumnGroupsByColumns(t,n,o),this.eventDispatcher.columnResized(r,!0,"autosizeColumns")}autoSizeColumn(e,t,i){e&&this.autoSizeCols({colKeys:[e],skipHeader:i,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,i){const s=new Set;let o;this.columnModel.getColsForKeys(e).forEach((e=>{let t=e.getParent();for(;t&&t!=i;)t.isPadding()||s.add(t),t=t.getParent()}));for(const n of s){for(const e of this.ctrlsService.getHeaderRowContainerCtrls())if(o=e.getHeaderCtrlForColumn(n),o)break;o&&o.resizeLeafColumnsToFit(t)}return[]}autoSizeAllColumns(e,t){if(this.columnModel.isShouldQueueResizeOperations())return void this.columnModel.pushResizeOperation((()=>this.autoSizeAllColumns(e,t)));const i=this.visibleColsService.getAllCols();this.autoSizeCols({colKeys:i,skipHeader:t,source:e})}normaliseColumnWidth(e,t){const i=e.getMinWidth();t<i&&(t=i);const s=e.getMaxWidth();return e.isGreaterThanMax(t)&&(t=s),t}},xe=class extends F{constructor(){super(...arguments),this.beanName="funcColsService",this.rowGroupCols=[],this.valueCols=[],this.pivotCols=[]}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.aggFuncService=e.aggFuncService,this.visibleColsService=e.visibleColsService}getModifyColumnsNoEventsCallbacks(){return{addGroupCol:e=>this.rowGroupCols.push(e),removeGroupCol:e=>c(this.rowGroupCols,e),addPivotCol:e=>this.pivotCols.push(e),removePivotCol:e=>c(this.pivotCols,e),addValueCol:e=>this.valueCols.push(e),removeValueCol:e=>c(this.valueCols,e)}}getSourceColumnsForGroupColumn(e){const t=e.getColDef().showRowGroup;if(!t)return null;if(!0===t)return this.rowGroupCols.slice(0);const i=this.columnModel.getColDefCol(t);return i?[i]:null}sortRowGroupColumns(e){this.rowGroupCols.sort(e)}sortPivotColumns(e){this.pivotCols.sort(e)}getValueColumns(){return this.valueCols?this.valueCols:[]}getPivotColumns(){return this.pivotCols?this.pivotCols:[]}getRowGroupColumns(){return this.rowGroupCols?this.rowGroupCols:[]}isRowGroupEmpty(){return D(this.rowGroupCols)}setColumnAggFunc(e,t,i){if(!e)return;const s=this.columnModel.getColDefCol(e);s&&(s.setAggFunc(t),this.eventDispatcher.columnChanged("columnValueChanged",[s],i))}setRowGroupColumns(e,t){this.setColList(e,this.rowGroupCols,"columnRowGroupChanged",!0,!0,((e,i)=>this.setRowGroupActive(e,i,t)),t)}setRowGroupActive(e,t,i){e!==t.isRowGroupActive()&&(t.setRowGroupActive(e,i),e&&!this.gos.get("suppressRowGroupHidesColumns")&&this.columnModel.setColsVisible([t],!1,i),e||this.gos.get("suppressMakeColumnVisibleAfterUnGroup")||this.columnModel.setColsVisible([t],!0,i))}addRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!0,!0,(e=>this.setRowGroupActive(!0,e,t)),"columnRowGroupChanged",t)}removeRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!1,!0,(e=>this.setRowGroupActive(!1,e,t)),"columnRowGroupChanged",t)}addPivotColumns(e,t){this.updateColList(e,this.pivotCols,!0,!1,(e=>e.setPivotActive(!0,t)),"columnPivotChanged",t)}setPivotColumns(e,t){this.setColList(e,this.pivotCols,"columnPivotChanged",!0,!1,((e,i)=>{i.setPivotActive(e,t)}),t)}removePivotColumns(e,t){this.updateColList(e,this.pivotCols,!1,!1,(e=>e.setPivotActive(!1,t)),"columnPivotChanged",t)}setValueColumns(e,t){this.setColList(e,this.valueCols,"columnValueChanged",!1,!1,((e,i)=>this.setValueActive(e,i,t)),t)}setValueActive(e,t,i){if(e!==t.isValueActive()&&(t.setValueActive(e,i),e&&!t.getAggFunc()&&this.aggFuncService)){const e=this.aggFuncService.getDefaultAggFunc(t);t.setAggFunc(e)}}addValueColumns(e,t){this.updateColList(e,this.valueCols,!0,!1,(e=>this.setValueActive(!0,e,t)),"columnValueChanged",t)}removeValueColumns(e,t){this.updateColList(e,this.valueCols,!1,!1,(e=>this.setValueActive(!1,e,t)),"columnValueChanged",t)}moveRowGroupColumn(e,t,i){if(this.isRowGroupEmpty())return;const s=this.rowGroupCols[e],o=this.rowGroupCols.slice(e,t);this.rowGroupCols.splice(e,1),this.rowGroupCols.splice(t,0,s),this.eventDispatcher.rowGroupChanged(o,i)}setColList(e,t,i,s,o,n,r){if(D(this.columnModel.getCols()))return;const l=new Map;t.forEach(((e,t)=>l.set(e,t))),t.length=0,P(e)&&e.forEach((e=>{const i=this.columnModel.getColDefCol(e);i&&t.push(i)})),t.forEach(((e,t)=>{const i=l.get(e);void 0!==i?s&&i!==t||l.delete(e):l.set(e,0)}));(this.columnModel.getColDefCols()||[]).forEach((e=>{const i=t.indexOf(e)>=0;n(i,e)})),o&&this.columnModel.refreshCols(),this.visibleColsService.refresh(r),this.eventDispatcher.columnChanged(i,[...l.keys()],r)}updateColList(e,t,i,s,o,n,r){if(!e||D(e))return;let l=!1;e.forEach((e=>{if(!e)return;const s=this.columnModel.getColDefCol(e);if(s){if(i){if(t.indexOf(s)>=0)return;t.push(s)}else{if(t.indexOf(s)<0)return;c(t,s)}o(s),l=!0}})),l&&(s&&this.columnModel.refreshCols(),this.visibleColsService.refresh(r),this.eventDispatcher.genericColumnEvent(n,t,r))}extractCols(e,t){this.extractRowGroupCols(e,t),this.extractPivotCols(e,t),this.extractValueCols(e,t)}extractValueCols(e,t){this.valueCols=this.extractColsCommon(t,this.valueCols,((t,i)=>t.setValueActive(i,e)),(()=>{}),(()=>{}),(e=>{const t=e.aggFunc;return null===t||""===t?null:void 0!==t?!!t:void 0}),(e=>null!=e.initialAggFunc&&""!=e.initialAggFunc)),this.valueCols.forEach((e=>{const t=e.getColDef();null!=t.aggFunc&&""!=t.aggFunc?e.setAggFunc(t.aggFunc):e.getAggFunc()||e.setAggFunc(t.initialAggFunc)}))}extractRowGroupCols(e,t){this.rowGroupCols=this.extractColsCommon(t,this.rowGroupCols,((t,i)=>t.setRowGroupActive(i,e)),(e=>e.rowGroupIndex),(e=>e.initialRowGroupIndex),(e=>e.rowGroup),(e=>e.initialRowGroup))}extractPivotCols(e,t){this.pivotCols=this.extractColsCommon(t,this.pivotCols,((t,i)=>t.setPivotActive(i,e)),(e=>e.pivotIndex),(e=>e.initialPivotIndex),(e=>e.pivot),(e=>e.initialPivot))}extractColsCommon(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,n=arguments.length>5?arguments[5]:void 0,r=arguments.length>6?arguments[6]:void 0;const l=[],a=[];(this.columnModel.getColDefCols()||[]).forEach((i=>{const d=e.indexOf(i)<0,c=i.getColDef(),u=A(n(c)),h=A(r(c)),p=T(s(c)),g=T(o(c));let m;if(m=void 0!==u?u:void 0!==p?null!==p&&p>=0:d?void 0!==h?h:!!(void 0!==g)&&(null!=g&&g>=0):t.indexOf(i)>=0,m){(d?null!=p||null!=g:null!=p)?l.push(i):a.push(i)}}));const d=e=>{const t=s(e.getColDef()),i=o(e.getColDef());return null!=t?t:i};l.sort(((e,t)=>{const i=d(e),s=d(t);return i===s?0:i<s?-1:1}));const c=[].concat(l);return t.forEach((e=>{a.indexOf(e)>=0&&c.push(e)})),a.forEach((e=>{c.indexOf(e)<0&&c.push(e)})),t.forEach((e=>{c.indexOf(e)<0&&i(e,!1)})),c.forEach((e=>{t.indexOf(e)<0&&i(e,!0)})),c}generateColumnStateForRowGroupAndPivotIndexes(e,t){const i={},s=(e,t,s,o,n,r)=>{const l=this.columnModel.getColDefCols();if(!t.length||!l)return[];const a=Object.keys(e),d=new Set(a),c=new Set(a),u=new Set(t.map((e=>{const t=e.getColId();return c.delete(t),t})).concat(a)),h=[],p={};let g=0;for(let i=0;i<l.length;i++){const e=l[i].getColId();u.has(e)&&(h.push(e),p[e]=g++)}let m=1e3,v=!1,f=0;const C=t=>{const i=p[t];for(let s=f;s<i;s++){const t=h[s];c.has(t)&&(e[t][n]=m++,c.delete(t))}f=i};t.forEach((t=>{const l=t.getColId();if(d.has(l))C(l),e[l][n]=m++;else{const a=t.getColDef();if(null===a[n]||void 0===a[n]&&null==a[r]){if(!v){a[s]||void 0===a[s]&&a[o]?C(l):(c.forEach((t=>{e[t][n]=m+p[t]})),m+=h.length,v=!0)}i[l]||(i[l]={colId:l}),i[l][n]=m++}}}))};return s(e,this.rowGroupCols,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),s(t,this.pivotCols,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(i)}},Pe=class extends F{constructor(){super(...arguments),this.beanName="columnApplyStateService"}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.sortController=e.sortController,this.columnGetStateService=e.columnGetStateService,this.funcColsService=e.funcColsService,this.visibleColsService=e.visibleColsService,this.columnAnimationService=e.columnAnimationService,this.pivotResultColsService=e.pivotResultColsService}applyColumnState(e,t){const i=this.columnModel.getColDefCols()||[];if(D(i))return!1;if(e&&e.state&&!e.state.forEach)return ie("applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;const s=this.funcColsService.getModifyColumnsNoEventsCallbacks(),o=(i,o,n)=>{const r=this.compareColumnStatesAndDispatchEvents(t),l=o.slice(),a={},d={},u=[],h=[];let p=0;const g=this.funcColsService.getRowGroupColumns().slice(),m=this.funcColsService.getPivotColumns().slice();i.forEach((i=>{const o=i.colId||"";if(o.startsWith(ge))return u.push(i),void h.push(i);const r=n(o);r?(this.syncColumnWithStateItem(r,i,e.defaultState,a,d,!1,t,s),c(l,r)):(h.push(i),p+=1)}));const v=i=>this.syncColumnWithStateItem(i,null,e.defaultState,a,d,!1,t,s);l.forEach(v),this.funcColsService.sortRowGroupColumns(Me.bind(this,a,g)),this.funcColsService.sortPivotColumns(Me.bind(this,d,m)),this.columnModel.refreshCols();const f=(this.columnModel.getAutoCols()||[]).slice();return u.forEach((i=>{const o=this.columnModel.getAutoCol(i.colId);c(f,o),this.syncColumnWithStateItem(o,i,e.defaultState,null,null,!0,t,s)})),f.forEach(v),this.orderLiveColsLikeState(e),this.visibleColsService.refresh(t),this.eventDispatcher.everythingChanged(t),r(),{unmatchedAndAutoStates:h,unmatchedCount:p}};this.columnAnimationService.start();let{unmatchedAndAutoStates:n,unmatchedCount:r}=o(e.state||[],i,(e=>this.columnModel.getColDefCol(e)));if(n.length>0||P(e.defaultState)){const e=this.pivotResultColsService.getPivotResultCols();r=o(n,(null===e||void 0===e?void 0:e.list)||[],(e=>this.pivotResultColsService.getPivotResultCol(e))).unmatchedCount}return this.columnAnimationService.finish(),0===r}resetColumnState(e){if(D(this.columnModel.getColDefCols()))return;const t=me(this.columnModel.getColDefColTree()),i=[];let s=1e3,o=1e3,n=[];const r=this.columnModel.getAutoCols();r&&(n=n.concat(r)),t&&(n=n.concat(t)),n.forEach((e=>{const t=this.getColumnStateFromColDef(e);M(t.rowGroupIndex)&&t.rowGroup&&(t.rowGroupIndex=s++),M(t.pivotIndex)&&t.pivot&&(t.pivotIndex=o++),i.push(t)})),this.applyColumnState({state:i,applyOrder:!0},e)}getColumnStateFromColDef(e){const t=(e,t)=>null!=e?e:null!=t?t:null,i=e.getColDef(),s=t(i.sort,i.initialSort),o=t(i.sortIndex,i.initialSortIndex),n=t(i.hide,i.initialHide),r=t(i.pinned,i.initialPinned),l=t(i.width,i.initialWidth),a=t(i.flex,i.initialFlex);let d=t(i.rowGroupIndex,i.initialRowGroupIndex),c=t(i.rowGroup,i.initialRowGroup);null!=d||null!=c&&0!=c||(d=null,c=null);let u=t(i.pivotIndex,i.initialPivotIndex),h=t(i.pivot,i.initialPivot);null!=u||null!=h&&0!=h||(u=null,h=null);const p=t(i.aggFunc,i.initialAggFunc);return{colId:e.getColId(),sort:s,sortIndex:o,hide:n,pinned:r,width:l,flex:a,rowGroup:c,rowGroupIndex:d,pivot:h,pivotIndex:u,aggFunc:p}}syncColumnWithStateItem(e,t,i,s,o,n,r,l){var a;if(!e)return;const d=(e,s)=>{const o={value1:void 0,value2:void 0};let n=!1;return t&&(void 0!==t[e]&&(o.value1=t[e],n=!0),P(s)&&void 0!==t[s]&&(o.value2=t[s],n=!0)),!n&&i&&(void 0!==i[e]&&(o.value1=i[e]),P(s)&&void 0!==i[s]&&(o.value2=i[s])),o},c=d("hide").value1;void 0!==c&&e.setVisible(!c,r);const u=d("pinned").value1;void 0!==u&&e.setPinned(u);const h=null!==(a=e.getColDef().minWidth)&&void 0!==a?a:20,p=d("flex").value1;if(void 0!==p&&e.setFlex(p),null==p){const t=d("width").value1;null!=t&&null!=h&&t>=h&&e.setActualWidth(t,r)}const g=d("sort").value1;void 0!==g&&("desc"===g||"asc"===g?e.setSort(g,r):e.setSort(void 0,r));const m=d("sortIndex").value1;if(void 0!==m&&e.setSortIndex(m),n||!e.isPrimary())return;const v=d("aggFunc").value1;void 0!==v&&("string"===typeof v?(e.setAggFunc(v),e.isValueActive()||(e.setValueActive(!0,r),l.addValueCol(e))):(P(v)&&ie("stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,r),l.removeValueCol(e))));const{value1:f,value2:C}=d("rowGroup","rowGroupIndex");void 0===f&&void 0===C||("number"===typeof C||f?(e.isRowGroupActive()||(e.setRowGroupActive(!0,r),l.addGroupCol(e)),s&&"number"===typeof C&&(s[e.getId()]=C)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,r),l.removeGroupCol(e)));const{value1:w,value2:S}=d("pivot","pivotIndex");void 0===w&&void 0===S||("number"===typeof S||w?(e.isPivotActive()||(e.setPivotActive(!0,r),l.addPivotCol(e)),o&&"number"===typeof S&&(o[e.getId()]=S)):e.isPivotActive()&&(e.setPivotActive(!1,r),l.removePivotCol(e)))}orderLiveColsLikeState(e){if(!e.applyOrder||!e.state)return;const t=[];e.state.forEach((e=>{null!=e.colId&&t.push(e.colId)})),this.columnModel.sortColsLikeKeys(t)}compareColumnStatesAndDispatchEvents(e){const t={rowGroupColumns:this.funcColsService.getRowGroupColumns().slice(),pivotColumns:this.funcColsService.getPivotColumns().slice(),valueColumns:this.funcColsService.getValueColumns().slice()},i=this.columnGetStateService.getColumnState(),s={};return i.forEach((e=>{s[e.colId]=e})),()=>{const o=this.columnModel.getAllCols(),n=(t,i,s,o)=>{if(r(i.map(o),s.map(o)))return;const n=new Set(i);s.forEach((e=>{n.delete(e)||n.add(e)}));const l=[...n],a={type:t,columns:l,column:1===l.length?l[0]:null,source:e};this.eventService.dispatchEvent(a)},l=e=>{const t=[];return o.forEach((i=>{const o=s[i.getColId()];o&&e(o,i)&&t.push(i)})),t},a=e=>e.getColId();n("columnRowGroupChanged",t.rowGroupColumns,this.funcColsService.getRowGroupColumns(),a),n("columnPivotChanged",t.pivotColumns,this.funcColsService.getPivotColumns(),a);const d=l(((e,t)=>{const i=null!=e.aggFunc,s=i!=t.isValueActive(),o=i&&e.aggFunc!=t.getAggFunc();return s||o}));d.length>0&&this.eventDispatcher.columnChanged("columnValueChanged",d,e);this.eventDispatcher.columnResized(l(((e,t)=>e.width!=t.getActualWidth())),!0,e);this.eventDispatcher.columnPinned(l(((e,t)=>e.pinned!=t.getPinned())),e);this.eventDispatcher.columnVisible(l(((e,t)=>e.hide==t.isVisible())),e);const c=l(((e,t)=>e.sort!=t.getSort()||e.sortIndex!=t.getSortIndex()));c.length>0&&this.sortController.dispatchSortChangedEvents(e,c),this.normaliseColumnMovedEventForColumnState(i,e)}}normaliseColumnMovedEventForColumnState(e,t){const i=this.columnGetStateService.getColumnState(),s={};i.forEach((e=>s[e.colId]=e));const o={};e.forEach((e=>{s[e.colId]&&(o[e.colId]=!0)}));const n=e.filter((e=>o[e.colId])),r=i.filter((e=>o[e.colId])),l=[];r.forEach(((e,t)=>{const i=n&&n[t];if(i&&i.colId!==e.colId){const e=this.columnModel.getCol(i.colId);e&&l.push(e)}})),l.length&&this.eventDispatcher.columnMoved({movedColumns:l,source:t,finished:!0})}},Me=(e,t,i,s)=>{const o=e[i.getId()],n=e[s.getId()],r=null!=o,l=null!=n;if(r&&l)return o-n;if(r)return-1;if(l)return 1;const a=t.indexOf(i),d=t.indexOf(s),c=a>=0;return c&&d>=0?a-d:c?-1:1},De=class extends F{constructor(){super(...arguments),this.beanName="columnMoveService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher}moveColumnByIndex(e,t,i){const s=this.columnModel.getCols();if(!s)return;const o=s[e];this.moveColumns([o],t,i)}moveColumns(e,t,i){let s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const o=this.columnModel.getCols();if(!o)return;if(this.columnAnimationService.start(),t>o.length-e.length)return ie("tried to insert columns in invalid location, toIndex = ",t),void ie("remember that you should not count the moving columns when calculating the new index");const n=this.columnModel.getColsForKeys(e);!this.doesMovePassRules(n,t)||(this.columnModel.moveInCols(n,t,i),this.eventDispatcher.columnMoved({movedColumns:n,source:i,toIndex:t,finished:s}),this.columnAnimationService.finish())}doesMovePassRules(e,t){const i=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(i)}doesOrderPassRules(e){return!!this.doesMovePassMarryChildren(e)&&!!this.doesMovePassLockedPositions(e)}getProposedColumnOrder(e,t){const i=this.columnModel.getCols().slice();return p(i,e,t),i}doesMovePassLockedPositions(e){const t=this.gos.get("enableRtl");let i=t?1:-1,s=!0;return e.forEach((e=>{const o=(n=e.getColDef().lockPosition)?"left"===n||!0===n?-1:1:0;var n;t?o>i&&(s=!1):o<i&&(s=!1),i=o})),s}doesMovePassMarryChildren(e){let t=!0;return ye(null,this.columnModel.getColTree(),(i=>{if(!Q(i))return;const s=i,o=s.getColGroupDef();if(!(o&&o.marryChildren))return;const n=[];s.getLeafColumns().forEach((t=>{const i=e.indexOf(t);n.push(i)}));Math.max.apply(Math,n)-Math.min.apply(Math,n)>s.getLeafColumns().length-1&&(t=!1)})),t}placeLockedColumns(e){const t=[],i=[],s=[];e.forEach((e=>{const o=e.getColDef().lockPosition;"right"===o?s.push(e):"left"===o||!0===o?t.push(e):i.push(e)}));return this.gos.get("enableRtl")?[...s,...i,...t]:[...t,...i,...s]}},Ie=/[&<>"']/g,Te={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Ae(e){const t=String.fromCharCode;function i(e,i){return t(e>>i&63|128)}function s(e){if(0==(4294967168&e))return t(e);let s="";return 0==(4294965248&e)?s=t(e>>6&31|192):0==(4294901760&e)?(!function(e){if(e>=55296&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}(e),s=t(e>>12&15|224),s+=i(e,6)):0==(4292870144&e)&&(s=t(e>>18&7|240),s+=i(e,12),s+=i(e,6)),s+=t(63&e|128),s}const o=function(e){const t=[];if(!e)return[];const i=e.length;let s,o,n=0;for(;n<i;)s=e.charCodeAt(n++),s>=55296&&s<=56319&&n<i?(o=e.charCodeAt(n++),56320==(64512&o)?t.push(((1023&s)<<10)+(1023&o)+65536):(t.push(s),n--)):t.push(s);return t}(e),n=o.length;let r,l=-1,a="";for(;++l<n;)r=o[l],a+=s(r);return a}function ke(e,t){if(null==e)return null;const i=e.toString().toString();return t?i:i.replace(Ie,(e=>Te[e]))}var Le=class extends F{constructor(){super(...arguments),this.beanName="columnNameService"}wireBeans(e){this.expressionService=e.expressionService,this.funcColsService=e.funcColsService,this.columnModel=e.columnModel}getDisplayNameForColumn(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return null;const s=this.getHeaderName(e.getColDef(),e,null,null,t);return i?this.wrapHeaderNameWithAggFunc(e,s):s}getDisplayNameForProvidedColumnGroup(e,t,i){const s=t?t.getColGroupDef():null;return s?this.getHeaderName(s,null,e,t,i):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,i,s,o){const n=e.headerValueGetter;if(n){const r=this.gos.addGridCommonParams({colDef:e,column:t,columnGroup:i,providedColumnGroup:s,location:o});return"function"===typeof n?n(r):"string"===typeof n?this.expressionService.evaluate(n,r):(ie("headerValueGetter must be a function or a string"),"")}return null!=e.headerName?e.headerName:e.field?(r=e.field)&&null!=r?r.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z])([a-z])/g,"$1 $2$3").replace(/\./g," ").split(" ").map((e=>e.substring(0,1).toUpperCase()+(e.length>1?e.substring(1,e.length):""))).join(" "):null:"";var r}wrapHeaderNameWithAggFunc(e,t){if(this.gos.get("suppressAggFuncInHeader"))return t;const i=e.getColDef().pivotValueColumn;let s,o=null;if(P(i)){const n=this.funcColsService.getValueColumns(),r=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&1===n.length,l=void 0!==e.getColDef().pivotTotalColumnIds;if(r&&!l)return t;o=i?i.getAggFunc():null,s=!0}else{const t=e.isValueActive(),i=this.columnModel.isPivotMode()||!this.funcColsService.isRowGroupEmpty();t&&i?(o=e.getAggFunc(),s=!0):s=!1}if(s){const e="string"===typeof o?o:"func",i=this.localeService.getLocaleTextFunc()(e,e);return"".concat(i,"(").concat(t,")")}return t}},Ge=class extends F{constructor(){super(...arguments),this.beanName="pivotResultColsService"}wireBeans(e){this.context=e.context,this.columnModel=e.columnModel,this.columnFactory=e.columnFactory,this.visibleColsService=e.visibleColsService}destroy(){var e;fe(this.context,null===(e=this.pivotResultCols)||void 0===e?void 0:e.tree),super.destroy()}isPivotResultColsPresent(){return null!=this.pivotResultCols}lookupPivotResultCol(e,t){if(null==this.pivotResultCols)return null;const i=this.columnModel.getColDefCol(t);let s=null;return this.pivotResultCols.list.forEach((t=>{const o=t.getColDef().pivotKeys,n=t.getColDef().pivotValueColumn;r(o,e)&&n===i&&(s=t)})),s}getPivotResultCols(){return this.pivotResultCols}getPivotResultCol(e){return this.pivotResultCols?this.columnModel.getColFromCollection(e,this.pivotResultCols):null}setPivotResultCols(e,t){if(this.columnModel.isReady()&&(null!=e||null!=this.pivotResultCols)){if(e){var i,s;this.processPivotResultColDef(e);const o=this.columnFactory.createColumnTree(e,!1,(null===(i=this.pivotResultCols)||void 0===i?void 0:i.tree)||this.previousPivotResultCols||void 0,t);fe(this.context,null===(s=this.pivotResultCols)||void 0===s?void 0:s.tree,o.columnTree);const n=o.columnTree,r=o.treeDept,l=me(n),a={};this.pivotResultCols={tree:n,treeDepth:r,list:l,map:a},this.pivotResultCols.list.forEach((e=>this.pivotResultCols.map[e.getId()]=e)),this.previousPivotResultCols=null}else this.previousPivotResultCols=this.pivotResultCols?this.pivotResultCols.tree:null,this.pivotResultCols=null;this.columnModel.refreshCols(),this.visibleColsService.refresh(t)}}processPivotResultColDef(e){const t=this.gos.get("processPivotResultColDef"),i=this.gos.get("processPivotResultColGroupDef");if(!t&&!i)return;const s=e=>{e.forEach((e=>{if(P(e.children)){const t=e;i&&i(t),s(t.children)}else{t&&t(e)}}))};e&&s(e)}},Ne=class extends F{constructor(){super(...arguments),this.beanName="columnSizeService"}wireBeans(e){this.columnModel=e.columnModel,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}setColumnWidths(e,t,i,s){const o=[];e.forEach((e=>{const i=this.columnModel.getColDefCol(e.key)||this.columnModel.getCol(e.key);if(!i)return;o.push({width:e.newWidth,ratios:[1],columns:[i]});if("shift"===this.gos.get("colResizeDefault")&&(t=!t),t){const t=this.visibleColsService.getColAfter(i);if(!t)return;const s=i.getActualWidth()-e.newWidth,n=t.getActualWidth()+s;o.push({width:n,ratios:[1],columns:[t]})}})),0!==o.length&&this.resizeColumnSets({resizeSets:o,finished:i,source:s})}resizeColumnSets(e){const{resizeSets:t,finished:i,source:s}=e;if(!(!t||t.every((e=>this.checkMinAndMaxWidthsForSet(e))))){if(i){const e=t&&t.length>0?t[0].columns:null;this.eventDispatcher.columnResized(e,i,s)}return}const o=[],n=[];t.forEach((e=>{const{width:t,columns:i,ratios:r}=e,l={},a={};i.forEach((e=>n.push(e)));let d=!0,c=0;for(;d;){if(c++,c>1e3){se("infinite loop in resizeColumnSets");break}d=!1;const e=[];let s=0,o=t;i.forEach(((t,i)=>{if(a[t.getId()])o-=l[t.getId()];else{e.push(t);const o=r[i];s+=o}}));const n=1/s;e.forEach(((i,s)=>{let c;s===e.length-1?c=o:(c=Math.round(r[s]*t*n),o-=c);const u=i.getMinWidth(),h=i.getMaxWidth();c<u?(c=u,a[i.getId()]=!0,d=!0):h>0&&c>h&&(c=h,a[i.getId()]=!0,d=!0),l[i.getId()]=c}))}i.forEach((e=>{const t=l[e.getId()];e.getActualWidth()!==t&&(e.setActualWidth(t,s),o.push(e))}))}));const r=o.length>0;let l=[];r&&(l=this.refreshFlexedColumns({resizingCols:n,skipSetLeft:!0}),this.visibleColsService.setLeftValues(s),this.visibleColsService.updateBodyWidths(),this.columnViewportService.checkViewportColumns());const a=n.concat(l);(r||i)&&this.eventDispatcher.columnResized(a,i,s,l)}checkMinAndMaxWidthsForSet(e){const{columns:t,width:i}=e;let s=0,o=0,n=!0;t.forEach((e=>{const t=e.getMinWidth();s+=t||0;const i=e.getMaxWidth();i>0?o+=i:n=!1}));return i>=s&&(!n||i<=o)}refreshFlexedColumns(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.source?e.source:"flex";if(null!=e.viewportWidth&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];const i=this.visibleColsService.getCenterCols();let s=-1;if(e.resizingCols){const t=new Set(e.resizingCols);for(let e=i.length-1;e>=0;e--)if(t.has(i[e])){s=e;break}}let o=0,n=[],r=0,l=0;for(let d=0;d<i.length;d++){i[d].getFlex()&&d>s?(n.push(i[d]),l+=i[d].getFlex(),r+=i[d].getMinWidth()):o+=i[d].getActualWidth()}if(!n.length)return[];let a=[];o+r>this.flexViewportWidth&&(n.forEach((e=>e.setActualWidth(e.getMinWidth(),t))),a=n,n=[]);const c=[];let u;e:for(;;){u=this.flexViewportWidth-o;const e=u/l;for(let i=0;i<n.length;i++){const s=n[i],r=e*s.getFlex();let u=0;const h=s.getMinWidth(),p=s.getMaxWidth();if(r<h?u=h:r>p&&(u=p),u){s.setActualWidth(u,t),d(n,s),l-=s.getFlex(),a.push(s),o+=s.getActualWidth();continue e}c[i]=Math.round(r)}break}let h=u;return n.forEach(((e,i)=>{e.setActualWidth(Math.min(c[i],h),t),a.push(e),h-=c[i]})),e.skipSetLeft||this.visibleColsService.setLeftValues(t),e.updateBodyWidths&&this.visibleColsService.updateBodyWidths(),e.fireResizedEvent&&this.eventDispatcher.columnResized(a,!0,t,n),n}sizeColumnsToFit(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sizeColumnsToFit",i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;if(this.columnModel.isShouldQueueResizeOperations())return void this.columnModel.pushResizeOperation((()=>this.sizeColumnsToFit(e,t,i,s)));const o={};var n;s&&(null===s||void 0===s||null===(n=s.columnLimits)||void 0===n||n.forEach((e=>{let{key:t,...i}=e;o["string"===typeof t?t:t.getColId()]=i})));const r=this.visibleColsService.getAllCols(),l=e===ve(r);if(e<=0||!r.length||l)return;const a=[],d=[];r.forEach((e=>{!0===e.getColDef().suppressSizeToFit?d.push(e):a.push(e)}));const u=a.slice(0);let h=!1;const p=e=>{c(a,e),d.push(e)};for(a.forEach((e=>{var i,n;e.resetActualWidth(t);const r=null===o||void 0===o?void 0:o[e.getId()],l=null!==(i=null===r||void 0===r?void 0:r.minWidth)&&void 0!==i?i:null===s||void 0===s?void 0:s.defaultMinWidth,a=null!==(n=null===r||void 0===r?void 0:r.maxWidth)&&void 0!==n?n:null===s||void 0===s?void 0:s.defaultMaxWidth,d=e.getActualWidth();"number"===typeof l&&d<l?e.setActualWidth(l,t,!0):"number"===typeof a&&d>a&&e.setActualWidth(a,t,!0)}));!h;){h=!0;const i=e-ve(d);if(i<=0)a.forEach((e=>{var i,n;const r=null!==(i=null===o||void 0===o||null===(n=o[e.getId()])||void 0===n?void 0:n.minWidth)&&void 0!==i?i:null===s||void 0===s?void 0:s.defaultMinWidth;"number"!==typeof r?e.setMinimum(t):e.setActualWidth(r,t,!0)}));else{const e=i/ve(a);let n=i;for(let i=a.length-1;i>=0;i--){var g,m;const r=a[i],l=null===o||void 0===o?void 0:o[r.getId()],d=null!==(g=null===l||void 0===l?void 0:l.minWidth)&&void 0!==g?g:null===s||void 0===s?void 0:s.defaultMinWidth,c=null!==(m=null===l||void 0===l?void 0:l.maxWidth)&&void 0!==m?m:null===s||void 0===s?void 0:s.defaultMaxWidth,u=r.getMinWidth(),v=r.getMaxWidth(),f="number"===typeof d&&d>u?d:u,C="number"===typeof c&&c<v?c:v;let w=Math.round(r.getActualWidth()*e);w<f?(w=f,p(r),h=!1):w>C?(w=C,p(r),h=!1):0===i&&(w=n),r.setActualWidth(w,t,!0),n-=w}}}u.forEach((e=>{e.fireColumnWidthChangedEvent(t)})),this.visibleColsService.setLeftValues(t),this.visibleColsService.updateBodyWidths(),i||this.eventDispatcher.columnResized(u,!0,t)}applyAutosizeStrategy(){const e=this.gos.get("autoSizeStrategy");if(!e)return;const{type:t}=e;setTimeout((()=>{if("fitGridWidth"===t){const{columnLimits:t,defaultMinWidth:i,defaultMaxWidth:s}=e,o=null===t||void 0===t?void 0:t.map((e=>{let{colId:t,minWidth:i,maxWidth:s}=e;return{key:t,minWidth:i,maxWidth:s}}));this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:i,defaultMaxWidth:s,columnLimits:o})}else"fitProvidedWidth"===t&&this.sizeColumnsToFit(e.width,"sizeColumnsToFit")}))}};function Oe(e,t){return e+"_"+t}function Be(e){return e instanceof Ve}var Ve=class extends F{constructor(e,t,i,s){super(),this.isColumn=!1,this.displayedChildren=[],this.parent=null,this.groupId=t,this.partId=i,this.providedColumnGroup=e,this.pinned=s}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(e){this.parent=e}getUniqueId(){return Oe(this.groupId,this.partId)}isEmptyGroup(){return 0===this.displayedChildren.length}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!(!e||0===e.length)&&e.every((e=>e.isMoving()))}checkLeft(){if(this.displayedChildren.forEach((e=>{Be(e)&&e.checkLeft()})),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const e=n(this.displayedChildren).getLeft();this.setLeft(e)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;return this.displayedChildren&&this.displayedChildren.forEach((t=>{e+=t.getActualWidth()})),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach((t=>{t.isResizable()&&(e=!0)})),e}getMinWidth(){let e=0;return this.displayedChildren.forEach((t=>{e+=t.getMinWidth()})),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}addDisplayedLeafColumns(e){this.displayedChildren.forEach((t=>{Y(t)?e.push(t):Be(t)&&t.addDisplayedLeafColumns(e)}))}addLeafColumns(e){this.children.forEach((t=>{Y(t)?e.push(t):Be(t)&&t.addLeafColumns(e)}))}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return this.isPadding()&&e&&e.isPadding()?1+e.getPaddingLevel():0}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;null!=e&&e.isPadding();)e=e.getParent();if(!(!!e&&e.getProvidedColumnGroup().isExpandable()))return this.displayedChildren=this.children,void this.dispatchLocalEvent({type:"displayedChildrenChanged"});this.children.forEach((t=>{if(Be(t)&&(!t.displayedChildren||!t.displayedChildren.length))return;switch(t.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(t);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(t);break;default:this.displayedChildren.push(t)}})),this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},He=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let i;return i="number"!==typeof t?0:t+1,this.existingIds[e]=i,i}},We=class extends F{constructor(){super(...arguments),this.beanName="visibleColsService",this.colsAndGroupsMap={},this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher}refresh(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]||this.buildTrees(),this.updateOpenClosedVisibilityInColumnGroups(),this.columnsLeft=Ue(this.treeLeft),this.columnsCenter=Ue(this.treeCenter),this.columnsRight=Ue(this.treeRight),this.joinColsAriaOrder(),this.joinCols(),this.setLeftValues(e),this.autoHeightCols=this.columns.filter((e=>e.isAutoHeight())),this.columnSizeService.refreshFlexedColumns(),this.updateBodyWidths(),this.columnViewportService.checkViewportColumns(!1),this.setFirstRightAndLastLeftPinned(e),this.eventDispatcher.visibleCols()}updateBodyWidths(){const e=ve(this.columnsCenter),t=ve(this.columnsLeft),i=ve(this.columnsRight);this.bodyWidthDirty=this.bodyWidth!==e;if(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==i){this.bodyWidth=e,this.leftWidth=t,this.rightWidth=i;const s={type:"columnContainerWidthChanged"};this.eventService.dispatchEvent(s);const o={type:"displayedColumnsWidthChanged"};this.eventService.dispatchEvent(o)}}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e){let t,i;this.gos.get("enableRtl")?(t=this.columnsLeft?this.columnsLeft[0]:null,i=this.columnsRight?n(this.columnsRight):null):(t=this.columnsLeft?n(this.columnsLeft):null,i=this.columnsRight?this.columnsRight[0]:null),this.columnModel.getCols().forEach((s=>{s.setLastLeftPinned(s===t,e),s.setFirstRightPinned(s===i,e)}))}buildTrees(){const e=this.columnModel.getColsToShow(),t=e.filter((e=>"left"==e.getPinned())),i=e.filter((e=>"right"==e.getPinned())),s=e.filter((e=>"left"!=e.getPinned()&&"right"!=e.getPinned())),o=new He;this.treeLeft=this.createGroups({columns:t,idCreator:o,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=this.createGroups({columns:i,idCreator:o,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=this.createGroups({columns:s,idCreator:o,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.ariaOrderColumns=[]}joinColsAriaOrder(){const e=this.columnModel.getCols(),t=[],i=[],s=[];for(const o of e){const e=o.getPinned();e?!0===e||"left"===e?t.push(o):s.push(o):i.push(o)}this.ariaOrderColumns=t.concat(i).concat(s)}getAriaColIndex(e){let t;return t=Be(e)?e.getLeafColumns()[0]:e,this.ariaOrderColumns.indexOf(t)+1}getAllAutoHeightCols(){return this.autoHeightCols}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach((e=>{e.forEach((e=>{if(Be(e)){e.checkLeft()}}))}))}setLeftValuesOfCols(e){if(!this.columnModel.getColDefCols())return;const t=this.columnModel.getCols().slice(0),i=this.gos.get("enableRtl");[this.columnsLeft,this.columnsRight,this.columnsCenter].forEach((s=>{if(i){let t=ve(s);s.forEach((i=>{t-=i.getActualWidth(),i.setLeft(t,e)}))}else{let t=0;s.forEach((i=>{i.setLeft(t,e),t+=i.getActualWidth()}))}!function(e,t){for(let i=0;i<t.length;i++)d(e,t[i])}(t,s)})),t.forEach((t=>{t.setLeft(null,e)}))}joinCols(){this.gos.get("enableRtl")?this.columns=this.columnsRight.concat(this.columnsCenter).concat(this.columnsLeft):this.columns=this.columnsLeft.concat(this.columnsCenter).concat(this.columnsRight)}getColsCenter(){return this.columnsCenter}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}getTreeLeft(){return this.treeLeft}getTreeRight(){return this.treeRight}getTreeCenter(){return this.treeCenter}getAllCols(){return this.columns}isColDisplayed(e){return this.getAllCols().indexOf(e)>=0}getLeftColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsLeft):this.columnsLeft}getRightColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsRight):this.columnsRight}getColsForRow(e,t,i,s){const o=[];let n=null;for(let r=0;r<t.length;r++){const l=t[r],a=t.length-r,d=Math.min(l.getColSpan(e),a),c=[l];if(d>1){const e=d-1;for(let i=1;i<=e;i++)c.push(t[r+i]);r+=e}let u;if(i?(u=!1,c.forEach((e=>{i(e)&&(u=!0)}))):u=!0,u){if(0===o.length&&n){!!s&&s(l)&&o.push(n)}o.push(l)}n=l}return o}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getCenterCols(){return this.columnsCenter}getLeftCols(){return this.columnsLeft}getRightCols(){return this.columnsRight}getColBefore(e){const t=this.getAllCols(),i=t.indexOf(e);return i>0?t[i-1]:null}getGroupAtDirection(e,t){const i=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),s=e.getDisplayedLeafColumns(),o="After"===t?n(s):s[0],r="getCol".concat(t);for(;;){const t=this[r](o);if(!t)return null;const s=this.getColGroupAtLevel(t,i);if(s!==e)return s}}getColGroupAtLevel(e,t){let i,s,o=e.getParent();for(;;){if(i=o.getProvidedColumnGroup().getLevel(),s=o.getPaddingLevel(),i+s<=t)break;o=o.getParent()}return o}isPinningLeft(){return this.columnsLeft.length>0}isPinningRight(){return this.columnsRight.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const e=e=>{this.colsAndGroupsMap[e.getUniqueId()]=e};ze(this.treeCenter,!1,e),ze(this.treeLeft,!1,e),ze(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}updateOpenClosedVisibilityInColumnGroups(){ze(this.getAllTrees(),!1,(e=>{Be(e)&&e.calculateDisplayedColumns()}))}getFirstColumn(){const e=this.gos.get("enableRtl"),t=["getLeftCols","getCenterCols","getRightCols"];e&&t.reverse();for(let i=0;i<t.length;i++){const s=this[t[i]]();if(s.length)return e?n(s):s[0]}return null}getColumnGroup(e,t){if(!e)return null;if(Be(e))return e;const i=this.getAllTrees(),s="number"===typeof t;let o=null;return ze(i,!1,(i=>{if(Be(i)){const n=i;let r;r=s?e===n.getGroupId()&&t===n.getPartId():e===n.getGroupId(),r&&(o=n)}})),o}getColAfter(e){const t=this.getAllCols(),i=t.indexOf(e);return i<t.length-1?t[i+1]:null}isBodyWidthDirty(){return this.bodyWidthDirty}setBodyWidthDirty(){this.bodyWidthDirty=!0}getColsLeftWidth(){return ve(this.columnsLeft)}getDisplayedColumnsRightWidth(){return ve(this.columnsRight)}isColAtEdge(e,t){const i=this.getAllCols();if(!i.length)return!1;const s="first"===t;let o;if(Be(e)){const t=e.getDisplayedLeafColumns();if(!t.length)return!1;o=s?t[0]:n(t)}else o=e;return(s?i[0]:n(i))===o}createGroups(e){const{columns:t,idCreator:i,pinned:s,oldDisplayedGroups:o,isStandaloneStructure:n}=e,r=this.mapOldGroupsById(o),l=[];let a=t;for(;a.length;){const e=a;a=[];let t=0;const o=o=>{const d=t;t=o;const c=e[d],u=(Be(c)?c.getProvidedColumnGroup():c).getOriginalParent();if(null==u){for(let t=d;t<o;t++)l.push(e[t]);return}const h=this.createColGroup(u,i,r,s,n);for(let t=d;t<o;t++)h.addChild(e[t]);a.push(h)};for(let i=1;i<e.length;i++){const s=e[i],n=(Be(s)?s.getProvidedColumnGroup():s).getOriginalParent(),r=e[t];n!==(Be(r)?r.getProvidedColumnGroup():r).getOriginalParent()&&o(i)}t<e.length&&o(e.length)}return n||this.setupParentsIntoCols(l,null),l}createColGroup(e,t,i,s,o){const n=e.getGroupId(),r=t.getInstanceIdForKey(n);let l=i[Oe(n,r)];return l&&l.getProvidedColumnGroup()!==e&&(l=null),P(l)?l.reset():(l=new Ve(e,n,r,s),o||this.createBean(l)),l}mapOldGroupsById(e){const t={},i=e=>{e.forEach((e=>{if(Be(e)){const s=e;t[e.getUniqueId()]=s,i(s.getChildren())}}))};return e&&i(e),t}setupParentsIntoCols(e,t){e.forEach((e=>{if(e.setParent(t),Be(e)){const t=e;this.setupParentsIntoCols(t.getChildren(),t)}}))}};function ze(e,t,i){if(e)for(let s=0;s<e.length;s++){const o=e[s];if(Be(o)){ze(t?o.getDisplayedChildren():o.getChildren(),t,i)}i(o)}}function Ue(e){const t=[];return ze(e,!0,(e=>{Y(e)&&t.push(e)})),t}var _e=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","rangeSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterOpened","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd"],Ke=[..._e,"scrollbarWidthChanged","keyShortcutChangedCellStart","keyShortcutChangedCellEnd","pinnedHeightChanged","cellFocusCleared","fullWidthRowFocused","checkboxChanged","heightScaleChanged","suppressMovableColumns","suppressMenuHide","suppressFieldDotNotation","columnPanelItemDragStart","columnPanelItemDragEnd","bodyHeightChanged","columnContainerWidthChanged","displayedColumnsWidthChanged","scrollVisibilityChanged","columnHoverChanged","flashCells","paginationPixelOffsetChanged","displayedRowsChanged","leftPinnedWidthChanged","rightPinnedWidthChanged","rowContainerHeightChanged","headerHeightChanged","columnHeaderHeightChanged","gridStylesChanged","storeUpdated","filterDestroyed","rowDataUpdateStarted","rowCountReady","advancedFilterEnabledChanged","dataTypesInferred","fieldValueChanged","fieldPickerValueSelected","richSelectListRowSelected","sideBarUpdated","alignedGridScroll","alignedGridColumn","gridOptionsChanged","chartTitleEdit","recalculateRowBounds","stickyTopOffsetChanged"],Ze={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,removePivotHeaderRowWhenSingleValueColumn:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0},je=class{};je.STRING_PROPERTIES=["rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow"],je.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy"],je.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"],je.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"],je.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading"],je.OTHER_PROPERTIES=["suppressStickyTotalRow"],je.FUNCTION_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering","chartMenuItems","groupTotalRow"],je.ALL_PROPERTIES=[...je.ARRAY_PROPERTIES,...je.OBJECT_PROPERTIES,...je.STRING_PROPERTIES,...je.NUMBER_PROPERTIES,...je.FUNCTION_PROPERTIES,...je.BOOLEAN_PROPERTIES,...je.OTHER_PROPERTIES];var Ye=je,qe=class{static getCallbackForEvent(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substring(1)}};qe.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY",qe.PUBLIC_EVENTS=_e,qe.EVENT_CALLBACKS=Ke.map((e=>qe.getCallbackForEvent(e))),qe.BOOLEAN_PROPERTIES=Ye.BOOLEAN_PROPERTIES,qe.ALL_PROPERTIES=Ye.ALL_PROPERTIES,qe.ALL_PROPERTIES_AND_CALLBACKS=[...qe.ALL_PROPERTIES,...qe.EVENT_CALLBACKS],qe.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(qe.ALL_PROPERTIES_AND_CALLBACKS);var Qe=qe;function Xe(e,t){"object"!==typeof e&&(e={});const i={...e};return Qe.ALL_PROPERTIES_AND_CALLBACKS.forEach((e=>{const s=t[e];"undefined"!==typeof s&&s!==Qe.VUE_OMITTED_PROPERTY&&(i[e]=s)})),i}function $e(e,t){if(!e)return;const i={};let s=!1;if(Object.keys(e).filter((e=>Qe.ALL_PROPERTIES_AND_CALLBACKS_SET.has(e))).forEach((t=>{i[t]=e[t],s=!0})),!s)return;const o={type:"gridOptionsChanged",options:i};t.dispatchEvent(o);const n={type:"componentStateChanged"};B(i,((e,t)=>{n[e]=t})),t.dispatchEvent(n)}var Je,et,tt,it,st,ot,nt,rt,lt,at=class{constructor(e){this.cssClassStates={},this.getGui=e}addCssClass(e){const t=(e||"").split(" ");if(t.length>1)return void t.forEach((e=>this.addCssClass(e)));if(!0!==this.cssClassStates[e]&&e.length){const t=this.getGui();t&&t.classList.add(e),this.cssClassStates[e]=!0}}removeCssClass(e){const t=(e||"").split(" ");if(t.length>1)return void t.forEach((e=>this.removeCssClass(e)));if(!1!==this.cssClassStates[e]&&e.length){const t=this.getGui();t&&t.classList.remove(e),this.cssClassStates[e]=!1}}containsCssClass(e){const t=this.getGui();return!!t&&t.classList.contains(e)}addOrRemoveCssClass(e,t){if(!e)return;if(e.indexOf(" ")>=0){const i=(e||"").split(" ");if(i.length>1)return void i.forEach((e=>this.addOrRemoveCssClass(e,t)))}if(this.cssClassStates[e]!==t&&e.length){const i=this.getGui();i&&i.classList.toggle(e,t),this.cssClassStates[e]=t}}};function dt(e,t,i){null==i||"string"===typeof i&&""==i?ut(e,t):ct(e,t,i)}function ct(e,t,i){e.setAttribute(ht(t),i.toString())}function ut(e,t){e.removeAttribute(ht(t))}function ht(e){return"aria-".concat(e)}function pt(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function gt(e){return parseInt(e.getAttribute("aria-posinset"),10)}function mt(e,t){dt(e,"label",t)}function vt(e,t){dt(e,"labelledby",t)}function ft(e,t){dt(e,"describedby",t)}function Ct(e,t){dt(e,"live",t)}function wt(e,t){dt(e,"level",t)}function St(e,t){dt(e,"disabled",t)}function yt(e,t){dt(e,"hidden",t)}function bt(e,t){ct(e,"expanded",t)}function Rt(e){ut(e,"expanded")}function Ft(e,t){ct(e,"setsize",t)}function Et(e,t){ct(e,"posinset",t)}function xt(e,t){ct(e,"rowcount",t)}function Pt(e,t){ct(e,"rowindex",t)}function Mt(e,t){ct(e,"colcount",t)}function Dt(e,t){ct(e,"colindex",t)}function It(e,t){ct(e,"sort",t)}function Tt(e){ut(e,"sort")}function At(e,t){dt(e,"selected",t)}function kt(e,t){dt(e,"controls",t.id),vt(t,e.id)}function Lt(e,t){return void 0===t?e("ariaIndeterminate","indeterminate"):!0===t?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}function Gt(){return void 0===Je&&(Je=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),Je}function Nt(){if(void 0===et)if(Gt()){const e=navigator.userAgent.match(/version\/(\d+)/i);e&&(et=null!=e[1]?parseFloat(e[1]):0)}else et=0;return et}function Ot(){if(void 0===tt){const e=window;tt=!!e.chrome&&(!!e.chrome.webstore||!!e.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return tt}function Bt(){return void 0===it&&(it=/(firefox)/i.test(navigator.userAgent)),it}function Vt(){return void 0===st&&(st=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),st}function Ht(){return void 0===ot&&(ot=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1),ot}function Wt(){return!Gt()||Nt()>=15}function zt(e){if(!e)return null;const t=e.tabIndex,i=e.getAttribute("tabIndex");return-1!==t||null!==i&&(""!==i||Bt())?t.toString():null}function Ut(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let i=t.offsetWidth-t.clientWidth;0===i&&0===t.clientWidth&&(i=null),t.parentNode&&t.parentNode.removeChild(t),null!=i&&(rt=i,nt=0===i)}function _t(){return null==nt&&Ut(),nt}function Kt(e,t,i){const s=e.parentElement;let o=s&&s.firstChild;for(;o;)t&&o.classList.toggle(t,o===e),i&&o.classList.toggle(i,o!==e),o=o.nextSibling}var Zt="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function jt(e){const t=Element.prototype.matches||Element.prototype.msMatchesSelector,i=t.call(e,"input, select, button, textarea"),s=t.call(e,Zt),o=di(e);return i&&!s&&o}function Yt(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{skipAriaHidden:s}=i;e.classList.toggle("ag-hidden",!t),s||yt(e,!t)}function qt(e,t){const i="disabled",s=t?e=>e.setAttribute(i,""):e=>e.removeAttribute(i);s(e),fi(e.querySelectorAll("input"),(e=>s(e)))}function Qt(e,t,i){let s=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,"number"==typeof i){if(++s>i)break}else if(e===i)break}return!1}function Xt(e){const{height:t,width:i,borderTopWidth:s,borderRightWidth:o,borderBottomWidth:n,borderLeftWidth:r,paddingTop:l,paddingRight:a,paddingBottom:d,paddingLeft:c,marginTop:u,marginRight:h,marginBottom:p,marginLeft:g,boxSizing:m}=window.getComputedStyle(e);return{height:parseFloat(t||"0"),width:parseFloat(i||"0"),borderTopWidth:parseFloat(s||"0"),borderRightWidth:parseFloat(o||"0"),borderBottomWidth:parseFloat(n||"0"),borderLeftWidth:parseFloat(r||"0"),paddingTop:parseFloat(l||"0"),paddingRight:parseFloat(a||"0"),paddingBottom:parseFloat(d||"0"),paddingLeft:parseFloat(c||"0"),marginTop:parseFloat(u||"0"),marginRight:parseFloat(h||"0"),marginBottom:parseFloat(p||"0"),marginLeft:parseFloat(g||"0"),boxSizing:m}}function $t(e){const t=Xt(e);return"border-box"===t.boxSizing?t.height-t.paddingTop-t.paddingBottom:t.height}function Jt(e){const t=Xt(e);return"border-box"===t.boxSizing?t.width-t.paddingLeft-t.paddingRight:t.width}function ei(e){const{height:t,marginBottom:i,marginTop:s}=Xt(e);return Math.floor(t+i+s)}function ti(e){const{width:t,marginLeft:i,marginRight:s}=Xt(e);return Math.floor(t+i+s)}function ii(e){const t=e.getBoundingClientRect(),{borderTopWidth:i,borderLeftWidth:s,borderRightWidth:o,borderBottomWidth:n}=Xt(e);return{top:t.top+(i||0),left:t.left+(s||0),right:t.right+(o||0),bottom:t.bottom+(n||0)}}function si(){if("boolean"===typeof lt)return lt;const e=document.createElement("div");return e.style.direction="rtl",e.style.width="1px",e.style.height="1px",e.style.position="fixed",e.style.top="0px",e.style.overflow="hidden",e.dir="rtl",e.innerHTML='<div style="width: 2px">\n            <span style="display: inline-block; width: 1px"></span>\n            <span style="display: inline-block; width: 1px"></span>\n        </div>',document.body.appendChild(e),e.scrollLeft=1,lt=0===Math.floor(e.scrollLeft),document.body.removeChild(e),lt}function oi(e,t){let i=e.scrollLeft;return t&&(i=Math.abs(i),Ot()&&!si()&&(i=e.scrollWidth-e.clientWidth-i)),i}function ni(e,t,i){i&&(si()?t*=-1:(Gt()||Ot())&&(t=e.scrollWidth-e.clientWidth-t)),e.scrollLeft=t}function ri(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}function li(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function ai(e){return!!e.offsetParent}function di(e){const t=e;if(t.checkVisibility)return t.checkVisibility({checkVisibilityCSS:!0});return!(!ai(e)||"visible"!==window.getComputedStyle(e).visibility)}function ci(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function ui(e,t){"flex"===t?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):hi(e,t)}function hi(e,t){t=gi(t),e.style.width=t.toString(),e.style.maxWidth=t.toString(),e.style.minWidth=t.toString()}function pi(e,t){t=gi(t),e.style.height=t.toString(),e.style.maxHeight=t.toString(),e.style.minHeight=t.toString()}function gi(e){return"number"===typeof e?"".concat(e,"px"):e}function mi(e){return e instanceof Node||e instanceof HTMLElement}function vi(e,t,i){null==i?e.removeAttribute(t):e.setAttribute(t,i.toString())}function fi(e,t){if(null!=e)for(let i=0;i<e.length;i++)t(e[i])}var Ci=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.nextValue=e,this.step=t}next(){const e=this.nextValue;return this.nextValue+=this.step,e}peek(){return this.nextValue}skip(e){this.nextValue+=e}},wi=class e extends F{constructor(e,t,i,s){super(),this.parentComp=e,this.tooltipShowDelayOverride=t,this.tooltipHideDelayOverride=i,this.shouldDisplayTooltip=s,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(e){this.popupService=e.popupService,this.userComponentFactory=e.userComponentFactory}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const e=this.parentComp.getGui();0===this.tooltipTrigger&&this.addManagedListeners(e,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),1===this.tooltipTrigger&&this.addManagedListeners(e,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(e,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(e,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(e){const t=this.gos.get(e);return t<0&&ie("".concat(e," should not be lower than 0")),Math.max(200,t)}getTooltipDelay(e){var t,i;return"show"===e?null!==(i=this.tooltipShowDelayOverride)&&void 0!==i?i:this.getGridOptionsTooltipDelay("tooltipShowDelay"):null!==(t=this.tooltipHideDelayOverride)&&void 0!==t?t:this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const e=this.gos.get("tooltipTrigger");return e&&"hover"!==e?1:0}onMouseEnter(t){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),Ht()||(e.isLocked?this.showTooltipTimeoutId=window.setTimeout((()=>{this.prepareToShowTooltip(t)}),100):this.prepareToShowTooltip(t))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&2===this.state&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){var t;const i=e.relatedTarget,s=this.parentComp.getGui(),o=null===(t=this.tooltipComp)||void 0===t?void 0:t.getGui();this.isInteractingWithTooltip||s.contains(i)||this.interactionEnabled&&null!==o&&void 0!==o&&o.contains(i)||this.setToDoNothing()}onKeyDown(){this.setToDoNothing()}prepareToShowTooltip(t){if(0!=this.state||e.isLocked)return;let i=0;t&&(i=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=t||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),i),this.state=1}isLastTooltipHiddenRecently(){return(new Date).getTime()-e.lastTooltipHideTime<1e3}setToDoNothing(){2===this.state&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){const e={...this.parentComp.getTooltipParams()};if(!P(e.value)||this.shouldDisplayTooltip&&!this.shouldDisplayTooltip())return void this.setToDoNothing();this.state=2,this.tooltipInstanceCount++;const t=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(e).newAgStackInstance().then(t)}hideTooltip(t){if(!t&&this.isInteractingWithTooltip)return;this.tooltipComp&&(this.destroyTooltipComp(),e.lastTooltipHideTime=(new Date).getTime());const i={type:"tooltipHide",parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(i),t&&(this.isInteractingWithTooltip=!1),this.state=0}newTooltipComponentCallback(e,t){if(2!==this.state||this.tooltipInstanceCount!==e)return void this.destroyBean(t);const i=t.getGui();this.tooltipComp=t,i.classList.contains("ag-tooltip")||i.classList.add("ag-tooltip-custom"),0===this.tooltipTrigger&&i.classList.add("ag-tooltip-animate"),this.interactionEnabled&&i.classList.add("ag-tooltip-interactive");const s=this.localeService.getLocaleTextFunc(),o=this.popupService.addPopup({eChild:i,ariaLabel:s("ariaLabelTooltip","Tooltip")});if(o&&(this.tooltipPopupDestroyFunc=o.hideFunc),this.positionTooltip(),1===this.tooltipTrigger){const e=this.setToDoNothing.bind(this);[this.onBodyScrollEventCallback,this.onColumnMovedEventCallback]=this.addManagedEventListeners({bodyScroll:e,columnMoved:e})}this.interactionEnabled&&(0===this.tooltipTrigger?[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(i,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}):[this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(i,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}));const n={type:"tooltipShow",tooltipGui:i,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(n),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isInteractingWithTooltip=!1,this.lockService()}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}onTooltipFocusOut(e){var t;const i=this.parentComp.getGui(),s=null===(t=this.tooltipComp)||void 0===t?void 0:t.getGui(),o=e.relatedTarget;null!==s&&void 0!==s&&s.contains(o)||(this.isInteractingWithTooltip=!1,i.contains(o)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent({...e,mouseEvent:this.lastMouseEvent}):this.popupService.positionPopupByComponent({...e,eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5})}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const e=this.tooltipPopupDestroyFunc,t=this.tooltipComp,i=0===this.tooltipTrigger?1e3:0;window.setTimeout((()=>{e(),this.destroyBean(t)}),i),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach((e=>{e&&e()})),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){e.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout((()=>{this.unlockService(),this.setToDoNothing()}),100)}unlockService(){e.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};wi.isLocked=!1;var Si=wi,yi=class extends F{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}wireBeans(e){this.beans=e}postConstruct(){this.refreshToolTip()}setBrowserTooltip(e){const t="title",i=this.ctrl.getGui();i&&(null!=e&&""!=e?i.setAttribute(t,e):i.removeAttribute(t))}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){var e,t,i,s;if(null!=this.tooltipManager)return;const o={getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()};this.tooltipManager=this.createBean(new Si(o,null===(e=(t=this.ctrl).getTooltipShowDelayOverride)||void 0===e?void 0:e.call(t),null===(i=(s=this.ctrl).getTooltipHideDelayOverride)||void 0===i?void 0:i.call(s),this.ctrl.shouldDisplayTooltip),this.beans.context)}refreshToolTip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context))):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}getTooltipParams(){const e=this.ctrl,t=e.getColumn?e.getColumn():void 0,i=e.getColDef?e.getColDef():void 0,s=e.getRowNode?e.getRowNode():void 0;return{location:e.getLocation(),colDef:i,column:t,rowIndex:e.getRowIndex?e.getRowIndex():void 0,node:s,data:s?s.data:void 0,value:this.getTooltipText(),valueFormatted:e.getValueFormatted?e.getValueFormatted():void 0,hideTooltipCallback:()=>{var e;return null===(e=this.tooltipManager)||void 0===e?void 0:e.hideTooltip(!0)}}}getTooltipText(){return this.tooltip}destroy(){this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)),super.destroy()}},bi=new Ci,Ri=null,Fi=class e extends F{constructor(e,t){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=bi.next(),this.cssClassManager=new at((()=>this.eGui)),this.componentSelectors=new Map((null!==t&&void 0!==t?t:[]).map((e=>[e.selector,e]))),e&&this.setTemplate(e)}preWireBeans(e){super.preWireBeans(e)}preConstruct(){this.usingBrowserTooltips=this.gos.get("enableBrowserTooltips"),this.wireTemplate(this.getGui())}wireTemplate(e,t){e&&this.gos&&(this.applyElementsToComponent(e),this.createChildComponentsFromTags(e,t))}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(e){const{newTooltipText:t,showDelayOverride:i,hideDelayOverride:s,location:o,shouldDisplayTooltip:n}=e||{};this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.tooltipText!==t&&(this.tooltipText=t);const r=()=>this.tooltipText;null!=t&&(this.tooltipFeature=this.createBean(new yi({getTooltipValue:r,getGui:()=>this.getGui(),getLocation:()=>null!==o&&void 0!==o?o:"UNKNOWN",getColDef:null===e||void 0===e?void 0:e.getColDef,getColumn:null===e||void 0===e?void 0:e.getColumn,getTooltipShowDelayOverride:null!=i?()=>i:void 0,getTooltipHideDelayOverride:null!=s?()=>s:void 0,shouldDisplayTooltip:n})))}getDataRefAttribute(e){return e.getAttribute?e.getAttribute("data-ref"):null}applyElementsToComponent(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(void 0===t&&(t=this.getDataRefAttribute(e)),t){const o=this[t];if(o===Ri)this[t]=null!==s&&void 0!==s?s:e;else{const e=i&&i[t];this.suppressDataRefValidation||e||ie("Issue with data-ref: ".concat(t," on ").concat(this.constructor.name," with ").concat(o))}}}createChildComponentsFromTags(e,t){(function(e){if(null==e)return[];const t=[];return fi(e,(e=>t.push(e))),t})(e.childNodes).forEach((i=>{if(!(i instanceof HTMLElement))return;const s=this.createComponentFromElement(i,(e=>{e.getGui()&&this.copyAttributesFromNode(i,e.getGui())}),t);if(s){if(s.addItems&&i.children.length){this.createChildComponentsFromTags(i,t);const e=Array.prototype.slice.call(i.children);s.addItems(e)}this.swapComponentForNode(s,e,i)}else i.childNodes&&this.createChildComponentsFromTags(i,t)}))}createComponentFromElement(t,i,s){const o=t.nodeName,n=this.getDataRefAttribute(t),r=0===o.indexOf("AG-"),l=r?this.componentSelectors.get(o):null;let a=null;if(l){e.elementGettingCreated=t;const o=s&&n?s[n]:void 0;a=new l.component(o),a.setParentComponent(this),this.createBean(a,null,i)}else r&&ie("Missing selector: ".concat(o));return this.applyElementsToComponent(t,n,s,a),a}copyAttributesFromNode(e,t){!function(e,t){if(e)for(let i=0;i<e.length;i++){const s=e[i];t(s.name,s.value)}}(e.attributes,((e,i)=>t.setAttribute(e,i)))}swapComponentForNode(e,t,i){const s=e.getGui();t.replaceChild(s,i),t.insertBefore(document.createComment(i.nodeName),s),this.addDestroyFunc(this.destroyBean.bind(this,e))}activateTabIndex(e){const t=this.gos.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui()),e.forEach((e=>e.setAttribute("tabindex",t.toString())))}setTemplate(e,t,i){const s=ci(e);this.setTemplateFromElement(s,t,i)}setTemplateFromElement(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.eGui=e,this.suppressDataRefValidation=s,t)for(let o=0;o<t.length;o++){const e=t[o];this.componentSelectors.set(e.selector,e)}this.wireTemplate(e,i)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}getContainerAndElement(e,t){let i=t;return null==e?null:(i||(i=this.eGui),mi(e)?{element:e,parent:i}:{element:e.getGui(),parent:i})}prependChild(e,t){const{element:i,parent:s}=this.getContainerAndElement(e,t)||{};i&&s&&s.insertAdjacentElement("afterbegin",i)}appendChild(e,t){const{element:i,parent:s}=this.getContainerAndElement(e,t)||{};i&&s&&s.appendChild(i)}isDisplayed(){return this.displayed}setVisible(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e!==this.visible){this.visible=e;const{skipAriaHidden:i}=t;!function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{skipAriaHidden:s}=i;e.classList.toggle("ag-invisible",!t),s||yt(e,!t)}(this.eGui,e,{skipAriaHidden:i})}}setDisplayed(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e!==this.displayed){this.displayed=e;const{skipAriaHidden:i}=t;Yt(this.eGui,e,{skipAriaHidden:i});const s={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(s)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),super.destroy()}addGuiEventListener(e,t,i){this.eGui.addEventListener(e,t,i),this.addDestroyFunc((()=>this.eGui.removeEventListener(e,t)))}addCssClass(e){this.cssClassManager.addCssClass(e)}removeCssClass(e){this.cssClassManager.removeCssClass(e)}containsCssClass(e){return this.cssClassManager.containsCssClass(e)}addOrRemoveCssClass(e,t){this.cssClassManager.addOrRemoveCssClass(e,t)}},Ei={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus",checkboxChecked:"checkbox-checked",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off"};function xi(e,t,i){const s=Pi(e,t,i);if(s){const{className:e}=s;if("string"===typeof e&&e.indexOf("ag-icon")>-1||"object"===typeof e&&e["ag-icon"])return s}const o=document.createElement("span");return o.appendChild(s),o}function Pi(e,t,i,s){let o=null;const n=i&&i.getColDef().icons;if(n&&(o=n[e]),t&&!o){const i=t.get("icons");i&&(o=i[e])}if(!o){const t=document.createElement("span");let i=Ei[e];return i||(s?i=e:(ie("Did not find icon ".concat(e)),i="")),t.setAttribute("class","ag-icon ag-icon-".concat(i)),t.setAttribute("unselectable","on"),pt(t,"presentation"),t}{let e;if("function"===typeof o)e=o();else{if("string"!==typeof o)throw new Error("icon from grid options needs to be a string or a function");e=o}if("string"===typeof e)return ci(e);if(mi(e))return e;ie("iconRenderer should return back a string or a dom object")}}function Mi(e,t,i){if(0===i)return!1;const s=Math.abs(e.clientX-t.clientX),o=Math.abs(e.clientY-t.clientY);return Math.max(s,o)<=i}var Di=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new s,this.eElement=e,this.preventMouseClick=t;const i=this.onTouchStart.bind(this),o=this.onTouchMove.bind(this),n=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",i,{passive:!0}),this.eElement.addEventListener("touchmove",o,{passive:!0}),this.eElement.addEventListener("touchend",n,{passive:!1}),this.destroyFuncs.push((()=>{this.eElement.removeEventListener("touchstart",i,{passive:!0}),this.eElement.removeEventListener("touchmove",o,{passive:!0}),this.eElement.removeEventListener("touchend",n,{passive:!1})}))}getActiveTouch(e){for(let t=0;t<e.length;t++){if(e[t].identifier===this.touchStart.identifier)return e[t]}return null}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;const t=this.touchStart;window.setTimeout((()=>{const i=this.touchStart===t;if(this.touching&&i&&!this.moved){this.moved=!0;const t={type:"longTap",touchStart:this.touchStart,touchEvent:e};this.localEventService.dispatchEvent(t)}}),500)}onTouchMove(e){if(!this.touching)return;const t=this.getActiveTouch(e.touches);if(!t)return;!Mi(t,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){const e={type:"tap",touchStart:this.touchStart};this.localEventService.dispatchEvent(e),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){const e=(new Date).getTime();if(this.lastTapTime&&this.lastTapTime>0){if(e-this.lastTapTime>this.DOUBLE_TAP_MILLIS){const e={type:"doubleTap",touchStart:this.touchStart};this.localEventService.dispatchEvent(e),this.lastTapTime=null}else this.lastTapTime=e}else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach((e=>e()))}},Ii=class extends Fi{constructor(e){super(),this.eSortOrder=Ri,this.eSortAsc=Ri,this.eSortDesc=Ri,this.eSortMixed=Ri,this.eSortNone=Ri,e||this.setTemplate('<span class="ag-sort-indicator-container">\n        <span data-ref="eSortOrder" class="ag-sort-indicator-icon ag-sort-order ag-hidden" aria-hidden="true"></span>\n        <span data-ref="eSortAsc" class="ag-sort-indicator-icon ag-sort-ascending-icon ag-hidden" aria-hidden="true"></span>\n        <span data-ref="eSortDesc" class="ag-sort-indicator-icon ag-sort-descending-icon ag-hidden" aria-hidden="true"></span>\n        <span data-ref="eSortMixed" class="ag-sort-indicator-icon ag-sort-mixed-icon ag-hidden" aria-hidden="true"></span>\n        <span data-ref="eSortNone" class="ag-sort-indicator-icon ag-sort-none-icon ag-hidden" aria-hidden="true"></span>\n    </span>')}wireBeans(e){this.sortController=e.sortController}attachCustomElements(e,t,i,s,o){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=i,this.eSortMixed=s,this.eSortNone=o}setupSort(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),(this.column.isSortable()||this.column.getColDef().showRowGroup)&&(this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e),this.addManagedPropertyListener("unSortIcon",(()=>this.updateIcons())),this.addManagedEventListeners({newColumnsLoaded:this.updateIcons.bind(this),sortChanged:this.onSortChanged.bind(this),columnRowGroupChanged:this.onSortChanged.bind(this)}),this.onSortChanged())}addInIcon(e,t,i){if(null==t)return;const s=Pi(e,this.gos,i);s&&t.appendChild(s)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){const t="asc"===e;Yt(this.eSortAsc,t,{skipAriaHidden:!0})}if(this.eSortDesc){const t="desc"===e;Yt(this.eSortDesc,t,{skipAriaHidden:!0})}if(this.eSortNone){const t=!this.column.getColDef().unSortIcon&&!this.gos.get("unSortIcon"),i=null===e||void 0===e;Yt(this.eSortNone,!t&&i,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);const e=this.column.getColDef().showRowGroup;this.gos.isColumnsSortingCoupledToGroup()&&e&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){const e="mixed"===this.sortController.getDisplaySortForColumn(this.column);Yt(this.eSortMixed,e,{skipAriaHidden:!0})}}updateSortOrder(){var e;if(!this.eSortOrder)return;const t=this.sortController.getColumnsWithSortingOrdered(),i=null!==(e=this.sortController.getDisplaySortIndexForColumn(this.column))&&void 0!==e?e:-1,s=t.some((e=>{var t;return null!==(t=this.sortController.getDisplaySortIndexForColumn(e))&&void 0!==t&&t})),o=i>=0&&s;Yt(this.eSortOrder,o,{skipAriaHidden:!0}),i>=0?this.eSortOrder.textContent=(i+1).toString():ri(this.eSortOrder)}},Ti={selector:"AG-SORT-INDICATOR",component:Ii},Ai=class extends Fi{constructor(){super(...arguments),this.eFilter=Ri,this.eFilterButton=Ri,this.eSortIndicator=Ri,this.eMenu=Ri,this.eLabel=Ri,this.eText=Ri,this.eSortOrder=Ri,this.eSortAsc=Ri,this.eSortDesc=Ri,this.eSortMixed=Ri,this.eSortNone=Ri,this.lastMovingChanged=0}wireBeans(e){this.sortController=e.sortController,this.menuService=e.menuService,this.funcColsService=e.funcColsService}destroy(){super.destroy()}refresh(e){const t=this.params;return this.params=e,this.workOutTemplate()==this.currentTemplate&&this.workOutShowMenu()==this.currentShowMenu&&this.workOutSort()==this.currentSort&&this.shouldSuppressMenuHide()==this.currentSuppressMenuHide&&t.enableFilterButton==e.enableFilterButton&&t.enableFilterIcon==e.enableFilterIcon&&(this.setDisplayName(e),!0)}workOutTemplate(){var e;let t=null!==(e=this.params.template)&&void 0!==e?e:'<div class="ag-cell-label-container" role="presentation">\n        <span data-ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>\n        <span data-ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>\n        <div data-ref="eLabel" class="ag-header-cell-label" role="presentation">\n            <span data-ref="eText" class="ag-header-cell-text"></span>\n            <span data-ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>\n            <ag-sort-indicator data-ref="eSortIndicator"></ag-sort-indicator>\n        </div>\n    </div>';return t=t&&t.trim?t.trim():t,t}init(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate,[Ti]),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(e)}setDisplayName(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;const t=ke(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=t)}}addInIcon(e,t,i){if(null==t)return;const s=Pi(e,this.gos,i);s&&t.appendChild(s)}setupTap(){const{gos:e}=this;if(e.get("suppressTouch"))return;const t=new Di(this.getGui(),!0),i=this.shouldSuppressMenuHide(),s=i&&P(this.eMenu),o=s?new Di(this.eMenu,!0):t;if(this.params.enableMenu){const e=s?"tap":"longTap",t=e=>this.params.showColumnMenuAfterMouseClick(e.touchStart);this.addManagedListeners(o,{[e]:t})}if(this.params.enableSorting){const e=e=>{var t,s;const o=e.touchStart.target;i&&(null!==(t=this.eMenu)&&void 0!==t&&t.contains(o)||null!==(s=this.eFilterButton)&&void 0!==s&&s.contains(o))||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")};this.addManagedListeners(t,{tap:e})}if(this.params.enableFilterButton){const e=new Di(this.eFilterButton,!0);this.addManagedListeners(e,{tap:()=>this.params.showFilter(this.eFilterButton)}),this.addDestroyFunc((()=>e.destroy()))}this.addDestroyFunc((()=>t.destroy())),s&&this.addDestroyFunc((()=>o.destroy()))}workOutShowMenu(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu)return li(this.eMenu),void(this.eMenu=void 0);const e=this.menuService.isLegacyMenuEnabled();this.addInIcon(e?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!e),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedElementListeners(this.eMenu,{click:()=>this.params.showColumnMenu(this.eMenu)}),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}onMenuKeyboardShortcut(e){const t=this.params.column,i=this.menuService.isLegacyMenuEnabled();var s,o;if(e&&!i){if(this.menuService.isFilterMenuInHeaderEnabled(t))return this.params.showFilter(null!==(s=null!==(o=this.eFilterButton)&&void 0!==o?o:this.eMenu)&&void 0!==s?s:this.getGui()),!0}else if(this.params.enableMenu){var n,r;return this.params.showColumnMenu(null!==(n=null!==(r=this.eMenu)&&void 0!==r?r:this.eFilterButton)&&void 0!==n?n:this.getGui()),!0}return!1}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.createBean(new Ii(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;this.addManagedListeners(this.params.column,{movingChanged:()=>{this.lastMovingChanged=(new Date).getTime()}}),this.eLabel&&this.addManagedElementListeners(this.eLabel,{click:e=>{const t=this.params.column.isMoving(),i=(new Date).getTime()-this.lastMovingChanged<50;if(!(t||i)){const t="ctrl"===this.gos.get("multiSortKey")?e.ctrlKey||e.metaKey:e.shiftKey;this.params.progressSort(t)}}});const e=()=>{const e=this.params.column.getSort();if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc","asc"===e),this.addOrRemoveCssClass("ag-header-cell-sorted-desc","desc"===e),this.addOrRemoveCssClass("ag-header-cell-sorted-none",!e),this.params.column.getColDef().showRowGroup){const e=this.funcColsService.getSourceColumnsForGroupColumn(this.params.column),t=!(null===e||void 0===e?void 0:e.every((e=>this.params.column.getSort()==e.getSort())));this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",t)}};this.addManagedEventListeners({sortChanged:e,columnRowGroupChanged:e})}setupFilterIcon(){this.eFilter&&this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))}setupFilterButton(){if(!this.eFilterButton)return;this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this))?this.addManagedElementListeners(this.eFilterButton,{click:()=>this.params.showFilter(this.eFilterButton)}):this.eFilterButton=void 0}configureFilter(e,t,i){if(!e)return li(t),!1;const s=this.params.column;return this.addInIcon("filter",t,s),this.addManagedListeners(s,{filterChanged:i}),i(),!0}onFilterChangedIcon(){const e=this.params.column.isFilterActive();Yt(this.eFilter,e,{skipAriaHidden:!0})}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){var t,i,s,o;return e?null!==(s=null!==(o=this.eFilterButton)&&void 0!==o?o:this.eMenu)&&void 0!==s?s:this.getGui():null!==(t=null!==(i=this.eMenu)&&void 0!==i?i:this.eFilterButton)&&void 0!==t?t:this.getGui()}},ki=class extends Fi{constructor(){super('<div class="ag-header-group-cell-label" role="presentation">\n            <span data-ref="agLabel" class="ag-header-group-text" role="presentation"></span>\n            <span data-ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>\n            <span data-ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>\n        </div>'),this.agOpened=Ri,this.agClosed=Ri,this.agLabel=Ri}wireBeans(e){this.columnModel=e.columnModel}destroy(){super.destroy()}init(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){this.params.template&&ie("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}setupExpandIcons(){this.addInIcon("columnGroupOpened",this.agOpened),this.addInIcon("columnGroupClosed",this.agClosed);const e=e=>{if(S(e))return;const t=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),t,"uiColumnExpanded")};this.addTouchAndClickListeners(this.agClosed,e),this.addTouchAndClickListeners(this.agOpened,e);const t=e=>{w(e)};this.addManagedElementListeners(this.agClosed,{dblclick:t}),this.addManagedElementListeners(this.agOpened,{dblclick:t}),this.addManagedElementListeners(this.getGui(),{dblclick:e}),this.updateIconVisibility();const i=this.params.columnGroup.getProvidedColumnGroup(),s=this.updateIconVisibility.bind(this);this.addManagedListeners(i,{expandedChanged:s,expandableChanged:s})}addTouchAndClickListeners(e,t){const i=new Di(e,!0);this.addManagedListeners(i,{tap:t}),this.addDestroyFunc((()=>i.destroy())),this.addManagedElementListeners(e,{click:t})}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){const e=this.params.columnGroup.isExpanded();Yt(this.agOpened,e),Yt(this.agClosed,!e)}else Yt(this.agOpened,!1),Yt(this.agClosed,!1)}addInIcon(e,t){const i=Pi(e,this.gos,null);i&&t.appendChild(i)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable())return Yt(this.agOpened,!1),void Yt(this.agClosed,!1)}setupLabel(){var e;const{displayName:t,columnGroup:i}=this.params;if(P(t)){const e=ke(t,!0);this.agLabel.textContent=e}this.addOrRemoveCssClass("ag-sticky-label",!(null!==(e=i.getColGroupDef())&&void 0!==e&&e.suppressStickyLabel))}},Li=(e=>(e.CommunityCoreModule="@ag-grid-community/core",e.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",e.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",e.CsvExportModule="@ag-grid-community/csv-export",e.EnterpriseCoreModule="@ag-grid-enterprise/core",e.RowGroupingModule="@ag-grid-enterprise/row-grouping",e.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",e.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",e.MenuModule="@ag-grid-enterprise/menu",e.SetFilterModule="@ag-grid-enterprise/set-filter",e.MultiFilterModule="@ag-grid-enterprise/multi-filter",e.StatusBarModule="@ag-grid-enterprise/status-bar",e.SideBarModule="@ag-grid-enterprise/side-bar",e.RangeSelectionModule="@ag-grid-enterprise/range-selection",e.MasterDetailModule="@ag-grid-enterprise/master-detail",e.RichSelectModule="@ag-grid-enterprise/rich-select",e.GridChartsModule="@ag-grid-enterprise/charts",e.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",e.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",e.ExcelExportModule="@ag-grid-enterprise/excel-export",e.ClipboardModule="@ag-grid-enterprise/clipboard",e.SparklinesModule="@ag-grid-enterprise/sparklines",e.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",e.AngularModule="@ag-grid-community/angular",e.ReactModule="@ag-grid-community/react",e.VueModule="@ag-grid-community/vue",e))(Li||{}),Gi=class e{static register(t){e.__register(t,!0,void 0)}static registerModules(t){e.__registerModules(t,!0,void 0)}static __register(t,i,s){e.runVersionChecks(t),void 0!==s?(e.areGridScopedModules=!0,void 0===e.gridModulesMap[s]&&(e.gridModulesMap[s]={}),e.gridModulesMap[s][t.moduleName]=t):e.globalModulesMap[t.moduleName]=t,e.setModuleBased(i)}static __unRegisterGridModules(t){delete e.gridModulesMap[t]}static __registerModules(t,i,s){e.setModuleBased(i),t&&t.forEach((t=>e.__register(t,i,s)))}static isValidModuleVersion(t){const[i,s]=t.version.split(".")||[],[o,n]=e.currentModuleVersion.split(".")||[];return i===o&&s===n}static runVersionChecks(t){e.currentModuleVersion||(e.currentModuleVersion=t.version);const i=e=>"You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ".concat(e," Please update all modules to the same version.");if(t.version?e.isValidModuleVersion(t)||se(i("'".concat(t.moduleName,"' is version ").concat(t.version," but the other modules are version ").concat(e.currentModuleVersion,"."))):se(i("'".concat(t.moduleName,"' is incompatible."))),t.validate){const e=t.validate();if(!e.isValid){se("".concat(e.message))}}}static setModuleBased(t){void 0===e.moduleBased?e.moduleBased=t:e.moduleBased!==t&&(se("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),se("Please see https://www.ag-grid.com/javascript-grid/modules/ for more information."))}static __setIsBundled(){e.isBundled=!0}static __assertRegistered(t,i,s){if(this.__isRegistered(t,s))return!0;let o;if(e.isBundled)o="AG Grid: unable to use ".concat(i," as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:\n        \n        <script src=\"https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js\"><\/script>\n        \nFor more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise");else if(e.moduleBased||void 0===e.moduleBased){var n;const r=null===(n=Object.entries(Li).find((e=>{let[i,s]=e;return s===t})))||void 0===n?void 0:n[0];o="AG Grid: unable to use ".concat(i," as the ").concat(r," is not registered").concat(e.areGridScopedModules?" for gridId: ".concat(s):"",". Check if you have registered the module:\n           \n    import { ModuleRegistry } from '@ag-grid-community/core';\n    import { ").concat(r," } from '").concat(t,"';\n    \n    ModuleRegistry.registerModules([ ").concat(r," ]);\n\nFor more info see: https://www.ag-grid.com/javascript-grid/modules/")}else o="AG Grid: unable to use ".concat(i," as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:\n            \n    import 'ag-grid-enterprise';");return se(o),!1}static __isRegistered(t,i){var s;return!!e.globalModulesMap[t]||!(null===(s=e.gridModulesMap[i])||void 0===s||!s[t])}static __getRegisteredModules(t){return[...N(e.globalModulesMap),...N(e.gridModulesMap[t]||{})]}static __getGridRegisteredModules(t){var i;return N(null!==(i=e.gridModulesMap[t])&&void 0!==i?i:{})||[]}static __isPackageBased(){return!e.moduleBased}};Gi.globalModulesMap={},Gi.gridModulesMap={},Gi.areGridScopedModules=!1;var Ni=Gi,Oi=class extends Fi{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-change-delta");const i=document.createElement("span");i.setAttribute("class","ag-value-change-value"),e.appendChild(t),e.appendChild(i),this.setTemplateFromElement(e)}wireBeans(e){this.filterManager=e.filterManager}init(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e,!0)}showDelta(e,t){const i=Math.abs(t),s=e.formatValue(i),o=P(s)?s:i,n=t>=0;this.eDelta.textContent=n?"\u2191"+o:"\u2193"+o,this.eDelta.classList.toggle("ag-value-change-delta-up",n),this.eDelta.classList.toggle("ag-value-change-delta-down",!n)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;this.getFrameworkOverrides().wrapIncoming((()=>{window.setTimeout((()=>{e===this.refreshCount&&this.hideDeltaValue()}),2e3)}))}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),ri(this.eDelta)}refresh(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=e.value;if(s===this.lastValue)return!1;if(P(e.valueFormatted)?this.eValue.textContent=e.valueFormatted:P(e.value)?this.eValue.textContent=s:ri(this.eValue),null!==(t=this.filterManager)&&void 0!==t&&t.isSuppressFlashingCellsBecauseFiltering())return!1;if("number"===typeof s&&"number"===typeof this.lastValue){const t=s-this.lastValue;this.showDelta(e,t)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),i||this.setTimerToRemoveDelta(),this.lastValue=s,!0}},Bi=class extends Fi{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-slide-current"),e.appendChild(t),this.setTemplateFromElement(e),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}wireBeans(e){this.filterManager=e.filterManager}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;const e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);const t=document.createElement("span");t.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=t,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming((()=>{window.setTimeout((()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")}),50),window.setTimeout((()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)}),3e3)}))}refresh(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=e.value;return M(s)&&(s=""),s!==this.lastValue&&((null===(t=this.filterManager)||void 0===t||!t.isSuppressFlashingCellsBecauseFiltering())&&(i||this.addSlideAnimation(),this.lastValue=s,P(e.valueFormatted)?this.eCurrent.textContent=e.valueFormatted:P(e.value)?this.eCurrent.textContent=s:ri(this.eCurrent),!0))}},Vi=class{};Vi.BACKSPACE="Backspace",Vi.TAB="Tab",Vi.ENTER="Enter",Vi.ESCAPE="Escape",Vi.SPACE=" ",Vi.LEFT="ArrowLeft",Vi.UP="ArrowUp",Vi.RIGHT="ArrowRight",Vi.DOWN="ArrowDown",Vi.DELETE="Delete",Vi.F2="F2",Vi.PAGE_UP="PageUp",Vi.PAGE_DOWN="PageDown",Vi.PAGE_HOME="Home",Vi.PAGE_END="End",Vi.A="KeyA",Vi.C="KeyC",Vi.D="KeyD",Vi.V="KeyV",Vi.X="KeyX",Vi.Y="KeyY",Vi.Z="KeyZ";var Hi=class extends Fi{constructor(e,t,i){super(t,i),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:i,labelAlignment:s,disabled:o}=this.config;null!=o&&this.setDisabled(o),null!=e&&this.setLabelSeparator(e),null!=t&&this.setLabel(t),null!=i&&this.setLabelWidth(i),this.setLabelAlignment(s||this.labelAlignment),this.refreshLabel()}refreshLabel(){ri(this.eLabel),"string"===typeof this.label?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),""===this.label?(Yt(this.eLabel,!1),pt(this.eLabel,"presentation")):(Yt(this.eLabel,!0),pt(this.eLabel,null))}setLabelSeparator(e){return this.labelSeparator===e||(this.labelSeparator=e,null!=this.label&&this.refreshLabel()),this}getLabelId(){return this.eLabel.id=this.eLabel.id||"ag-".concat(this.getCompId(),"-label"),this.eLabel.id}getLabel(){return this.label}setLabel(e){return this.label===e||(this.label=e,this.refreshLabel()),this}setLabelAlignment(e){const t=this.getGui().classList;return t.toggle("ag-label-align-left","left"===e),t.toggle("ag-label-align-right","right"===e),t.toggle("ag-label-align-top","top"===e),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return null==this.label||ui(this.eLabel,e),this}setDisabled(e){e=!!e;const t=this.getGui();return qt(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},Wi=class extends Hi{constructor(e,t,i,s){super(e,t,i),this.className=s}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:i}=this.config;null!=e&&this.setWidth(e),null!=t&&this.setValue(t),null!=i&&this.onValueChange(i),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId(),i=this.getLabel();null==i||""==i||null!==e.getAttribute("aria-label")?vt(e,""):vt(e,null!==t&&void 0!==t?t:"")}setAriaLabel(e){return mt(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return hi(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e||(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"})),this}},zi=class extends Wi{constructor(e,t){var i;let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"input";super(e,null!==(i=null===e||void 0===e?void 0:e.template)&&void 0!==i?i:'\n            <div role="presentation">\n                <div data-ref="eLabel" class="ag-input-field-label"></div>\n                <div data-ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">\n                    <'.concat(o,' data-ref="eInput" class="ag-input-field-input"></').concat(o,">\n                </div>\n            </div>"),[],t),this.inputType=s,this.displayFieldTag=o,this.eLabel=Ri,this.eWrapper=Ri,this.eInput=Ri}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add("".concat(this.className,"-label")),this.eWrapper.classList.add("".concat(this.className,"-input-wrapper")),this.eInput.classList.add("".concat(this.className,"-input")),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||"ag-".concat(this.getCompId(),"-input");const{inputName:e,inputWidth:t}=this.config;null!=e&&this.setInputName(e),null!=t&&this.setInputWidth(t),this.addInputListeners(),this.activateTabIndex([this.eInput])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(){"input"===this.displayFieldTag&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(e){return ui(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){return this.eInput.maxLength=e,this}setInputPlaceholder(e){return vi(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return mt(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return qt(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(!0===e)vi(this.eInput,"autocomplete",null);else{const t="string"===typeof e?e:"off";vi(this.eInput,"autocomplete",t)}return this}},Ui=class extends zi{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ag-checkbox",arguments.length>2&&void 0!==arguments[2]?arguments[2]:"checkbox"),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t}=this.config;"boolean"===typeof e&&this.setReadOnly(e),"boolean"===typeof t&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return void 0===this.selected||!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){return this.getInputElement().name=e,this}isSelected(){return this.selected}setSelected(e,t){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected="boolean"===typeof e?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=void 0===e,t||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(e,t,i){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:i});const s=this.getInputElement(),o={type:"checkboxChanged",id:s.id,name:s.name,selected:e,previousValue:t};this.eventService.dispatchEvent(o)}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),i=this.selected=e.target.checked;this.refreshSelectedClass(i),this.dispatchChange(i,t,e)}refreshSelectedClass(e){this.eWrapper.classList.toggle("ag-checked",!0===e),this.eWrapper.classList.toggle("ag-indeterminate",null==e)}},_i={selector:"AG-CHECKBOX",component:Ui},Ki=class extends Fi{constructor(){super('\n            <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">\n                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>\n            </div>',[_i]),this.eCheckbox=Ri}init(e){this.params=e,this.updateCheckbox(e);const t=this.eCheckbox.getInputElement();t.setAttribute("tabindex","-1"),Ct(t,"polite"),this.addManagedListeners(t,{click:e=>{if(w(e),this.eCheckbox.isDisabled())return;const t=this.eCheckbox.getValue();this.onCheckboxChanged(t)},dblclick:e=>{w(e)}}),this.addManagedElementListeners(this.params.eGridCell,{keydown:e=>{if(e.key===Vi.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===this.gos.getActiveDomElement()&&this.eCheckbox.toggle();const t=this.eCheckbox.getValue();this.onCheckboxChanged(t),e.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){var t;let i,s=!0;if(e.node.group&&e.column){const t=e.column.getColId();if(t.startsWith(ge))i=null==e.value||""===e.value?void 0:"true"===e.value;else if(e.node.aggData&&void 0!==e.node.aggData[t]){var o;i=null!==(o=e.value)&&void 0!==o?o:void 0}else s=!1}else{var n;i=null!==(n=e.value)&&void 0!==n?n:void 0}if(!s)return void this.eCheckbox.setDisplayed(!1);this.eCheckbox.setValue(i);const r=null!=e.disabled?e.disabled:!(null!==(t=e.column)&&void 0!==t&&t.isCellEditable(e.node));this.eCheckbox.setDisabled(r);const l=this.localeService.getLocaleTextFunc(),a=Lt(l,i),d=r?a:"".concat(l("ariaToggleCellValue","Press SPACE to toggle cell value")," (").concat(a,")");this.eCheckbox.setInputAriaLabel(d)}onCheckboxChanged(e){const{column:t,node:i,value:s}=this.params,o={type:"cellEditingStarted",column:t,colDef:null===t||void 0===t?void 0:t.getColDef(),data:i.data,node:i,rowIndex:i.rowIndex,rowPinned:i.rowPinned,value:s};this.eventService.dispatchEvent(o);const n=this.params.node.setDataValue(this.params.column,e,"edit"),r={type:"cellEditingStopped",column:t,colDef:null===t||void 0===t?void 0:t.getColDef(),data:i.data,node:i,rowIndex:i.rowIndex,rowPinned:i.rowPinned,value:s,oldValue:s,newValue:e,valueChanged:n};this.eventService.dispatchEvent(r)}},Zi=class extends Fi{constructor(){super('<div class="ag-loading">\n            <span class="ag-loading-icon" data-ref="eLoadingIcon"></span>\n            <span class="ag-loading-text" data-ref="eLoadingText"></span>\n        </div>'),this.eLoadingIcon=Ri,this.eLoadingText=Ri}init(e){e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")}setupLoading(){const e=Pi("groupLoading",this.gos,null);e&&this.eLoadingIcon.appendChild(e);const t=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=t("loadingOoo","Loading")}refresh(e){return!1}destroy(){super.destroy()}},ji=class extends Fi{constructor(){super('<div class="ag-skeleton-container"></div>')}init(e){const t="ag-cell-skeleton-renderer-".concat(this.getCompId());this.getGui().setAttribute("id",t),this.addDestroyFunc((()=>vt(e.eParentOfValue))),vt(e.eParentOfValue,t),e.node.failedLoad?this.setupFailed():this.setupLoading(e)}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.getGui().innerText=e("loadingError","ERR");const t=e("ariaSkeletonCellLoadingFailed","Row failed to load");mt(this.getGui(),t)}setupLoading(e){const t=this.gos.getDocument().createElement("div");t.classList.add("ag-skeleton-effect");const i=e.node.rowIndex;if(null!=i){const e=75+25*(i%2===0?Math.sin(i):Math.cos(i));t.style.width="".concat(e,"%")}this.getGui().appendChild(t);const s=this.localeService.getLocaleTextFunc()("ariaSkeletonCellLoading","Row data is loading");mt(this.getGui(),s)}refresh(e){return!1}destroy(){super.destroy()}},Yi=class extends Fi{constructor(){super()}destroy(){super.destroy()}},qi=class extends Yi{init(){const e=this.gos.get("overlayLoadingTemplate");if(this.setTemplate(null!==e&&void 0!==e?e:'<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>'),!e){const e=this.localeService.getLocaleTextFunc();setTimeout((()=>{this.getGui().textContent=e("loadingOoo","Loading...")}))}}},Qi=class extends Yi{init(){const e=this.gos.get("overlayNoRowsTemplate");if(this.setTemplate(null!==e&&void 0!==e?e:'<span class="ag-overlay-no-rows-center"></span>'),!e){const e=this.localeService.getLocaleTextFunc();setTimeout((()=>{this.getGui().textContent=e("noRowsToShow","No Rows To Show")}))}}},Xi=class extends Fi{isPopup(){return!0}setParentComponent(e){e.addCssClass("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},$i=class extends Xi{constructor(){super('<div class="ag-tooltip"></div>')}init(e){const{value:t}=e;this.getGui().textContent=ke(t,!0)}};function Ji(e,t,i,s){let o=t.map(((t,i)=>({value:t,relevance:es(e.toLowerCase(),t.toLocaleLowerCase()),idx:i})));if(o.sort(((e,t)=>t.relevance-e.relevance)),i&&(o=o.filter((e=>0!==e.relevance))),o.length>0&&s&&s>0){const e=o[0].relevance*s;o=o.filter((t=>e-t.relevance<0))}const n=[],r=[];for(const l of o)n.push(l.value),r.push(l.idx);return{values:n,indices:r}}function es(e,t){const i=e.replace(/\s/g,""),s=t.replace(/\s/g,"");let o=0,n=-1;for(let r=0;r<i.length;r++){const e=s.indexOf(i[r],n+1);-1!==e&&(n=e,o+=100-100*n/1e4*100)}return o}var ts=class extends F{constructor(){super(...arguments),this.beanName="userComponentRegistry",this.agGridDefaults={agColumnHeader:Ai,agColumnGroupHeader:ki,agSortIndicator:Ii,agAnimateShowChangeCellRenderer:Oi,agAnimateSlideCellRenderer:Bi,agLoadingCellRenderer:Zi,agSkeletonCellRenderer:ji,agCheckboxCellRenderer:Ki,agLoadingOverlay:qi,agNoRowsOverlay:Qi,agTooltipComponent:$i},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:"@ag-grid-enterprise/set-filter",agSetColumnFloatingFilter:"@ag-grid-enterprise/set-filter",agMultiColumnFilter:"@ag-grid-enterprise/multi-filter",agMultiColumnFloatingFilter:"@ag-grid-enterprise/multi-filter",agGroupColumnFilter:"@ag-grid-enterprise/row-grouping",agGroupColumnFloatingFilter:"@ag-grid-enterprise/row-grouping",agGroupCellRenderer:"@ag-grid-enterprise/row-grouping",agGroupRowRenderer:"@ag-grid-enterprise/row-grouping",agRichSelect:"@ag-grid-enterprise/rich-select",agRichSelectCellEditor:"@ag-grid-enterprise/rich-select",agDetailCellRenderer:"@ag-grid-enterprise/master-detail",agSparklineCellRenderer:"@ag-grid-enterprise/sparklines"},this.jsComps={}}postConstruct(){const e=this.gos.get("components");null!=e&&B(e,((e,t)=>this.registerJsComponent(e,t)))}registerDefaultComponent(e,t){this.agGridDefaults[e]=t}registerJsComponent(e,t){this.jsComps[e]=t}retrieve(e,t){const i=(e,t)=>({componentFromFramework:t,component:e}),s=this.getFrameworkOverrides().frameworkComponent(t,this.gos.get("components"));if(null!=s)return i(s,!0);const o=this.jsComps[t];if(o){return i(o,this.getFrameworkOverrides().isFrameworkComponent(o))}const n=this.agGridDefaults[t];if(n)return i(n,!1);const r=this.enterpriseAgDefaultCompsModule[t];return r?Ni.__assertRegistered(r,"AG Grid '".concat(e,"' component: ").concat(t),this.gridId):ee((()=>{this.warnAboutMissingComponent(e,t)}),"MissingComp"+t),null}warnAboutMissingComponent(e,t){const i=Ji(t,[...Object.keys(this.agGridDefaults).filter((e=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(e))),...Object.keys(this.jsComps)],!0,.8).values;ie("Could not find '".concat(t,"' component. It was configured as \"").concat(e,": '").concat(t,"'\" but it wasn't found in the list of registered components.")),i.length>0&&ie("         Did you mean: [".concat(i.slice(0,3),"]?")),ie("If using a custom component check it has been registered as described in: ".concat(this.getFrameworkOverrides().getDocLink("components/")))}},is=class e{constructor(e){this.status=0,this.resolution=null,this.waiters=[],e((e=>this.onDone(e)),(e=>this.onReject(e)))}static all(t){return t.length?new e((e=>{let i=t.length;const s=new Array(i);t.forEach(((t,o)=>{t.then((t=>{s[o]=t,i--,0===i&&e(s)}))}))})):e.resolve()}static resolve(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new e((e=>e(t)))}then(t){return new e((e=>{1===this.status?e(t(this.resolution)):this.waiters.push((i=>e(t(i))))}))}onDone(e){this.status=1,this.resolution=e,this.waiters.forEach((t=>t(e)))}onReject(e){}},ss={propertyName:"dateComponent",cellRenderer:!1},os={propertyName:"headerComponent",cellRenderer:!1},ns={propertyName:"headerGroupComponent",cellRenderer:!1},rs={propertyName:"cellRenderer",cellRenderer:!0},ls={propertyName:"cellRenderer",cellRenderer:!1},as={propertyName:"loadingCellRenderer",cellRenderer:!0},ds={propertyName:"cellEditor",cellRenderer:!1},cs={propertyName:"innerRenderer",cellRenderer:!0},us={propertyName:"loadingOverlayComponent",cellRenderer:!1},hs={propertyName:"noRowsOverlayComponent",cellRenderer:!1},ps={propertyName:"tooltipComponent",cellRenderer:!1},gs={propertyName:"filter",cellRenderer:!1},ms={propertyName:"floatingFilterComponent",cellRenderer:!1},vs={propertyName:"toolPanel",cellRenderer:!1},fs={propertyName:"statusPanel",cellRenderer:!1},Cs={propertyName:"fullWidthCellRenderer",cellRenderer:!0},ws={propertyName:"loadingCellRenderer",cellRenderer:!0},Ss={propertyName:"groupRowRenderer",cellRenderer:!0},ys={propertyName:"detailCellRenderer",cellRenderer:!0},bs={propertyName:"menuItem",cellRenderer:!1},Rs=class e extends F{constructor(){super(...arguments),this.beanName="userComponentFactory"}wireBeans(e){this.agComponentUtils=e.agComponentUtils,this.componentMetadataProvider=e.componentMetadataProvider,this.userComponentRegistry=e.userComponentRegistry,this.frameworkComponentWrapper=e.frameworkComponentWrapper,this.gridOptions=e.gridOptions}getHeaderCompDetails(e,t){return this.getCompDetails(e,os,"agColumnHeader",t)}getHeaderGroupCompDetails(e){const t=e.columnGroup.getColGroupDef();return this.getCompDetails(t,ns,"agColumnGroupHeader",e)}getFullWidthCellRendererDetails(e){return this.getCompDetails(this.gridOptions,Cs,null,e,!0)}getFullWidthLoadingCellRendererDetails(e){return this.getCompDetails(this.gridOptions,ws,"agLoadingCellRenderer",e,!0)}getFullWidthGroupCellRendererDetails(e){return this.getCompDetails(this.gridOptions,Ss,"agGroupRowRenderer",e,!0)}getFullWidthDetailCellRendererDetails(e){return this.getCompDetails(this.gridOptions,ys,"agDetailCellRenderer",e,!0)}getInnerRendererDetails(e,t){return this.getCompDetails(e,cs,null,t)}getFullWidthGroupRowInnerCellRenderer(e,t){return this.getCompDetails(e,cs,null,t)}getCellRendererDetails(e,t){return this.getCompDetails(e,rs,null,t)}getEditorRendererDetails(e,t){return this.getCompDetails(e,ls,null,t)}getLoadingCellRendererDetails(e,t){return this.getCompDetails(e,as,"agSkeletonCellRenderer",t,!0)}getCellEditorDetails(e,t){return this.getCompDetails(e,ds,"agCellEditor",t,!0)}getFilterDetails(e,t,i){return this.getCompDetails(e,gs,i,t,!0)}getDateCompDetails(e){return this.getCompDetails(this.gridOptions,ss,"agDateInput",e,!0)}getLoadingOverlayCompDetails(e){return this.getCompDetails(this.gridOptions,us,"agLoadingOverlay",e,!0)}getNoRowsOverlayCompDetails(e){return this.getCompDetails(this.gridOptions,hs,"agNoRowsOverlay",e,!0)}getTooltipCompDetails(e){return this.getCompDetails(e.colDef,ps,"agTooltipComponent",e,!0)}getSetFilterCellRendererDetails(e,t){return this.getCompDetails(e,rs,null,t)}getFloatingFilterCompDetails(e,t,i){return this.getCompDetails(e,ms,i,t)}getToolPanelCompDetails(e,t){return this.getCompDetails(e,vs,null,t,!0)}getStatusPanelCompDetails(e,t){return this.getCompDetails(e,fs,null,t,!0)}getMenuItemCompDetails(e,t){return this.getCompDetails(e,bs,"agMenuItem",t,!0)}getCompDetails(t,i,s,o){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const{propertyName:r,cellRenderer:l}=i;let{compName:a,jsComp:d,fwComp:c,paramsFromSelector:u,popupFromSelector:h,popupPositionFromSelector:p}=e.getCompKeys(this.frameworkOverrides,t,i,o);const g=e=>{const t=this.userComponentRegistry.retrieve(r,e);t&&(d=t.componentFromFramework?void 0:t.component,c=t.componentFromFramework?t.component:void 0)};if(null!=a&&g(a),null==d&&null==c&&null!=s&&g(s),d&&l&&!this.agComponentUtils.doesImplementIComponent(d)&&(d=this.agComponentUtils.adaptFunction(r,d)),!d&&!c)return void(n&&se("Could not find component ".concat(a,", did you forget to configure this component?")));const m=this.mergeParamsWithApplicationProvidedParams(t,i,o,u),v=null==d,f=d||c;return{componentFromFramework:v,componentClass:f,params:m,type:i,popupFromSelector:h,popupPositionFromSelector:p,newAgStackInstance:()=>this.newAgStackInstance(f,v,m,i)}}static getCompKeys(e,t,i,s){const{propertyName:o}=i;let n,r,l,a,d,c;if(t){const i=t,u=i[o+"Selector"],h=u?u(s):null,p=t=>{if("string"===typeof t)n=t;else if(null!=t&&!0!==t){e.isFrameworkComponent(t)?l=t:r=t}};h?(p(h.component),a=h.params,d=h.popup,c=h.popupPosition):p(i[o])}return{compName:n,jsComp:r,fwComp:l,paramsFromSelector:a,popupFromSelector:d,popupPositionFromSelector:c}}newAgStackInstance(e,t,i,s){const o=s.propertyName;let n;if(!t)n=new e;else{const t=this.componentMetadataProvider.retrieve(o);n=this.frameworkComponentWrapper.wrap(e,t.mandatoryMethodList,t.optionalMethodList,s)}const r=this.initComponent(n,i);return null==r?is.resolve(n):r.then((()=>n))}mergeParamsWithApplicationProvidedParams(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const o=this.gos.getGridCommonParams();z(o,i);const n=e&&e[t.propertyName+"Params"];if("function"===typeof n){z(o,n(i))}else"object"===typeof n&&z(o,n);return z(o,s),o}initComponent(e,t){if(this.createBean(e),null!=e.init)return e.init(t)}};function Fs(e){const t=e;return null!=t&&null!=t.getFrameworkComponentInstance?t.getFrameworkComponentInstance():e}var Es=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,e&&e.beanClasses&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){var t;Object.entries(e.providedBeanInstances).forEach((e=>{let[t,i]=e;this.beans[t]=i})),e.beanClasses.forEach((e=>{const t=new e;t.beanName?this.beans[t.beanName]=t:console.error("Bean ".concat(e.name," is missing beanName")),this.createdBeans.push(t)})),null===(t=e.derivedBeans)||void 0===t||t.forEach((e=>{const{beanName:t,bean:i}=e(this);this.beans[t]=i,this.createdBeans.push(i)})),e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){if(!e)throw Error("Can't wire to bean since it is null");return this.initBeans([e],t),e}initBeans(e,t){e.forEach((e=>{var t,i;null===(t=e.preWireBeans)||void 0===t||t.call(e,this.beans),null===(i=e.wireBeans)||void 0===i||i.call(e,this.beans)})),e.forEach((e=>{var t;return null===(t=e.preConstruct)||void 0===t?void 0:t.call(e)})),t&&e.forEach(t),e.forEach((e=>{var t;return null===(t=e.postConstruct)||void 0===t?void 0:t.call(e)}))}getBeans(){return this.beans}getBean(e){return this.beans[e]}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[]}destroyBean(e){var t;null===e||void 0===e||null===(t=e.destroy)||void 0===t||t.call(e)}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},xs=class extends Es{init(e){this.gridId=e.gridId,this.beans.context=this,super.init(e)}destroy(){super.destroy(),Ni.__unRegisterGridModules(this.gridId)}getGridId(){return this.gridId}},Ps=(e=>(e[e.SINGLE_SHEET=0]="SINGLE_SHEET",e[e.MULTI_SHEET=1]="MULTI_SHEET",e))(Ps||{}),Ms=(e=>(e[e.Left=0]="Left",e[e.Right=1]="Right",e))(Ms||{}),Ds=(e=>(e[e.ToolPanel=0]="ToolPanel",e[e.HeaderCell=1]="HeaderCell",e[e.RowDrag=2]="RowDrag",e[e.ChartPanel=3]="ChartPanel",e[e.AdvancedFilterBuilder=4]="AdvancedFilterBuilder",e))(Ds||{}),Is=class extends F{constructor(){super(...arguments),this.beanName="dragAndDropService",this.dragSourceAndParamsList=[],this.dropTargets=[]}wireBeans(e){this.dragService=e.dragService,this.mouseEventService=e.mouseEventService,this.environment=e.environment}postConstruct(){this.dropIconMap={pinned:xi("columnMovePin",this.gos,null),hide:xi("columnMoveHide",this.gos,null),move:xi("columnMoveMove",this.gos,null),left:xi("columnMoveLeft",this.gos,null),right:xi("columnMoveRight",this.gos,null),group:xi("columnMoveGroup",this.gos,null),aggregate:xi("columnMoveValue",this.gos,null),pivot:xi("columnMovePivot",this.gos,null),notAllowed:xi("dropNotAllowed",this.gos,null)}}addDragSource(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:i,dragSource:e}),this.dragService.addDragSource(i)}removeDragSource(e){const t=this.dragSourceAndParamsList.find((t=>t.dragSource===e));t&&(this.dragService.removeDragSource(t.params),c(this.dragSourceAndParamsList,t))}destroy(){this.dragSourceAndParamsList.forEach((e=>this.dragService.removeDragSource(e.params))),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0,super.destroy()}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=this.dragSource.getDragItem(),this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()}onDragStop(e){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){const t=this.createDropTargetEvent(this.lastDropTarget,e,null,null,!1);this.lastDropTarget.onDragStop(t)}this.lastDropTarget=void 0,this.dragItem=null,this.removeGhost()}onDragging(e,t){const i=this.getHorizontalDirection(e),s=this.getVerticalDirection(e);this.eventLastTime=e,this.positionGhost(e);const o=this.dropTargets.filter((t=>this.isMouseOnDropTarget(e,t))),n=this.findCurrentDropTarget(e,o);if(n!==this.lastDropTarget){var r,l,a,d;if(this.leaveLastTargetIfExists(e,i,s,t),null!==this.lastDropTarget&&null===n)null===(r=(l=this.dragSource).onGridExit)||void 0===r||r.call(l,this.dragItem);if(null===this.lastDropTarget&&null!==n)null===(a=(d=this.dragSource).onGridEnter)||void 0===a||a.call(d,this.dragItem);this.enterDragTargetIfExists(n,e,i,s,t),this.lastDropTarget=n}else if(n&&n.onDragging){const o=this.createDropTargetEvent(n,e,i,s,t);n.onDragging(o)}}getAllContainersFromDropTarget(e){const t=e.getSecondaryContainers?e.getSecondaryContainers():null,i=[[e.getContainer()]];return t?i.concat(t):i}allContainersIntersect(e,t){for(const i of t){const t=i.getBoundingClientRect();if(0===t.width||0===t.height)return!1;const s=e.clientX>=t.left&&e.clientX<t.right,o=e.clientY>=t.top&&e.clientY<t.bottom;if(!s||!o)return!1}return!0}isMouseOnDropTarget(e,t){const i=this.getAllContainersFromDropTarget(t);let s=!1;for(const o of i)if(this.allContainersIntersect(e,o)){s=!0;break}return!(t.targetContainsSource&&!t.getContainer().contains(this.dragSource.eElement))&&(s&&t.isInterestedIn(this.dragSource.type,this.dragSource.eElement))}findCurrentDropTarget(e,t){const i=t.length;if(0===i)return null;if(1===i)return t[0];const s=this.gos.getRootNode().elementsFromPoint(e.clientX,e.clientY);for(const n of s)for(const e of t){if(-1!==(o=this.getAllContainersFromDropTarget(e),[].concat.apply([],o)).indexOf(n))return e}var o;return null}enterDragTargetIfExists(e,t,i,s,o){if(e){if(e.onDragEnter){const n=this.createDropTargetEvent(e,t,i,s,o);e.onDragEnter(n)}this.setGhostIcon(e.getIconName?e.getIconName():null)}}leaveLastTargetIfExists(e,t,i,s){if(this.lastDropTarget){if(this.lastDropTarget.onDragLeave){const o=this.createDropTargetEvent(this.lastDropTarget,e,t,i,s);this.lastDropTarget.onDragLeave(o)}this.setGhostIcon(null)}}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter((t=>t.getContainer()!==e.getContainer()))}hasExternalDropZones(){return this.dropTargets.some((e=>e.external))}findExternalZone(e){return this.dropTargets.filter((e=>e.external)).find((t=>t.getContainer()===e.getContainer()))||null}getHorizontalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientX,i=e.clientX;return t===i?null:t>i?0:1}getVerticalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientY,i=e.clientY;return t===i?null:t>i?0:1}createDropTargetEvent(e,t,i,s,o){const n=e.getContainer(),r=n.getBoundingClientRect(),{dragItem:l,dragSource:a}=this,d=t.clientX-r.left,c=t.clientY-r.top;return this.gos.addGridCommonParams({event:t,x:d,y:c,vDirection:s,hDirection:i,dragSource:a,fromNudge:o,dragItem:l,dropZoneTarget:n})}positionGhost(e){const t=this.eGhost;if(!t)return;const i=t.getBoundingClientRect().height,s=function(){var e,t,i;return null!==(e=null===(t=document.body)||void 0===t?void 0:t.clientWidth)&&void 0!==e?e:window.innerHeight||(null===(i=document.documentElement)||void 0===i?void 0:i.clientWidth)||-1}()-2,o=function(){var e,t,i;return null!==(e=null===(t=document.body)||void 0===t?void 0:t.clientHeight)&&void 0!==e?e:window.innerHeight||(null===(i=document.documentElement)||void 0===i?void 0:i.clientHeight)||-1}()-2,n=ii(t.offsetParent),{clientY:r,clientX:l}=e;let a=r-n.top-i/2,d=l-n.left-10;const c=this.gos.getDocument(),u=c.defaultView||window,h=u.pageYOffset||c.documentElement.scrollTop,p=u.pageXOffset||c.documentElement.scrollLeft;s>0&&d+t.clientWidth>s+p&&(d=s+p-t.clientWidth),d<0&&(d=0),o>0&&a+t.clientHeight>o+h&&(a=o+h-t.clientHeight),a<0&&(a=0),t.style.left="".concat(d,"px"),t.style.top="".concat(a,"px")}removeGhost(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null}createGhost(){this.eGhost=ci('<div class="ag-dnd-ghost ag-unselectable">\n<span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>\n<div class="ag-dnd-ghost-label"></div>\n</div>'),this.mouseEventService.stampTopLevelGridCompWithGridInstance(this.eGhost),this.environment.applyThemeClasses(this.eGhost),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);const e=this.eGhost.querySelector(".ag-dnd-ghost-label");let t=this.dragSource.dragItemName;oe(t)&&(t=t()),e.innerHTML=ke(t)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";const i=this.gos.getDocument();let s=null,o=null;try{s=i.fullscreenElement}catch(r){}finally{s||(s=this.gos.getRootNode());const e=s.querySelector("body");if(e)o=e;else if(s instanceof ShadowRoot)o=s;else if(s instanceof Document){var n;o=null===(n=s)||void 0===n?void 0:n.documentElement}else o=s}this.eGhostParent=o,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):ie("Could not find document body, it is needed for dragging columns")}setGhostIcon(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ri(this.eGhostIcon);let i=null;e||(e=this.dragSource.getDefaultIconName?this.dragSource.getDefaultIconName():"notAllowed"),i=this.dropIconMap[e],this.eGhostIcon.classList.toggle("ag-shake-left-to-right",t),i===this.dropIconMap.hide&&this.gos.get("suppressDragLeaveHidesColumns")||i&&this.eGhostIcon.appendChild(i)}},Ts=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=-1!==e.scrollAxis.indexOf("x"),this.scrollVertically=-1!==e.scrollAxis.indexOf("y"),this.scrollByTick=null!=e.scrollByTick?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]||this.shouldSkipVerticalScroll();if(t&&this.shouldSkipHorizontalScroll())return;const i=this.scrollContainer.getBoundingClientRect(),s=this.scrollByTick;this.tickLeft=e.clientX<i.left+s,this.tickRight=e.clientX>i.right-s,this.tickUp=e.clientY<i.top+s&&!t,this.tickDown=e.clientY>i.bottom-s&&!t,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){null===this.tickingInterval&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;const e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){const t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){const t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},As=(e=>(e[e.Above=0]="Above",e[e.Below=1]="Below",e))(As||{}),ks=class extends F{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.sortController=e.sortController,this.filterManager=e.filterManager,this.selectionService=e.selectionService,this.mouseEventService=e.mouseEventService,this.ctrlsService=e.ctrlsService,this.funcColsService=e.funcColsService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){this.gos.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady((e=>{const t=e.gridBodyCtrl;this.autoScrollService=new Ts({scrollContainer:t.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>t.getScrollFeature().getVScrollPosition().top,setVerticalPosition:e=>t.getScrollFeature().setVerticalScrollPosition(e),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})}))}getContainer(){return this.eContainer}isInterestedIn(e){return 2===e}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){var e;if(this.funcColsService.getRowGroupColumns().length)return!0;if(null===(e=this.filterManager)||void 0===e?void 0:e.isAnyFilterPresent())return!0;return!!this.sortController.isSortActive()}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){const e=[...this.selectionService.getSelectedNodes()].sort(((e,t)=>null==e.rowIndex||null==t.rowIndex?0:this.getRowIndexNumber(e)-this.getRowIndexNumber(t)));if(-1!==e.indexOf(t))return e}return[t]}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent("rowDragEnter",e),this.getRowNodes(e).forEach((e=>{e.setDragging(!0)})),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){const{dragSourceDomDataKey:t}=e.dragSource;return t===this.gos.getDomDataKey()}isDropZoneWithinThisGrid(e){const t=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:i}=e;return!t.contains(i)}onEnterOrDragging(e){this.dispatchGridEvent("rowDragMove",e),this.lastDraggingEvent=e;const t=this.mouseEventService.getNormalisedPosition(e).y;this.gos.get("rowDragManaged")&&this.doManagedDrag(e,t),this.autoScrollService.check(e.event)}doManagedDrag(e,t){const i=this.isFromThisGrid(e),s=this.gos.get("rowDragManaged"),o=e.dragItem.rowNodes;s&&this.shouldPreventRowMove()||(this.gos.get("suppressMoveWhenRowDragging")||!i?this.isDropZoneWithinThisGrid(e)||this.clientSideRowModel.highlightRowAtPixel(o[0],t):this.moveRows(o,t))}getRowIndexNumber(e){const t=e.getRowIndexString();return parseInt(n(t.split("-")),10)}moveRowAndClearHighlight(e){const t=this.clientSideRowModel.getLastHighlightedRowNode(),i=t&&1===t.highlighted,s=this.mouseEventService.getNormalisedPosition(e).y,o=e.dragItem.rowNodes;let n=i?1:0;if(this.isFromThisGrid(e))o.forEach((e=>{e.rowTop<s&&(n-=1)})),this.moveRows(o,s,n);else{const e=this.gos.getRowIdCallback();let t=this.clientSideRowModel.getRowIndexAtPixel(s)+1;0===this.clientSideRowModel.getHighlightPosition(s)&&t--,this.clientSideRowModel.updateRowData({add:o.filter((t=>{var i;return!this.clientSideRowModel.getRowNode(null!==(i=null===e||void 0===e?void 0:e({data:t.data,level:0,rowPinned:t.rowPinned}))&&void 0!==i?i:t.data.id)})).map((e=>e.data)),addIndex:t})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;var s;this.clientSideRowModel.ensureRowsAtPixel(e,t,i)&&(this.focusService.clearFocusedCell(),null===(s=this.rangeService)||void 0===s||s.removeAllCellRanges())}addRowDropZone(e){if(!e.getContainer())return void ie("addRowDropZone - A container target needs to be provided");if(this.dragAndDropService.findExternalZone(e))return void ie("addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");let t={getContainer:e.getContainer};e.fromGrid?t=e:(e.onDragEnter&&(t.onDragEnter=t=>{e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",t))}),e.onDragLeave&&(t.onDragLeave=t=>{e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",t))}),e.onDragging&&(t.onDragging=t=>{e.onDragging(this.draggingToRowDragEvent("rowDragMove",t))}),e.onDragStop&&(t.onDragStop=t=>{e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",t))})),this.dragAndDropService.addDropTarget({isInterestedIn:e=>2===e,getIconName:()=>"move",external:!0,...t})}getRowDropZone(e){const t=this.getContainer.bind(this),i=this.onDragEnter.bind(this),s=this.onDragLeave.bind(this),o=this.onDragging.bind(this),n=this.onDragStop.bind(this);return e?{getContainer:t,onDragEnter:e.onDragEnter?t=>{i(t),e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",t))}:i,onDragLeave:e.onDragLeave?t=>{s(t),e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",t))}:s,onDragging:e.onDragging?t=>{o(t),e.onDragging(this.draggingToRowDragEvent("rowDragMove",t))}:o,onDragStop:e.onDragStop?t=>{n(t),e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",t))}:n,fromGrid:!0}:{getContainer:t,onDragEnter:i,onDragLeave:s,onDragging:o,onDragStop:n,fromGrid:!0}}draggingToRowDragEvent(e,t){const i=this.mouseEventService.getNormalisedPosition(t).y;let s,o,n=-1;switch(i>this.pageBoundsService.getCurrentPageHeight()||(n=this.rowModel.getRowIndexAtPixel(i),s=this.rowModel.getRow(n)),t.vDirection){case 1:o="down";break;case 0:o="up";break;default:o=null}return this.gos.addGridCommonParams({type:e,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:n,overNode:s,y:i,vDirection:o})}dispatchGridEvent(e,t){const i=this.draggingToRowDragEvent(e,t);this.eventService.dispatchEvent(i)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&this.clearRowHighlight()}onDragStop(e){this.dispatchGridEvent("rowDragEnd",e),this.stopDragging(e),!this.gos.get("rowDragManaged")||!this.gos.get("suppressMoveWhenRowDragging")&&this.isFromThisGrid(e)||this.isDropZoneWithinThisGrid(e)||this.moveRowAndClearHighlight(e)}stopDragging(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach((e=>{e.setDragging(!1)}))}},Ls=class extends F{constructor(){super(...arguments),this.beanName="dragService",this.dragEndFunctions=[],this.dragSources=[]}wireBeans(e){this.mouseEventService=e.mouseEventService}destroy(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0,super.destroy()}removeListener(e){const t=e.dragSource.eElement,i=e.mouseDownListener;if(t.removeEventListener("mousedown",i),e.touchEnabled){const i=e.touchStartListener;t.removeEventListener("touchstart",i,{passive:!0})}}removeDragSource(e){const t=this.dragSources.find((t=>t.dragSource===e));t&&(this.removeListener(t),c(this.dragSources,t))}isDragging(){return this.dragging}addDragSource(e){const t=this.onMouseDown.bind(this,e),{eElement:i,includeTouch:s,stopPropagationForTouch:o}=e;i.addEventListener("mousedown",t);let n=null;const r=this.gos.get("suppressTouch");s&&!r&&(n=t=>{jt(t.target)||(t.cancelable&&(t.preventDefault(),o&&t.stopPropagation()),this.onTouchStart(e,t))},i.addEventListener("touchstart",n,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:n,touchEnabled:!!s})}getStartTarget(){return this.startTarget}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;const i=t.touches[0];this.touchLastTime=i,this.touchStart=i;const s=t=>this.onTouchUp(t,e.eElement),o=t.target,n=[{target:this.gos.getRootNode(),type:"touchmove",listener:e=>{e.cancelable&&e.preventDefault()},options:{passive:!1}},{target:o,type:"touchmove",listener:t=>this.onTouchMove(t,e.eElement),options:{passive:!0}},{target:o,type:"touchend",listener:s,options:{passive:!0}},{target:o,type:"touchcancel",listener:s,options:{passive:!0}}];this.addTemporaryEvents(n),0===e.dragStartPixels&&this.onCommonMove(i,this.touchStart,e.eElement)}onMouseDown(e,t){const i=t;if(e.skipMouseEvent&&e.skipMouseEvent(t))return;if(i._alreadyProcessedByDragService)return;if(i._alreadyProcessedByDragService=!0,0!==t.button)return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;const s=this.gos.getRootNode(),o=[{target:s,type:"mousemove",listener:t=>this.onMouseMove(t,e.eElement)},{target:s,type:"mouseup",listener:t=>this.onMouseUp(t,e.eElement)},{target:s,type:"contextmenu",listener:e=>e.preventDefault()}];this.addTemporaryEvents(o),0===e.dragStartPixels&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach((e=>{const{target:t,type:i,listener:s,options:o}=e;t.addEventListener(i,s,o)})),this.dragEndFunctions.push((()=>{e.forEach((e=>{const{target:t,type:i,listener:s,options:o}=e;t.removeEventListener(i,s,o)}))}))}isEventNearStartEvent(e,t){const{dragStartPixels:i}=this.currentDragParams;return Mi(e,t,P(i)?i:4)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,i){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(e,t))return;this.dragging=!0;const s={type:"dragStarted",target:i};this.eventService.dispatchEvent(s),this.currentDragParams.onDragStart(t),this.currentDragParams.onDragging(t)}this.currentDragParams.onDragging(e)}onTouchMove(e,t){const i=this.getFirstActiveTouch(e.touches);i&&this.onCommonMove(i,this.touchStart,t)}onMouseMove(e,t){if(Gt()){var i;null===(i=this.gos.getDocument().getSelection())||void 0===i||i.removeAllRanges()}this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){const t=this.gos.get("enableCellTextSelection"),i="mousemove"===e.type;return t&&i&&e.cancelable&&this.mouseEventService.isEventFromThisGrid(e)&&!this.isOverFormFieldElement(e)}isOverFormFieldElement(e){const t=e.target,i=null===t||void 0===t?void 0:t.tagName.toLocaleLowerCase();return!(null===i||void 0===i||!i.match("^a$|textarea|input|select|button"))}onTouchUp(e,t){let i=this.getFirstActiveTouch(e.changedTouches);i||(i=this.touchLastTime),this.onUpCommon(i,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){if(this.dragging){this.dragging=!1,this.currentDragParams.onDragStop(e);const i={type:"dragStopped",target:t};this.eventService.dispatchEvent(i)}this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach((e=>e())),this.dragEndFunctions.length=0}},Gs=class extends Fi{constructor(e,t,i,s,o,n){super(),this.cellValueFn=e,this.rowNode=t,this.column=i,this.customGui=s,this.dragStartPixels=o,this.suppressVisibilityChange=n,this.dragSource=null}wireBeans(e){this.beans=e}isCustomGui(){return null!=this.customGui}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(Pi("rowDrag",this.gos,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){const e=this.gos.get("rowDragManaged")?new Bs(this,this.beans,this.rowNode,this.column):new Os(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}}setDragElement(e,t){this.setTemplateFromElement(e),this.addDragSource(t)}getSelectedNodes(){if(!this.gos.get("rowDragMultiRow"))return[this.rowNode];const e=this.beans.selectionService.getSelectedNodes();return-1!==e.indexOf(this.rowNode)?e:[this.rowNode]}checkCompatibility(){const e=this.gos.get("rowDragManaged");this.gos.get("treeData")&&e&&ie("If using row drag with tree data, you cannot have rowDragManaged=true")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){const t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;this.dragSource&&this.removeDragSource();const t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:e=>{null===e||void 0===e||e.preventDefault()}})[0]);const i=this.localeService.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:()=>{var e;const t=this.getDragItem(),s=(null===(e=t.rowNodes)||void 0===e?void 0:e.length)||1,o=this.getRowDragText(this.column);return o?o(t,s):1===s?this.cellValueFn():"".concat(s," ").concat(i("rowDragRows","rows"))},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},Ns=class extends F{constructor(e,t,i){super(),this.parent=e,this.rowNode=t,this.column=i}setDisplayedOrVisible(e){const t={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,t);else{let e=!0,i=!1;this.column&&(e=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),i=oe(this.column.getColDef().rowDrag)),i?(this.parent.setDisplayed(!0,t),this.parent.setVisible(e,t)):(this.parent.setDisplayed(e,t),this.parent.setVisible(!0,t))}}},Os=class extends Ns{constructor(e,t,i,s){super(e,i,s),this.beans=t}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this));const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:e}),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(e)}},Bs=class extends Ns{constructor(e,t,i,s){super(e,i,s),this.beans=t}postConstruct(){const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.beans.eventService,{sortChanged:e,filterChanged:e,columnRowGroupChanged:e,newColumnsLoaded:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),t=e&&e.shouldPreventRowMove(),i=this.gos.get("suppressRowDrag"),s=this.beans.dragAndDropService.hasExternalDropZones(),o=t&&!s||i;this.setDisplayedOrVisible(o)}},Vs=class e{constructor(t){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=e.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=t}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,t){var i;const s=this.data;this.data=e,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();const o=this.createDataChangedEvent(e,s,t);null===(i=this.localEventService)||void 0===i||i.dispatchEvent(o)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(e,t,i){return{type:"dataChanged",node:this,oldData:t,newData:e,update:i}}getRowIndexString(){return null==this.rowIndex?(se("Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid."),null):"top"===this.rowPinned?"t-"+this.rowIndex:"bottom"===this.rowPinned?"b-"+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){const t=new e(this.beans);return t.id=this.id,t.data=this.data,t.__daemon=!0,t.selected=this.selected,t.level=this.level,t}setDataAndId(e,t){var i;const s=P(this.id)?this.createDaemonNode():null,o=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(t),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,s);const n=this.createDataChangedEvent(e,o,!1);null===(i=this.localEventService)||void 0===i||i.dispatchEvent(n)}checkRowSelectable(){const e=this.beans.gos.get("isRowSelectable");this.setRowSelectable(!e||e(this))}setRowSelectable(e,t){if(this.selectable!==e){if(this.selectable=e,this.dispatchRowEvent("selectableChanged"),t)return;if(this.beans.gos.get("groupSelectsChildren")){const e=this.calculateSelectedFromChildren();return void this.setSelectedParams({newValue:null!==e&&void 0!==e&&e,source:"selectableChanged"})}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}}setId(t){const i=this.beans.gos.getRowIdCallback();if(i)if(this.data){const t=this.getGroupKeys(!0);this.id=i({data:this.data,parentKeys:t.length>0?t:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(e.ID_PREFIX_ROW_GROUP)&&se("Row IDs cannot start with ".concat(e.ID_PREFIX_ROW_GROUP,", this is a reserved prefix for AG Grid's row grouping feature."))}else this.id=void 0;else this.id=t}getGroupKeys(){const e=[];let t=this;for(arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(t=t.parent);t&&t.level>=0;)e.push(t.key),t=t.parent;return e.reverse(),e}isPixelInRange(e){return!(!P(this.rowTop)||!P(this.rowHeight))&&(e>=this.rowTop&&e<this.rowTop+this.rowHeight)}updateIfDifferent(e,t,i){this[e]!==t&&(this[e]=t,this.dispatchRowEvent(i))}setFirstChild(e){this.updateIfDifferent("firstChild",e,"firstChildChanged")}setLastChild(e){this.updateIfDifferent("lastChild",e,"lastChildChanged")}setChildIndex(e){this.updateIfDifferent("childIndex",e,"childIndexChanged")}setRowTop(e){this.oldRowTop=this.rowTop,this.rowTop!==e&&(this.rowTop=e,this.dispatchRowEvent("topChanged"),this.setDisplayed(null!==e))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setDisplayed(e){this.updateIfDifferent("displayed",e,"displayedChanged")}setDragging(e){this.updateIfDifferent("dragging",e,"draggingChanged")}setHighlighted(e){this.updateIfDifferent("highlighted",e,"rowHighlightChanged")}setHovered(e){this.hovered!==e&&(this.hovered=e)}isHovered(){return this.hovered}setAllChildrenCount(e){this.updateIfDifferent("allChildrenCount",e,"allChildrenCountChanged")}setMaster(e){this.master!==e&&(this.master&&!e&&(this.expanded=!1),this.master=e,this.dispatchRowEvent("masterChanged"))}setGroup(e){this.group!==e&&(this.group&&!e&&(this.expanded=!1),this.group=e,this.updateHasChildren(),this.checkRowSelectable(),this.dispatchRowEvent("groupChanged"))}setRowHeight(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.rowHeight=e,this.rowHeightEstimated=t,this.dispatchRowEvent("heightChanged")}setRowAutoHeight(e,t){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[t.getId()]=e,null!=e&&(null==this.checkAutoHeightsDebounced&&(this.checkAutoHeightsDebounced=de(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){let e=!1,t=!0,i=0;const s=this.__autoHeights;if(null==s)return;if(this.beans.visibleColsService.getAllAutoHeightCols().forEach((o=>{let n=s[o.getId()];if(null==n){if(!this.beans.columnModel.isColSpanActive())return void(e=!0);{let t=[];switch(o.getPinned()){case"left":t=this.beans.visibleColsService.getLeftColsForRow(this);break;case"right":t=this.beans.visibleColsService.getRightColsForRow(this);break;case null:t=this.beans.columnViewportService.getColsWithinViewport(this)}if(t.includes(o))return void(e=!0);n=-1}}else t=!1;n>i&&(i=n)})),e)return;if((t||i<10)&&(i=this.beans.gos.getRowHeightForNode(this).height),i==this.rowHeight)return;this.setRowHeight(i);const o=this.beans.rowModel;o.onRowHeightChangedDebounced&&o.onRowHeightChangedDebounced()}setRowIndex(e){this.updateIfDifferent("rowIndex",e,"rowIndexChanged")}setUiLevel(e){this.updateIfDifferent("uiLevel",e,"uiLevelChanged")}setExpanded(e,t,i){if(this.expanded===e)return;this.expanded=e,this.dispatchRowEvent("expandedChanged");const s={...this.createGlobalRowEvent("rowGroupOpened"),expanded:e,event:t||null};this.beans.rowNodeEventThrottle.dispatchExpanded(s,i),this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(e){return this.beans.gos.addGridCommonParams({type:e,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})}setDataValue(e,t,i){const s=(()=>{var t;return"string"!==typeof e?e:null!==(t=this.beans.columnModel.getCol(e))&&void 0!==t?t:this.beans.columnModel.getColDefCol(e)})(),o=this.getValueFromValueService(s);if(this.beans.gos.get("readOnlyEdit"))return this.dispatchEventForSaveValueReadOnly(s,o,t,i),!1;const n=this.beans.valueService.setValue(this,s,t,i);return this.dispatchCellChangedEvent(s,t,o),this.checkRowSelectable(),n}getValueFromValueService(e){var t;const i=this.leafGroup&&this.beans.columnModel.isPivotMode(),s=this.group&&this.expanded&&!this.footer&&!i;let o=!1;const n=null!==(t=this.beans.gos.get("groupTotalRow"))&&void 0!==t?t:this.beans.gos.get("groupIncludeFooter");if("function"!==typeof n)o=!!n;else{var r;o=!!(null!==(r=this.beans.gos.getCallback("groupTotalRow"))&&void 0!==r?r:this.beans.gos.getCallback("groupIncludeFooter"))({node:this})}const l=this.beans.gos.get("groupSuppressBlankHeader"),a=s&&o&&!l;return this.beans.valueService.getValue(e,this,!1,a)}dispatchEventForSaveValueReadOnly(e,t,i,s){const o=this.beans.gos.addGridCommonParams({type:"cellEditRequest",event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:e,colDef:e.getColDef(),data:this.data,node:this,oldValue:t,newValue:i,value:i,source:s});this.beans.eventService.dispatchEvent(o)}setGroupValue(e,t){const i=this.beans.columnModel.getCol(e);M(this.groupData)&&(this.groupData={});const s=i.getColId(),o=this.groupData[s];o!==t&&(this.groupData[s]=t,this.dispatchCellChangedEvent(i,t,o))}setAggData(e){const t=this.aggData;if(this.aggData=e,this.localEventService){const i=e=>{const i=this.aggData?this.aggData[e]:void 0,s=t?t[e]:void 0;if(i===s)return;const o=this.beans.columnModel.getCol(e);o&&this.dispatchCellChangedEvent(o,i,s)};for(const e in this.aggData)i(e);for(const t in e)t in this.aggData||i(t)}}updateHasChildren(){let e=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(this.beans.gos.isRowModelType("serverSide")){const t=this.beans.gos.get("treeData"),i=this.beans.gos.get("isServerSideGroup");e=!this.stub&&!this.footer&&(t?!!i&&i(this.data):!!this.group)}e!==this.__hasChildren&&(this.__hasChildren=!!e,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return null==this.__hasChildren&&this.updateHasChildren(),this.__hasChildren}isEmptyRowGroupNode(){var e;return null!==(e=this.group&&D(this.childrenAfterGroup))&&void 0!==e&&e}dispatchCellChangedEvent(e,t,i){var s;const o={type:"cellChanged",node:this,column:e,newValue:t,oldValue:i};null===(s=this.localEventService)||void 0===s||s.dispatchEvent(o)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return!this.footer&&(this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master)}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(e){this.childrenAfterGroup&&this.childrenAfterGroup.forEach((t=>t.depthFirstSearch(e))),e(this)}calculateSelectedFromChildren(){var e;let t=!1,i=!1,s=!1;if(null===(e=this.childrenAfterGroup)||void 0===e||!e.length)return this.selectable?this.selected:null;for(let o=0;o<this.childrenAfterGroup.length;o++){const e=this.childrenAfterGroup[o];let n=e.isSelected();if(!e.selectable){const t=e.calculateSelectedFromChildren();if(null===t)continue;n=t}switch(n){case!0:t=!0;break;case!1:i=!0;break;default:s=!0}}return s||t&&i?void 0:!!t||!i&&(this.selectable?this.selected:null)}setSelectedInitialValue(e){this.selected=e}dispatchRowEvent(e){var t;const i={type:e,node:this};null===(t=this.localEventService)||void 0===t||t.dispatchEvent(i)}selectThisNode(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"api";const s=!this.selectable&&e,o=this.selected===e;if(s||o)return!1;this.selected=e,this.dispatchRowEvent("rowSelected");const n=this.sibling;n&&n.footer&&n.localEventService&&n.dispatchRowEvent("rowSelected");const r={...this.createGlobalRowEvent("rowSelected"),event:t||null,source:i};return this.beans.eventService.dispatchEvent(r),!0}setSelected(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"api";"boolean"!==typeof i?this.setSelectedParams({newValue:e,clearSelection:t,rangeSelect:!1,source:i}):ie("since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.")}setSelectedParams(e){return this.rowPinned?(ie("cannot select pinned rows"),0):void 0===this.id?(ie("cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected({...e,nodes:[this.footer?this.sibling:this]})}isRowPinned(){return"top"===this.rowPinned||"bottom"===this.rowPinned}isParentOfNode(e){let t=this.parent;for(;t;){if(t===e)return!0;t=t.parent}return!1}addEventListener(e,t){var i,o;this.localEventService||(this.localEventService=new s),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.localEventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new E(this.beans.frameworkOverrides));const n=null!==(i=null===(o=this.frameworkEventListenerService)||void 0===o?void 0:o.wrap(t))&&void 0!==i?i:t;this.localEventService.addEventListener(e,n)}removeEventListener(e,t){var i,s;if(!this.localEventService)return;const o=null!==(i=null===(s=this.frameworkEventListenerService)||void 0===s?void 0:s.unwrap(t))&&void 0!==i?i:t;this.localEventService.removeEventListener(e,o),this.localEventService.noRegisteredListenersExist()&&(this.localEventService=null)}onMouseEnter(){this.dispatchRowEvent("mouseEnter")}onMouseLeave(){this.dispatchRowEvent("mouseLeave")}getFirstChildOfFirstChild(e){let t=this,i=!0,s=!1,o=null;for(;i&&!s;){const n=t.parent;P(n)&&t.firstChild?n.rowGroupColumn===e&&(s=!0,o=n):i=!1,t=n}return s?o:null}isFullWidthCell(){if(this.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return!!e&&e({rowNode:this})}getRoute(){if(null==this.key)return;const e=[];let t=this;for(;t&&null!=t.key;)e.push(t.key),t=t.parent;return e.reverse()}createFooter(){if(this.sibling)return;const t=new Set(["eventService","__objectId","sticky"]),i=new e(this.beans);Object.keys(this).forEach((e=>{t.has(e)||(i[e]=this[e])})),i.footer=!0,i.setRowTop(null),i.setRowIndex(null),i.oldRowTop=null,i.id="rowGroupFooter_"+this.id,i.sibling=this,this.sibling=i}destroyFooter(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)}};Vs.ID_PREFIX_ROW_GROUP="row-group-",Vs.ID_PREFIX_TOP_PINNED="t-",Vs.ID_PREFIX_BOTTOM_PINNED="b-",Vs.OBJECT_ID_SEQUENCE=0;var Hs=Vs,Ws=class extends Fi{constructor(e,t){super('<div class="ag-filter"></div>'),this.column=e,this.source=t,this.filterWrapper=null}wireBeans(e){this.filterManager=e.filterManager,this.columnModel=e.columnModel}postConstruct(){this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return!!this.filterWrapper}getFilter(){var e,t;return null!==(e=null===(t=this.filterWrapper)||void 0===t?void 0:t.filterPromise)&&void 0!==e?e:null}afterInit(){var e,t;return null!==(e=null===(t=this.filterWrapper)||void 0===t||null===(t=t.filterPromise)||void 0===t?void 0:t.then((()=>{})))&&void 0!==e?e:is.resolve()}afterGuiAttached(e){var t;null===(t=this.filterWrapper)||void 0===t||null===(t=t.filterPromise)||void 0===t||t.then((t=>{var i;null===t||void 0===t||null===(i=t.afterGuiAttached)||void 0===i||i.call(t,e)}))}afterGuiDetached(){var e;null===(e=this.filterWrapper)||void 0===e||null===(e=e.filterPromise)||void 0===e||e.then((e=>{var t;null===e||void 0===e||null===(t=e.afterGuiDetached)||void 0===t||t.call(e)}))}createFilter(e){var t,i,s;const{column:o,source:n}=this;this.filterWrapper=null!==(t=null===(i=this.filterManager)||void 0===i?void 0:i.getOrCreateFilterWrapper(o))&&void 0!==t?t:null,null!==(s=this.filterWrapper)&&void 0!==s&&s.filterPromise&&this.filterWrapper.filterPromise.then((t=>{const i=t.getGui();if(P(i)||ie("getGui method from filter returned ".concat(i,"; it should be a DOM element.")),this.appendChild(i),e){const e={type:"filterOpened",column:o,source:n,eGui:this.getGui()};this.eventService.dispatchEvent(e)}}))}onFilterDestroyed(e){"api"!==e.source&&"paramsUpdated"!==e.source||e.column.getId()!==this.column.getId()||!this.columnModel.getColDefCol(this.column)||(ri(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}},zs="ag-resizer-wrapper",Us='<div class="'.concat(zs,'">\n        <div data-ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>\n        <div data-ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>\n        <div data-ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>\n        <div data-ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>\n        <div data-ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>\n        <div data-ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>\n        <div data-ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>\n        <div data-ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>\n    </div>'),_s=class extends F{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}wireBeans(e){this.popupService=e.popupService,this.resizeObserverService=e.resizeObserverService,this.dragService=e.dragService}center(){const{clientHeight:e,clientWidth:t}=this.offsetParent,i=t/2-this.getWidth()/2,s=e/2-this.getHeight()/2;this.offsetElement(i,s)}initialisePosition(){if(this.positioned)return;const{centered:e,forcePopupParentAsOffsetParent:t,minWidth:i,width:s,minHeight:o,height:n,x:r,y:l}=this.config;this.offsetParent||this.setOffsetParent();let a=0,d=0;const c=di(this.element);if(c){const e=this.findBoundaryElement(),t=window.getComputedStyle(e);if(null!=t.minWidth){const i=e.offsetWidth-this.element.offsetWidth;d=parseInt(t.minWidth,10)-i}if(null!=t.minHeight){const i=e.offsetHeight-this.element.offsetHeight;a=parseInt(t.minHeight,10)-i}}if(this.minHeight=o||a,this.minWidth=i||d,s&&this.setWidth(s),n&&this.setHeight(n),s&&n||this.refreshSize(),e)this.center();else if(r||l)this.offsetElement(r,l);else if(c&&t){let e=this.boundaryEl,t=!0;if(e||(e=this.findBoundaryElement(),t=!1),e){const i=parseFloat(e.style.top),s=parseFloat(e.style.left);t?this.offsetElement(isNaN(s)?0:s,isNaN(i)?0:i):this.setPosition(s,i)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;const i=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(i),this.moveElementDragListener=i):(this.dragService.removeDragSource(i),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),"boolean"===typeof e){if(!1===e)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach((t=>{const i=!!e[t],s=this.getResizerElement(t),o={dragStartPixels:0,eElement:s,onDragStart:e=>this.onResizeStart(e,t),onDragging:this.onResize.bind(this),onDragStop:e=>this.onResizeEnd(e,t)};(i||!this.isAlive()&&!i)&&(i?(this.dragService.addDragSource(o),this.resizeListeners.push(o),s.style.pointerEvents="all"):s.style.pointerEvents="none",this.resizable[t]=i)}))}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;-1!==t&&(this.element.style.width="".concat(t,"px")),-1!==e&&(this.element.style.height="".concat(e,"px"))}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,i=this.element;let s=!1;if("string"===typeof e&&-1!==e.indexOf("%"))pi(i,e),e=ei(i),s=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const t=this.getAvailableHeight();t&&e>t&&(e=t)}this.getHeight()!==e&&(s?(i.style.maxHeight="unset",i.style.minHeight="unset"):t?pi(i,e):(i.style.height="".concat(e,"px"),i.style.flex="0 0 auto",this.lastSize.height="number"===typeof e?e:parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:i}=this.offsetParent;if(!i)return null;const s=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),n=e?this.position.y:s.top,r=e?0:o.top;let l=0;if(t){const e=this.element.parentElement;if(e){const{bottom:t}=e.getBoundingClientRect();l=t-s.bottom}}return i+r-n-l}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:i}=this.config;let s=!1;if("string"===typeof e&&-1!==e.indexOf("%"))hi(t,e),e=ti(t),s=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:t}=this.offsetParent,s=i?this.position.x:this.element.getBoundingClientRect().left;t&&e+s>t&&(e=t-s)}this.getWidth()!==e&&(s?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?hi(t,e):(t.style.width="".concat(e,"px"),t.style.flex=" unset",this.lastSize.width="number"===typeof e?e:parseFloat(e)))}offsetElement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{forcePopupParentAsOffsetParent:i}=this.config,s=i?this.boundaryEl:this.element;s&&(this.popupService.positionPopup({ePopup:s,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t})}),this.setPosition(parseFloat(s.style.left),parseFloat(s.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;const t=()=>{const e=this.getAvailableHeight();this.element.style.setProperty("max-height","".concat(e,"px"))};e?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),t):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:i,isTop:s,anywhereWithin:o,topBuffer:n}=e,r=t.clientX-this.dragStartPosition.x,l=t.clientY-this.dragStartPosition.y;return{movementX:this.shouldSkipX(t,!!i,!!o,r)?0:r,movementY:this.shouldSkipY(t,!!s,n,l)?0:l}}shouldSkipX(e,t,i,s){const o=this.element.getBoundingClientRect(),n=this.offsetParent.getBoundingClientRect(),r=this.boundaryEl.getBoundingClientRect(),l=this.config.popup?this.position.x:o.left;let a=l<=0&&n.left>=e.clientX||n.right<=e.clientX&&n.right<=r.right;return!!a||(a=t?s<0&&e.clientX>l+n.left||s>0&&e.clientX<l+n.left:i?s<0&&e.clientX>r.right||s>0&&e.clientX<l+n.left:s<0&&e.clientX>r.right||s>0&&e.clientX<r.right,a)}shouldSkipY(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3?arguments[3]:void 0;const o=this.element.getBoundingClientRect(),n=this.offsetParent.getBoundingClientRect(),r=this.boundaryEl.getBoundingClientRect(),l=this.config.popup?this.position.y:o.top;let a=l<=0&&n.top>=e.clientY||n.bottom<=e.clientY&&n.bottom<=r.bottom;return!!a||(a=t?s<0&&e.clientY>l+n.top+i||s>0&&e.clientY<l+n.top:s<0&&e.clientY>r.bottom||s>0&&e.clientY<r.bottom,a)}createResizeMap(){const e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[data-ref=eTopLeftResizer]")},top:{element:e.querySelector("[data-ref=eTopResizer]")},topRight:{element:e.querySelector("[data-ref=eTopRightResizer]")},right:{element:e.querySelector("[data-ref=eRightResizer]")},bottomRight:{element:e.querySelector("[data-ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[data-ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[data-ref=eBottomLeftResizer]")},left:{element:e.querySelector("[data-ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;const e=this.element;if(!e)return;const t=(new DOMParser).parseFromString(Us,"text/html").body;e.appendChild(t.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;const e=this.element.querySelector(".".concat(zs));e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:i,forcePopupParentAsOffsetParent:s}=this.config;i||s||this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const e=this.element.parentElement;return e?Array.prototype.slice.call(e.children).filter((e=>!e.classList.contains("ag-hidden"))):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,i=0;for(let s=0;s<e.length;s++){const o=e[s],n=!!o.style.flex&&"0 0 auto"!==o.style.flex;if(o===this.element)continue;let r=this.minHeight||0,l=this.minWidth||0;if(n){const e=window.getComputedStyle(o);e.minHeight&&(r=parseInt(e.minHeight,10)),e.minWidth&&(l=parseInt(e.minWidth,10))}else r=o.offsetHeight,l=o.offsetWidth;t+=r,i+=l}return{height:t,width:i}}applySizeToSiblings(e){let t=null;const i=this.getSiblings();if(i){for(let s=0;s<i.length;s++){const o=i[s];o!==t&&(e?o.style.height="".concat(o.offsetHeight,"px"):o.style.width="".concat(o.offsetWidth,"px"),o.style.flex="0 0 auto",o===this.element&&(t=i[s+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some((e=>e))}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:i}=this.config,{isTop:s,isRight:o,isBottom:n,isLeft:r}=this.currentResizer,l=o||r,a=n||s,{movementX:d,movementY:c}=this.calculateMouseMovement({e:e,isLeft:r,isTop:s}),u=this.position.x,h=this.position.y;let p=0,g=0;if(l&&d){const e=r?-1:1,t=this.getWidth(),i=t+d*e;let s=!1;r&&(p=t-i,(u+p<=0||i<=this.minWidth)&&(s=!0,p=0)),s||this.setWidth(i)}if(a&&c){const e=s?-1:1,t=this.getHeight(),i=t+c*e;let o=!1;s?(g=t-i,(h+g<=0||i<=this.minHeight)&&(o=!0,g=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&t<i&&this.getMinSizeOfSiblings().height+i>this.element.parentElement.offsetHeight&&(o=!0),o||this.setHeight(i)}this.updateDragStartPosition(e.clientX,e.clientY),((t||i)&&p||g)&&this.offsetElement(u+p,h+g)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:i}=this.position;let s;this.config.calculateTopBuffer&&(s=this.config.calculateTopBuffer());const{movementX:o,movementY:n}=this.calculateMouseMovement({e:e,isTop:!0,anywhereWithin:!0,topBuffer:s});this.offsetElement(t+o,i+n),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if("static"!==window.getComputedStyle(e).position)return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){const e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},Ks=class e extends F{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.eFocusableElement=e,this.callbacks=t,this.callbacks={shouldStopEventPropagation:()=>!1,onTabKeyDown:e=>{if(e.defaultPrevented)return;const t=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e.shiftKey);t&&(t.focus(),e.preventDefault())},...t}}wireBeans(e){this.focusService=e.focusService}postConstruct(){this.eFocusableElement.classList.add(e.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedElementListeners(this.eFocusableElement,{focusin:this.callbacks.onFocusIn}),this.callbacks.onFocusOut&&this.addManagedElementListeners(this.eFocusableElement,{focusout:this.callbacks.onFocusOut})}addKeyDownListeners(e){this.addManagedElementListeners(e,{keydown:e=>{e.defaultPrevented||S(e)||(this.callbacks.shouldStopEventPropagation(e)?w(e):e.key===Vi.TAB?this.callbacks.onTabKeyDown(e):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(e))}})}};Ks.FOCUS_MANAGED_CLASS="ag-focus-managed";var Zs=Ks,js={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"};function Ys(e,t){return qs(e)?(null!=e.debounceMs&&ie("debounceMs is ignored when apply button is present"),0):null!=e.debounceMs?e.debounceMs:t}function qs(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0}var Qs=class extends Fi{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.eFilterBody=Ri,this.buttonListeners=[]}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.resetTemplate(),this.createManagedBean(new Zs(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new _s(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let t=this.getGui();t&&t.removeEventListener("submit",this.onFormSubmit);const i='\n            <form class="ag-filter-wrapper">\n                <div class="ag-filter-body-wrapper ag-'.concat(this.getCssIdentifier(),'-body-wrapper" data-ref="eFilterBody">\n                    ').concat(this.createBodyTemplate(),"\n                </div>\n            </form>");this.setTemplate(i,this.getAgComponents(),e),t=this.getGui(),t&&t.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then((()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()}))}setParams(e){this.providedFilterParams=e,this.applyActive=qs(e),this.resetButtonsPanel()}updateParams(e){this.providedFilterParams=e,this.applyActive=qs(e),this.resetUiToActiveModel(this.getModel(),(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()}))}resetButtonsPanel(){const{buttons:e}=this.providedFilterParams,t=e&&e.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(ri(this.eButtonsPanel),this.buttonListeners.forEach((e=>e())),this.buttonListeners=[]):t&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!t)return void(this.eButtonsPanel&&li(this.eButtonsPanel));const i=document.createDocumentFragment(),s=e=>{let t,s;switch(e){case"apply":t=this.translate("applyFilter"),s=e=>this.onBtApply(!1,!1,e);break;case"clear":t=this.translate("clearFilter"),s=()=>this.onBtClear();break;case"reset":t=this.translate("resetFilter"),s=()=>this.onBtReset();break;case"cancel":t=this.translate("cancelFilter"),s=e=>{this.onBtCancel(e)};break;default:return void ie("Unknown button type specified")}const o=ci('<button\n                    type="'.concat("apply"===e?"submit":"button",'"\n                    data-ref="').concat(e,'FilterButton"\n                    class="ag-button ag-standard-button ag-filter-apply-panel-button"\n                >').concat(t,"\n                </button>"));this.buttonListeners.push(...this.addManagedElementListeners(o,{click:s})),i.append(o)};e.forEach((e=>s(e))),this.eButtonsPanel.append(i),this.getGui().appendChild(this.eButtonsPanel)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){const e=Ys(this.providedFilterParams,this.getDefaultDebounceMs()),t=de(this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(e){return(null!=e?this.setModelIntoUi(e):this.resetUiToDefaults()).then((()=>{this.updateUiVisibility(),this.applyModel("api")}))}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),(()=>{this.handleCancelEnd(e)}))}handleCancelEnd(e){this.providedFilterParams.closeOnApply&&this.close(e)}resetUiToActiveModel(e,t){const i=()=>{this.onUiChanged(!1,"prevent"),null===t||void 0===t||t()};null!=e?this.setModelIntoUi(e).then(i):this.resetUiToDefaults().then(i)}onBtClear(){this.resetUiToDefaults().then((()=>this.onUiChanged()))}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(){const e=this.getModelFromUi();if(!this.isModelValid(e))return!1;const t=this.appliedModel;return this.appliedModel=e,!this.areModelsEqual(t,e)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;if(i&&i.preventDefault(),this.applyModel(t?"rowDataUpdated":"ui")){const i="columnFilter";this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:t,source:i})}const{closeOnApply:s}=this.providedFilterParams;s&&this.applyActive&&!e&&!t&&this.close(i)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;const t=e,i=t&&t.key;let s;"Enter"!==i&&"Space"!==i||(s={keyboardEvent:t}),this.hidePopup(s),this.hidePopup=null}onUiChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){const e=this.isModelValid(this.getModelFromUi()),t=this.queryForHtmlElement('[data-ref="applyFilterButton"]');t&&qt(t,!e)}e&&!t||"immediately"===t?this.onBtApply(e):(this.applyActive||t)&&"debounce"!==t||this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(null===e||void 0===e?void 0:e.container)}refreshFilterResizer(e){if(!this.positionableFeature||"toolPanel"===e)return;const t="floatingFilter"===e||"columnFilter"===e,{positionableFeature:i,gos:s}=this;t?(i.restoreLastSize(),i.setResizable(s.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}refresh(e){return this.providedFilterParams=e,!0}destroy(){const e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(e){return this.localeService.getLocaleTextFunc()(e,js[e])}getCellValue(e){return this.providedFilterParams.getValue(e)}getPositionableElement(){return this.eFilterBody}},Xs=class extends Ui{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)}},$s=class extends Fi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super('<div class="ag-list ag-'.concat(e,'-list" role="listbox"></div>')),this.cssIdentifier=e,this.unFocusable=t,this.activeClass="ag-active-item",this.options=[],this.itemEls=[]}postConstruct(){const e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()}),this.unFocusable||this.addManagedElementListeners(e,{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){const t=e.key;switch(t){case Vi.ENTER:if(this.highlightedEl){const e=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(e)}else this.setValue(this.getValue());break;case Vi.DOWN:case Vi.UP:e.preventDefault(),this.navigate(t);break;case Vi.PAGE_DOWN:case Vi.PAGE_UP:case Vi.PAGE_HOME:case Vi.PAGE_END:e.preventDefault(),this.navigateToPage(t)}}navigate(e){const t=e===Vi.DOWN;let i;if(this.highlightedEl){let e=this.itemEls.indexOf(this.highlightedEl)+(t?1:-1);e=Math.min(Math.max(e,0),this.itemEls.length-1),i=this.itemEls[e]}else i=this.itemEls[t?0:this.itemEls.length-1];this.highlightItem(i)}navigateToPage(e){if(!this.highlightedEl||0===this.itemEls.length)return;const t=this.itemEls.indexOf(this.highlightedEl),i=this.options.length-1,s=this.itemEls[0].clientHeight,o=Math.floor(this.getGui().clientHeight/s);let n=-1;e===Vi.PAGE_HOME?n=0:e===Vi.PAGE_END?n=i:e===Vi.PAGE_DOWN?n=Math.min(t+o,i):e===Vi.PAGE_UP&&(n=Math.max(t-o,0)),-1!==n&&this.highlightItem(this.itemEls[n])}addOptions(e){return e.forEach((e=>this.addOption(e))),this}addOption(e){const{value:t,text:i}=e,s=i||t;return this.options.push({value:t,text:s}),this.renderOption(t,s),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach((e=>{li(e)})),this.itemEls=[]}updateIndices(){const e=this.getGui().querySelectorAll(".ag-list-item");e.forEach(((t,i)=>{Et(t,i+1),Ft(t,e.length)}))}renderOption(e,t){const i=this.gos.getDocument(),s=i.createElement("div");pt(s,"option"),s.classList.add("ag-list-item","ag-".concat(this.cssIdentifier,"-list-item"));const o=i.createElement("span");s.appendChild(o),o.textContent=t,this.unFocusable||(s.tabIndex=-1),this.itemEls.push(s),this.addManagedListeners(s,{mouseover:()=>this.highlightItem(s),mousedown:t=>{t.preventDefault(),t.stopPropagation(),this.setValue(e)}}),this.createManagedBean(new yi({getTooltipValue:()=>t,getGui:()=>s,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>o.scrollWidth>o.clientWidth})),this.getGui().appendChild(s)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(null==e)return this.reset(t),this;const i=this.options.findIndex((t=>t.value===e));if(-1!==i){const e=this.options[i];this.value=e.value,this.displayValue=e.text,this.highlightItem(this.itemEls[i]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex((e=>e.value===this.value));-1!==e&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!di(e))return;this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(this.activeClass),At(this.highlightedEl,!0);const t=this.getGui(),{scrollTop:i,clientHeight:s}=t,{offsetTop:o,offsetHeight:n}=e;(o+n>i+s||o<i)&&this.highlightedEl.scrollIntoView({block:"nearest"}),this.unFocusable||this.highlightedEl.focus()}clearHighlighted(){this.highlightedEl&&di(this.highlightedEl)&&(this.highlightedEl.classList.remove(this.activeClass),At(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},Js=class extends Wi{constructor(e){if(super(e,(null===e||void 0===e?void 0:e.template)||'\n            <div class="ag-picker-field" role="presentation">\n                <div data-ref="eLabel"></div>\n                    <div data-ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">\n                    <div data-ref="eDisplayField" class="ag-picker-field-display"></div>\n                    <div data-ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n                </div>\n            </div>',(null===e||void 0===e?void 0:e.agComponents)||[],null===e||void 0===e?void 0:e.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=Ri,this.eWrapper=Ri,this.eDisplayField=Ri,this.eIcon=Ri,this.ariaRole=null===e||void 0===e?void 0:e.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:t,maxPickerHeight:i,variableWidth:s,minPickerWidth:o,maxPickerWidth:n}=e;null!=t&&(this.pickerGap=t),this.variableWidth=!!s,null!=i&&this.setPickerMaxHeight(i),null!=o&&this.setPickerMinWidth(o),null!=n&&this.setPickerMaxWidth(n)}wireBeans(e){this.popupService=e.popupService}postConstruct(){super.postConstruct(),this.setupAria();const e="ag-".concat(this.getCompId(),"-display");this.eDisplayField.setAttribute("id",e);const t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});const{pickerIcon:i,inputWidth:s}=this.config;if(i){const e=Pi(i,this.gos);e&&this.eIcon.appendChild(e)}null!=s&&this.setInputWidth(s)}setupAria(){const e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),bt(e,!1),this.ariaRole&&pt(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const t=this.getFocusableElement();if(t!==this.eWrapper&&(null===e||void 0===e?void 0:e.target)===t)return;e.preventDefault(),this.getFocusableElement().focus()}this.skipClick?this.skipClick=!1:this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case Vi.UP:case Vi.DOWN:case Vi.ENTER:case Vi.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case Vi.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker())}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.gos.getDocument(),t=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));const i=this.localeService.getLocaleTextFunc(),{pickerAriaLabelKey:s,pickerAriaLabelValue:o,modalPicker:n=!0}=this.config,r={modal:n,eChild:t,closeOnEsc:!0,closedCallback:()=>{const t=this.gos.getActiveDomElement(),i=!t||t===e.body;this.beforeHidePicker(),i&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:i(s,o)},l=this.popupService.addPopup(r),{maxPickerHeight:a,minPickerWidth:d,maxPickerWidth:c,variableWidth:u}=this;u?(d&&(t.style.minWidth=d),t.style.width=gi(ti(this.eWrapper)),c&&(t.style.maxWidth=c)):ui(t,null!==c&&void 0!==c?c:ti(this.eWrapper));const h=null!==a&&void 0!==a?a:"".concat($t(this.popupService.getPopupParent()),"px");return t.style.setProperty("max-height",h),t.style.position="absolute",this.alignPickerToComponent(),l.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerType:e}=this.config,{pickerGap:t}=this,i=this.gos.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:e,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide:i,keepWithinBounds:!0,nudgeY:t})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;bt(this.getAriaElement(),e),this.eWrapper.classList.toggle("ag-picker-expanded",e),this.eWrapper.classList.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){var t;null!==(t=this.pickerComponent)&&void 0!==t&&t.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setInputWidth(e){return ui(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return"number"===typeof e&&(e="".concat(e,"px")),this.minPickerWidth=null==e?void 0:e,this}setPickerMaxWidth(e){return"number"===typeof e&&(e="".concat(e,"px")),this.maxPickerWidth=null==e?void 0:e,this}setPickerMaxHeight(e){return"number"===typeof e&&(e="".concat(e,"px")),this.maxPickerHeight=null==e?void 0:e,this}destroy(){this.hidePicker(),super.destroy()}},eo=class extends Js{constructor(e){super({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox",...e})}postConstruct(){super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options:e,value:t,placeholder:i}=this.config;null!=e&&this.addOptions(e),null!=t&&this.setValue(t,!0),i&&null==t&&(this.eDisplayField.textContent=i),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){this.listComponent=this.createBean(new $s("select",!0)),this.listComponent.setParentComponent(this);const e=this.listComponent.getAriaElement(),t="ag-select-list-".concat(this.listComponent.getCompId());e.setAttribute("id",t),kt(this.getAriaElement(),e),this.listComponent.addManagedListeners(this.listComponent,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})}}),this.listComponent.addManagedListeners(this.listComponent,{fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}onKeyDown(e){const{key:t}=e;switch(t===Vi.TAB&&this.hidePicker(),t){case Vi.ENTER:case Vi.UP:case Vi.DOWN:case Vi.PAGE_UP:case Vi.PAGE_DOWN:case Vi.PAGE_HOME:case Vi.PAGE_END:var i;if(e.preventDefault(),this.isPickerDisplayed)null===(i=this.listComponent)||void 0===i||i.handleKeyDown(e);else super.onKeyDown(e);break;case Vi.ESCAPE:super.onKeyDown(e)}}showPicker(){this.listComponent&&(super.showPicker(),this.listComponent.refreshHighlighted())}addOptions(e){return e.forEach((e=>this.addOption(e))),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){var e;return null===(e=this.listComponent)||void 0===e||e.clearOptions(),this}setValue(e,t,i){var s;if(this.value===e||!this.listComponent)return this;i||this.listComponent.setValue(e,!0);if(this.listComponent.getValue()===this.getValue())return this;let o=this.listComponent.getDisplayValue();return null==o&&this.config.placeholder&&(o=this.config.placeholder),this.eDisplayField.textContent=o,this.setTooltip({newTooltipText:null!==(s=o)&&void 0!==s?s:null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth}),super.setValue(e,t)}destroy(){this.listComponent&&(this.listComponent=this.destroyBean(this.listComponent)),super.destroy()}},to={selector:"AG-SELECT",component:eo},io=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(e)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach((e=>{if("string"===typeof e)return;[["displayKey"],["displayName"],["predicate","test"]].every((t=>!!t.some((t=>null!=e[t]))||(ie("ignoring FilterOptionDef as it doesn't contain one of '".concat(t,"'")),!1)))?this.customFilterOptions[e.displayKey]=e:this.filterOptions=this.filterOptions.filter((t=>t===e))||[]}))}selectDefaultItem(e){if(e.defaultOption)this.defaultOption=e.defaultOption;else if(this.filterOptions.length>=1){const e=this.filterOptions[0];"string"===typeof e?this.defaultOption=e:e.displayKey?this.defaultOption=e.displayKey:ie("invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else ie("no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(e){return this.customFilterOptions[e]}},so=class extends Qs{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(e){const t=this.optionsFactory.getCustomOption(e);if(t){const{numberOfInputs:e}=t;return null!=e?e:1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:"inRange"===e?2:1}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach(((t,i)=>{0===i?t.setValue(e,!0):t.setValue(this.optionsFactory.getDefaultOption(),!0)}))}getModelFromUi(){const e=this.getUiCompleteConditions();return 0===e.length?null:this.maxNumConditions>1&&e.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map((e=>e.getValue()))}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){return 0===this.eJoinOperatorsOr.length?this.defaultJoinOperator:!0===this.eJoinOperatorsOr[0].getValue()?"OR":"AND"}areModelsEqual(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;const i=!e.operator,s=!t.operator;if(!i&&s||i&&!s)return!1;let o;if(i){const i=e,s=t;o=this.areSimpleModelsEqual(i,s)}else{const i=e,s=t;o=i.operator===s.operator&&r(i.conditions,s.conditions,((e,t)=>this.areSimpleModelsEqual(e,t)))}return o}shouldRefresh(e){var t,i,s;const o=this.getModel(),n=o?null!==(t=o.conditions)&&void 0!==t?t:[o]:null,r=null!==(i=null===(s=e.filterOptions)||void 0===s?void 0:s.map((e=>"string"===typeof e?e:e.displayKey)))&&void 0!==i?i:this.getDefaultFilterOptions();return!(n&&!n.every((e=>void 0!==r.find((t=>t===e.type)))))&&!("number"===typeof e.maxNumConditions&&n&&n.length>e.maxNumConditions)}refresh(e){if(!this.shouldRefresh(e))return!1;return!!super.refresh(e)&&(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(e){if(e.operator){const t=e;let i=t.conditions;null==i&&(i=[],ie("Filter model is missing 'conditions'"));const s=this.validateAndUpdateConditions(i),o=this.getNumConditions();if(s<o)this.removeConditionsAndOperators(s);else if(s>o)for(let e=o;e<s;e++)this.createJoinOperatorPanel(),this.createOption();const n="OR"===t.operator;this.eJoinOperatorsAnd.forEach((e=>e.setValue(!n,!0))),this.eJoinOperatorsOr.forEach((e=>e.setValue(n,!0))),i.forEach(((e,t)=>{this.eTypes[t].setValue(e.type,!0),this.setConditionIntoUi(e,t)}))}else{const t=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(t.type,!0),this.setConditionIntoUi(t,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),is.resolve()}validateAndUpdateConditions(e){let t=e.length;return t>this.maxNumConditions&&(e.splice(this.maxNumConditions),ie('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),t=this.maxNumConditions),t}doesFilterPass(e){const t=this.getModel();if(null==t)return!0;const{operator:i}=t,s=[];if(i){var o;const e=t;s.push(...null!==(o=e.conditions)&&void 0!==o?o:[])}else s.push(t);return s[i&&"OR"===i?"some":"every"]((t=>this.individualConditionPasses(e,t)))}setParams(e){super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new io,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(e){var t,i;this.maxNumConditions=null!==(t=e.maxNumConditions)&&void 0!==t?t:2,this.maxNumConditions<1&&(ie('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=null!==(i=e.numAlwaysVisibleConditions)&&void 0!==i?i:1,this.numAlwaysVisibleConditions<1&&(ie('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(ie('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){const e=this.createManagedBean(new eo);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());const t=this.createValueElement();this.eConditionBodies.push(t),this.eFilterBody.appendChild(t),this.putOptionsIntoDropdown(e),this.resetType(e);const i=this.getNumConditions()-1;this.forEachPositionInput(i,(e=>this.resetInput(e))),this.addChangedListeners(e,i)}createJoinOperatorPanel(){const e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");const t=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),i=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);const s=this.eJoinOperatorPanels.length-1,o=this.joinOperatorId++;this.resetJoinOperatorAnd(t,s,o),this.resetJoinOperatorOr(i,s,o),this.isReadOnly()||(t.onValueChange(this.listener),i.onValueChange(this.listener))}createJoinOperator(e,t,i){const s=this.createManagedBean(new Xs);return e.push(s),s.addCssClass("ag-filter-condition-operator"),s.addCssClass("ag-filter-condition-operator-".concat(i)),t.appendChild(s.getGui()),s}getDefaultJoinOperator(e){return"AND"===e||"OR"===e?e:"AND"}createFilterListOptions(){const e=this.optionsFactory.getFilterOptions();this.filterListOptions=e.map((e=>"string"===typeof e?this.createBoilerplateListOption(e):this.createCustomListOption(e)))}putOptionsIntoDropdown(e){this.filterListOptions.forEach((t=>{e.addOption(t)})),e.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:t}=e,i=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:i?this.localeService.getLocaleTextFunc()(i.displayKey,i.displayName):this.translate(t)}}createBodyTemplate(){return""}getAgComponents(){return[]}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let s=0;s<this.getNumConditions();s++)this.isConditionUiComplete(s)?e=s:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{var i;const t=null!==(i=this.lastUiCompletePosition)&&void 0!==i?i:this.getNumConditions()-2;if(e<t){this.removeConditionsAndOperators(t+1);const i=e+1,s=t-i;s>0&&this.removeConditionsAndOperators(i,s),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach(((t,i)=>{const s=this.isConditionDisabled(i,e);t.setDisabled(s||this.filterListOptions.length<=1),1===i&&(qt(this.eJoinOperatorPanels[0],s),this.eJoinOperatorsAnd[0].setDisabled(s),this.eJoinOperatorsOr[0].setDisabled(s))})),this.eConditionBodies.forEach(((e,t)=>{Yt(e,this.isConditionBodyVisible(t))}));const i="OR"===(null!==t&&void 0!==t?t:this.getJoinOperator());this.eJoinOperatorsAnd.forEach((e=>{e.setValue(!i,!0)})),this.eJoinOperatorsOr.forEach((e=>{e.setValue(i,!0)})),this.forEachInput(((t,i,s,o)=>{this.setElementDisplayed(t,i<o),this.setElementDisabled(t,this.isConditionDisabled(s,e))})),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;this.removeComponents(this.eTypes,e,t),this.removeElements(this.eConditionBodies,e,t),this.removeValueElements(e,t);const i=Math.max(e-1,0);this.removeElements(this.eJoinOperatorPanels,i,t),this.removeComponents(this.eJoinOperatorsAnd,i,t),this.removeComponents(this.eJoinOperatorsOr,i,t)}removeElements(e,t,i){this.removeItems(e,t,i).forEach((e=>li(e)))}removeComponents(e,t,i){this.removeItems(e,t,i).forEach((e=>{li(e.getGui()),this.destroyBean(e)}))}removeItems(e,t,i){return null==i?e.splice(t):e.splice(t,i)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),null===e||void 0===e||!e.suppressFocus)if(this.isReadOnly())this.eFilterBody.focus();else{const e=this.getInputs(0)[0];if(!e)return;e instanceof zi&&e.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();const e=this.getModel();this.resetUiToActiveModel(e);let t=-1,i=-1,s=!1;const o=this.getJoinOperator();for(let r=this.getNumConditions()-1;r>=0;r--)if(this.isConditionUiComplete(r))-1===t&&(t=r,i=r);else{const e=r<t;(r>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(r-1)||e)&&(this.removeConditionsAndOperators(r,1),s=!0,e&&i--)}let n=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),n=!0),this.shouldAddNewConditionAtEnd(i===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),n=!0),n&&this.updateConditionStatusesAndValues(i,o),s&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=i}getPlaceholderText(e,t){let i=this.translate(e);if(oe(this.filterPlaceholder)){const e=this.filterPlaceholder,s=this.eTypes[t].getValue();i=e({filterOptionKey:s,filterOption:this.translate(s),placeholder:i})}else"string"===typeof this.filterPlaceholder&&(i=this.filterPlaceholder);return i}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc();this.forEachInput(((t,i,s,o)=>{if(!(t instanceof zi))return;const n=0===i&&o>1?"inRangeStart":0===i?"filterOoo":"inRangeEnd",r=0===i&&o>1?e("ariaFilterFromValue","Filter from value"):0===i?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(n,s)),t.setInputAriaLabel(r)}))}setElementValue(e,t,i){e instanceof zi&&e.setValue(null!=t?String(t):null,!0)}setElementDisplayed(e,t){e instanceof Fi&&Yt(e.getGui(),t)}setElementDisabled(e,t){e instanceof Fi&&qt(e.getGui(),t)}attachElementOnChange(e,t){e instanceof zi&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach(((t,i)=>{this.forEachPositionTypeInput(i,t,e)}))}forEachPositionInput(e,t){const i=this.getConditionType(e);this.forEachPositionTypeInput(e,i,t)}forEachPositionTypeInput(e,t,i){const s=this.getNumberOfInputs(t),o=this.getInputs(e);for(let n=0;n<o.length;n++){const t=o[n];null!=t&&i(t,n,e,s)}}isConditionDisabled(e,t){return!!this.isReadOnly()||0!==e&&e>t+1}isConditionBodyVisible(e){const t=this.getConditionType(e);return this.getNumberOfInputs(t)>0}isConditionUiComplete(e){if(e>=this.getNumConditions())return!1;return"empty"!==this.getConditionType(e)&&!this.getValues(e).some((e=>null==e))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach((e=>this.resetType(e))),this.eJoinOperatorsAnd.forEach(((e,t)=>this.resetJoinOperatorAnd(e,t,this.joinOperatorId+t))),this.eJoinOperatorsOr.forEach(((e,t)=>this.resetJoinOperatorOr(e,t,this.joinOperatorId+t))),this.joinOperatorId++,this.forEachInput((e=>this.resetInput(e))),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),is.resolve()}resetType(e){const t=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(t).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,i){this.resetJoinOperator(e,t,this.isDefaultOperator("AND"),this.translate("andCondition"),i)}resetJoinOperatorOr(e,t,i){this.resetJoinOperator(e,t,this.isDefaultOperator("OR"),this.translate("orCondition"),i)}resetJoinOperator(e,t,i,s,o){this.updateJoinOperatorDisabled(e.setValue(i,!0).setName("ag-simple-filter-and-or-".concat(this.getCompId(),"-").concat(o)).setLabel(s),t)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach(((e,t)=>this.updateJoinOperatorDisabled(e,t))),this.eJoinOperatorsOr.forEach(((e,t)=>this.updateJoinOperatorDisabled(e,t)))}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){const i=this.mapValuesFromModel(e);this.forEachInput(((e,s,o)=>{o===t&&this.setElementValue(e,null!=i[s]?i[s]:null)}))}setValueFromFloatingFilter(e){this.forEachInput(((t,i,s)=>{this.setElementValue(t,0===i&&0===s?e:null,!0)}))}isDefaultOperator(e){return e===this.defaultJoinOperator}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,(e=>{this.attachElementOnChange(e,this.listener)})))}individualConditionPasses(e,t){const i=this.getCellValue(e.node),s=this.mapValuesFromModel(t),o=this.optionsFactory.getCustomOption(t.type),n=this.evaluateCustomFilter(o,s,i);return null!=n?n:null==i?this.evaluateNullValue(t.type):this.evaluateNonNullValue(s,i,t,e)}evaluateCustomFilter(e,t,i){if(null==e)return;const{predicate:s}=e;return null==s||t.some((e=>null==e))?void 0:s(t,i)}isBlank(e){return null==e||"string"===typeof e&&0===e.trim().length}hasInvalidInputs(){return!1}},oo=class extends so{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){switch(e){case"equals":case"notEqual":if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case"lessThan":case"lessThanOrEqual":if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case"inRange":if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,i){const s=this.comparator(),o=null!=e[0]?s(e[0],t):0;switch(i.type){case"equals":return 0===o;case"notEqual":return 0!==o;case"greaterThan":return o>0;case"greaterThanOrEqual":return o>=0;case"lessThan":return o<0;case"lessThanOrEqual":return o<=0;case"inRange":{const i=s(e[1],t);return this.scalarFilterParams.inRangeInclusive?o>=0&&i<=0:o>0&&i<0}case"blank":return this.isBlank(t);case"notBlank":return!this.isBlank(t);default:return ie('Unexpected type of filter "'+i.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}};function no(e){if(e.altKey||e.ctrlKey||e.metaKey)return!1;return 1===e.key.length}function ro(e,t,i,s,o){const n=s?s.getColDef().suppressKeyboardEvent:void 0;if(!n)return!1;const r=e.addGridCommonParams({event:t,editing:o,column:s,node:i,data:i.data,colDef:s.getColDef()});if(n){if(n(r))return!0}return!1}var lo=class extends zi{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ag-text-field",arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text")}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){return this.eInput.value!==e&&(this.eInput.value=P(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){const e=new RegExp("[".concat(this.config.allowedCharPattern,"]"));this.addManagedListeners(this.eInput,{keydown:t=>{no(t)&&t.key&&!e.test(t.key)&&t.preventDefault()},paste:t=>{var i;const s=null===(i=t.clipboardData)||void 0===i?void 0:i.getData("text");s&&s.split("").some((t=>!e.test(t)))&&t.preventDefault()}})}},ao={selector:"AG-INPUT-TEXT-FIELD",component:lo},co=class extends lo{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListeners(this.eInput,{blur:()=>{const e=parseFloat(this.eInput.value),t=isNaN(e)?"":this.normalizeValue(e.toString());this.value!==t&&this.setValue(t)},wheel:this.onWheel.bind(this)}),this.eInput.step="any";const{precision:e,min:t,max:i,step:s}=this.config;"number"===typeof e&&this.setPrecision(e),"number"===typeof t&&this.setMin(t),"number"===typeof i&&this.setMax(i),"number"===typeof s&&this.setStep(s)}onWheel(e){this.gos.getActiveDomElement()===this.eInput&&e.preventDefault()}normalizeValue(e){if(""===e)return"";null!=this.precision&&(e=this.adjustPrecision(e));const t=parseFloat(e);return null!=this.min&&t<this.min?e=this.min.toString():null!=this.max&&t>this.max&&(e=this.max.toString()),e}adjustPrecision(e,t){if(null==this.precision)return e;if(t){const t=parseFloat(e).toFixed(this.precision);return parseFloat(t).toString()}const i=String(e).split(".");if(i.length>1){if(i[1].length<=this.precision)return e;if(this.precision>0)return"".concat(i[0],".").concat(i[1].slice(0,this.precision))}return i[0]}setMin(e){return this.min===e||(this.min=e,vi(this.eInput,"min",e)),this}setMax(e){return this.max===e||(this.max=e,vi(this.eInput,"max",e)),this}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e||(this.step=e,vi(this.eInput,"step",e)),this}setValue(e,t){return this.setValueOrInputValue((e=>super.setValue(e,t)),(()=>this),e)}setStartValue(e){return this.setValueOrInputValue((e=>super.setValue(e,!0)),(e=>{this.eInput.value=e}),e)}setValueOrInputValue(e,t,i){if(P(i)){let s=this.isScientificNotation(i);if(s&&this.eInput.validity.valid)return e(i);if(!s){s=(i=this.adjustPrecision(i))!=this.normalizeValue(i)}if(s)return t(i)}return e(i)}getValue(){if(!this.eInput.validity.valid)return;const e=this.eInput.value;return this.isScientificNotation(e)?this.adjustPrecision(e,!0):super.getValue()}isScientificNotation(e){return"string"===typeof e&&e.includes("e")}},uo={selector:"AG-INPUT-NUMBER-FIELD",component:co},ho=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"],po=class{constructor(e,t,i){this.localeService=e,this.optionsFactory=t,this.valueFormatter=i}getModelAsString(e){if(!e)return null;const t=null!=e.operator,i=this.localeService.getLocaleTextFunc();if(t){var s;const t=e,o=(null!==(s=t.conditions)&&void 0!==s?s:[]).map((e=>this.getModelAsString(e))),n="AND"===t.operator?"andCondition":"orCondition";return o.join(" ".concat(i(n,js[n])," "))}if("blank"===e.type||"notBlank"===e.type)return i(e.type,e.type);{const t=e,s=this.optionsFactory.getCustomOption(t.type),{displayKey:o,displayName:n,numberOfInputs:r}=s||{};return o&&n&&0===r?(i(o,n),n):this.conditionToString(t,s)}}updateParams(e){this.optionsFactory=e.optionsFactory}formatValue(e){var t;return this.valueFormatter?null!==(t=this.valueFormatter(null!==e&&void 0!==e?e:null))&&void 0!==t?t:"":String(e)}},go=class extends po{conditionToString(e,t){const{numberOfInputs:i}=t||{};return"inRange"==e.type||2===i?"".concat(this.formatValue(e.filter),"-").concat(this.formatValue(e.filterTo)):null!=e.filter?this.formatValue(e.filter):"".concat(e.type)}};function mo(e){const{allowedCharPattern:t}=null!==e&&void 0!==e?e:{};return null!==t&&void 0!==t?t:null}var vo=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],fo=class extends po{conditionToString(e,t){const{numberOfInputs:i}=t||{};return"inRange"==e.type||2===i?"".concat(e.filter,"-").concat(e.filterTo):null!=e.filter?"".concat(e.filter):"".concat(e.type)}};function Co(e){const t=e&&e.trim();return""===t?e:t}function wo(e){if("number"===typeof e)return e;if("string"===typeof e){const t=parseInt(e);if(isNaN(t))return;return t}}function So(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return i=>{const s=wo(i);if(!(null==s||s<e||s>t))return s}}function yo(e,t){return e.toString().padStart(t,"0")}function bo(e,t,i){return"number"!==typeof e?"":Ro(Math.round(100*e)/100,t,i)}function Ro(e,t,i){return"number"!==typeof e?"":e.toString().replace(".",i).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1".concat(t))}function Fo(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"-";if(!e)return null;let s=[e.getFullYear(),e.getMonth()+1,e.getDate()].map((e=>yo(e,2))).join(i);return t&&(s+=" "+[e.getHours(),e.getMinutes(),e.getSeconds()].map((e=>yo(e,2))).join(":")),s}var Eo=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function xo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD";const i=yo(e.getFullYear(),4),s=["January","February","March","April","May","June","July","August","September","October","November","December"],o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n={YYYY:()=>i.slice(i.length-4,i.length),YY:()=>i.slice(i.length-2,i.length),Y:()=>"".concat(e.getFullYear()),MMMM:()=>s[e.getMonth()],MMM:()=>s[e.getMonth()].slice(0,3),MM:()=>yo(e.getMonth()+1,2),Mo:()=>"".concat(e.getMonth()+1).concat(Eo(e.getMonth()+1)),M:()=>"".concat(e.getMonth()+1),Do:()=>"".concat(e.getDate()).concat(Eo(e.getDate())),DD:()=>yo(e.getDate(),2),D:()=>"".concat(e.getDate()),dddd:()=>o[e.getDay()],ddd:()=>o[e.getDay()].slice(0,3),dd:()=>o[e.getDay()].slice(0,2),do:()=>"".concat(e.getDay()).concat(Eo(e.getDay())),d:()=>"".concat(e.getDay())},r=new RegExp(Object.keys(n).join("|"),"g");return t.replace(r,(e=>e in n?n[e]():e))}function Po(e){if(!e)return null;const[t,i]=e.split(" ");if(!t)return null;const s=t.split("-").map((e=>parseInt(e,10)));if(3!==s.filter((e=>!isNaN(e))).length)return null;const[o,n,r]=s,l=new Date(o,n-1,r);if(l.getFullYear()!==o||l.getMonth()!==n-1||l.getDate()!==r)return null;if(!i||"00:00:00"===i)return l;const[a,d,c]=i.split(":").map((e=>parseInt(e,10)));return a>=0&&a<24&&l.setHours(a),d>=0&&d<60&&l.setMinutes(d),c>=0&&c<60&&l.setSeconds(c),l}var Mo=class{constructor(e,t,i,s,o){this.alive=!0,this.context=e,this.eParent=s;t.getDateCompDetails(i).newAgStackInstance().then((t=>{this.alive?(this.dateComp=t,t&&(s.appendChild(t.getGui()),t.afterGuiAttached&&t.afterGuiAttached(),this.tempValue&&t.setDate(this.tempValue),null!=this.disabled&&this.setDateCompDisabled(this.disabled),null===o||void 0===o||o(this))):e.destroyBean(t)}))}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){this.dateComp?this.dateComp.setDate(e):this.tempValue=e}setDisabled(e){this.dateComp?this.setDateCompDisabled(e):this.disabled=e}setDisplayed(e){Yt(this.eParent,e)}setInputPlaceholder(e){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(e)}setInputAriaLabel(e){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(e)}afterGuiAttached(e){this.dateComp&&"function"===typeof this.dateComp.afterGuiAttached&&this.dateComp.afterGuiAttached(e)}updateParams(e){var t,i;let s=!1;if(null!==(t=this.dateComp)&&void 0!==t&&t.refresh&&"function"===typeof this.dateComp.refresh){null!==this.dateComp.refresh(e)&&(s=!0)}if(!s&&null!==(i=this.dateComp)&&void 0!==i&&i.onParamsUpdated&&"function"===typeof this.dateComp.onParamsUpdated){null!==this.dateComp.onParamsUpdated(e)&&ie("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}}setDateCompDisabled(e){null!=this.dateComp&&null!=this.dateComp.setDisabled&&this.dateComp.setDisabled(e)}},Do=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"],Io=class extends po{constructor(e,t,i){super(t,i),this.dateFilterParams=e}conditionToString(e,t){const{type:i}=e,{numberOfInputs:s}=t||{},o="inRange"==i||2===s,n=Po(e.dateFrom),r=Po(e.dateTo),l=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(o){const e=null!==n?xo(n,l):"null",t=null!==r?xo(r,l):"null";return"".concat(e,"-").concat(t)}return null!=n?xo(n,l):"".concat(i)}updateParams(e){super.updateParams(e),this.dateFilterParams=e.dateFilterParams}},To=1/0,Ao=class extends F{constructor(e,t,i,s){super(),this.columnOrGroup=e,this.columnOrGroup=e,this.eCell=t,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=s,this.beans=i}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gos.get("enableRtl")&&this.colsSpanning?n(this.colsSpanning):this.columnOrGroup}postConstruct(){const e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){const e=this.beans.gos.get("suppressColumnMoveAnimation"),t=P(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&t&&!e?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=e.getLeft(),i=e.getOldLeft(),s=this.modifyLeftForPrintLayout(e,i),o=this.modifyLeftForPrintLayout(e,t);this.setLeft(s),this.actualLeft=o,this.beans.columnAnimationService.executeNextVMTurn((()=>{this.actualLeft===o&&this.setLeft(o)}))}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){if(!this.beans.gos.isDomLayout("print"))return t;if("left"===e.getPinned())return t;const i=this.beans.visibleColsService.getColsLeftWidth();if("right"===e.getPinned()){return i+this.beans.visibleColsService.getBodyContainerWidth()+t}return i+t}setLeft(e){if(P(e)&&(this.eCell.style.left="".concat(e,"px")),Be(this.columnOrGroup)){const e=this.columnOrGroup.getLeafColumns();if(!e.length)return;e.length>1&&(t=this.ariaEl,i=e.length,ct(t,"colspan",i))}var t,i}};function ko(e,t,i,s){return M(e)?[]:No(e.headerClass,e,t,i,s)}function Lo(e,t,i,s){return M(e)?[]:No(e.toolPanelClass,e,t,i,s)}function Go(e,t,i){e.addOrRemoveCssClass("ag-column-first",i.isColAtEdge(t,"first")),e.addOrRemoveCssClass("ag-column-last",i.isColAtEdge(t,"last"))}function No(e,t,i,s,o){if(M(e))return[];let n;if("function"===typeof e){const r=function(e,t,i,s){return t.addGridCommonParams({colDef:e,column:i,columnGroup:s})}(t,i,s,o);n=e(r)}else n=e;return"string"===typeof n?[n]:Array.isArray(n)?[...n]:[]}var Oo=0,Bo=class e extends F{constructor(e,t,i){super(),this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.columnGroupChild=e,this.parentRowCtrl=i,this.beans=t,this.instanceId=e.getUniqueId()+"-"+Oo++}wireBeans(e){this.pinnedWidthService=e.pinnedWidthService,this.focusService=e.focusService,this.userComponentFactory=e.userComponentFactory,this.ctrlsService=e.ctrlsService,this.dragAndDropService=e.dragAndDropService,this.menuService=e.menuService}postConstruct(){this.addManagedPropertyListeners(["suppressHeaderFocus"],(()=>this.refreshTabIndex()))}shouldStopEventPropagation(e){const{headerRowIndex:t,column:i}=this.focusService.getFocusedHeader();return function(e,t,i,s){const o=s.getDefinition(),n=o&&o.suppressHeaderKeyboardEvent;return!!P(n)&&!!n(e.addGridCommonParams({colDef:o,column:s,headerRowIndex:i,event:t}))}(this.gos,e,t,i)}getWrapperHasFocus(){return this.gos.getActiveDomElement()===this.eGui}setGui(e){this.eGui=e,this.addDomData(),this.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),this.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}onGuiFocus(){const e={type:"headerFocused",column:this.column};this.eventService.dispatchEvent(e)}onDisplayedColumnsChanged(){this.comp&&this.column&&(this.refreshFirstAndLastStyles(),this.refreshAriaColIndex())}refreshFirstAndLastStyles(){const{comp:e,column:t,beans:i}=this;Go(e,t,i.visibleColsService)}refreshAriaColIndex(){const{beans:e,column:t}=this,i=e.visibleColsService.getAriaColIndex(t);Dt(this.eGui,i)}addResizeAndMoveKeyboardListeners(){this.resizeFeature&&this.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){this.gos.get("suppressHeaderFocus")?this.eGui.removeAttribute("tabindex"):this.eGui.setAttribute("tabindex","-1")}onGuiKeyDown(e){const t=this.gos.getActiveDomElement(),i=e.key===Vi.LEFT||e.key===Vi.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),t!==this.eGui||!e.shiftKey&&!e.altKey)return;if((this.isResizing||i)&&(e.preventDefault(),e.stopImmediatePropagation()),!i)return;const s=e.key===Vi.LEFT!==this.gos.get("enableRtl"),o=Ms[s?"Left":"Right"];if(e.altKey){var n;this.isResizing=!0,this.resizeMultiplier+=1;const t=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(t,e.shiftKey),null===(n=this.resizeFeature)||void 0===n||n.toggleColumnResizing(!0)}else this.moveHeader(o)}getViewportAdjustedResizeDiff(e){let t=this.getResizeDiff(e);if(this.column.getPinned()){const e=this.pinnedWidthService.getPinnedLeftWidth(),i=this.pinnedWidthService.getPinnedRightWidth(),s=Jt(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(e+i+t>s){if(!(s>e+i))return 0;t=s-e-i}}return t}getResizeDiff(e){let t=e.key===Vi.LEFT!==this.gos.get("enableRtl");const i=this.column.getPinned(),s=this.gos.get("enableRtl");return i&&s!==("right"===i)&&(t=!t),(t?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout((()=>{var e;null===(e=this.resizeFeature)||void 0===e||e.toggleColumnResizing(!1)}),150))}handleKeyDown(e){const t=this.getWrapperHasFocus();switch(e.key){case Vi.PAGE_DOWN:case Vi.PAGE_UP:case Vi.PAGE_HOME:case Vi.PAGE_END:t&&e.preventDefault()}}addDomData(){const t=e.DOM_DATA_KEY_HEADER_CTRL;this.gos.setDomData(this.eGui,t,this),this.addDestroyFunc((()=>this.gos.setDomData(this.eGui,t,null)))}getGui(){return this.eGui}focus(e){return!!this.eGui&&(this.lastFocusEvent=e||null,this.eGui.focus(),!0)}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getInstanceId(){return this.instanceId}getColumnGroupChild(){return this.columnGroupChild}removeDragSource(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,t,i){const s=null!==e&&void 0!==e?e:t;this.gos.get("preventDefaultOnContextMenu")&&s.preventDefault();const o=Y(i)?i:void 0;this.menuService.isHeaderContextMenuEnabled(o)&&this.menuService.showHeaderContextMenu(o,e,t),this.dispatchColumnMouseEvent("columnHeaderContextMenu",i)}dispatchColumnMouseEvent(e,t){const i={type:e,column:t};this.eventService.dispatchEvent(i)}destroy(){super.destroy(),this.removeDragSource(),this.comp=null,this.column=null,this.resizeFeature=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null,this.eGui=null}};Bo.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";var Vo=Bo,Ho=class extends F{wireBeans(e){this.columnHoverService=e.columnHoverService}constructor(e,t){super(),this.columns=e,this.element=t}postConstruct(){this.gos.get("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListeners(this.element,{mouseout:this.onMouseOut.bind(this),mouseover:this.onMouseOver.bind(this)})}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}},Wo="32.0.1";var zo=class extends Fi{wireBeans(e){this.columnNameService=e.columnNameService}getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(e){return e&&e.afterFloatingFilter}isEventFromDataChange(e){return null===e||void 0===e?void 0:e.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(e){if(!e)return void(this.lastType=this.optionsFactory.getDefaultOption());let t;if(e.operator){t=e.conditions[0]}else t=e;this.lastType=t.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;const t=e;return this.isTypeEditable(t.type)}init(e){this.setSimpleParams(e,!1)}setSimpleParams(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.optionsFactory=new io,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),t||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!e.filterParams.readOnly;const i=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(i)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.setSimpleParams(e)}doesFilterHaveSingleInput(e){const t=this.optionsFactory.getCustomOption(e),{numberOfInputs:i}=t||{};return null==i||1==i}isTypeEditable(e){return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&["inRange","empty","blank","notBlank"].indexOf(e)<0}getAriaLabel(e){const t=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc();return"".concat(t," ").concat(i("ariaFilterInput","Filter Input"))}},Uo=class extends F{constructor(e){super(),this.params=e,this.eFloatingFilterTextInput=Ri,this.valueChangedListener=()=>{}}setupGui(e){var t;this.eFloatingFilterTextInput=this.createManagedBean(new lo(null===(t=this.params)||void 0===t?void 0:t.config));const i=this.eFloatingFilterTextInput.getGui();e.appendChild(i);const s=e=>this.valueChangedListener(e);this.addManagedListeners(i,{input:s,keydown:s})}setEditable(e){this.eFloatingFilterTextInput.setDisabled(!e)}setAutoComplete(e){this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(e,t){this.eFloatingFilterTextInput.setValue(e,t)}setValueChangedListener(e){this.valueChangedListener=e}setParams(e){this.setAriaLabel(e.ariaLabel),void 0!==e.autoComplete&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterTextInput.setInputAriaLabel(e)}},_o=class extends zo{constructor(){super(...arguments),this.eFloatingFilterInputContainer=Ri}postConstruct(){this.setTemplate('\n            <div class="ag-floating-filter-input" role="presentation" data-ref="eFloatingFilterInputContainer"></div>\n        ')}getDefaultDebounceMs(){return 500}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(e)))}init(e){this.setupFloatingFilterInputService(e),super.init(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.floatingFilterInputService=this.createFloatingFilterInputService(e),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){var t;this.params=e;const i=null!==(t=e.browserAutoComplete)&&void 0!==t&&t;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:i}),this.applyActive=qs(this.params.filterParams),!this.isReadOnly()){const e=Ys(this.params.filterParams,this.getDefaultDebounceMs()),t=de(this.syncUpWithParentFilter.bind(this),e);this.floatingFilterInputService.setValueChangedListener(t)}}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const t=this.floatingFilterInputService.getValue();ri(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(e),this.floatingFilterInputService.setValue(t,!0)}syncUpWithParentFilter(e){const t=e.key===Vi.ENTER;if(this.applyActive&&!t)return;let i=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(i=Co(i),this.floatingFilterInputService.setValue(i,!0)),this.params.parentFilterInstance((e=>{e&&e.onFloatingFilterChanged(this.getLastType()||null,i||null)}))}setEditable(e){this.floatingFilterInputService.setEditable(e)}},Ko=class extends F{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(e){this.eFloatingFilterNumberInput=this.createManagedBean(new co),this.eFloatingFilterTextInput=this.createManagedBean(new lo),this.eFloatingFilterTextInput.setDisabled(!0);const t=this.eFloatingFilterNumberInput.getGui(),i=this.eFloatingFilterTextInput.getGui();e.appendChild(t),e.appendChild(i),this.setupListeners(t,(e=>this.valueChangedListener(e))),this.setupListeners(i,(e=>this.valueChangedListener(e)))}setEditable(e){this.numberInputActive=e,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eFloatingFilterNumberInput.setAutoComplete(e),this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(e){this.valueChangedListener=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){this.setAriaLabel(e.ariaLabel),void 0!==e.autoComplete&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterNumberInput.setInputAriaLabel(e),this.eFloatingFilterTextInput.setInputAriaLabel(e)}};var Zo={version:Wo,moduleName:"@ag-grid-community/filter-core",beans:[class extends F{constructor(){super(...arguments),this.beanName="filterManager",this.advancedFilterModelUpdateQueue=[]}wireBeans(e){this.columnModel=e.columnModel,this.dataTypeService=e.dataTypeService,this.quickFilterService=e.quickFilterService,this.advancedFilterService=e.advancedFilterService,this.columnFilterService=e.columnFilterService}postConstruct(){this.addManagedEventListeners({columnValueChanged:this.refreshFiltersForAggregations.bind(this),columnPivotChanged:this.refreshFiltersForAggregations.bind(this),columnPivotModeChanged:this.refreshFiltersForAggregations.bind(this),newColumnsLoaded:this.updateAdvancedFilterColumns.bind(this),columnVisible:this.updateAdvancedFilterColumns.bind(this),advancedFilterEnabledChanged:e=>{let{enabled:t}=e;return this.onAdvancedFilterEnabledChanged(t)},dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],(()=>{this.onFilterChanged({source:"api"})})),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",(()=>{this.updateAggFiltering(),this.onFilterChanged()})),this.addManagedPropertyListener("advancedFilterModel",(e=>this.setAdvancedFilterModel(e.currentValue))),this.quickFilterService&&this.addManagedListeners(this.quickFilterService,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})})}isExternalFilterPresentCallback(){const e=this.gos.getCallback("isExternalFilterPresent");return"function"===typeof e&&e({})}doesExternalFilterPass(e){const t=this.gos.get("doesExternalFilterPass");return"function"===typeof t&&t(e)}setFilterModel(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this.isAdvancedFilterEnabled()?this.warnAdvancedFilters():null===(t=this.columnFilterService)||void 0===t||t.setFilterModel(e,i)}getFilterModel(){var e,t;return null!==(e=null===(t=this.columnFilterService)||void 0===t?void 0:t.getFilterModel())&&void 0!==e?e:{}}isColumnFilterPresent(){var e;return!(null===(e=this.columnFilterService)||void 0===e||!e.isColumnFilterPresent())}isAggregateFilterPresent(){var e;return!(null===(e=this.columnFilterService)||void 0===e||!e.isAggregateFilterPresent())}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(e){var t,i;e?null!==(t=this.columnFilterService)&&void 0!==t&&t.disableColumnFilters()&&this.onFilterChanged({source:"advancedFilter"}):null!==(i=this.advancedFilterService)&&void 0!==i&&i.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){var e;return!(null===(e=this.advancedFilterService)||void 0===e||!e.isEnabled())}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}resetQuickFilterCache(){var e;null===(e=this.quickFilterService)||void 0===e||e.resetQuickFilterCache()}refreshFiltersForAggregations(){this.gos.getGroupAggFiltering()&&this.onFilterChanged()}onFilterChanged(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{source:t,additionalEventAttributes:i,columns:s=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.columnFilterService?this.columnFilterService.updateBeforeFilterChanged(e):is.resolve()).then((()=>{var e;const o={source:t,type:"filterChanged",columns:s};i&&z(o,i),this.eventService.dispatchEvent(o),null===(e=this.columnFilterService)||void 0===e||e.updateAfterFilterChanged()}))}isSuppressFlashingCellsBecauseFiltering(){var e;return!(null===(e=this.columnFilterService)||void 0===e||!e.isSuppressFlashingCellsBecauseFiltering())}isQuickFilterPresent(){var e;return!(null===(e=this.quickFilterService)||void 0===e||!e.isQuickFilterPresent())}updateAggFiltering(){this.aggFiltering=!!this.gos.getGroupAggFiltering()}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.columnModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,filterInstanceToSkip:e})}doesRowPassAggregateFilters(e){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode))&&!(this.isAggregateFilterPresent()&&!this.columnFilterService.doAggregateFiltersPass(e.rowNode,e.filterInstanceToSkip))}doesRowPassFilter(e){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode))&&(!(this.isExternalFilterPresent()&&!this.doesExternalFilterPass(e.rowNode))&&(!(this.isColumnFilterPresent()&&!this.columnFilterService.doColumnFiltersPass(e.rowNode,e.filterInstanceToSkip))&&!(this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(e.rowNode))))}isFilterActive(e){var t;return!(null===(t=this.columnFilterService)||void 0===t||!t.isFilterActive(e))}getOrCreateFilterWrapper(e){var t,i;return null!==(t=null===(i=this.columnFilterService)||void 0===i?void 0:i.getOrCreateFilterWrapper(e))&&void 0!==t?t:null}getDefaultFloatingFilter(e){return this.columnFilterService.getDefaultFloatingFilter(e)}createFilterParams(e,t){return this.columnFilterService.createFilterParams(e,t)}isFilterAllowed(e){var t;return!this.isAdvancedFilterEnabled()&&!(null===(t=this.columnFilterService)||void 0===t||!t.isFilterAllowed(e))}getFloatingFilterCompDetails(e,t){var i;return null===(i=this.columnFilterService)||void 0===i?void 0:i.getFloatingFilterCompDetails(e,t)}getCurrentFloatingFilterParentModel(e){var t;return null===(t=this.columnFilterService)||void 0===t?void 0:t.getCurrentFloatingFilterParentModel(e)}destroyFilter(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";null===(t=this.columnFilterService)||void 0===t||t.destroyFilter(e,i)}areFilterCompsDifferent(e,t){var i;return!(null===(i=this.columnFilterService)||void 0===i||!i.areFilterCompsDifferent(e,t))}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(e){var t;this.isAdvancedFilterEnabled()&&(null!==(t=this.dataTypeService)&&void 0!==t&&t.isPendingInference()?this.advancedFilterModelUpdateQueue.push(e):(this.advancedFilterService.setModel(null!==e&&void 0!==e?e:null),this.onFilterChanged({source:"advancedFilter"})))}toggleAdvancedFilterBuilder(e,t){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder(t,e)}updateAdvancedFilterColumns(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){var e;return!this.isAdvancedFilterEnabled()&&!(null===(e=this.columnFilterService)||void 0===e||!e.hasFloatingFilters())}getFilterInstance(e,t){var i;if(!this.isAdvancedFilterEnabled())return null===(i=this.columnFilterService)||void 0===i?void 0:i.getFilterInstance(e,t);this.warnAdvancedFilters()}getColumnFilterInstance(e){var t,i;return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve(void 0)):null!==(t=null===(i=this.columnFilterService)||void 0===i?void 0:i.getColumnFilterInstance(e))&&void 0!==t?t:Promise.resolve(void 0)}warnAdvancedFilters(){ie("Column Filter API methods have been disabled as Advanced Filters are enabled.")}setupAdvancedFilterHeaderComp(e){var t;null===(t=this.advancedFilterService)||void 0===t||t.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advancedFilterModelUpdateQueue.forEach((e=>this.setAdvancedFilterModel(e))),this.advancedFilterModelUpdateQueue=[]}getColumnFilterModel(e){var t;return null===(t=this.columnFilterService)||void 0===t?void 0:t.getColumnFilterModel(e)}setColumnFilterModel(e,t){var i,s;return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve()):null!==(i=null===(s=this.columnFilterService)||void 0===s?void 0:s.setColumnFilterModel(e,t))&&void 0!==i?i:Promise.resolve()}}]},jo={version:Wo,moduleName:"@ag-grid-community/filter-api",apiFunctions:{isAnyFilterPresent:function(e){var t;return!(null===(t=e.filterManager)||void 0===t||!t.isAnyFilterPresent())},onFilterChanged:function(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";null===(t=e.filterManager)||void 0===t||t.onFilterChanged({source:i})}},dependantModules:[Zo]},Yo={version:Wo,moduleName:"@ag-grid-community/column-filter",beans:[class extends F{constructor(){super(...arguments),this.beanName="columnFilterService",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[]}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.userComponentFactory=e.userComponentFactory,this.rowRenderer=e.rowRenderer,this.dataTypeService=e.dataTypeService,this.filterManager=e.filterManager}postConstruct(){var e,t;this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),rowDataUpdated:()=>this.onNewRowsLoaded("rowDataUpdated"),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.initialFilterModel={...null!==(e=null===(t=this.gos.get("initialState"))||void 0===t||null===(t=t.filter)||void 0===t?void 0:t.filterModel)&&void 0!==e?e:{}}}setFilterModel(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";if(null!==(t=this.dataTypeService)&&void 0!==t&&t.isPendingInference())return void this.filterModelUpdateQueue.push({model:e,source:i});const s=[],o=this.getFilterModel();if(e){const t=new Set(Object.keys(e));this.allColumnFilters.forEach(((i,o)=>{const n=e[o];s.push(this.setModelOnFilterWrapper(i.filterPromise,n)),t.delete(o)})),t.forEach((t=>{const i=this.columnModel.getColDefCol(t)||this.columnModel.getCol(t);if(!i)return void ie("setFilterModel() - no column found for colId: "+t);if(!i.isFilterAllowed())return void ie("setFilterModel() - unable to fully apply model, filtering disabled for colId: "+t);const o=this.getOrCreateFilterWrapper(i);o?s.push(this.setModelOnFilterWrapper(o.filterPromise,e[t])):ie("setFilterModel() - unable to fully apply model, unable to create filter for colId: "+t)}))}else this.allColumnFilters.forEach((e=>{s.push(this.setModelOnFilterWrapper(e.filterPromise,null))}));is.all(s).then((()=>{const e=this.getFilterModel(),t=[];var s;(this.allColumnFilters.forEach(((i,s)=>{L(o?o[s]:null,e?e[s]:null)||t.push(i.column)})),t.length>0)&&(null===(s=this.filterManager)||void 0===s||s.onFilterChanged({columns:t,source:i}))}))}setModelOnFilterWrapper(e,t){return new is((i=>{e.then((e=>{"function"!==typeof e.setModel&&(ie("filter missing setModel method, which is needed for setFilterModel"),i()),(e.setModel(t)||is.resolve()).then((()=>i()))}))}))}getFilterModel(){const e={};return this.allColumnFilters.forEach(((t,i)=>{const s=this.getModelFromFilterWrapper(t);P(s)&&(e[i]=s)})),e}getModelFromFilterWrapper(e){const{filter:t}=e;return t?"function"!==typeof t.getModel?(ie("filter API missing getModel method, which is needed for getFilterModel"),null):t.getModel():this.getModelFromInitialState(e.column)}getModelFromInitialState(e){var t;return null!==(t=this.initialFilterModel[e.getColId()])&&void 0!==t?t:null}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}disableColumnFilters(){return!!this.allColumnFilters.size&&(this.allColumnFilters.forEach((e=>this.disposeFilterWrapper(e,"advancedFilterEnabled"))),!0)}doAggregateFiltersPass(e,t){return this.doColumnFiltersPass(e,t,!0)}updateActiveFilters(){const e=!!this.gos.getGroupAggFiltering(),t=t=>{if(!t.isPrimary())return!0;const i=!this.columnModel.isPivotActive();return!(!t.isValueActive()||!i)&&(!!this.columnModel.isPivotMode()||e)},i=[],s=[];return this.forEachColumnFilter(((e,o)=>{const n=(e=>!!e&&(e.isFilterActive?e.isFilterActive():(ie("Filter is missing isFilterActive() method"),!1)))(e);n&&(t(o.column)?i.push(e):s.push(e))})).then((()=>{this.activeAggregateFilters=i,this.activeColumnFilters=s}))}updateFilterFlagInColumns(e,t){return this.forEachColumnFilter(((i,s)=>s.column.setFilterActive(i.isFilterActive(),e,t)))}forEachColumnFilter(e){return is.all(Array.from(this.allColumnFilters.values()).map((t=>t.filterPromise.then((i=>e(i,t))))))}doColumnFiltersPass(e,t,i){const{data:s,aggData:o}=e,n=i?this.activeAggregateFilters:this.activeColumnFilters,r=i?o:s;for(let l=0;l<n.length;l++){const i=n[l];if(null!=i&&i!==t){if("function"!==typeof i.doesFilterPass)throw new Error("Filter is missing method doesFilterPass");if(!i.doesFilterPass({node:e,data:r}))return!1}}return!0}callOnFilterChangedOutsideRenderCycle(e){const t=()=>{var t;return null===(t=this.filterManager)||void 0===t?void 0:t.onFilterChanged(e)};this.rowRenderer.isRefreshInProgress()?setTimeout(t,0):t()}updateBeforeFilterChanged(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{filterInstance:t,additionalEventAttributes:i}=e;return this.updateDependentFilters(),this.updateActiveFilters().then((()=>this.updateFilterFlagInColumns("filterChanged",i).then((()=>{this.allColumnFilters.forEach((e=>{e.filterPromise&&e.filterPromise.then((e=>{e&&e!==t&&e.onAnyFilterChanged&&e.onAnyFilterChanged()}))})),this.processingFilterChange=!0}))))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){var e;return!(null!==(e=this.gos.get("allowShowChangeAfterFilter"))&&void 0!==e&&e)&&this.processingFilterChange}onNewRowsLoaded(e){this.forEachColumnFilter((e=>{e.onNewRowsLoaded&&e.onNewRowsLoaded()})).then((()=>this.updateFilterFlagInColumns(e,{afterDataChange:!0}))).then((()=>this.updateActiveFilters()))}createValueGetter(e){return t=>{let{node:i}=t;return this.valueService.getValue(e,i,!0)}}createGetValue(e){return(t,i)=>{const s=i?this.columnModel.getCol(i):e;return s?this.valueService.getValue(s,t,!0):void 0}}isFilterActive(e){var t;const{filter:i}=null!==(t=this.cachedFilter(e))&&void 0!==t?t:{};return i?i.isFilterActive():null!=this.getModelFromInitialState(e)}getOrCreateFilterWrapper(e){if(!e.isFilterAllowed())return null;let t=this.cachedFilter(e);return t||(t=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,t)),t}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){let t;if(Ni.__isRegistered("@ag-grid-enterprise/set-filter",this.gridId))t="agSetColumnFilter";else{var i;const s=null===(i=this.dataTypeService)||void 0===i?void 0:i.getBaseDataType(e);t="number"===s?"agNumberColumnFilter":"date"===s||"dateString"===s?"agDateColumnFilter":"agTextColumnFilter"}return t}getDefaultFloatingFilter(e){let t;if(Ni.__isRegistered("@ag-grid-enterprise/set-filter",this.gridId))t="agSetColumnFloatingFilter";else{var i;const s=null===(i=this.dataTypeService)||void 0===i?void 0:i.getBaseDataType(e);t="number"===s?"agNumberColumnFloatingFilter":"date"===s||"dateString"===s?"agDateColumnFloatingFilter":"agTextColumnFloatingFilter"}return t}createFilterInstance(e,t){const i=this.getDefaultFilter(e),s=e.getColDef();let o;const n={...this.createFilterParams(e,s),filterModifiedCallback:()=>this.filterModifiedCallbackFactory(o,e)(),filterChangedCallback:t=>this.filterChangedCallbackFactory(o,e)(t),doesRowPassOtherFilter:e=>!this.filterManager||this.filterManager.doesRowPassOtherFilters(o,e)},r=this.userComponentFactory.getFilterDetails(s,n,i);return r?{filterPromise:()=>{const e=r.newAgStackInstance();return null!=e&&e.then((e=>{o=e,t&&(t.filter=e)})),e},compDetails:r}:{filterPromise:null,compDetails:null}}createFilterParams(e,t){return this.gos.addGridCommonParams({column:e,colDef:V(t),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(e),getValue:this.createGetValue(e),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(e){var t;const i={column:e,filterPromise:null,compiledElement:null,compDetails:null},{filterPromise:s,compDetails:o}=this.createFilterInstance(e,i);return i.filterPromise=null!==(t=null===s||void 0===s?void 0:s())&&void 0!==t?t:null,i.compDetails=o,i}onColumnsChanged(){const e=[];var t;(this.allColumnFilters.forEach(((t,i)=>{let s;s=t.column.isPrimary()?this.columnModel.getColDefCol(i):this.columnModel.getCol(i),s&&s===t.column||(e.push(t.column),this.disposeFilterWrapper(t,"columnChanged"),this.disposeColumnListener(i))})),e.length>0)?null===(t=this.filterManager)||void 0===t||t.onFilterChanged({columns:e,source:"api"}):this.updateDependentFilters()}updateDependentFilters(){const e=this.columnModel.getAutoCols();null===e||void 0===e||e.forEach((e=>{"agGroupColumnFilter"===e.getColDef().filter&&this.getOrCreateFilterWrapper(e)}))}isFilterAllowed(e){var t;if(!e.isFilterAllowed())return!1;const{filter:i}=null!==(t=this.allColumnFilters.get(e.getColId()))&&void 0!==t?t:{};return!i||("function"!==typeof(null===i||void 0===i?void 0:i.isFilterAllowed)||i.isFilterAllowed())}getFloatingFilterCompDetails(e,t){const i=t=>{var i;const s=null===(i=this.getOrCreateFilterWrapper(e))||void 0===i?void 0:i.filterPromise;null!=s&&s.then((e=>{t(Fs(e))}))},s=e.getColDef(),o={...this.createFilterParams(e,s),filterChangedCallback:()=>i((t=>this.filterChangedCallbackFactory(t,e)()))},n=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(s,gs,o);let r=function(e,t,i){if(null==t)return null;let s=null;const{compName:o,jsComp:n,fwComp:r}=Rs.getCompKeys(e,t,gs);o?s={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[o]:null==n&&null==r&&!0===t.filter&&(s=i());return s}(this.frameworkOverrides,s,(()=>this.getDefaultFloatingFilter(e)));null==r&&(r="agReadOnlyFloatingFilter");const l={column:e,filterParams:n,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:i,showParentFilter:t,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(s,l,r)}getCurrentFloatingFilterParentModel(e){var t;return this.getModelFromFilterWrapper(null!==(t=this.cachedFilter(e))&&void 0!==t?t:{column:e})}destroyFilter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";const i=e.getColId(),s=this.allColumnFilters.get(i);var o;(this.disposeColumnListener(i),delete this.initialFilterModel[i],s)&&(this.disposeFilterWrapper(s,t),null===(o=this.filterManager)||void 0===o||o.onFilterChanged({columns:[e],source:"api"}))}disposeColumnListener(e){const t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){e.filterPromise.then((i=>{this.destroyBean(i),e.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(e.column.getColId());const s={type:"filterDestroyed",source:t,column:e.column};this.eventService.dispatchEvent(s)}))}filterModifiedCallbackFactory(e,t){return()=>{const i={type:"filterModified",column:t,filterInstance:e};this.eventService.dispatchEvent(i)}}filterChangedCallbackFactory(e,t){return i=>{var s;const o=null!==(s=null===i||void 0===i?void 0:i.source)&&void 0!==s?s:"columnFilter",n={filter:e,additionalEventAttributes:i,columns:[t],source:o};this.callOnFilterChangedOutsideRenderCycle(n)}}checkDestroyFilter(e){const t=this.allColumnFilters.get(e);if(!t)return;const i=t.column,{compDetails:s}=i.isFilterAllowed()?this.createFilterInstance(i):{compDetails:null};if(this.areFilterCompsDifferent(t.compDetails,s))return void this.destroyFilter(i,"paramsUpdated");const o=i.getColDef().filterParams;t.filterPromise?t.filterPromise.then((e=>{!1===(null===e||void 0===e||!e.refresh||e.refresh({...this.createFilterParams(i,i.getColDef()),filterModifiedCallback:this.filterModifiedCallbackFactory(e,i),filterChangedCallback:this.filterChangedCallbackFactory(e,i),doesRowPassOtherFilter:t=>!this.filterManager||this.filterManager.doesRowPassOtherFilters(e,t),...o}))&&this.destroyFilter(i,"paramsUpdated")})):this.destroyFilter(i,"paramsUpdated")}setColumnFilterWrapper(e,t){const i=e.getColId();this.allColumnFilters.set(i,t),this.allColumnListeners.set(i,this.addManagedListeners(e,{colDefChanged:()=>this.checkDestroyFilter(i)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;const{componentClass:i}=e,{componentClass:s}=t;return!(i===s||(null===i||void 0===i?void 0:i.render)&&(null===s||void 0===s?void 0:s.render)&&i.render===s.render)}hasFloatingFilters(){return this.columnModel.getCols().some((e=>e.getColDef().floatingFilter))}getFilterInstance(e,t){t&&this.getFilterInstanceImpl(e).then((e=>{const i=Fs(e);t(i)}))}getColumnFilterInstance(e){return new Promise((t=>{this.getFilterInstanceImpl(e).then((e=>{t(Fs(e))}))}))}getFilterInstanceImpl(e){var t;const i=this.columnModel.getColDefCol(e);if(!i)return is.resolve(void 0);const s=null===(t=this.getOrCreateFilterWrapper(i))||void 0===t?void 0:t.filterPromise;return null!==s&&void 0!==s?s:is.resolve(null)}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach((e=>{let{model:t,source:i}=e;return this.setFilterModel(t,i)})),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach((e=>{let{key:t,model:i,resolve:s}=e;this.setColumnFilterModel(t,i).then((()=>s()))})),this.columnFilterModelUpdateQueue=[]}getColumnFilterModel(e){const t=this.getFilterWrapper(e);return t?this.getModelFromFilterWrapper(t):null}setColumnFilterModel(e,t){var i;if(null!==(i=this.dataTypeService)&&void 0!==i&&i.isPendingInference()){let i=()=>{};const s=new Promise((e=>{i=e}));return this.columnFilterModelUpdateQueue.push({key:e,model:t,resolve:i}),s}const s=this.columnModel.getColDefCol(e),o=s?this.getOrCreateFilterWrapper(s):null;return o?(n=this.setModelOnFilterWrapper(o.filterPromise,t),new Promise((e=>{n.then((t=>e(t)))}))):Promise.resolve();var n}getFilterWrapper(e){var t;const i=this.columnModel.getColDefCol(e);return i&&null!==(t=this.cachedFilter(i))&&void 0!==t?t:null}destroy(){super.destroy(),this.allColumnFilters.forEach((e=>this.disposeFilterWrapper(e,"gridDestroyed"))),this.allColumnListeners.clear()}}],dependantModules:[Zo]},qo={version:Wo,moduleName:"@ag-grid-community/column-filter-api",apiFunctions:{isColumnFilterPresent:function(e){var t,i;return!(null===(t=e.filterManager)||void 0===t||!t.isColumnFilterPresent())||!(null===(i=e.filterManager)||void 0===i||!i.isAggregateFilterPresent())},getFilterInstance:function(e,t,i){var s;return null===(s=e.filterManager)||void 0===s?void 0:s.getFilterInstance(t,i)},getColumnFilterInstance:function(e,t){var i,s;return null!==(i=null===(s=e.filterManager)||void 0===s?void 0:s.getColumnFilterInstance(t))&&void 0!==i?i:Promise.resolve(void 0)},destroyFilter:function(e,t){const i=e.columnModel.getColDefCol(t);var s;if(i)return null===(s=e.filterManager)||void 0===s?void 0:s.destroyFilter(i,"api")},setFilterModel:function(e,t){e.frameworkOverrides.wrapIncoming((()=>{var i;return null===(i=e.filterManager)||void 0===i?void 0:i.setFilterModel(t)}))},getFilterModel:function(e){var t,i;return null!==(t=null===(i=e.filterManager)||void 0===i?void 0:i.getFilterModel())&&void 0!==t?t:{}},getColumnFilterModel:function(e,t){var i,s;return null!==(i=null===(s=e.filterManager)||void 0===s?void 0:s.getColumnFilterModel(t))&&void 0!==i?i:null},setColumnFilterModel:function(e,t,i){var s,o;return null!==(s=null===(o=e.filterManager)||void 0===o?void 0:o.setColumnFilterModel(t,i))&&void 0!==s?s:Promise.resolve()},showColumnFilter:function(e,t){const i=e.columnModel.getCol(t);i?e.menuService.showFilterMenu({column:i,containerType:"columnFilter",positionBy:"auto"}):se("column '".concat(t,"' not found"))}},dependantModules:[Yo,jo]},Qo={version:Wo,moduleName:"@ag-grid-community/floating-filter-core",controllers:[{name:"headerFilterCell",classImp:class extends Vo{constructor(e,t,i){super(e,t,i),this.iconCreated=!1,this.column=e}setComp(e,t,i,s){this.comp=e,this.eButtonShowMainFilter=i,this.eFloatingFilterBody=s,this.setGui(t),this.setupActive(),this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(),this.addManagedListeners(this.column,{colDefChanged:this.onColDefChanged.bind(this)})}resizeHeader(){}moveHeader(){}setupActive(){const e=this.column.getColDef(),t=!!e.filter,i=!!e.floatingFilter;this.active=t&&i}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=Pi("filter",this.gos,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(){this.createManagedBean(new Zs(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.localeService.getLocaleTextFunc();mt(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){if(this.gos.getActiveDomElement()===this.eGui)return;const t=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(t)return this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),void t.focus();const i=this.findNextColumnWithFloatingFilter(e.shiftKey);i&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:i},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const t=this.beans.visibleColsService;let i=this.column;do{if(i=e?t.getColBefore(i):t.getColAfter(i),!i)break}while(!i.getColDef().filter||!i.getColDef().floatingFilter);return i}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();switch(e.key){case Vi.UP:case Vi.DOWN:t||e.preventDefault();case Vi.LEFT:case Vi.RIGHT:if(t)return;e.stopPropagation();case Vi.ENTER:t&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case Vi.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const t=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),i=!!e.relatedTarget&&Qt(e.relatedTarget,"ag-floating-filter");if(t&&i&&e.target===this.eGui){const e=this.lastFocusEvent,t=!(!e||e.key!==Vi.TAB);if(e&&t){const t=e.shiftKey;this.focusService.focusInto(this.eGui,t)}}const s=this.getRowIndex();this.beans.focusService.setFocusedHeader(s,this.column)}setupHover(){this.createManagedBean(new Ho([this.column],this.eGui));const e=()=>{if(!this.gos.get("columnHoverHighlight"))return;const e=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",e)};this.addManagedEventListeners({columnHoverChanged:e}),e()}setupLeft(){const e=new Ao(this.column,this.eGui,this.beans);this.createManagedBean(e)}setupFilterButton(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()}setupUserComp(){var e;if(!this.active)return;const t=null===(e=this.beans.filterManager)||void 0===e?void 0:e.getFloatingFilterCompDetails(this.column,(()=>this.showParentFilter()));t&&this.setCompDetails(t)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){const e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuService.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(){if(!this.active)return;const{filterManager:e}=this.beans,t=t=>{if("filterDestroyed"===(null===t||void 0===t?void 0:t.source)&&!this.isAlive())return;const i=this.comp.getFloatingFilterComp();i&&i.then((i=>{if(i){var s;const o=null===e||void 0===e?void 0:e.getCurrentFloatingFilterParentModel(this.column),n=t?{...t,columns:null!==(s=t.columns)&&void 0!==s?s:[],source:"api"===t.source?"api":"columnFilter"}:null;i.onParentModelChanged(o,n)}}))};[this.destroySyncListener]=this.addManagedListeners(this.column,{filterChanged:t}),null!==e&&void 0!==e&&e.isFilterActive(this.column)&&t(null)}setupWidth(){const e=()=>{const e="".concat(this.column.getActualWidth(),"px");this.comp.setWidth(e)};this.addManagedListeners(this.column,{widthChanged:e}),e()}setupFilterChangedListener(){this.active&&([this.destroyFilterChangedListener]=this.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){var e;const t=!(null===(e=this.beans.filterManager)||void 0===e||!e.isFilterAllowed(this.column));this.comp.setButtonWrapperDisplayed(t),this.highlightFilterButtonWhenActive&&t&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(){var e;const t=this.active;this.setupActive();const i=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());const s=this.active?null===(e=this.beans.filterManager)||void 0===e?void 0:e.getFloatingFilterCompDetails(this.column,(()=>this.showParentFilter())):null,o=this.comp.getFloatingFilterComp();o&&s?o.then((e=>{var t,o;!e||null!==(t=this.beans.filterManager)&&void 0!==t&&t.areFilterCompsDifferent(null!==(o=this.userCompDetails)&&void 0!==o?o:null,s)?this.updateCompDetails(s,i):this.updateFloatingFilterParams(s)})):this.updateCompDetails(s,i)}updateCompDetails(e,t){this.isAlive()&&(this.setCompDetails(e),this.setupFilterButton(),this.setupUi(),t&&(this.setupSyncWithFilter(),this.setupFilterChangedListener()))}updateFloatingFilterParams(e){var t;if(!e)return;const i=e.params;null===(t=this.comp.getFloatingFilterComp())||void 0===t||t.then((e=>{let t=!1;if(null!==e&&void 0!==e&&e.refresh&&"function"===typeof e.refresh){null!==e.refresh(i)&&(t=!0)}if(!t&&null!==e&&void 0!==e&&e.onParamsUpdated&&"function"===typeof e.onParamsUpdated){null!==e.onParamsUpdated(i)&&ie("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}}))}destroy(){super.destroy(),this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.destroySyncListener=null,this.destroyFilterChangedListener=null}}}],dependantModules:[Yo]},Xo={version:Wo,moduleName:"@ag-grid-community/floating-filter",dependantModules:[Qo,Yo]},$o={version:Wo,moduleName:"@ag-grid-community/read-only-floating-filter",userComponents:[{name:"agReadOnlyFloatingFilter",classImp:class extends Fi{constructor(){super('\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field data-ref="eFloatingFilterText"></ag-input-text-field>\n            </div>',[ao]),this.eFloatingFilterText=Ri}wireBeans(e){this.columnNameService=e.columnNameService}destroy(){super.destroy()}init(e){this.params=e;const t=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel("".concat(t," ").concat(i("ariaFilterInput","Filter Input")))}onParentModelChanged(e){null!=e?this.params.parentFilterInstance((t=>{if(t.getModelAsString){const i=t.getModelAsString(e);this.eFloatingFilterText.setValue(i)}})):this.eFloatingFilterText.setValue("")}onParamsUpdated(e){this.refresh(e)}refresh(e){this.init(e)}}}],dependantModules:[Qo]},Jo={version:Wo,moduleName:"@ag-grid-community/simple-floating-filter",dependantModules:[{version:Wo,moduleName:"@ag-grid-community/simple-filter",dependantModules:[Yo],userComponents:[{name:"agTextColumnFilter",classImp:class extends so{constructor(){super("textFilter"),this.defaultFormatter=e=>e,this.defaultLowercaseFormatter=e=>null==e?null:e.toString().toLowerCase(),this.defaultMatcher=e=>{let{filterOption:t,value:i,filterText:s}=e;if(null==s)return!1;switch(t){case"contains":return i.indexOf(s)>=0;case"notContains":return i.indexOf(s)<0;case"equals":return i===s;case"notEqual":return i!=s;case"startsWith":return 0===i.indexOf(s);case"endsWith":{const e=i.lastIndexOf(s);return e>=0&&e===i.length-s.length}default:return!1}},this.eValuesFrom=[],this.eValuesTo=[]}getDefaultDebounceMs(){return 500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?this.defaultFormatter:this.defaultLowercaseFormatter),this.filterModelFormatter=new fo(this.localeService,this.optionsFactory)}getTextMatcher(){const e=this.textFilterParams.textCustomComparator;return e?(ie("textCustomComparator is deprecated, use textMatcher instead."),t=>{let{filterOption:i,value:s,filterText:o}=t;return e(i,s,o)}):this.textFilterParams.textMatcher||this.defaultMatcher}createCondition(e){const t=this.getConditionType(e),i={filterType:this.getFilterType(),type:t},s=this.getValuesWithSideEffects(e,!0);return s.length>0&&(i.filter=s[0]),s.length>1&&(i.filterTo=s[1]),i}getFilterType(){return"text"}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,t){const i=[];return this.forEachPositionInput(e,((e,s,o,n)=>{if(s<n){let s=x(e.getValue());var r;if(t&&this.textFilterParams.trimInput)s=null!==(r=Co(s))&&void 0!==r?r:null,e.setValue(s,!0);i.push(s)}})),i}getDefaultFilterOptions(){return vo}createValueElement(){const e=document.createElement("div");return e.classList.add("ag-filter-body"),pt(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,t,i){const s=this.createManagedBean(new lo);s.addCssClass("ag-filter-".concat(i)),s.addCssClass("ag-filter-filter"),t.push(s),e.appendChild(s.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}mapValuesFromModel(e){const{filter:t,filterTo:i,type:s}=e||{};return[t||null,i||null].slice(0,this.getNumberOfInputs(s))}evaluateNullValue(e){return!!e&&["notEqual","notContains","blank"].indexOf(e)>=0}evaluateNonNullValue(e,t,i,s){const o=e.map((e=>this.formatter(e)))||[],n=this.formatter(t),{api:r,colDef:l,column:a,context:d,textFormatter:c}=this.textFilterParams;if("blank"===i.type)return this.isBlank(t);if("notBlank"===i.type)return!this.isBlank(t);const u={api:r,colDef:l,column:a,context:d,node:s.node,data:s.data,filterOption:i.type,value:n,textFormatter:c};return o.some((e=>this.matcher({...u,filterText:e})))}getModelAsString(e){var t;return null!==(t=this.filterModelFormatter.getModelAsString(e))&&void 0!==t?t:""}}},{name:"agNumberColumnFilter",classImp:class extends oo{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}refresh(e){return this.numberFilterParams.allowedCharPattern===e.allowedCharPattern&&super.refresh(e)}mapValuesFromModel(e){const{filter:t,filterTo:i,type:s}=e||{};return[this.processValue(t),this.processValue(i)].slice(0,this.getNumberOfInputs(s))}getDefaultDebounceMs(){return 500}comparator(){return(e,t)=>e===t?0:e<t?1:-1}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new go(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return ho}setElementValue(e,t,i){const s=!i&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(null!==t&&void 0!==t?t:null):t;super.setElementValue(e,s)}createValueElement(){const e=mo(this.numberFilterParams),t=document.createElement("div");return t.classList.add("ag-filter-body"),pt(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,i,s){const o=this.createManagedBean(s?new lo({allowedCharPattern:s}):new co);o.addCssClass("ag-filter-".concat(i)),o.addCssClass("ag-filter-filter"),t.push(o),e.appendChild(o.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}getValues(e){const t=[];return this.forEachPositionInput(e,((e,i,s,o)=>{i<o&&t.push(this.processValue(this.stringToFloat(e.getValue())))})),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getFilterType(){return"number"}processValue(e){return null==e||isNaN(e)?null:e}stringToFloat(e){if("number"===typeof e)return e;let t=x(e);return null!=t&&""===t.trim()&&(t=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(t):null==t||"-"===t.trim()?null:parseFloat(t)}createCondition(e){const t=this.getConditionType(e),i={filterType:this.getFilterType(),type:t},s=this.getValues(e);return s.length>0&&(i.filter=s[0]),s.length>1&&(i.filterTo=s[1]),i}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getModelAsString(e){var t;return null!==(t=this.filterModelFormatter.getModelAsString(e))&&void 0!==t?t:""}hasInvalidInputs(){let e=!1;return this.forEachInput((t=>{t.getInputElement().validity.valid||(e=!0)})),e}}},{name:"agDateColumnFilter",classImp:class extends oo{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=1e3,this.maxValidYear=To,this.minValidDate=null,this.maxValidDate=null}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){const{dateFrom:t,dateTo:i,type:s}=e||{};return[t&&Po(t)||null,i&&Po(i)||null].slice(0,this.getNumberOfInputs(s))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(e,t){return null==t||t<e?-1:t>e?1:0}setParams(e){this.dateFilterParams=e,super.setParams(e);const t=(t,i)=>{if(null!=e[t]){if(!isNaN(e[t]))return null==e[t]?i:Number(e[t]);ie("DateFilter ".concat(t," is not a number"))}return i};this.minValidYear=t("minValidYear",1e3),this.maxValidYear=t("maxValidYear",To),this.minValidYear>this.maxValidYear&&ie("DateFilter minValidYear should be <= maxValidYear"),e.minValidDate?this.minValidDate=e.minValidDate instanceof Date?e.minValidDate:Po(e.minValidDate):this.minValidDate=null,e.maxValidDate?this.maxValidDate=e.maxValidDate instanceof Date?e.maxValidDate:Po(e.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&ie("DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new Io(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(e){const t=new Mo(this.context,this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},e);return this.addDestroyFunc((()=>t.destroy())),t}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}getDefaultFilterOptions(){return Do}createValueElement(){const e=this.gos.getDocument().createElement("div");return e.classList.add("ag-filter-body"),this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e}createFromToElement(e,t,i,s){const o=this.gos.getDocument().createElement("div");o.classList.add("ag-filter-".concat(s)),o.classList.add("ag-filter-date-".concat(s)),t.push(o),e.appendChild(o),i.push(this.createDateCompWrapper(o))}removeValueElements(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),this.removeItems(this.eConditionPanelsFrom,e,t),this.removeItems(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,i){this.removeItems(e,t,i).forEach((e=>e.destroy()))}isValidDateValue(e){if(null===e)return!1;if(this.minValidDate){if(e<this.minValidDate)return!1}else if(e.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(e>this.maxValidDate)return!1}else if(e.getUTCFullYear()>this.maxValidYear)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput(((i,s,o,n)=>{o!==e||!t||s>=n||(t=t&&this.isValidDateValue(i.getDate()))})),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}getFilterType(){return"date"}createCondition(e){const t=this.getConditionType(e),i={},s=this.getValues(e);return s.length>0&&(i.dateFrom=Fo(s[0])),s.length>1&&(i.dateTo=Fo(s[1])),{dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:t,...i}}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),i=e("ariaFilterValue","Filter Value");this.forEachInput((e=>{e.setInputPlaceholder(t),e.setInputAriaLabel(i)}))}getInputs(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,((e,i,s,o)=>{i<o&&t.push(e.getDate())})),t}translate(e){return"lessThan"===e?super.translate("before"):"greaterThan"===e?super.translate("after"):super.translate(e)}getModelAsString(e){var t;return null!==(t=this.filterModelFormatter.getModelAsString(e))&&void 0!==t?t:""}}},{name:"agDateInput",classImp:class extends Fi{constructor(){super('\n            <div class="ag-filter-filter">\n                <ag-input-text-field class="ag-date-filter" data-ref="eDateInput"></ag-input-text-field>\n            </div>',[ao]),this.eDateInput=Ri}destroy(){super.destroy()}init(e){this.params=e,this.setParams(e);const t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus()},input:e=>{e.target===this.gos.getActiveDomElement()&&(this.eDateInput.isDisabled()||this.params.onDateChanged())}})}setParams(e){const t=this.eDateInput.getInputElement(),i=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=i&&Gt(),t.type=i?"date":"text";const{minValidYear:s,maxValidYear:o,minValidDate:n,maxValidDate:r}=e.filterParams||{};if(n&&s&&ie("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),r&&o&&ie("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),n&&r){const[e,t]=[n,r].map((e=>e instanceof Date?e:Po(e)));e&&t&&e.getTime()>t.getTime()&&ie("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}n?n instanceof Date?t.min=xo(n):t.min=n:s&&(t.min="".concat(s,"-01-01")),r?r instanceof Date?t.max=xo(r):t.max=r:o&&(t.max="".concat(o,"-12-31"))}onParamsUpdated(e){this.refresh(e)}refresh(e){this.params=e,this.setParams(e)}getDate(){return Po(this.eDateInput.getValue())}setDate(e){this.eDateInput.setValue(Fo(e,!1))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){e&&e.suppressFocus||this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(e){return e.filterParams&&null!=e.filterParams.browserDatePicker?e.filterParams.browserDatePicker:Ot()||Bt()||Gt()&&Nt()>=14.1}}}]},Qo],userComponents:[{name:"agTextColumnFloatingFilter",classImp:class extends _o{init(e){super.init(e),this.filterModelFormatter=new fo(this.localeService,this.optionsFactory)}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return vo}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new Uo)}}},{name:"agNumberColumnFloatingFilter",classImp:class extends _o{init(e){var t;super.init(e),this.filterModelFormatter=new go(this.localeService,this.optionsFactory,null===(t=e.filterParams)||void 0===t?void 0:t.numberFormatter)}onParamsUpdated(e){this.refresh(e)}refresh(e){mo(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return ho}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(e){return this.allowedCharPattern=mo(e.filterParams),this.allowedCharPattern?this.createManagedBean(new Uo({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new Ko)}}},{name:"agDateColumnFloatingFilter",classImp:class extends zo{constructor(){super('\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field data-ref="eReadOnlyText"></ag-input-text-field>\n                <div data-ref="eDateWrapper" style="display: flex;"></div>\n            </div>',[ao]),this.eReadOnlyText=Ri,this.eDateWrapper=Ri}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}getDefaultFilterOptions(){return Do}init(e){super.init(e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new Io(this.filterParams,this.localeService,this.optionsFactory);const t=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.params=e,this.filterParams=e.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){const t=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){if(e){const t=e;this.dateComp.setDate(Po(t.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){Yt(this.eDateWrapper,e),Yt(this.eReadOnlyText.getGui(),!e)}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(super.setLastTypeFromModel(e),this.updateCompOnModelChange(e))}onDateChanged(){const e=Fo(this.dateComp.getDate());this.params.parentFilterInstance((t=>{if(t){const i=Po(e);t.onFloatingFilterChanged(this.getLastType()||null,i)}}))}getDateComponentParams(){const e=Ys(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:de(this.onDateChanged.bind(this),e),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new Mo(this.context,this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper,(e=>{e.setInputAriaLabel(this.getAriaLabel(this.params))})),this.addDestroyFunc((()=>this.dateComp.destroy()))}updateDateComponent(){const e=this.gos.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(e)}getFilterModelFormatter(){return this.filterModelFormatter}}}]},en={version:Wo,moduleName:"@ag-grid-community/quick-filter-core",beans:[class extends F{constructor(){super(...arguments),this.beanName="quickFilterService",this.quickFilter=null,this.quickFilterParts=null}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.pivotResultColsService=e.pivotResultColsService}postConstruct(){const e=this.resetQuickFilterCache.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{this.gos.get("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()}}),this.addManagedPropertyListener("quickFilterText",(e=>this.setQuickFilter(e.currentValue))),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],(()=>this.onQuickFilterColumnConfigChanged())),this.quickFilter=this.parseQuickFilter(this.gos.get("quickFilterText")),this.parser=this.gos.get("quickFilterParser"),this.matcher=this.gos.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],(()=>this.setQuickFilterParserAndMatcher()))}refreshQuickFilterCols(){var e,t;const i=this.columnModel.isPivotMode(),s=this.columnModel.getAutoCols(),o=this.columnModel.getColDefCols();let n=null!==(e=i&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")?null===(t=this.pivotResultColsService.getPivotResultCols())||void 0===t?void 0:t.list:o)&&void 0!==e?e:[];s&&(n=n.concat(s)),this.colsForQuickFilter=this.gos.get("includeHiddenColumnsInQuickFilter")?n:n.filter((e=>e.isVisible()||e.isRowGroupActive()))}isQuickFilterPresent(){return null!==this.quickFilter}doesRowPassQuickFilter(e){const t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(t,e):this.quickFilterParts.every((i=>t?this.doesRowPassQuickFilterCache(e,i):this.doesRowPassQuickFilterNoCache(e,i)))}resetQuickFilterCache(){this.rowModel.forEachNode((e=>e.quickFilterAggregateText=null))}setQuickFilterParts(){const{quickFilter:e,parser:t}=this;this.quickFilterParts=e?t?t(e):e.split(" "):null}parseQuickFilter(e){return P(e)?this.gos.isRowModelType("clientSide")?e.toUpperCase():(ie("Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(e){if(null!=e&&"string"!==typeof e)return void ie("Grid option quickFilterText only supports string inputs, received: ".concat(typeof e));const t=this.parseQuickFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setQuickFilterParserAndMatcher(){const e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),i=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,i&&(this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onQuickFilterColumnConfigChanged(){this.refreshQuickFilterCols(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassQuickFilterNoCache(e,t){return this.colsForQuickFilter.some((i=>{const s=this.getQuickFilterTextForColumn(i,e);return P(s)&&s.indexOf(t)>=0}))}doesRowPassQuickFilterCache(e,t){return this.checkGenerateQuickFilterAggregateText(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassQuickFilterMatcher(e,t){let i;e?(this.checkGenerateQuickFilterAggregateText(t),i=t.quickFilterAggregateText):i=this.getQuickFilterAggregateText(t);const{quickFilterParts:s,matcher:o}=this;return o(s,i)}checkGenerateQuickFilterAggregateText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getQuickFilterAggregateText(e))}getQuickFilterTextForColumn(e,t){let i=this.valueService.getValue(e,t,!0);const s=e.getColDef();if(s.getQuickFilterText){const o=this.gos.addGridCommonParams({value:i,node:t,data:t.data,column:e,colDef:s});i=s.getQuickFilterText(o)}return P(i)?i.toString().toUpperCase():null}getQuickFilterAggregateText(e){const t=[];return this.colsForQuickFilter.forEach((i=>{const s=this.getQuickFilterTextForColumn(i,e);P(s)&&t.push(s)})),t.join("\n")}}],dependantModules:[Zo]},tn={version:Wo,moduleName:"@ag-grid-community/filter",dependantModules:[Jo,$o,{version:Wo,moduleName:"@ag-grid-community/quick-filter",dependantModules:[en,{version:Wo,moduleName:"@ag-grid-community/quick-filter-api",apiFunctions:{isQuickFilterPresent:function(e){var t;return!(null===(t=e.filterManager)||void 0===t||!t.isQuickFilterPresent())},getQuickFilter:function(e){return e.gos.get("quickFilterText")},resetQuickFilter:function(e){var t;null===(t=e.filterManager)||void 0===t||t.resetQuickFilterCache()}},dependantModules:[en]}]},qo]},sn=(e=>(e.COLUMN_GROUP="group",e.COLUMN="column",e.FLOATING_FILTER="filter",e))(sn||{}),on=class extends F{constructor(){super(...arguments),this.beanName="headerNavigationService",this.currentHeaderRowWithoutSpan=-1}wireBeans(e){this.focusService=e.focusService,this.headerPositionUtils=e.headerPositionUtils,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.visibleColService=e.visibleColsService}postConstruct(){this.ctrlsService.whenReady((e=>{this.gridBodyCon=e.gridBodyCtrl}));const e=this.gos.getDocument();this.addManagedElementListeners(e,{mousedown:()=>this.setCurrentHeaderRowWithoutSpan(-1)})}getHeaderRowCount(){const e=this.ctrlsService.getHeaderRowContainerCtrl();return e?e.getRowCount():0}getHeaderPositionForColumn(e,t){let i;if("string"===typeof e?(i=this.columnModel.getCol(e),i||(i=this.visibleColService.getColumnGroup(e))):i=e,!i)return null;const s="filter"===n(this.ctrlsService.getHeaderRowContainerCtrl().getAllCtrls()).getType(),o=this.getHeaderRowCount()-1;let r=-1,l=i;for(;l;)r++,l=l.getParent();let a=r;return t&&s&&a===o-1&&a++,-1===a?null:{headerRowIndex:a,column:i}}navigateVertically(e,t,i){if(t||(t=this.focusService.getFocusedHeader()),!t)return!1;const{headerRowIndex:s}=t,o=t.column,n=this.getHeaderRowCount(),r=0===e;let{headerRowIndex:l,column:a,headerRowIndexWithoutSpan:d}=r?this.headerPositionUtils.getColumnVisibleParent(o,s):this.headerPositionUtils.getColumnVisibleChild(o,s),c=!1;return l<0&&(l=0,a=o,c=!0),l>=n?(l=-1,this.setCurrentHeaderRowWithoutSpan(-1)):void 0!==d&&(this.currentHeaderRowWithoutSpan=d),!(!c&&!a)&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:l,column:a},allowUserOverride:!0,event:i})}setCurrentHeaderRowWithoutSpan(e){this.currentHeaderRowWithoutSpan=e}navigateHorizontally(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;const s=this.focusService.getFocusedHeader(),o=2===e,n=this.gos.get("enableRtl");let r,l;if(-1!==this.currentHeaderRowWithoutSpan?s.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=s.headerRowIndex,o!==n?(l="Before",r=this.headerPositionUtils.findHeader(s,l)):(l="After",r=this.headerPositionUtils.findHeader(s,l)),r||!t)return this.focusService.focusHeaderPosition({headerPosition:r,direction:l,fromTab:t,allowUserOverride:!0,event:i});if(t){const e=this.gos.getCallback("tabToNextHeader");if(e)return this.focusService.focusHeaderPositionFromUserFunc({userFunc:e,headerPosition:r,direction:l})}return this.focusNextHeaderRow(s,l,i)}focusNextHeaderRow(e,t,i){var s;const o=e.headerRowIndex;let n,r=null;if("Before"===t?o>0&&(n=o-1,this.currentHeaderRowWithoutSpan-=1,r=this.headerPositionUtils.findColAtEdgeForHeaderRow(n,"end")):(n=o+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),r=this.headerPositionUtils.findColAtEdgeForHeaderRow(n,"start")),!r)return!1;const{column:l,headerRowIndex:a}=this.headerPositionUtils.getHeaderIndexToFocus(r.column,null===(s=r)||void 0===s?void 0:s.headerRowIndex);return this.focusService.focusHeaderPosition({headerPosition:{column:l,headerRowIndex:a},direction:t,fromTab:!0,allowUserOverride:!0,event:i})}scrollToColumn(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"After";if(!e.getPinned()){if(Be(e)){const s=e.getDisplayedLeafColumns();t="Before"===i?n(s):s[0]}else t=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(t)}}},nn=class extends F{wireBeans(e){this.headerNavigationService=e.headerNavigationService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService,this.filterManager=e.filterManager,this.menuService=e.menuService}setComp(e,t,i){this.comp=e,this.eGui=t,this.createManagedBean(new Zs(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),this.onPivotModeChanged(),this.setupHeaderHeight();const s=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:s}),this.mockContextMenuForIPad(s),this.ctrlsService.register("gridHeaderCtrl",this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListener("headerHeight",e),this.addManagedPropertyListener("pivotHeaderHeight",e),this.addManagedPropertyListener("groupHeaderHeight",e),this.addManagedPropertyListener("pivotGroupHeaderHeight",e),this.addManagedPropertyListener("floatingFiltersHeight",e),this.addManagedEventListeners({displayedColumnsChanged:e,columnHeaderHeightChanged:e,gridStylesChanged:e,advancedFilterEnabledChanged:e})}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){var e;const{columnModel:t}=this;let i,s=0,o=t.getHeaderRowCount();(null===(e=this.filterManager)||void 0===e?void 0:e.hasFloatingFilters())&&(o++,s=1);const n=this.columnModel.getColumnGroupHeaderRowHeight(),r=this.columnModel.getColumnHeaderRowHeight(),l=o-(1+s);if(i=s*t.getFloatingFiltersHeight(),i+=l*n,i+=r,this.headerHeight===i)return;this.headerHeight=i;const a="".concat(i+1,"px");this.comp.setHeightAndMinHeight(a),this.eventService.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(){const e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)}onDisplayedColumnsChanged(){const e=this.visibleColsService.getAllCols().some((e=>e.isSpanHeaderHeight()));this.comp.addOrRemoveCssClass("ag-header-allow-overflow",e)}onTabKeyDown(e){const t=this.gos.get("enableRtl"),i=e.shiftKey!==t?2:3;(this.headerNavigationService.navigateHorizontally(i,!0,e)||this.focusService.focusNextGridCoreContainer(e.shiftKey))&&e.preventDefault()}handleKeyDown(e){let t=null;switch(e.key){case Vi.LEFT:t=2;case Vi.RIGHT:P(t)||(t=3),this.headerNavigationService.navigateHorizontally(t,!1,e);break;case Vi.UP:t=0;case Vi.DOWN:P(t)||(t=1),this.headerNavigationService.navigateVertically(t,null,e)&&e.preventDefault();break;default:return}}onFocusOut(e){const{relatedTarget:t}=e;!t&&this.eGui.contains(this.gos.getActiveDomElement())||this.eGui.contains(t)||this.focusService.clearFocusedHeader()}onHeaderContextMenu(e,t,i){if(!e&&!i||!this.menuService.isHeaderContextMenuEnabled())return;const{target:s}=null!==e&&void 0!==e?e:t;s!==this.eGui&&s!==this.ctrlsService.getHeaderRowContainerCtrl().getViewport()||this.menuService.showHeaderContextMenu(void 0,e,i)}mockContextMenuForIPad(e){if(!Ht())return;const t=new Di(this.eGui);this.addManagedListeners(t,{longTap:t=>{e(void 0,t.touchStart,t.touchEvent)}}),this.addDestroyFunc((()=>t.destroy()))}},rn=class extends F{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this.callback=e,this.addSpacer=t}wireBeans(e){this.visibleColsService=e.visibleColsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){const e=this.gos.isDomLayout("print"),t=this.visibleColsService.getBodyContainerWidth(),i=this.visibleColsService.getColsLeftWidth(),s=this.visibleColsService.getDisplayedColumnsRightWidth();let o;if(e)o=t+i+s;else if(o=t,this.addSpacer){0===(this.gos.get("enableRtl")?i:s)&&this.scrollVisibleService.isVerticalScrollShowing()&&(o+=this.gos.getScrollbarWidth())}this.callback(o)}},ln=class extends F{constructor(e){super(),this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=e}wireBeans(e){this.funcColsService=e.funcColsService}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const t=e.dragItem.columns;t&&t.forEach((e=>{e.isPrimary()&&(e.isAnyFunctionActive()||(e.isAllowValue()?this.columnsToAggregate.push(e):e.isAllowRowGroup()?this.columnsToGroup.push(e):e.isAllowPivot()&&this.columnsToPivot.push(e)))}))}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){this.columnsToAggregate.length>0&&this.funcColsService.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.funcColsService.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.funcColsService.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}};function an(e){const{isFromHeader:t,hDirection:i,xPosition:s,fromEnter:o,fakeEvent:l,pinned:a,gos:d,columnModel:c,columnMoveService:u,presentedColsService:h}=e,p=0===i,m=1===i;let{allMovingColumns:v}=e;if(t){const e=[];v.forEach((t=>{let i=null,s=t.getParent();for(;null!=s&&1===s.getDisplayedLeafColumns().length;)i=s,s=s.getParent();if(null!=i){var o;(!(null===(o=i.getColGroupDef())||void 0===o||!o.marryChildren)?i.getProvidedColumnGroup().getLeafColumns():i.getLeafColumns()).forEach((t=>{e.includes(t)||e.push(t)}))}else e.includes(t)||e.push(t)})),v=e}const f=v.slice();c.sortColsLikeCols(f);const C=function(e){const{movingCols:t,draggingRight:i,xPosition:s,pinned:o,gos:n,columnModel:r,presentedColsService:l}=e,a=n.get("suppressMovableColumns")||t.some((e=>e.getColDef().suppressMovable));if(a)return[];const d=function(e,t){switch(t){case"left":return e.getLeftCols();case"right":return e.getRightCols();default:return e.getCenterCols()}}(l,o),c=r.getCols(),u=d.filter((e=>g(t,e))),h=d.filter((e=>!g(t,e))),p=c.filter((e=>!g(t,e)));let m,v=0,f=s;if(i){let e=0;u.forEach((t=>e+=t.getActualWidth())),f-=e}if(f>0){for(let e=0;e<h.length;e++){if(f-=h[e].getActualWidth(),f<0)break;v++}i&&v++}if(v>0){const e=h[v-1];m=p.indexOf(e)+1}else m=p.indexOf(h[0]),-1===m&&(m=0);const C=[m],w=(e,t)=>e-t;if(i){let e=m+1;const t=c.length-1;for(;e<=t;)C.push(e),e++;C.sort(w)}else{let e=m;const t=c.length-1;let i=c[e];for(;e<=t&&d.indexOf(i)<0;)e++,C.push(e),i=c[e];e=m-1;const s=0;for(;e>=s;)C.push(e),e--;C.sort(w).reverse()}return C}({movingCols:f,draggingRight:m,xPosition:s,pinned:a,gos:d,columnModel:c,presentedColsService:h}),w=function(e,t){const i=t.getCols(),s=(l=e.map((e=>i.indexOf(e))),l.sort(((e,t)=>e-t))),o=s[0],r=n(s);var l;return r-o!==s.length-1?null:o}(f,c);if(0===C.length)return;const S=C[0];let y=null!==w&&!o;if(t&&(y=null!==w),y&&!l){if(p&&S>=w)return;if(m&&S<=w)return}const b=h.getAllCols(),R=[];let F=null;for(let n=0;n<C.length;n++){const e=C[n],t=u.getProposedColumnOrder(f,e);if(!u.doesOrderPassRules(t))continue;const i=t.filter((e=>b.includes(e)));if(null===F)F=i;else if(!r(i,F))break;const s=cn(t);R.push({move:e,fragCount:s})}return 0!==R.length?(R.sort(((e,t)=>e.fragCount-t.fragCount)),dn(v,R[0].move,"uiColumnMoved",!1,u)):void 0}function dn(e,t,i,s,o){return o.moveColumns(e,t,i,s),s?null:{columns:e,toIndex:t}}function cn(e){function t(e){const t=[];let i=e.getOriginalParent();for(;null!=i;)t.push(i),i=i.getOriginalParent();return t}let i=0;for(let s=0;s<e.length-1;s++){let o=t(e[s]),n=t(e[s+1]);[o,n]=o.length>n.length?[o,n]:[n,o],o.forEach((e=>{-1===n.indexOf(e)&&i++}))}return i}function un(e,t,i,s,o){const n=o.getHeaderRowContainerCtrl(t).getViewport();if(i&&(e-=n.getBoundingClientRect().left),s.get("enableRtl")){e=n.clientWidth-e}return null==t&&(e+=o.get("center").getCenterViewportScrollLeft()),e}var hn=class extends F{constructor(e){super(),this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=e,this.isCenterContainer=!P(e)}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnMoveService=e.columnMoveService,this.dragAndDropService=e.dragAndDropService,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady((e=>{this.gridBodyCon=e.gridBodyCtrl}))}getIconName(){return this.pinned?"pinned":"move"}onDragEnter(e){const t=e.dragItem.columns;if(0===e.dragSource.type)this.setColumnsVisible(t,!0,"uiColumnDragged");else{const i=e.dragItem.visibleState,s=(t||[]).filter((e=>i[e.getId()]));this.setColumnsVisible(s,!0,"uiColumnDragged")}this.setColumnsPinned(t,this.pinned,"uiColumnDragged"),this.onDragging(e,!0,!0)}onDragLeave(){this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,i){if(e){const s=e.filter((e=>!e.getColDef().lockVisible));this.columnModel.setColsVisible(s,t,i)}}setColumnsPinned(e,t,i){if(e){const s=e.filter((e=>!e.getColDef().lockPinned));this.columnModel.setColsPinned(s,t,i)}}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}checkCenterForScrolling(e){if(this.isCenterContainer){const t=this.ctrlsService.get("center"),i=t.getCenterViewportScrollLeft(),s=i+t.getCenterWidth();this.gos.get("enableRtl")?(this.needToMoveRight=e<i+50,this.needToMoveLeft=e>s-50):(this.needToMoveLeft=e<i+50,this.needToMoveRight=e>s-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}}onDragging(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.lastDraggingEvent,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(arguments.length>3&&void 0!==arguments[3]&&arguments[3]){if(this.lastMovedInfo){const{columns:e,toIndex:t}=this.lastMovedInfo;dn(e,t,"uiColumnMoved",!0,this.columnMoveService)}return}if(this.lastDraggingEvent=t,M(t.hDirection))return;const o=un(t.x,this.pinned,!1,this.gos,this.ctrlsService);i||this.checkCenterForScrolling(o);const n=this.normaliseDirection(t.hDirection),r=t.dragSource.type,l=an({allMovingColumns:(null===(e=t.dragSource.getDragItem().columns)||void 0===e?void 0:e.filter((e=>!e.getColDef().lockPinned||e.getPinned()==this.pinned)))||[],isFromHeader:1===r,hDirection:n,xPosition:o,pinned:this.pinned,fromEnter:i,fakeEvent:s,gos:this.gos,columnModel:this.columnModel,columnMoveService:this.columnMoveService,presentedColsService:this.visibleColsService});l&&(this.lastMovedInfo=l)}normaliseDirection(e){if(!this.gos.get("enableRtl"))return e;switch(e){case 0:return 1;case 1:return 0;default:se("Unknown direction ".concat(e))}}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.dragAndDropService.setGhostIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon("move"))}moveInterval(){let e;this.intervalCount++,e=10+5*this.intervalCount,e>100&&(e=100);let t=null;const i=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?t=i.scrollHorizontally(-e):this.needToMoveRight&&(t=i.scrollHorizontally(e)),0!==t)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;const e=this.lastDraggingEvent.dragItem.columns.filter((e=>!e.getColDef().lockPinned));if(e.length>0&&(this.dragAndDropService.setGhostIcon("pinned"),this.failedMoveAttempts>7)){const t=this.needToMoveLeft?"left":"right";this.setColumnsPinned(e,t,"uiColumnDragged"),this.dragAndDropService.nudge()}}}},pn=class extends F{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){this.ctrlsService.whenReady((e=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.left.getContainerElement()],[e.bottomLeft.getContainerElement()],[e.topLeft.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.right.getContainerElement()],[e.bottomRight.getContainerElement()],[e.topRight.getContainerElement()]];break;default:this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.center.getViewportElement()],[e.bottomCenter.getViewportElement()],[e.topCenter.getViewportElement()]]}})),this.moveColumnFeature=this.createManagedBean(new hn(this.pinned)),this.bodyDropPivotTarget=this.createManagedBean(new ln(this.pinned)),this.dragAndDropService.addDropTarget(this)}isInterestedIn(e){return 1===e||0===e&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.columnModel.isPivotMode()&&0===e.dragSource.type}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}},gn=class extends F{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.pinnedWidthService=e.pinnedWidthService,this.ctrlsService=e.ctrlsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,i,s,o){super(),this.pinned=e,this.column=t,this.eResize=i,this.comp=s,this.ctrl=o}postConstruct(){const e=[];let t,i;const s=()=>{if(Yt(this.eResize,t),!t)return;const s=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(e.push(s),i){const t=this.gos.get("skipHeaderOnAutoSize"),i=()=>{this.columnAutosizeService.autoSizeColumn(this.column,"uiColumnResized",t)};this.eResize.addEventListener("dblclick",i);const s=new Di(this.eResize);s.addEventListener("doubleTap",i),e.push((()=>{this.eResize.removeEventListener("dblclick",i),s.removeEventListener("doubleTap",i),s.destroy()}))}},o=()=>{e.forEach((e=>e())),e.length=0},n=()=>{const e=this.column.isResizable(),n=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(e!==t||n!==i)&&(t=e,i=n,o(),s())};n(),this.addDestroyFunc(o),this.ctrl.addRefreshFunction(n)}onResizing(e,t){const{column:i,lastResizeAmount:s,resizeStartWidth:o}=this,n=this.normaliseResizeAmount(t),r=[{key:i,newWidth:o+n}];if(this.column.getPinned()){if(this.pinnedWidthService.getPinnedLeftWidth()+this.pinnedWidthService.getPinnedRightWidth()+(n-s)>Jt(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50)return}this.lastResizeAmount=n,this.columnSizeService.setColumnWidths(r,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const i="left"!==this.pinned,s="right"===this.pinned;return this.gos.get("enableRtl")?i&&(t*=-1):s&&(t*=-1),t}},mn=class extends F{constructor(e){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=e}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}onSpaceKeyDown(e){const t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(this.gos.getActiveDomElement())&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e,this.cbSelectAll=this.createManagedBean(new Ui),this.cbSelectAll.addCssClass("ag-header-select-all"),pt(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedEventListeners({newColumnsLoaded:this.onNewColumnsLoaded.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:this.onSelectionChanged.bind(this),paginationChanged:this.onSelectionChanged.bind(this),modelUpdated:this.onModelChanged.bind(this)}),this.addManagedListeners(this.cbSelectAll,{fieldValueChanged:this.onCbSelectAll.bind(this)}),yt(this.cbSelectAll.getGui(),!0),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onNewColumnsLoaded(){this.showOrHideSelectAll()}onDisplayedColumnsChanged(){this.isAlive()&&this.showOrHideSelectAll()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible,{skipAriaHidden:!0}),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(e);const t=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!t),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){const e=this.localeService.getLocaleTextFunc(),t=this.cbSelectAll.getValue()?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),i=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll","".concat(i," (").concat(t,")")):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel("".concat(i," (").concat(t,")")),this.headerCellCtrl.announceAriaDescription()}checkSelectionType(e){return!("multiple"!==this.gos.get("rowSelection"))||(ie("".concat(e," is only available if using 'multiple' rowSelection.")),!1)}checkRightRowModelType(e){const t=this.rowModel.getType();return!("clientSide"!==t&&"serverSide"!==t)||(ie("".concat(e," is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ").concat(t,".")),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox)return;if(!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue(),t=this.isFilteredOnly(),i=this.isCurrentPageOnly();let s="uiSelectAll";i?s="uiSelectAllCurrentPage":t&&(s="uiSelectAllFiltered");const o={source:s,justFiltered:t,justCurrentPage:i};e?this.selectionService.selectAllRowNodes(o):this.selectionService.deselectAllRowNodes(o)}isCheckboxSelection(){let e=this.column.getColDef().headerCheckboxSelection;if("function"===typeof e){e=e(this.gos.addGridCommonParams({column:this.column,colDef:this.column.getColDef()}))}return!!e&&(this.checkRightRowModelType("headerCheckboxSelection")&&this.checkSelectionType("headerCheckboxSelection"))}isFilteredOnly(){return!!this.column.getColDef().headerCheckboxSelectionFilteredOnly}isCurrentPageOnly(){return!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly}},vn=class extends Vo{constructor(e,t,i){super(e,t,i),this.refreshFunctions=[],this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=e}setComp(e,t,i,s){this.comp=e,this.setGui(t),this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight(s),this.addColumnHoverListener(),this.setupFilterClass(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.refreshAria(),this.resizeFeature=this.createManagedBean(new gn(this.getPinned(),this.column,i,e,this)),this.createManagedBean(new Ho([this.column],t)),this.createManagedBean(new Ao(this.column,t,this.beans)),this.createManagedBean(new Zs(t,{shouldStopEventPropagation:e=>this.shouldStopEventPropagation(e),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(),this.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],this.refresh.bind(this)),this.addManagedListeners(this.column,{colDefChanged:this.refresh.bind(this)}),this.addManagedEventListeners({columnValueChanged:this.onColumnValueChanged.bind(this),columnRowGroupChanged:this.onColumnRowGroupChanged.bind(this),columnPivotChanged:this.onColumnPivotChanged.bind(this),headerHeightChanged:this.onHeaderHeightChanged.bind(this)})}resizeHeader(e,t){if(!this.column.isResizable())return;const i=this.column.getActualWidth(),s=this.column.getMinWidth(),o=this.column.getMaxWidth(),n=Math.min(Math.max(i+e,s),o);this.beans.columnSizeService.setColumnWidths([{key:this.column,newWidth:n}],t,!0,"uiColumnResized")}moveHeader(e){const{eGui:t,column:i,gos:s,ctrlsService:o}=this,n=this.getPinned(),r=t.getBoundingClientRect().left,l=i.getActualWidth();an({allMovingColumns:[i],isFromHeader:!0,hDirection:e,xPosition:un(0===e!==s.get("enableRtl")?r-20:r+l+20,n,!0,s,o),pinned:n,fromEnter:!1,fakeEvent:!1,gos:s,columnModel:this.beans.columnModel,columnMoveService:this.beans.columnMoveService,presentedColsService:this.beans.visibleColsService}),o.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(i,"auto")}setupUserComp(){const e=this.lookupUserCompDetails();this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){const e=this.createParams(),t=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(t,e)}createParams(){return this.gos.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:e=>{this.menuService.showColumnMenu({column:this.column,buttonElement:e,positionBy:"button"})},showColumnMenuAfterMouseClick:e=>{this.menuService.showColumnMenu({column:this.column,mouseEvent:e,positionBy:"mouse"})},showFilter:e=>{this.menuService.showFilterMenu({column:this.column,buttonElement:e,containerType:"columnFilter",positionBy:"button"})},progressSort:e=>{this.beans.sortController.progressSort(this.column,!!e,"uiColumnSorted")},setSort:(e,t)=>{this.beans.sortController.setSortForColumn(this.column,e,!!t,"uiColumnSorted")},eGridHeader:this.getGui(),setTooltip:(e,t)=>{this.setupTooltip(e,t)}})}setupSelectAll(){this.selectAllFeature=this.createManagedBean(new mn(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===Vi.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===Vi.ENTER&&this.onEnterKeyDown(e),e.key===Vi.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){if(e.ctrlKey||e.metaKey)this.showMenuOnKeyPress(e,!0);else if(this.sortable){const t=e.shiftKey;this.beans.sortController.progressSort(this.column,t,"uiColumnSorted")}}showMenuOnKeyPress(e,t){const i=this.comp.getUserCompInstance();i&&i instanceof Ai&&i.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){if(!this.getGui().contains(e.relatedTarget)){const e=this.getRowIndex();this.focusService.setFocusedHeader(e,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const i="whenTruncated"===this.gos.get("tooltipShowMode"),s=this.eGui,o=this.column.getColDef();t||!i||o.headerComponent||(t=()=>{const e=s.querySelector(".ag-header-cell-text");return!e||e.scrollWidth>e.clientWidth});const n={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>s,getLocation:()=>"header",getTooltipValue:()=>{if(null!=e)return e;return this.column.getColDef().headerTooltip},shouldDisplayTooltip:t},r=this.createManagedBean(new yi(n));this.refreshFunctions.push((()=>r.refreshToolTip()))}setupClassesFromColDef(){const e=()=>{const e=ko(this.column.getColDef(),this.gos,this.column,null),t=this.userHeaderClasses;this.userHeaderClasses=new Set(e),e.forEach((e=>{t.has(e)?t.delete(e):this.comp.addOrRemoveCssClass(e,!0)})),t.forEach((e=>this.comp.addOrRemoveCssClass(e,!1)))};this.refreshFunctions.push(e),e()}setDragSource(e){if(this.dragSourceElement=e,this.removeDragSource(),!e||!this.draggable)return;const{column:t,beans:i,displayName:s,dragAndDropService:o,gos:n}=this,{columnModel:r}=i;let l=!this.gos.get("suppressDragLeaveHidesColumns");const a=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>l?"hide":"notAllowed",getDragItem:()=>this.createDragItem(t),dragItemName:s,onDragStarted:()=>{l=!n.get("suppressDragLeaveHidesColumns"),t.setMoving(!0,"uiColumnMoved")},onDragStopped:()=>t.setMoving(!1,"uiColumnMoved"),onGridEnter:e=>{if(l){var t;const i=(null===e||void 0===e||null===(t=e.columns)||void 0===t?void 0:t.filter((e=>!e.getColDef().lockVisible)))||[];r.setColsVisible(i,!0,"uiColumnMoved")}},onGridExit:e=>{if(l){var t;const i=(null===e||void 0===e||null===(t=e.columns)||void 0===t?void 0:t.filter((e=>!e.getColDef().lockVisible)))||[];r.setColsVisible(i,!1,"uiColumnMoved")}}};o.addDragSource(a,!0)}createDragItem(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}updateState(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}addRefreshFunction(e){this.refreshFunctions.push(e)}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),this.refreshFunctions.forEach((e=>e()))}refreshHeaderComp(){const e=this.lookupUserCompDetails();!!(null!=this.comp.getUserCompInstance()&&this.userCompDetails.componentClass==e.componentClass)&&this.attemptHeaderCompRefresh(e.params)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();if(!t)return!1;if(!t.refresh)return!1;return t.refresh(e)}calculateDisplayName(){return this.beans.columnNameService.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}onColumnRowGroupChanged(){this.checkDisplayName()}onColumnPivotChanged(){this.checkDisplayName()}onColumnValueChanged(){this.checkDisplayName()}setupWidth(){const e=()=>{const e=this.column.getActualWidth();this.comp.setWidth("".concat(e,"px"))};this.addManagedListeners(this.column,{widthChanged:e}),e()}setupMovingCss(){const e=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};this.addManagedListeners(this.column,{movingChanged:e}),e()}setupMenuClass(){const e=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};this.addManagedListeners(this.column,{menuVisibleChanged:e}),e()}setupSortableClass(){const e=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};e(),this.addRefreshFunction(e),this.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(){const e=()=>{const e=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",e),this.refreshAria()};this.addManagedListeners(this.column,{filterActiveChanged:e}),e()}setupWrapTextClass(){const e=()=>{const e=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",e)};e(),this.addRefreshFunction(e)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:e,column:t,comp:i,beans:s}=this;if(!t.isSpanHeaderHeight())return e.style.removeProperty("top"),e.style.removeProperty("height"),i.addOrRemoveCssClass("ag-header-span-height",!1),void i.addOrRemoveCssClass("ag-header-span-total",!1);const{numberOfParents:o,isSpanningTotal:n}=this.column.getColumnGroupPaddingInfo();i.addOrRemoveCssClass("ag-header-span-height",o>0);const{columnModel:r}=s,l=r.getColumnHeaderRowHeight();if(0===o)return i.addOrRemoveCssClass("ag-header-span-total",!1),e.style.setProperty("top","0px"),void e.style.setProperty("height","".concat(l,"px"));i.addOrRemoveCssClass("ag-header-span-total",n);const a=o*(r.isPivotMode()?r.getPivotGroupHeaderHeight():r.getGroupHeaderHeight());e.style.setProperty("top","".concat(-a,"px")),e.style.setProperty("height","".concat(l+a,"px"))}setupAutoHeight(e){const{columnModel:t,resizeObserverService:i}=this.beans,s=i=>{if(!this.isAlive())return;const{paddingTop:o,paddingBottom:n,borderBottomWidth:r,borderTopWidth:l}=Xt(this.getGui()),a=o+n+r+l,d=e.offsetHeight+a;if(i<5){const t=this.beans.gos.getDocument();if(!t||!t.contains(e)||0==d)return void window.setTimeout((()=>s(i+1)),0)}t.setColHeaderHeight(this.column,d)};let o,n=!1;const r=()=>{const e=this.column.isAutoHeaderHeight();e&&!n&&l(),!e&&n&&a()},l=()=>{n=!0,s(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),o=i.observeResize(e,(()=>s(0)))},a=()=>{n=!1,o&&o(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),o=void 0};r(),this.addDestroyFunc((()=>a())),this.addManagedListeners(this.column,{widthChanged:()=>n&&s(0)}),this.addManagedEventListeners({sortChanged:()=>{n&&window.setTimeout((()=>s(0)))}}),this.addRefreshFunction(r)}refreshAriaSort(){if(this.sortable){const e=this.localeService.getLocaleTextFunc(),t=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(function(e){let t;return t="asc"===e?"ascending":"desc"===e?"descending":"mixed"===e?"other":"none",t}(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const e=this.localeService.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){null!=t?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){if(!this.eGui.contains(this.beans.gos.getActiveDomElement()))return;const e=Array.from(this.ariaDescriptionProperties.keys()).sort(((e,t)=>"filter"===e?-1:t.charCodeAt(0)-e.charCodeAt(0))).map((e=>this.ariaDescriptionProperties.get(e))).join(". ");this.beans.ariaAnnouncementService.announceValue(e)}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(){const e=()=>{if(!this.gos.get("columnHoverHighlight"))return;const e=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",e)};this.addManagedEventListeners({columnHoverChanged:e}),e()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(){const e=e=>this.handleMouseOverChange("mouseenter"===e.type);this.addManagedListeners(this.getGui(),{mouseenter:e,mouseleave:e,click:()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column),contextmenu:e=>this.handleContextMenuMouseEvent(e,void 0,this.column)})}handleMouseOverChange(e){this.setActiveHeader(e);const t={type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column};this.eventService.dispatchEvent(t)}setActiveHeader(e){this.comp.addOrRemoveCssClass("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return t instanceof Ai?t.getAnchorElementForMenu(e):this.getGui()}destroy(){super.destroy(),this.refreshFunctions=null,this.selectAllFeature=null,this.dragSourceElement=null,this.userCompDetails=null,this.userHeaderClasses=null,this.ariaDescriptionProperties=null}},fn=class extends F{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.autoWidthCalculator=e.autoWidthCalculator,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,i,s){super(),this.eResize=t,this.comp=e,this.pinned=i,this.columnGroup=s}postConstruct(){if(!this.columnGroup.isResizable())return void this.comp.setResizableDisplayed(!1);const e=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(e),!this.gos.get("suppressAutoSize")){const e=this.gos.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",(()=>{const t=[];this.columnGroup.getDisplayedLeafColumns().forEach((e=>{e.getColDef().suppressAutoSize||t.push(e.getColId())})),t.length>0&&this.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:e,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")}))}}onResizeStart(e){const t=this.getInitialValues(e);this.storeLocalValues(t),this.toggleColumnResizing(!0)}onResizing(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"uiColumnResized";const s=this.normaliseDragChange(t),o=this.resizeStartWidth+s;this.resizeColumnsFromLocalValues(o,i,e)}getInitialValues(e){const t=this.getColumnsToResize(),i=this.getInitialSizeOfColumns(t),s={columnsToResize:t,resizeStartWidth:i,resizeRatios:this.getSizeRatiosOfColumns(t,i)};let o=null;if(e&&(o=this.visibleColsService.getGroupAtDirection(this.columnGroup,"After")),o){const e=o.getDisplayedLeafColumns(),t=s.groupAfterColumns=e.filter((e=>e.isResizable())),i=s.groupAfterStartWidth=this.getInitialSizeOfColumns(t);s.groupAfterRatios=this.getSizeRatiosOfColumns(t,i)}else s.groupAfterColumns=void 0,s.groupAfterStartWidth=void 0,s.groupAfterRatios=void 0;return s}storeLocalValues(e){const{columnsToResize:t,resizeStartWidth:i,resizeRatios:s,groupAfterColumns:o,groupAfterStartWidth:n,groupAfterRatios:r}=e;this.resizeCols=t,this.resizeStartWidth=i,this.resizeRatios=s,this.resizeTakeFromCols=o,this.resizeTakeFromStartWidth=n,this.resizeTakeFromRatios=r}clearLocalValues(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}resizeLeafColumnsToFit(e){const t=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),i=this.getInitialValues();t>i.resizeStartWidth&&this.resizeColumns(i,t,e,!0)}resizeColumnsFromLocalValues(e,t){var i,s,o;let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!this.resizeCols||!this.resizeRatios)return;const r={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:null!==(i=this.resizeTakeFromCols)&&void 0!==i?i:void 0,groupAfterStartWidth:null!==(s=this.resizeTakeFromStartWidth)&&void 0!==s?s:void 0,groupAfterRatios:null!==(o=this.resizeTakeFromRatios)&&void 0!==o?o:void 0};this.resizeColumns(r,e,t,n)}resizeColumns(e,t,i){let s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const{columnsToResize:o,resizeStartWidth:n,resizeRatios:r,groupAfterColumns:l,groupAfterStartWidth:a,groupAfterRatios:d}=e,c=[];if(c.push({columns:o,ratios:r,width:t}),l){const e=t-n;c.push({columns:l,ratios:d,width:a-e})}this.columnSizeService.resizeColumnSets({resizeSets:c,finished:s,source:i}),s&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter((e=>e.isResizable()))}getInitialSizeOfColumns(e){return e.reduce(((e,t)=>e+t.getActualWidth()),0)}getSizeRatiosOfColumns(e,t){return e.map((e=>e.getActualWidth()/t))}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?"left"!==this.pinned&&(t*=-1):"right"===this.pinned&&(t*=-1),t}destroy(){super.destroy(),this.clearLocalValues()}},Cn=class extends F{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach((t=>{t.addEventListener("widthChanged",e),t.addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push((()=>{t.removeEventListener("widthChanged",e),t.removeEventListener("visibleChanged",e)}))}))}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach((e=>e())),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth("".concat(e,"px")),this.comp.addOrRemoveCssClass("ag-hidden",0===e)}},wn=class extends Vo{constructor(e,t,i){super(e,t,i),this.onSuppressColMoveChange=()=>{if(!this.isAlive()||this.isSuppressMoving())this.removeDragSource();else if(!this.dragSource){const e=this.getGui();this.setDragSource(e)}},this.column=e}setComp(e,t,i){this.comp=e,this.setGui(t),this.displayName=this.beans.columnNameService.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.addDestroyFunc((()=>{this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature))})),this.setupUserComp(),this.addHeaderMouseListeners();const s=this.getParentRowCtrl().getPinned(),o=this.column.getProvidedColumnGroup().getLeafColumns();this.createManagedBean(new Ho(o,t)),this.createManagedBean(new Ao(this.column,t,this.beans)),this.createManagedBean(new Cn(e,this.column)),this.resizeFeature=this.createManagedBean(new fn(e,i,s,this.column)),this.createManagedBean(new Zs(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners()}resizeHeader(e,t){if(!this.resizeFeature)return;const i=this.resizeFeature.getInitialValues(t);this.resizeFeature.resizeColumns(i,i.resizeStartWidth+e,"uiColumnResized",!0)}moveHeader(e){const{beans:t,eGui:i,column:s,gos:o,ctrlsService:r}=this,l=o.get("enableRtl"),a=0===e,d=this.getPinned(),c=i.getBoundingClientRect(),u=c.left,h=c.width,p=un(a!==l?u-20:u+h+20,d,!0,o,r),g=s.getGroupId(),m=this.focusService.getFocusedHeader();an({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,hDirection:e,xPosition:p,pinned:d,fromEnter:!1,fakeEvent:!1,gos:o,columnModel:t.columnModel,columnMoveService:t.columnMoveService,presentedColsService:t.visibleColsService});const v=s.getDisplayedLeafColumns(),f=a?v[0]:n(v);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(f,"auto"),!this.isAlive()&&m&&this.restoreFocus(g,s,m)}restoreFocus(e,t,i){const s=t.getLeafColumns();if(!s.length)return;const o=s[0].getParent();if(!o)return;const n=this.findGroupWidthId(o,e);n&&this.focusService.focusHeaderPosition({headerPosition:{...i,column:n}})}findGroupWidthId(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}return null}resizeLeafColumnsToFit(e){this.resizeFeature&&this.resizeFeature.resizeLeafColumnsToFit(e)}setupUserComp(){const e=this.gos.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:e=>{this.beans.columnModel.setColumnGroupOpened(this.column.getProvidedColumnGroup(),e,"gridInitializing")},setTooltip:(e,t)=>{this.setupTooltip(e,t)}}),t=this.userComponentFactory.getHeaderGroupCompDetails(e);this.comp.setUserCompDetails(t)}addHeaderMouseListeners(){const e=e=>this.handleMouseOverChange("mouseenter"===e.type);this.addManagedListeners(this.getGui(),{mouseenter:e,mouseleave:e,click:()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),contextmenu:e=>this.handleContextMenuMouseEvent(e,void 0,this.column.getProvidedColumnGroup())})}handleMouseOverChange(e){const t={type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()};this.eventService.dispatchEvent(t)}setupTooltip(e,t){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const i=this.column.getColGroupDef(),s="whenTruncated"===this.gos.get("tooltipShowMode"),o=this.eGui;t||!s||null!==i&&void 0!==i&&i.headerGroupComponent||(t=()=>{const e=o.querySelector(".ag-header-group-text");return!e||e.scrollWidth>e.clientWidth});const n={getColumn:()=>this.column,getGui:()=>o,getLocation:()=>"headerGroup",getTooltipValue:()=>null!==e&&void 0!==e?e:i&&i.headerTooltip,shouldDisplayTooltip:t};i&&(n.getColDef=()=>i),this.createManagedBean(new yi(n))}setupExpandable(){const e=this.column.getProvidedColumnGroup();this.refreshExpanded();const t=this.refreshExpanded.bind(this);this.addManagedListeners(e,{expandedChanged:t,expandableChanged:t})}refreshExpanded(){const{column:e}=this;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0)}getColId(){return this.column.getUniqueId()}addClasses(){const e=ko(this.column.getColGroupDef(),this.gos,null,this.column);if(this.column.isPadding()){e.push("ag-header-group-cell-no-group");this.column.getLeafColumns().every((e=>e.isSpanHeaderHeight()))&&e.push("ag-header-span-height")}else e.push("ag-header-group-cell-with-group");e.forEach((e=>this.comp.addOrRemoveCssClass(e,!0)))}setupMovingCss(){const e=this.column.getProvidedColumnGroup().getLeafColumns(),t=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving());e.forEach((e=>{this.addManagedListeners(e,{movingChanged:t})})),t()}onFocusIn(e){if(!this.eGui.contains(e.relatedTarget)){const e=this.getRowIndex();this.beans.focusService.setFocusedHeader(e,this.column)}}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();if(this.expandable&&t&&e.key===Vi.ENTER){const e=this.column,t=!e.isExpanded();this.beans.columnModel.setColumnGroupOpened(e.getProvidedColumnGroup(),t,"uiColumnExpanded")}}setDragSource(e){if(!this.isAlive()||this.isSuppressMoving())return;if(this.removeDragSource(),!e)return;const{beans:t,column:i,displayName:s,gos:o,dragAndDropService:n}=this,{columnModel:r}=t,l=i.getProvidedColumnGroup().getLeafColumns();let a=!o.get("suppressDragLeaveHidesColumns");const d=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>a?"hide":"notAllowed",dragItemName:s,getDragItem:()=>this.getDragItemForGroup(i),onDragStarted:()=>{a=!o.get("suppressDragLeaveHidesColumns"),l.forEach((e=>e.setMoving(!0,"uiColumnDragged")))},onDragStopped:()=>l.forEach((e=>e.setMoving(!1,"uiColumnDragged"))),onGridEnter:e=>{if(a){var t;const i=(null===e||void 0===e||null===(t=e.columns)||void 0===t?void 0:t.filter((e=>!e.getColDef().lockVisible)))||[];r.setColsVisible(i,!0,"uiColumnMoved")}},onGridExit:e=>{if(a){var t;const i=(null===e||void 0===e||null===(t=e.columns)||void 0===t?void 0:t.filter((e=>!e.getColDef().lockVisible)))||[];r.setColsVisible(i,!1,"uiColumnMoved")}}};n.addDragSource(d,!0)}getDragItemForGroup(e){const t=e.getProvidedColumnGroup().getLeafColumns(),i={};t.forEach((e=>i[e.getId()]=e.isVisible()));const s=[];return this.beans.visibleColsService.getAllCols().forEach((e=>{t.indexOf(e)>=0&&(s.push(e),c(t,e))})),t.forEach((e=>s.push(e))),{columns:s,visibleState:i}}isSuppressMoving(){let e=!1;this.column.getLeafColumns().forEach((t=>{(t.getColDef().suppressMovable||t.getColDef().lockPosition)&&(e=!0)}));return e||this.gos.get("suppressMovableColumns")}},Sn=0,yn=class extends F{constructor(e,t,i){super(),this.instanceId=Sn++,this.rowIndex=e,this.pinned=t,this.type=i;const s="group"==i?"ag-header-row-column-group":"filter"==i?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass="ag-header-row ".concat(s)}wireBeans(e){this.beans=e}postConstruct(){this.isPrintLayout=this.gos.isDomLayout("print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}getInstanceId(){return this.instanceId}areCellsRendered(){return!!this.comp&&this.getHeaderCellCtrls().every((e=>null!=e.getGui()))}setComp(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.comp=e,t&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners()}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(){const e=this.onRowHeightChanged.bind(this);this.addManagedEventListeners({columnResized:this.onColumnResized.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:e=>this.onVirtualColumnsChanged(e.afterScroll),columnHeaderHeightChanged:e,gridStylesChanged:e,advancedFilterEnabledChanged:e}),this.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),this.addManagedPropertyListener("ensureDomOrder",(e=>this.isEnsureDomOrder=e.currentValue)),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e)}getHeaderCellCtrl(e){if(this.headerCellCtrls)return N(this.headerCellCtrls).find((t=>t.getColumnGroupChild()===e))}onDisplayedColumnsChanged(){this.isPrintLayout=this.gos.isDomLayout("print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){const e=this.getWidthForRow();this.comp.setWidth("".concat(e,"px"))}getWidthForRow(){const{visibleColsService:e}=this.beans;if(this.isPrintLayout){return null!=this.pinned?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null)}return e.getContainerWidth(this.pinned)}onRowHeightChanged(){const{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){const{columnModel:e,filterManager:t}=this.beans;let i=e.getHeaderRowCount();const s=[];let o=0;null!==t&&void 0!==t&&t.hasFloatingFilters()&&(i++,o=1);const n=e.getColumnGroupHeaderRowHeight(),r=e.getColumnHeaderRowHeight(),l=i-(1+o);for(let d=0;d<l;d++)s.push(n);s.push(r);for(let d=0;d<o;d++)s.push(e.getFloatingFiltersHeight());let a=0;for(let d=0;d<this.rowIndex;d++)a+=s[d];return{topOffset:a,rowHeight:s[this.rowIndex]}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.getHeaderCtrls(),i=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,i,e)}getHeaderCtrls(){const e=this.headerCellCtrls;this.headerCellCtrls=new Map;const t=this.getColumnsInViewport();for(const s of t)this.recycleAndCreateHeaderCtrls(s,e);const i=e=>{const{focusService:t,visibleColsService:i}=this.beans;if(!t.isHeaderWrapperFocused(e))return!1;return i.isVisible(e.getColumnGroupChild())};if(e)for(const[s,o]of e){i(o)?this.headerCellCtrls.set(s,o):this.destroyBean(o)}return this.getHeaderCellCtrls()}getHeaderCellCtrls(){var e,t;return Array.from(null!==(e=null===(t=this.headerCellCtrls)||void 0===t?void 0:t.values())&&void 0!==e?e:[])}recycleAndCreateHeaderCtrls(e,t){if(!this.headerCellCtrls)return;if(e.isEmptyGroup())return;const i=e.getUniqueId();let s;t&&(s=t.get(i),t.delete(i));if(s&&s.getColumnGroupChild()!=e&&(this.destroyBean(s),s=void 0),null==s)switch(this.type){case"filter":s=this.createBean(this.beans.ctrlsFactory.getInstance("headerFilterCell",e,this.beans,this));break;case"group":s=this.createBean(new wn(e,this.beans,this));break;default:s=this.createBean(new vn(e,this.beans,this))}this.headerCellCtrls.set(i,s)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(null!=this.pinned)return[];let e=[];const t=this.getActualDepth(),{columnViewportService:i}=this.beans;return["left",null,"right"].forEach((s=>{const o=i.getHeadersToRender(s,t);e=e.concat(o)})),e}getActualDepth(){return"filter"==this.type?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.columnViewportService.getHeadersToRender(this.pinned,this.getActualDepth())}findHeaderCellCtrl(e){if(!this.headerCellCtrls)return;return this.getHeaderCellCtrls().find((t=>t.getColumnGroupChild()==e))}focusHeader(e,t){const i=this.findHeaderCellCtrl(e);if(!i)return!1;return i.focus(t)}destroy(){this.headerCellCtrls&&this.headerCellCtrls.forEach((e=>{this.destroyBean(e)})),this.headerCellCtrls=void 0,super.destroy()}},bn=class extends F{constructor(e){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=e}wireBeans(e){this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.focusService=e.focusService,this.filterManager=e.filterManager}setComp(e,t){this.comp=e,this.eViewport=t,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport);const i=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),displayedColumnsChanged:i,advancedFilterEnabledChanged:i}),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=new Ci,i=this.focusService.getFocusHeaderToUseAfterRefresh();(()=>{const e=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let i=0;i<e;i++){const e=this.createBean(new yn(t.next(),this.pinned,"group"));this.groupsRowCtrls.push(e)}})(),(()=>{const i=t.next(),s=!this.hidden&&(null==this.columnsRowCtrl||!e||this.columnsRowCtrl.getRowIndex()!==i);(s||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),s&&(this.columnsRowCtrl=this.createBean(new yn(i,this.pinned,"column")))})(),(()=>{var i;this.includeFloatingFilter=!(null===(i=this.filterManager)||void 0===i||!i.hasFloatingFilters())&&!this.hidden;const s=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter)return void s();const o=t.next();if(this.filtersRowCtrl){const t=this.filtersRowCtrl.getRowIndex()!==o;e&&!t||s()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new yn(o,this.pinned,"filter")))})();const s=this.getAllCtrls();this.comp.setCtrls(s),this.restoreFocusOnHeader(i)}getHeaderCtrlForColumn(e){if(Y(e)){if(!this.columnsRowCtrl)return;return this.columnsRowCtrl.getHeaderCellCtrl(e)}if(0!==this.groupsRowCtrls.length)for(let t=0;t<this.groupsRowCtrls.length;t++){const i=this.groupsRowCtrls[t].getHeaderCellCtrl(e);if(i)return i}}getHtmlElementForColumnHeader(e){const t=this.getHeaderCtrlForColumn(e);return t?t.getGui():null}getRowType(e){const t=this.getAllCtrls()[e];return t?t.getType():void 0}focusHeader(e,t,i){const s=this.getAllCtrls()[e];return!!s&&s.focusHeader(t,i)}getViewport(){return this.eViewport}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}setupDragAndDrop(e){const t=new pn(this.pinned,e);this.createManagedBean(t)}restoreFocusOnHeader(e){if(!e)return;const{column:t}=e;t.getPinned()==this.pinned&&this.focusService.focusHeaderPosition({headerPosition:e})}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){var e;const t=(null===(e=this.filterManager)||void 0===e?void 0:e.hasFloatingFilters())&&!this.hidden;this.includeFloatingFilter!==t&&this.refresh(!0)}setupCenterWidth(){null==this.pinned&&this.createManagedBean(new rn((e=>this.comp.setCenterWidth("".concat(e,"px"))),!0))}setupPinnedWidth(){if(null==this.pinned)return;const e="left"===this.pinned,t="right"===this.pinned;this.hidden=!0;const i=()=>{const i=e?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(null==i)return;const s=0==i,o=this.hidden!==s,n=this.gos.get("enableRtl"),r=this.gos.getScrollbarWidth(),l=this.scrollVisibleService.isVerticalScrollShowing()&&(n&&e||!n&&t)?i+r:i;this.comp.setPinnedContainerWidth("".concat(l,"px")),this.comp.setDisplayed(!s),o&&(this.hidden=s,this.refresh())};this.addManagedEventListeners({leftPinnedWidthChanged:i,rightPinnedWidthChanged:i,scrollVisibilityChanged:i,scrollbarWidthChanged:i})}},Rn=class extends F{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.getDomLayout(),t={autoHeight:"autoHeight"===e,normal:"normal"===e,print:"print"===e},i=t.autoHeight?"ag-layout-auto-height":t.print?"ag-layout-print":"ag-layout-normal";this.view.updateLayoutClasses(i,t)}getDomLayout(){var e;const t=null!==(e=this.gos.get("domLayout"))&&void 0!==e?e:"normal";return-1===["normal","print","autoHeight"].indexOf(t)?(ie("".concat(t," is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.")),"normal"):t}},Fn=class extends Fi{constructor(){super('\n            <div class="ag-overlay" role="presentation">\n                <div class="ag-overlay-panel" role="presentation">\n                    <div class="ag-overlay-wrapper" data-ref="eOverlayWrapper" role="presentation"></div>\n                </div>\n            </div>'),this.eOverlayWrapper=Ri,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeOverlayWrapperCssClass=null}wireBeans(e){this.overlayService=e.overlayService}updateLayoutClasses(e,t){const i=this.eOverlayWrapper.classList;i.toggle("ag-layout-auto-height",t.autoHeight),i.toggle("ag-layout-normal",t.normal),i.toggle("ag-layout-print",t.print)}postConstruct(){this.createManagedBean(new Rn(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.registerOverlayWrapperComp(this)}setWrapperTypeClass(e){const t=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&t.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=e,t.toggle(e,!0)}showOverlay(e,t,i){this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.activePromise=e,null===e||void 0===e||e.then((t=>{if(this.activePromise===e){if(this.activePromise=null,t&&this.activeOverlay!=t&&(this.eOverlayWrapper.appendChild(t.getGui()),this.activeOverlay=t,i)){const e=t;this.updateListenerDestroyFunc=this.addManagedPropertyListener(i,(t=>{var i;let{currentValue:s}=t;null===(i=e.refresh)||void 0===i||i.call(e,this.gos.addGridCommonParams({...null!==s&&void 0!==s?s:{}}))}))}}else this.activeOverlay!==t&&(this.destroyBean(t),t=null)})),this.setDisplayed(!0,{skipAriaHidden:!0})}destroyActiveOverlay(){this.activePromise=null;const e=this.activeOverlay;if(!e)return;this.activeOverlay=null;const t=this.updateListenerDestroyFunc;t&&(t(),this.updateListenerDestroyFunc=null),this.destroyBean(e),ri(this.eOverlayWrapper)}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.destroyActiveOverlay(),super.destroy()}},En=class extends Fi{constructor(e,t){super(),this.direction=t,this.eViewport=Ri,this.eContainer=Ri,this.hideTimeout=null,this.setTemplate(e)}wireBeans(e){this.animationFrameService=e.animationFrameService}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",Vt()||Ht())}initialiseInvisibleScrollbar(){void 0===this.invisibleScrollbar&&(this.invisibleScrollbar=_t(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=this.getGui(),t=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0),i=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:i,touchend:i})}onScrollVisibilityChanged(){void 0===this.invisibleScrollbar&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame((()=>this.setScrollVisible()))}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(null!==this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout((()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null}),400)}})}attemptSettingScrollPosition(e){const t=this.getViewport();ue((()=>di(t)),(()=>this.setScrollPosition(e)),100)}getViewport(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(e){this.addManagedElementListeners(this.getViewport(),{scroll:e})}},xn=class extends En{constructor(){super('<div class="ag-body-horizontal-scroll" aria-hidden="true">\n            <div class="ag-horizontal-left-spacer" data-ref="eLeftSpacer"></div>\n            <div class="ag-body-horizontal-scroll-viewport" data-ref="eViewport">\n                <div class="ag-body-horizontal-scroll-container" data-ref="eContainer"></div>\n            </div>\n            <div class="ag-horizontal-right-spacer" data-ref="eRightSpacer"></div>\n        </div>',"horizontal"),this.eLeftSpacer=Ri,this.eRightSpacer=Ri}wireBeans(e){super.wireBeans(e),this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.ctrlsService.register("fakeHScrollComp",this),this.createManagedBean(new rn((e=>this.eContainer.style.width="".concat(e,"px")))),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}initialiseInvisibleScrollbar(){void 0===this.invisibleScrollbar&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;const e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom="".concat(e,"px")}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleService.isVerticalScrollShowing();let t=this.visibleColsService.getDisplayedColumnsRightWidth();const i=!this.enableRtl&&e,s=this.gos.getScrollbarWidth();i&&(t+=s),hi(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=s);let o=this.visibleColsService.getColsLeftWidth();this.enableRtl&&e&&(o+=s),hi(this.eLeftSpacer,o),this.eLeftSpacer.classList.toggle("ag-scroller-corner",o<=s)}setScrollVisible(){const e=this.scrollVisibleService.isHorizontalScrollShowing(),t=this.invisibleScrollbar,i=this.gos.get("suppressHorizontalScroll"),s=e&&this.gos.getScrollbarWidth()||0,o=i?0:0===s&&t?16:s;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),pi(this.getGui(),o),pi(this.eViewport,o),pi(this.eContainer,o),this.setDisplayed(e,{skipAriaHidden:!0})}getScrollPosition(){return oi(this.getViewport(),this.enableRtl)}setScrollPosition(e){di(this.getViewport())||this.attemptSettingScrollPosition(e),ni(this.getViewport(),e,this.enableRtl)}},Pn=class extends F{wireBeans(e){this.maxDivHeightScaler=e.rowContainerHeightService}constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this)})}onHeightChanged(){const e=this.maxDivHeightScaler.getUiContainerHeight(),t=null!=e?"".concat(e,"px"):"";this.eContainer.style.height=t,this.eViewport&&(this.eViewport.style.height=t)}},Mn=class extends En{wireBeans(e){super.wireBeans(e),this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}constructor(){super('<div class="ag-body-vertical-scroll" aria-hidden="true">\n            <div class="ag-body-vertical-scroll-viewport" data-ref="eViewport">\n                <div class="ag-body-vertical-scroll-container" data-ref="eContainer"></div>\n            </div>\n        </div>',"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new Pn(this.eContainer)),this.ctrlsService.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this)})}setScrollVisible(){const e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.invisibleScrollbar,i=e&&this.gos.getScrollbarWidth()||0,s=0===i&&t?16:i;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),hi(this.getGui(),s),hi(this.eViewport,s),hi(this.eContainer,s),this.setDisplayed(e,{skipAriaHidden:!0})}onRowContainerHeightChanged(){const{ctrlsService:e}=this,t=e.getGridBodyCtrl().getBodyViewportElement(),i=this.getScrollPosition(),s=t.scrollTop;i!=s&&this.setScrollPosition(s,!0)}getScrollPosition(){return this.getViewport().scrollTop}setScrollPosition(e,t){t||di(this.getViewport())||this.attemptSettingScrollPosition(e),this.getViewport().scrollTop=e}},Dn=class extends F{constructor(e){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.eBodyViewport=e,this.resetLastHScrollDebounced=de((()=>this.lastScrollSource[1]=null),500),this.resetLastVScrollDebounced=de((()=>this.lastScrollSource[0]=null),500)}wireBeans(e){this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.rowModel=e.rowModel,this.heightScaler=e.rowContainerHeightService,this.rowRenderer=e.rowRenderer,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)}),this.ctrlsService.whenReady((e=>{this.centerRowsCtrl=e.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()}))}addScrollListener(){const{fakeHScrollComp:e,fakeVScrollComp:t}=this.ctrlsService.getParams();this.addManagedElementListeners(this.centerRowsCtrl.getViewportElement(),{scroll:this.onHScroll.bind(this)}),e.onScrollCallback(this.onFakeHScroll.bind(this));const i=this.gos.get("debounceVerticalScrollbar"),s=i?de(this.onVScroll.bind(this),100):this.onVScroll.bind(this),o=i?de(this.onFakeVScroll.bind(this),100):this.onFakeVScroll.bind(this);this.addManagedElementListeners(this.eBodyViewport,{scroll:s}),t.onScrollCallback(o)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){if(null==this.centerRowsCtrl)return;void 0===e&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft());const t=this.enableRtl?e:-e,{topCenter:i,stickyTopCenter:s,stickyBottomCenter:o,centerHeader:n,bottomCenter:r,fakeHScrollComp:l}=this.ctrlsService.getParams();n.setHorizontalScroll(-t),r.setContainerTranslateX(t),i.setContainerTranslateX(t),s.setContainerTranslateX(t),o.setContainerTranslateX(t);const a=this.centerRowsCtrl.getViewportElement(),d=0===this.lastScrollSource[1];e=Math.abs(e),d?l.setScrollPosition(e):ni(a,e,this.enableRtl)}isControllingScroll(e,t){return null==this.lastScrollSource[t]?(this.lastScrollSource[t]=e,!0):this.lastScrollSource[t]===e}onFakeHScroll(){this.isControllingScroll(1,1)&&this.onHScrollCommon(1)}onHScroll(){this.isControllingScroll(0,1)&&this.onHScrollCommon(0)}onHScrollCommon(e){const t=this.centerRowsCtrl.getViewportElement(),{scrollLeft:i}=t;if(this.shouldBlockScrollUpdate(1,i,!0))return;let s;s=0===e?oi(t,this.enableRtl):this.ctrlsService.get("fakeHScrollComp").getScrollPosition(),this.doHorizontalScroll(Math.round(s)),this.resetLastHScrollDebounced()}onFakeVScroll(){this.isControllingScroll(1,0)&&this.onVScrollCommon(1)}onVScroll(){this.isControllingScroll(0,0)&&this.onVScrollCommon(0)}onVScrollCommon(e){let t;t=0===e?this.eBodyViewport.scrollTop:this.ctrlsService.get("fakeVScrollComp").getScrollPosition(),this.shouldBlockScrollUpdate(0,t,!0)||(this.animationFrameService.setScrollTop(t),this.nextScrollTop=t,0===e?this.ctrlsService.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,this.gos.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(e){const t=this.ctrlsService.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(e){const t={type:"bodyScroll",direction:1===e?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout((()=>{const e={...t,type:"bodyScrollEnd"};this.eventService.dispatchEvent(e)}),100)}shouldBlockScrollUpdate(e,t){return!(arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&!Ht())&&(0===e?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t))}shouldBlockVerticalScroll(e){const t=$t(this.eBodyViewport),{scrollHeight:i}=this.eBodyViewport;return e<0||e+t>i}shouldBlockHorizontalScroll(e){const t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:i}=this.centerRowsCtrl.getViewportElement();if(this.enableRtl&&si()){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>i}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScrollCommon(0)}scrollGridIfNeeded(){const e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e}setHorizontalScrollPosition(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.centerRowsCtrl.getViewportElement().scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(e=this.enableRtl&&si()?e>0?0:i:Math.min(Math.max(e,0),i)),ni(this.centerRowsCtrl.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.eBodyViewport.scrollTop=e}getVScrollPosition(){this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight;return{top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowsCtrl.isHorizontalScrollShowing()}scrollHorizontally(e){const t=this.centerRowsCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.getViewportElement().scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=this.rowModel.getRowCount();let s=-1;for(let o=0;o<i;o++){const t=this.rowModel.getRow(o);if("function"===typeof e){if(t&&e(t)){s=o;break}}else if(e===t||e===t.data){s=o;break}}s>=0&&this.ensureIndexVisible(s,t)}ensureIndexVisible(e,t){if(this.gos.isDomLayout("print"))return;const i=this.rowModel.getRowCount();if("number"!==typeof e||e<0||e>=i)return void ie("Invalid row index for ensureIndexVisible: "+e);const s=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming((()=>{var i;s||(null===(i=this.paginationService)||void 0===i||i.goToPageWithIndex(e));const o=this.ctrlsService.getGridBodyCtrl(),n=o.getStickyTopHeight(),r=o.getStickyBottomHeight(),l=this.rowModel.getRow(e);let a;do{const e=l.rowTop,i=l.rowHeight,s=this.pageBoundsService.getPixelOffset(),o=l.rowTop-s,d=o+l.rowHeight,c=this.getVScrollPosition(),u=this.heightScaler.getDivStretchOffset(),h=c.top+u,p=c.bottom+u,g=p-h,m=this.heightScaler.getScrollPositionForPixel(o),v=this.heightScaler.getScrollPositionForPixel(d-g),f=Math.min((m+v)/2,o);let C=null;"top"===t?C=m:"bottom"===t?C=v:"middle"===t?C=f:h+n>o?C=m-n:p-r<d&&(C=v+r),null!==C&&(this.setVerticalScrollPosition(C),this.rowRenderer.redraw({afterScroll:!0})),a=e!==l.rowTop||i!==l.rowHeight}while(a);this.animationFrameService.flushAllFrames()}))}ensureColumnVisible(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto";const i=this.columnModel.getCol(e);if(!i)return;if(i.isPinned())return;if(!this.visibleColsService.isColDisplayed(i))return;const s=this.getPositionedHorizontalScroll(i,t);this.getFrameworkOverrides().wrapIncoming((()=>{null!==s&&this.centerRowsCtrl.setCenterViewportScrollLeft(s),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()}))}setScrollPosition(e,t){this.getFrameworkOverrides().wrapIncoming((()=>{this.centerRowsCtrl.setCenterViewportScrollLeft(t),this.setVerticalScrollPosition(e),this.rowRenderer.redraw({afterScroll:!0}),this.animationFrameService.flushAllFrames()}))}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:i,columnAfterEnd:s}=this.isColumnOutsideViewport(e),o=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),n=this.centerRowsCtrl.getCenterWidth(),r=this.enableRtl;let l=(r?i:s)||o,a=r?s:i;"auto"!==t&&(l="start"===t,a="end"===t);const d="middle"===t;if(l||a||d){const{colLeft:t,colMiddle:i,colRight:s}=this.getColumnBounds(e);return d?i-n/2:l?r?s:t:r?t-n:s-n}return null}isColumnOutsideViewport(e){const{start:t,end:i}=this.getViewportBounds(),{colLeft:s,colRight:o}=this.getColumnBounds(e),n=this.enableRtl;return{columnBeforeStart:n?t>o:i<o,columnAfterEnd:n?i<s:t>s}}getColumnBounds(e){const t=this.enableRtl,i=this.visibleColsService.getBodyContainerWidth(),s=e.getActualWidth(),o=e.getLeft(),n=t?-1:1,r=t?i-o:o;return{colLeft:r,colMiddle:r+s/2*n,colRight:r+s*n}}getViewportBounds(){const e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft();return{start:t,end:e+t,width:e}}},In="ag-force-vertical-scroll",Tn=class extends F{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.menuService=e.menuService,this.headerNavigationService=e.headerNavigationService,this.dragAndDropService=e.dragAndDropService,this.pinnedRowModel=e.pinnedRowModel,this.rowRenderer=e.rowRenderer,this.popupService=e.popupService,this.mouseEventService=e.mouseEventService,this.rowModel=e.rowModel,this.filterManager=e.filterManager,this.environment=e.environment}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(e,t,i,s,o,n,r){var l;this.comp=e,this.eGridBody=t,this.eBodyViewport=i,this.eTop=s,this.eBottom=o,this.eStickyTop=n,this.eStickyBottom=r,this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",(e=>this.setCellTextSelection(e.currentValue))),this.createManagedBean(new Rn(this.comp)),this.bodyScrollFeature=this.createManagedBean(new Dn(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([s,i,o,n,r]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),null===(l=this.filterManager)||void 0===l||l.setupAdvancedFilterHeaderComp(s),this.ctrlsService.register("gridBodyCtrl",this)}getComp(){return this.comp}addEventListeners(){this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),pinnedRowDataChanged:this.setFloatingHeights.bind(this),pinnedHeightChanged:this.setFloatingHeights.bind(this),headerHeightChanged:this.onHeaderHeightChanged.bind(this)})}addFocusListeners(e){e.forEach((e=>{this.addManagedElementListeners(e,{focusin:t=>{const{target:i}=t,s=Qt(i,"ag-root",e);e.classList.toggle("ag-has-focus",!s)},focusout:t=>{const{target:i,relatedTarget:s}=t,o=e.contains(s),n=Qt(s,"ag-root",e);Qt(i,"ag-root",e)||o&&!n||e.classList.remove("ag-has-focus")}})}))}setColumnMovingCss(e){this.comp.setColumnMovingCss("ag-column-moving",e)}setCellTextSelection(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.comp.setCellSelectableCss("ag-selectable",e)}onScrollVisibilityChanged(){const e=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(e),this.setStickyWidth(e),this.setStickyBottomOffsetBottom();const t=e&&this.gos.getScrollbarWidth()||0,i=_t()?16:0,s="calc(100% + ".concat(t+i,"px)");this.animationFrameService.requestAnimationFrame((()=>this.comp.setBodyViewportWidth(s)))}onGridColumnsChanged(){const e=this.columnModel.getCols();this.comp.setColumnCount(e.length)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;const e=e=>{const i=e.relatedTarget;if(null===zt(i))return void this.rowRenderer.stopEditing();let s=t.some((e=>e.contains(i)))&&this.mouseEventService.isElementInThisGrid(i);if(!s){const e=this.popupService;s=e.getActivePopups().some((e=>e.contains(i)))||e.isElementWithinCustomPopup(i)}s||this.rowRenderer.stopEditing()},t=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom];t.forEach((t=>this.addManagedElementListeners(t,{focusout:e})))}updateRowCount(){var e,t;const i=this.headerNavigationService.getHeaderRowCount()+(null!==(e=null===(t=this.filterManager)||void 0===t?void 0:t.getHeaderRowCount())&&void 0!==e?e:0),s=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,o=-1===s?-1:i+s;this.comp.setRowCount(o)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const e=this.gos.get("alwaysShowVerticalScroll"),t=e?In:null,i=this.gos.isDomLayout("normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||i&&(s=this.eBodyViewport).clientHeight<s.scrollHeight;var s}setupRowAnimationCssClass(){let e=this.environment.hasMeasuredSizes();const t=()=>{const t=e&&this.gos.isAnimateRows()&&!this.rowContainerHeightService.isStretching(),i=t?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(i,t)};t(),this.addManagedEventListeners({heightScaleChanged:t}),this.addManagedPropertyListener("animateRows",t),this.addManagedEventListeners({gridStylesChanged:()=>{!e&&this.environment.hasMeasuredSizes()&&(e=!0,t())}})}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){const e=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(this.eBodyViewport,{contextmenu:e}),this.mockContextMenuForIPad(e),this.addManagedElementListeners(this.eBodyViewport,{wheel:this.onBodyViewportWheel.bind(this)}),this.addManagedElementListeners(this.eStickyTop,{wheel:this.onStickyWheel.bind(this)}),this.addManagedElementListeners(this.eStickyBottom,{wheel:this.onStickyWheel.bind(this)}),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){const e=this.eBodyViewport.querySelector(".ag-full-width-container"),t=this.eBodyViewport.querySelector(".ag-center-cols-viewport");e&&t&&this.addManagedElementListeners(e,{wheel:e=>this.onFullWidthContainerWheel(e,t)})}onFullWidthContainerWheel(e,t){!e.deltaX||Math.abs(e.deltaY)>Math.abs(e.deltaX)||!this.mouseEventService.isEventFromThisGrid(e)||(e.preventDefault(),t.scrollBy({left:e.deltaX}))}onBodyViewportContextMenu(e,t,i){if(!e&&!i)return;if(this.gos.get("preventDefaultOnContextMenu")){(e||i).preventDefault()}const{target:s}=e||t;s!==this.eBodyViewport&&s!==this.ctrlsService.get("center").getViewportElement()||this.menuService.showContextMenu({mouseEvent:e,touchEvent:i,value:null,anchorToElement:this.eGridBody})}mockContextMenuForIPad(e){if(!Ht())return;const t=new Di(this.eBodyViewport);this.addManagedListeners(t,{longTap:t=>{e(void 0,t.touchStart,t.touchEvent)}}),this.addDestroyFunc((()=>t.destroy()))}onBodyViewportWheel(e){this.gos.get("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&e.preventDefault()}onStickyWheel(e){e.preventDefault(),e.offsetY&&this.scrollVertically(e.deltaY)}getGui(){return this.eGridBody}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new ks(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)}getRowDragFeature(){return this.rowDragFeature}setFloatingHeights(){const{pinnedRowModel:e}=this,t=e.getPinnedTopTotalHeight(),i=e.getPinnedBottomTotalHeight();this.comp.setTopHeight(t),this.comp.setBottomHeight(i),this.comp.setTopDisplay(t?"inherit":"none"),this.comp.setBottomDisplay(i?"inherit":"none"),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.comp.setStickyTopHeight("".concat(e,"px")),this.stickyTopHeight=e}getStickyTopHeight(){return this.stickyTopHeight}setStickyBottomHeight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.comp.setStickyBottomHeight("".concat(e,"px")),this.stickyBottomHeight=e}getStickyBottomHeight(){return this.stickyBottomHeight}setStickyWidth(e){if(e){const e=this.gos.getScrollbarWidth();this.comp.setStickyTopWidth("calc(100% - ".concat(e,"px)")),this.comp.setStickyBottomWidth("calc(100% - ".concat(e,"px)"))}else this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%")}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){var e,t;const i=this.ctrlsService.get("gridHeaderCtrl").getHeaderHeight()+(null!==(e=null===(t=this.filterManager)||void 0===t?void 0:t.getHeaderHeight())&&void 0!==e?e:0),s=this.pinnedRowModel.getPinnedTopTotalHeight();let o=0;i>0&&(o+=i),s>0&&(o+=s),o>0&&(o+=1),this.comp.setStickyTopTop("".concat(o,"px"))}setStickyBottomOffsetBottom(){const e=this.pinnedRowModel.getPinnedBottomTotalHeight()+(this.scrollVisibleService.isHorizontalScrollShowing()&&this.gos.getScrollbarWidth()||0);this.comp.setStickyBottomBottom("".concat(e,"px"))}sizeColumnsToFit(e,t){const i=this.isVerticalScrollShowing()?this.gos.getScrollbarWidth():0,s=Jt(this.eGridBody)-i;s>0?this.columnSizeService.sizeColumnsToFit(s,"sizeColumnsToFit",!1,e):void 0===t?window.setTimeout((()=>{this.sizeColumnsToFit(e,100)}),0):100===t?window.setTimeout((()=>{this.sizeColumnsToFit(e,500)}),100):500===t?window.setTimeout((()=>{this.sizeColumnsToFit(e,-1)}),500):ie("tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(e){this.eBodyViewport.addEventListener("scroll",e,{passive:!0})}removeScrollEventListener(e){this.eBodyViewport.removeEventListener("scroll",e)}},An=class extends F{wireBeans(e){this.ctrlsService=e.ctrlsService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.columnViewportService=e.columnViewportService}constructor(e){super(),this.centerContainerCtrl=e}postConstruct(){this.ctrlsService.whenReady((e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()})),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],(()=>{this.checkViewportAndScrolls()}))}listenForResize(){const e=()=>this.onCenterViewportResized();this.centerContainerCtrl.registerViewportResizeListener(e),this.gridBodyCtrl.registerBodyViewportResizeListener(e)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const e=this.centerContainerCtrl.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnSizeService.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}keepPinnedColumnsNarrowerThanViewport(){const e=Jt(this.gridBodyCtrl.getBodyViewportElement());if(e<=50)return;let t=this.getPinnedColumnsOverflowingViewport(e-50);const i=this.gos.getCallback("processUnpinnedColumns");if(t.length){if(i){t=i({columns:t,viewportWidth:e})}this.columnModel.setColsPinned(t,null,"viewportSizeFeature")}}getPinnedColumnsOverflowingViewport(e){const t=this.pinnedWidthService.getPinnedRightWidth()+this.pinnedWidthService.getPinnedLeftWidth();if(t<e)return[];const i=[...this.visibleColsService.getLeftCols()],s=[...this.visibleColsService.getRightCols()];let o=0,n=0;const r=[];let l=t-0-e;for(;(n<i.length||o<s.length)&&l>0;){if(o<s.length){const e=s[o++];l-=e.getActualWidth(),r.push(e)}if(n<i.length&&l>0){const e=i[n++];l-=e.getActualWidth(),r.push(e)}}return r}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=$t(this.gridBodyCtrl.getBodyViewportElement());if(this.bodyHeight!==e){this.bodyHeight=e;const t={type:"bodyHeightChanged"};this.eventService.dispatchEvent(t)}}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){const e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.columnViewportService.setScrollPosition(e,t)}},kn=class extends F{wireBeans(e){this.dragService=e.dragService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){if(!this.rangeService)return;this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListener("enableRangeSelection",(e=>{e.currentValue?this.enableFeature():this.disableFeature()})),this.addDestroyFunc((()=>this.disableFeature()));this.gos.get("enableRangeSelection")&&this.enableFeature()}enableFeature(){this.dragService.addDragSource(this.params)}disableFeature(){this.dragService.removeDragSource(this.params)}},Ln=class extends Fi{constructor(){super('\n            <div class="ag-selection-checkbox" role="presentation">\n                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>\n            </div>',[_i]),this.eCheckbox=Ri}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.localeService.getLocaleTextFunc(),t=this.rowNode.isSelected(),i=Lt(e,t),[s,o]=this.rowNode.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],n=e(s,o);this.eCheckbox.setValue(t,!0),this.eCheckbox.setInputAriaLabel("".concat(n," (").concat(i,")"))}onClicked(e,t,i){return this.rowNode.setSelectedParams({newValue:e,rangeSelect:i.shiftKey,groupSelectsFiltered:t,event:i,source:"checkboxSelected"})}init(e){this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:e=>w(e),click:e=>{w(e);const t=this.gos.get("groupSelectsFiltered"),i=this.eCheckbox.getValue();if(this.shouldHandleIndeterminateState(i,t)){0===this.onClicked(!0,t,e||{})&&this.onClicked(!1,t,e)}else i?this.onClicked(!1,t,e):this.onClicked(!0,t,e||{})}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)});if(this.gos.get("isRowSelectable")||"function"===typeof this.getIsVisible()){const e=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(e,t){return t&&(void 0===this.eCheckbox.getPreviousValue()||void 0===e)&&this.gos.isRowModelType("clientSide")}showOrHideSelect(){var e,t;let i=this.rowNode.selectable;const s=this.getIsVisible();if(i)if("function"===typeof s){var o;const e=null===(o=this.overrides)||void 0===o?void 0:o.callbackParams;if(this.column){const t=this.column.createColumnFunctionCallbackParams(this.rowNode);i=s({...e,...t})}else i=s({...e,node:this.rowNode,data:this.rowNode.data})}else i=null!==s&&void 0!==s&&s;if(null===(e=this.column)||void 0===e?void 0:e.getColDef().showDisabledCheckboxes)return this.eCheckbox.setDisabled(!i),this.setVisible(!0),void this.setDisplayed(!0);null!==(t=this.overrides)&&void 0!==t&&t.removeHidden?this.setDisplayed(i):this.setVisible(i)}getIsVisible(){var e;return this.overrides?this.overrides.isVisible:null===(e=this.column)||void 0===e||null===(e=e.getColDef())||void 0===e?void 0:e.checkboxSelection}},Gn=class extends Fi{constructor(e,t,i){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=e,this.column=t,this.eCell=i}postConstruct(){this.getGui().appendChild(Pi("rowDrag",this.gos,null)),this.addGuiEventListener("mousedown",(e=>{e.stopPropagation()})),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const t=this.column.getColDef().dndSourceOnRowDrag;e.dataTransfer.setDragImage(this.eCell,0,0);const i=()=>{try{const t=JSON.stringify(this.rowNode.data);e.dataTransfer.setData("application/json",t),e.dataTransfer.setData("text/plain",t)}catch(t){}};if(t){t(this.gos.addGridCommonParams({rowNode:this.rowNode,dragEvent:e}))}else i()}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}},Nn=class extends F{constructor(e,t){super(),this.staticClasses=[],this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const e=this.column.getColDef(),{cellClassRules:t}=e,i=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:e,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(t===this.cellClassRules?void 0:this.cellClassRules,t,i,(e=>this.cellComp.addOrRemoveCssClass(e,!0)),(e=>this.cellComp.addOrRemoveCssClass(e,!1))),this.cellClassRules=t}applyUserStyles(){const e=this.column.getColDef();if(!e.cellStyle)return;let t;if("function"===typeof e.cellStyle){const i=this.beans.gos.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex});t=(0,e.cellStyle)(i)}else t=e.cellStyle;t&&this.cellComp.setUserStyles(t)}applyClassesFromColDef(){const e=this.column.getColDef(),t=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:e,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach((e=>this.cellComp.addOrRemoveCssClass(e,!1))),this.staticClasses=this.beans.stylingService.getStaticCellClasses(e,t),this.staticClasses.length&&this.staticClasses.forEach((e=>this.cellComp.addOrRemoveCssClass(e,!0)))}destroy(){super.destroy()}},On=class extends F{constructor(e,t,i,s,o){super(),this.cellCtrl=e,this.beans=t,this.rowNode=s,this.rowCtrl=o}setComp(e){this.eGui=e}onKeyDown(e){const t=e.key;switch(t){case Vi.ENTER:this.onEnterKeyDown(e);break;case Vi.F2:this.onF2KeyDown(e);break;case Vi.ESCAPE:this.onEscapeKeyDown(e);break;case Vi.TAB:this.onTabKeyDown(e);break;case Vi.BACKSPACE:case Vi.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case Vi.DOWN:case Vi.UP:case Vi.RIGHT:case Vi.LEFT:this.onNavigationKeyDown(e,t)}}onNavigationKeyDown(e,t){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(e):this.beans.navigationService.navigateToNextCell(e,t,this.cellCtrl.getCellPosition(),!0),e.preventDefault())}onShiftRangeSelect(e){if(!this.beans.rangeService)return;const t=this.beans.rangeService.extendLatestRangeInDirection(e);t&&this.beans.navigationService.ensureCellVisible(t)}onTabKeyDown(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){const{cellCtrl:i,beans:s,rowNode:o}=this,{gos:n,rangeService:r,eventService:l}=s;if(!i.isEditing()){if(l.dispatchEvent({type:"keyShortcutChangedCellStart"}),function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e===Vi.DELETE||!t&&e===Vi.BACKSPACE&&Vt()}(e,n.get("enableCellEditingOnBackspace"))){if(r&&n.get("enableRangeSelection"))r.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(i.isCellEditable()){var a;const e=i.getColumn(),t=null!==(a=this.beans.valueService.parseValue(e,o,"",o.getValueFromValueService(e)))&&void 0!==a?a:null;o.setDataValue(e,t,"cellClear")}}else i.startRowOrCellEdit(e,t);l.dispatchEvent({type:"keyShortcutChangedCellEnd"})}}onEnterKeyDown(e){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,e.shiftKey);else if(this.beans.gos.get("enterNavigatesVertically")){const t=e.shiftKey?Vi.UP:Vi.DOWN;this.beans.navigationService.navigateToNextCell(null,t,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(Vi.ENTER,e),this.cellCtrl.isEditing()&&e.preventDefault()}onF2KeyDown(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(Vi.F2,e)}onEscapeKeyDown(e){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(e){if(e.target!==this.eGui||this.cellCtrl.isEditing())return;const t=e.key;" "===t?this.onSpaceKeyDown(e):(this.cellCtrl.startRowOrCellEdit(t,e),e.preventDefault())}onSpaceKeyDown(e){const{gos:t}=this.beans;if(!this.cellCtrl.isEditing()&&t.isRowSelection()){const i=this.rowNode.isSelected(),s=!i;if(s||!t.get("suppressRowDeselection")){const t=this.beans.gos.get("groupSelectsFiltered"),o=this.rowNode.setSelectedParams({newValue:s,rangeSelect:e.shiftKey,groupSelectsFiltered:t,event:e,source:"spaceKey"});void 0===i&&0===o&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:t,event:e,source:"spaceKey"})}}e.preventDefault()}destroy(){super.destroy()}},Bn=class extends F{constructor(e,t,i){super(),this.cellCtrl=e,this.beans=t,this.column=i}onMouseEvent(e,t){if(!S(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t)}}onCellClicked(e){if(this.isDoubleClickOnIPad())return this.onCellDoubleClicked(e),void e.preventDefault();const{eventService:t,rangeService:i,gos:s}=this.beans,o=e.ctrlKey||e.metaKey;i&&o&&i.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&i.intersectLastRange(!0);const n=this.cellCtrl.createEvent(e,"cellClicked");t.dispatchEvent(n);const r=this.column.getColDef();r.onCellClicked&&window.setTimeout((()=>{this.beans.frameworkOverrides.wrapOutgoing((()=>{r.onCellClicked(n)}))}),0);!((s.get("singleClickEdit")||r.singleClickEdit)&&!s.get("suppressClickEdit"))||e.shiftKey&&0!=(null===i||void 0===i?void 0:i.getCellRanges().length)||this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!Ht()||y("dblclick"))return!1;const e=(new Date).getTime(),t=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,t}onCellDoubleClicked(e){const{column:t,beans:i,cellCtrl:s}=this,{eventService:o,frameworkOverrides:n,gos:r}=i,l=t.getColDef(),a=s.createEvent(e,"cellDoubleClicked");o.dispatchEvent(a),"function"===typeof l.onCellDoubleClicked&&window.setTimeout((()=>{n.wrapOutgoing((()=>{l.onCellDoubleClicked(a)}))}),0);!r.get("singleClickEdit")&&!r.get("suppressClickEdit")&&s.startRowOrCellEdit(null,e)}onMouseDown(e){const{ctrlKey:t,metaKey:i,shiftKey:s}=e,o=e.target,{cellCtrl:n,beans:r}=this,{eventService:l,rangeService:a,focusService:d,gos:c}=r;if(this.isRightClickInExistingRange(e))return;const u=a&&0!=a.getCellRanges().length;if(!s||!u){const t=c.get("enableCellTextSelection")&&e.defaultPrevented,i=(Gt()||t)&&!n.isEditing()&&!jt(o);n.focusCell(i)}if(s&&u&&!d.isCellFocused(n.getCellPosition())){e.preventDefault();const t=d.getFocusedCell();if(t){const{column:e,rowIndex:i,rowPinned:s}=t,o=r.rowRenderer.getRowByPosition({rowIndex:i,rowPinned:s}),n=null===o||void 0===o?void 0:o.getCellCtrl(e);null!==n&&void 0!==n&&n.isEditing()&&n.stopEditing(),d.setFocusedCell({column:e,rowIndex:i,rowPinned:s,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(o)){if(a){const e=this.cellCtrl.getCellPosition();if(s)a.extendLatestRangeToCell(e);else{const s=t||i;a.setRangeToCell(e,s)}}l.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseDown"))}}isRightClickInExistingRange(e){const{rangeService:t}=this.beans;if(t){const i=t.isCellInAnyRange(this.cellCtrl.getCellPosition()),s=2===e.button||e.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(i&&s)return!0}return!1}containsWidget(e){return Qt(e,"ag-selection-checkbox",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;const t=this.cellCtrl.createEvent(e,"cellMouseOut");this.beans.eventService.dispatchEvent(t),this.beans.columnHoverService.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;const t=this.cellCtrl.createEvent(e,"cellMouseOver");this.beans.eventService.dispatchEvent(t),this.beans.columnHoverService.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.getGui(),i=t.contains(e.target),s=t.contains(e.relatedTarget);return i&&s}destroy(){super.destroy()}},Vn=class extends F{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}setComp(e){this.eGui=e,this.setupColSpan(),this.setupRowSpan(),this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this.applyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();r(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){null!=this.column.getColDef().colSpan&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eGui)return;const e=this.getCellWidth();this.eGui.style.width="".concat(e,"px")}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce(((e,t)=>e+t.getActualWidth()),0):this.column.getActualWidth()}getColSpanningList(){const e=this.column.getColSpan(this.rowNode),t=[];if(1===e)t.push(this.column);else{let i=this.column;const s=this.column.getPinned();for(let o=0;i&&o<e&&(t.push(i),i=this.beans.visibleColsService.getColAfter(i),i&&!M(i))&&s===i.getPinned();o++);}return t}onLeftChanged(){if(!this.eGui)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=e+"px"}getCellLeft(){let e;return e=this.beans.gos.get("enableRtl")&&this.colsSpanning?n(this.colsSpanning):this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.isPrintLayout()||"left"===this.column.getPinned())return e;const t=this.beans.visibleColsService.getColsLeftWidth();if("right"===this.column.getPinned()){return t+this.beans.visibleColsService.getBodyContainerWidth()+(e||0)}return t+(e||0)}applyRowSpan(e){if(1===this.rowSpan&&!e)return;const t=this.beans.gos.getRowHeightAsNumber()*this.rowSpan;this.eGui.style.height="".concat(t,"px"),this.eGui.style.zIndex="1"}destroy(){super.destroy()}},Hn=(e=>(e[e.FILL=0]="FILL",e[e.RANGE=1]="RANGE",e))(Hn||{}),Wn=(e=>(e[e.VALUE=0]="VALUE",e[e.DIMENSION=1]="DIMENSION",e))(Wn||{}),zn="ag-cell-range-selected",Un=class{constructor(e,t){this.beans=e,this.rangeService=e.rangeService,this.selectionHandleFactory=e.selectionHandleFactory,this.cellCtrl=t}setComp(e,t){this.cellComp=e,this.eGui=t,this.onRangeSelectionChanged()}onRangeSelectionChanged(){this.cellComp&&(this.rangeCount=this.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(zn,0!==this.rangeCount),this.cellComp.addOrRemoveCssClass("".concat(zn,"-1"),1===this.rangeCount),this.cellComp.addOrRemoveCssClass("".concat(zn,"-2"),2===this.rangeCount),this.cellComp.addOrRemoveCssClass("".concat(zn,"-3"),3===this.rangeCount),this.cellComp.addOrRemoveCssClass("".concat(zn,"-4"),this.rangeCount>=4),this.cellComp.addOrRemoveCssClass("ag-cell-range-chart",this.hasChartRange),At(this.eGui,this.rangeCount>0||void 0),this.cellComp.addOrRemoveCssClass("ag-cell-range-single-cell",this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){const e=this.getRangeBorders(),t=this.isSingleCell(),i=!t&&e.top,s=!t&&e.right,o=!t&&e.bottom,n=!t&&e.left;this.cellComp.addOrRemoveCssClass("ag-cell-range-top",i),this.cellComp.addOrRemoveCssClass("ag-cell-range-right",s),this.cellComp.addOrRemoveCssClass("ag-cell-range-bottom",o),this.cellComp.addOrRemoveCssClass("ag-cell-range-left",n)}isSingleCell(){const{rangeService:e}=this.beans;return 1===this.rangeCount&&!!e&&!e.isMoreThanOneCell()}getHasChartRange(){const{rangeService:e}=this.beans;if(!this.rangeCount||!e)return!1;const t=e.getCellRanges();return t.length>0&&t.every((e=>g([1,0],e.type)))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){const e=this.beans.gos.get("enableRtl");let t=!1,i=!1,s=!1,o=!1;const n=this.cellCtrl.getCellPosition().column,r=this.beans.visibleColsService;let l,a;e?(l=r.getColAfter(n),a=r.getColBefore(n)):(l=r.getColBefore(n),a=r.getColAfter(n));const d=this.rangeService.getCellRanges().filter((e=>this.rangeService.isCellInSpecificRange(this.cellCtrl.getCellPosition(),e)));l||(o=!0),a||(i=!0);for(let c=0;c<d.length&&!(t&&i&&s&&o);c++){const e=d[c],n=this.rangeService.getRangeStartRow(e),r=this.rangeService.getRangeEndRow(e);!t&&this.beans.rowPositionUtils.sameRow(n,this.cellCtrl.getCellPosition())&&(t=!0),!s&&this.beans.rowPositionUtils.sameRow(r,this.cellCtrl.getCellPosition())&&(s=!0),!o&&l&&e.columns.indexOf(l)<0&&(o=!0),!i&&a&&e.columns.indexOf(a)<0&&(i=!0)}return{top:t,right:i,bottom:s,left:o}}refreshHandle(){if(this.beans.context.isDestroyed())return;const e=this.shouldHaveSelectionHandle();this.selectionHandle&&!e&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),e&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass("ag-cell-range-handle",!!this.selectionHandle)}shouldHaveSelectionHandle(){const e=this.beans.gos,t=this.rangeService.getCellRanges(),i=t.length;if(this.rangeCount<1||i<1)return!1;const s=n(t),o=this.cellCtrl.getCellPosition(),r=e.get("enableFillHandle")&&!this.cellCtrl.isSuppressFillHandle(),l=e.get("enableRangeHandle");let a=1===i&&!this.cellCtrl.isEditing()&&(r||l);if(this.hasChartRange){const e=1===t[0].type&&this.rangeService.isCellInSpecificRange(o,t[0]);this.cellComp.addOrRemoveCssClass("ag-cell-range-chart-category",e),a=0===s.type}return a&&null!=s.endRow&&this.rangeService.isContiguousRange(s)&&this.rangeService.isBottomRightCell(s,o)}addSelectionHandle(){const e=this.beans.gos,t=n(this.rangeService.getCellRanges()).type,i=e.get("enableFillHandle")&&M(t)?0:1;this.selectionHandle&&this.selectionHandle.getType()!==i&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.selectionHandleFactory.createSelectionHandle(i)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}},_n=0,Kn=class e extends F{constructor(e,t,i,s){super(),this.column=e,this.rowNode=t,this.beans=i,this.rowCtrl=s,this.cellRangeFeature=null,this.cellPositionFeature=null,this.cellCustomStyleFeature=null,this.tooltipFeature=null,this.cellMouseListenerFeature=null,this.cellKeyboardListenerFeature=null,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.instanceId=e.getId()+"-"+_n++,this.colIdSanitised=ke(this.column.getId()),i.gos.get("suppressCellFocus")||(this.tabIndex=-1),this.createCellPosition(),this.addFeatures(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}addFeatures(){this.cellPositionFeature=new Vn(this,this.beans),this.addDestroyFunc((()=>{var e;null===(e=this.cellPositionFeature)||void 0===e||e.destroy(),this.cellPositionFeature=null})),this.cellCustomStyleFeature=new Nn(this,this.beans),this.addDestroyFunc((()=>{var e;null===(e=this.cellCustomStyleFeature)||void 0===e||e.destroy(),this.cellCustomStyleFeature=null})),this.cellMouseListenerFeature=new Bn(this,this.beans,this.column),this.addDestroyFunc((()=>{var e;null===(e=this.cellMouseListenerFeature)||void 0===e||e.destroy(),this.cellMouseListenerFeature=null})),this.cellKeyboardListenerFeature=new On(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.addDestroyFunc((()=>{var e;null===(e=this.cellKeyboardListenerFeature)||void 0===e||e.destroy(),this.cellKeyboardListenerFeature=null})),this.column.isTooltipEnabled()&&(this.enableTooltipFeature(),this.addDestroyFunc((()=>{this.disableTooltipFeature()})));this.beans.rangeService&&this.beans.gos.get("enableRangeSelection")&&(this.cellRangeFeature=new Un(this.beans,this),this.addDestroyFunc((()=>{var e;null===(e=this.cellRangeFeature)||void 0===e||e.destroy(),this.cellRangeFeature=null})))}enableTooltipFeature(e,t){const i="whenTruncated"===this.beans.gos.get("tooltipShowMode");t||!i||this.isCellRenderer()||(t=()=>{const e=this.getGui(),t=0===e.children.length?e:e.querySelector(".ag-cell-value");return!t||t.scrollWidth>t.clientWidth});const s={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:null!=e?()=>e:()=>{const e=this.column.getColDef(),t=this.rowNode.data;if(e.tooltipField&&P(t))return U(t,e.tooltipField,this.column.isTooltipFieldContainsDots());const i=e.tooltipValueGetter;return i?i(this.beans.gos.addGridCommonParams({location:"cell",colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted})):null},getValueFormatted:()=>this.valueFormatted,shouldDisplayTooltip:t};this.tooltipFeature=new yi(s,this.beans)}disableTooltipFeature(){this.tooltipFeature&&(this.tooltipFeature.destroy(),this.tooltipFeature=null)}setComp(e,t,i,s,o){var n,r,l,a;this.cellComp=e,this.eGui=t,this.printLayout=s,this.addDomData(),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(i),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),null===(n=this.cellPositionFeature)||void 0===n||n.setComp(t),null===(r=this.cellCustomStyleFeature)||void 0===r||r.setComp(e),null===(l=this.tooltipFeature)||void 0===l||l.refreshToolTip(),null===(a=this.cellKeyboardListenerFeature)||void 0===a||a.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(e,t),o&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach((e=>e())),this.onCellCompAttachedFuncs=[])}setupAutoHeight(e){if(this.isAutoHeight=this.column.isAutoHeight(),!this.isAutoHeight||!e)return;const t=e.parentElement,i=this.beans.gos.getRowHeightForNode(this.rowNode).height,s=o=>{if(this.editing)return;if(!this.isAlive())return;const{paddingTop:n,paddingBottom:r,borderBottomWidth:l,borderTopWidth:a}=Xt(t),d=n+r+l+a,c=e.offsetHeight+d;if(o<5){const t=this.beans.gos.getDocument();if(!t||!t.contains(e)||0==c)return void window.setTimeout((()=>s(o+1)),0)}const u=Math.max(c,i);this.rowNode.setRowAutoHeight(u,this.column)},o=()=>s(0);o();const n=this.beans.resizeObserverService.observeResize(e,o);this.addDestroyFunc((()=>{n(),this.rowNode.setRowAutoHeight(void 0,this.column)}))}getCellAriaRole(){var e;return null!==(e=this.column.getColDef().cellAriaRole)&&void 0!==e?e:"gridcell"}getInstanceId(){return this.instanceId}getColumnIdSanitised(){return this.colIdSanitised}getTabIndex(){return this.tabIndex}isCellRenderer(){const e=this.column.getColDef();return null!=e.cellRenderer||null!=e.cellRendererSelector}getValueToDisplay(){var e;return null!==(e=this.valueFormatted)&&void 0!==e?e:this.value}showValue(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const i=this.getValueToDisplay();let s;if(this.rowNode.stub){const e=this.createCellRendererParams();s=this.beans.userComponentFactory.getLoadingCellRendererDetails(this.column.getColDef(),e)}else if(this.isCellRenderer()){const e=this.createCellRendererParams();s=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),e)}this.cellComp.setRenderDetails(s,i,t),null===(e=this.cellRangeFeature)||void 0===e||e.refreshHandle()}setupControlComps(){const e=this.column.getColDef();this.includeSelection=this.isIncludeControl(e.checkboxSelection),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(e){return!(null!=this.rowNode.rowPinned)&&("function"===typeof e||!0===e)}refreshShouldDestroy(){const e=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(e.checkboxSelection),i=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),s=this.includeDndSource!=this.isIncludeControl(e.dndSource),o=this.isAutoHeight!=this.column.isAutoHeight();return t||i||s||o}startEditing(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const{editService:s}=this.beans;this.isCellEditable()&&!this.editing&&s&&(this.cellComp?s.startEditing(this,e,t,i):this.onCellCompAttachedFuncs.push((()=>{this.startEditing(e,t,i)})))}setEditing(e,t){var i;this.editCompDetails=t,this.editing!==e&&(this.editing=e,null===(i=this.cellRangeFeature)||void 0===i||i.refreshHandle())}stopRowOrCellEdit(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];"fullRow"===this.beans.gos.get("editType")?this.rowCtrl.stopEditing(e):this.stopEditing(e)}onPopupEditorClosed(){this.editing&&this.stopEditingAndFocus()}stopEditing(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{editService:t}=this.beans;return!(!this.editing||!t)&&t.stopEditing(this,e)}createCellRendererParams(){return this.beans.gos.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.rowNode.getValueFromValueService(this.column),setValue:e=>this.beans.valueService.setValue(this.rowNode,this.column,e),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(e,t,i,s)=>this.registerRowDragger(e,t,s),setTooltip:(e,t)=>{var i;this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(e,t),null===(i=this.tooltipFeature)||void 0===i||i.refreshToolTip()}})}setFocusOutOnEditor(){var e;this.editing&&(null===(e=this.beans.editService)||void 0===e||e.setFocusOutOnEditor(this))}setFocusInOnEditor(){var e;this.editing&&(null===(e=this.beans.editService)||void 0===e||e.setFocusInOnEditor(this))}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){var t;this.refreshShouldDestroy()?null===(t=this.rowCtrl)||void 0===t||t.recreateCell(this):this.refreshCell(e)}refreshCell(e){var t,i;if(this.suppressRefreshCell||this.editing)return;const s=this.column.getColDef(),o=null!=e&&!!e.newData,n=null!=e&&!!e.suppressFlash||!!s.suppressCellFlash,r=null==s.field&&null==s.valueGetter&&null==s.showRowGroup,l=e&&e.forceRefresh||r||o,a=!!this.cellComp,d=this.updateAndFormatValue(a);if(a){if(l||d){var c,u,h;this.showValue(o);const e=null===(c=this.beans.filterManager)||void 0===c?void 0:c.isSuppressFlashingCellsBecauseFiltering();!n&&!e&&(this.beans.gos.get("enableCellChangeFlash")||s.enableCellChangeFlash)&&this.flashCell(),null===(u=this.cellCustomStyleFeature)||void 0===u||u.applyUserStyles(),null===(h=this.cellCustomStyleFeature)||void 0===h||h.applyClassesFromColDef()}null===(t=this.tooltipFeature)||void 0===t||t.refreshToolTip(),null===(i=this.cellCustomStyleFeature)||void 0===i||i.applyCellClassRules()}}stopEditingAndFocus(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null===(e=this.beans.editService)||void 0===e||e.stopEditingAndFocus(this,t,i)}flashCell(e){var t,i;const s=null!==(t=null===e||void 0===e?void 0:e.flashDuration)&&void 0!==t?t:null===e||void 0===e?void 0:e.flashDelay,o=null!==(i=null===e||void 0===e?void 0:e.fadeDuration)&&void 0!==i?i:null===e||void 0===e?void 0:e.fadeDelay;this.animateCell("data-changed",s,o)}animateCell(e,t,i){if(!this.cellComp)return;const s="ag-cell-".concat(e),o="ag-cell-".concat(e,"-animation"),{gos:n}=this.beans;t||(t=n.get("cellFlashDuration")),P(i)||(i=n.get("cellFadeDuration")),this.cellComp.addOrRemoveCssClass(s,!0),this.cellComp.addOrRemoveCssClass(o,!1),this.beans.frameworkOverrides.wrapIncoming((()=>{window.setTimeout((()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(s,!1),this.cellComp.addOrRemoveCssClass(o,!0),this.eGui.style.transition="background-color ".concat(i,"ms"),window.setTimeout((()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(o,!1),this.eGui.style.transition="")}),i))}),t)}))}onFlashCells(e){if(!this.cellComp)return;const t=this.beans.cellPositionUtils.createId(this.getCellPosition());e.cells[t]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(e){var t;return null!==(t=this.callValueFormatter(e))&&void 0!==t?t:e}callValueFormatter(e){return this.beans.valueService.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){const t=this.value,i=this.valueFormatted;return this.value=this.rowNode.getValueFromValueService(this.column),this.valueFormatted=this.callValueFormatter(this.value),!e||(!this.valuesAreEqual(t,this.value)||this.valueFormatted!=i)}valuesAreEqual(e,t){const i=this.column.getColDef();return i.equals?i.equals(e,t):e===t}getComp(){return this.cellComp}getValue(){return this.value}addDomData(){const t=this.getGui();this.beans.gos.setDomData(t,e.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc((()=>this.beans.gos.setDomData(t,e.DOM_DATA_KEY_CELL_CTRL,null)))}createEvent(e,t){return this.beans.gos.addGridCommonParams({type:t,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:e,rowIndex:this.rowNode.rowIndex})}processCharacter(e){var t;null===(t=this.cellKeyboardListenerFeature)||void 0===t||t.processCharacter(e)}onKeyDown(e){var t;null===(t=this.cellKeyboardListenerFeature)||void 0===t||t.onKeyDown(e)}onMouseEvent(e,t){var i;null===(i=this.cellMouseListenerFeature)||void 0===i||i.onMouseEvent(e,t)}getGui(){return this.eGui}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){var e;this.cellComp&&(null===(e=this.cellPositionFeature)||void 0===e||e.onLeftChanged())}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{cellComp:e,column:t,beans:i}=this;Go(e,t,i.visibleColsService)}refreshAriaColIndex(){const e=this.beans.visibleColsService.getAriaColIndex(this.column);Dt(this.getGui(),e)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){var e;return null===(e=this.cellPositionFeature)||void 0===e?void 0:e.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}isPrintLayout(){return this.printLayout}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.cellComp?"fullRow"===this.beans.gos.get("editType")?this.rowCtrl.startRowEditing(e,this):this.startEditing(e,!0,t):this.onCellCompAttachedFuncs.push((()=>{this.startRowOrCellEdit(e,t)}))}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onRangeSelectionChanged(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}isRangeSelectionEnabled(){return null!=this.cellRangeFeature}focusCell(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:e})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}onFirstRightPinnedChanged(){if(!this.cellComp)return;const e=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass("ag-cell-first-right-pinned",e)}onLastLeftPinnedChanged(){if(!this.cellComp)return;const e=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass("ag-cell-last-left-pinned",e)}onCellFocused(e){if(this.beans.gos.get("suppressCellFocus"))return;const t=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp)return void(t&&null!==e&&void 0!==e&&e.forceBrowserFocus&&(this.focusEventToRestore=e));if(this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass("ag-cell-focus",t),t&&e&&e.forceBrowserFocus){let t=this.cellComp.getFocusableElement();if(this.editing){const e=this.beans.focusService.findFocusableElements(t,null,!0);e.length&&(t=e[0])}t.focus({preventScroll:!!e.preventScrollOnBrowserFocus})}const i="fullRow"===this.beans.gos.get("editType");t||i||!this.editing||this.stopRowOrCellEdit(),t&&this.rowCtrl.announceDescription()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:x(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass("ag-cell",!0),this.cellComp.addOrRemoveCssClass("ag-cell-not-inline-editing",!0);const e=1==this.column.isAutoHeight();this.cellComp.addOrRemoveCssClass("ag-cell-auto-height",e),this.cellComp.addOrRemoveCssClass("ag-cell-normal-height",!e)}onColumnHover(){if(!this.cellComp)return;if(!this.beans.gos.get("columnHoverHighlight"))return;const e=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass("ag-column-hover",e)}onColDefChanged(){if(!this.cellComp)return;var e;(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editing)?null===(e=this.beans.editService)||void 0===e||e.handleColDefChanged(this):this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0})}setWrapText(){const e=1==this.column.getColDef().wrapText;this.cellComp.addOrRemoveCssClass("ag-cell-wrap-text",e)}dispatchCellContextMenuEvent(e){const t=this.column.getColDef(),i=this.createEvent(e,"cellContextMenu");this.beans.eventService.dispatchEvent(i),t.onCellContextMenu&&window.setTimeout((()=>{this.beans.frameworkOverrides.wrapOutgoing((()=>{t.onCellContextMenu(i)}))}),0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){const e=new Ln;return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e}createDndSource(){const e=new Gn(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(e),e}registerRowDragger(e,t,i){if(this.customRowDragComp)return void this.customRowDragComp.setDragElement(e,t);const s=this.createRowDragComp(e,t,i);s&&(this.customRowDragComp=s,this.addDestroyFunc((()=>{this.beans.context.destroyBean(s),this.customRowDragComp=null})))}createRowDragComp(e,t,i){const s=this.beans.gos.get("pagination"),o=this.beans.gos.get("rowDragManaged"),n=this.beans.gos.isRowModelType("clientSide");if(o){if(!n)return void ie("managed row dragging is only allowed in the Client Side Row Model");if(s)return void ie("managed row dragging is not possible when doing pagination")}const r=new Gs((()=>this.value),this.rowNode,this.column,e,t,i);return this.beans.context.createBean(r),r}setSuppressRefreshCell(e){this.suppressRefreshCell=e}getEditCompDetails(){return this.editCompDetails}};Kn.DOM_DATA_KEY_CELL_CTRL="cellCtrl";var Zn=Kn,jn=0,Yn=class e extends F{constructor(e,t,i,s,o){var n,r;super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=t,this.gos=t.gos,this.rowNode=e,this.paginationPage=null!==(n=null===(r=t.paginationService)||void 0===r?void 0:r.getCurrentPage())&&void 0!==n?n:0,this.useAnimationFrameForCreate=s,this.printLayout=o,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=e.id+"-"+jn++,this.rowId=ke(e.id),this.initRowBusinessKey(),this.rowFocused=t.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=t.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(i),this.rowStyles=this.processStylesFromGridOptions(),this.isFullWidth()&&!this.gos.get("suppressCellFocus")&&(this.tabIndex=-1),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if("function"!==typeof this.businessKeyForNodeFunc)return;const e=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=ke(e)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}getTabIndex(){return this.tabIndex}isSticky(){return this.rowNode.sticky}getInstanceId(){return this.instanceId}updateGui(e,t){"left"===e?this.leftGui=t:"right"===e?this.rightGui=t:"fullWidth"===e?this.fullWidthGui=t:this.centerGui=t}setComp(e,t,i){const s={rowComp:e,element:t,containerType:i};this.allRowGuis.push(s),this.updateGui(i,s),this.initialiseRowComp(s),"FullWidthLoading"===this.rowType||this.rowNode.rowPinned||this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(e){this.allRowGuis=this.allRowGuis.filter((t=>t.containerType!==e)),this.updateGui(e,void 0)}isCacheable(){return"FullWidthDetail"===this.rowType&&this.gos.get("keepDetailRows")}setCached(e){const t=e?"none":"";this.allRowGuis.forEach((e=>e.element.style.display=t))}initialiseRowComp(t){const i=this.gos;this.listenOnDomOrder(t),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(t),this.updateRowIndexes(t),this.setFocusedClasses(t),this.setStylesFromGridOptions(!1,t),i.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(t),this.updateColumnLists(!this.useAnimationFrameForCreate);const s=t.rowComp;this.getInitialRowClasses(t.containerType).forEach((e=>s.addOrRemoveCssClass(e,!0))),this.executeSlideAndFadeAnimations(t),this.rowNode.group&&bt(t.element,1==this.rowNode.expanded),this.setRowCompRowId(s),this.setRowCompRowBusinessKey(s),i.setDomData(t.element,e.DOM_DATA_KEY_ROW_CTRL,this),this.addDestroyFunc((()=>i.setDomData(t.element,e.DOM_DATA_KEY_ROW_CTRL,null))),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,t.element),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(t.element),this.isFullWidth()&&this.setupFullWidth(t),i.get("rowDragEntireRow")&&this.addRowDraggerToRow(t),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask((()=>{this.isAlive()&&t.rowComp.addOrRemoveCssClass("ag-after-created",!0)})),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){null!=this.businessKeySanitised&&e.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(e){this.rowId=ke(this.rowNode.id),null!=this.rowId&&e.setRowId(this.rowId)}executeSlideAndFadeAnimations(e){const{containerType:t}=e;this.slideInAnimation[t]&&(ae((()=>{this.onTopChanged()})),this.slideInAnimation[t]=!1);this.fadeInAnimation[t]&&(ae((()=>{e.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)})),this.fadeInAnimation[t]=!1)}addRowDraggerToRow(e){if(this.gos.get("enableRangeSelection"))return void ie("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`");const t=this.beans.localeService.getLocaleTextFunc(),i=new Gs((()=>"1 ".concat(t("rowDragRow","row"))),this.rowNode,void 0,e.element,void 0,!0),s=this.createBean(i,this.beans.context);this.rowDragComps.push(s)}setupFullWidth(e){const t=this.getPinnedForContainer(e.containerType);if("FullWidthDetail"==this.rowType&&!Ni.__assertRegistered("@ag-grid-enterprise/master-detail","cell renderer 'agDetailCellRenderer' (for master detail)",this.beans.context.getGridId()))return;const i=this.createFullWidthCompDetails(e.element,t);e.rowComp.showFullWidth(i)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderers(){var e;return this.gos.get("embedFullWidthRows")?this.allRowGuis.map((e=>{var t;return null===e||void 0===e||null===(t=e.rowComp)||void 0===t?void 0:t.getFullWidthCellRenderer()})):[null===(e=this.fullWidthGui)||void 0===e||null===(e=e.rowComp)||void 0===e?void 0:e.getFullWidthCellRenderer()]}getCellElement(e){const t=this.getCellCtrl(e);return t?t.getGui():null}executeProcessRowPostCreateFunc(){const e=this.gos.getCallback("processRowPostCreate");if(!e||!this.areAllContainersReady())return;e({eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)})}areAllContainersReady(){const e=!!this.leftGui||!this.beans.visibleColsService.isPinningLeft(),t=!!this.centerGui,i=!!this.rightGui||!this.beans.visibleColsService.isPinningRight();return e&&t&&i}setRowType(){const e=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow"),t=this.rowNode.isFullWidthCell(),i=this.gos.get("masterDetail")&&this.rowNode.detail,s=this.beans.columnModel.isPivotMode(),o=!!this.rowNode.group&&!this.rowNode.footer&&this.gos.isGroupUseEntireRow(s);this.rowType=e?"FullWidthLoading":i?"FullWidthDetail":t?"FullWidth":o?"FullWidthGroup":"Normal"}updateColumnLists(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.isFullWidth())return;e||this.gos.get("suppressAnimationFrame")||this.printLayout?this.updateColumnListsImpl(t):this.updateColumnListsPending||(this.beans.animationFrameService.createTask((()=>{this.active&&this.updateColumnListsImpl(!0)}),this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}createCellCtrls(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const s={list:[],map:{}},o=(e,t)=>{s.list.push(t),s.map[e]=t};return t.forEach((t=>{const i=t.getInstanceId();let s=e.map[i];s||(s=new Zn(t,this.rowNode,this.beans,this)),o(i,s)})),e.list.forEach((e=>{if(null!=s.map[e.getColumn().getInstanceId()])return;this.isCellEligibleToBeRemoved(e,i)?e.destroy():o(e.getColumn().getInstanceId(),e)})),s}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){this.allRowGuis.forEach((t=>{const i=this.getCellCtrlsForContainer(t.containerType);t.rowComp.setCellCtrls(i,e)}))}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const e=this.beans.columnViewportService,t=this.beans.visibleColsService;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.getAllCols()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const i=e.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i);const s=t.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,s,"left");const o=t.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,o,"right")}}isCellEligibleToBeRemoved(e,t){const i=!0;if(e.getColumn().getPinned()!=t)return i;const s=e.isEditing(),o=this.beans.focusService.isCellFocused(e.getCellPosition());if(s||o){const t=e.getColumn();return!(this.beans.visibleColsService.getAllCols().indexOf(t)>=0)&&i}return i}getDomOrder(){return this.gos.get("ensureDomOrder")||this.gos.isDomLayout("print")}listenOnDomOrder(e){const t=()=>{e.rowComp.setDomOrder(this.getDomOrder())};this.addManagedPropertyListener("domLayout",t),this.addManagedPropertyListener("ensureDomOrder",t)}setAnimateFlags(e){if(this.isSticky()||!e)return;const t=P(this.rowNode.oldRowTop),i=this.beans.visibleColsService.isPinningLeft(),s=this.beans.visibleColsService.isPinningRight();if(t){if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows"))return void(this.slideInAnimation.fullWidth=!0);this.slideInAnimation.center=!0,this.slideInAnimation.left=i,this.slideInAnimation.right=s}else{if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows"))return void(this.fadeInAnimation.fullWidth=!0);this.fadeInAnimation.center=!0,this.fadeInAnimation.left=i,this.fadeInAnimation.right=s}}isEditing(){return this.editingRow}isFullWidth(){return"Normal"!==this.rowType}refreshFullWidth(){const e=(e,t)=>!e||e.rowComp.refreshFullWidth((()=>this.createFullWidthCompDetails(e.element,t).params)),t=e(this.fullWidthGui,null),i=e(this.centerGui,null),s=e(this.leftGui,"left"),o=e(this.rightGui,"right");return t&&i&&s&&o}addListeners(){this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),expandedChanged:this.updateExpandedCss.bind(this),hasChildrenChanged:this.updateExpandedCss.bind(this)}),this.rowNode.detail&&this.addManagedListeners(this.rowNode.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(this.rowNode,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this)}),this.addManagedListeners(this.beans.eventService,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),this.addDestroyFunc((()=>{this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context))})),this.addManagedPropertyListeners(["rowDragEntireRow"],(()=>{this.gos.get("rowDragEntireRow")?this.allRowGuis.forEach((e=>{this.addRowDraggerToRow(e)})):this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context)})),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{this.getAllCellCtrls().forEach((e=>e.onRowIndexChanged()))},cellChanged:e=>{this.getAllCellCtrls().forEach((t=>t.onCellChanged(e)))}})}onRowNodeDataChanged(e){if(this.isFullWidth()!==!!this.rowNode.isFullWidthCell())this.beans.rowRenderer.redrawRow(this.rowNode);else if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode)}else this.getAllCellCtrls().forEach((t=>t.refreshCell({suppressFlash:!e.update,newData:!e.update}))),this.allRowGuis.forEach((e=>{this.setRowCompRowId(e.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(e.rowComp)})),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const e=this.rowNode.highlighted;this.allRowGuis.forEach((t=>{const i=0===e,s=1===e;t.rowComp.addOrRemoveCssClass("ag-row-highlight-above",i),t.rowComp.addOrRemoveCssClass("ag-row-highlight-below",s)}))}postProcessRowDragging(){const e=this.rowNode.dragging;this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass("ag-row-dragging",e)))}updateExpandedCss(){const e=this.rowNode.isExpandable(),t=1==this.rowNode.expanded;this.allRowGuis.forEach((i=>{i.rowComp.addOrRemoveCssClass("ag-row-group",e),i.rowComp.addOrRemoveCssClass("ag-row-group-expanded",e&&t),i.rowComp.addOrRemoveCssClass("ag-row-group-contracted",e&&!t),bt(i.element,e&&t)}))}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:x(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){const t=this.allRowGuis.find((t=>t.element.contains(e.target)));if(!((t?t.element:null)===e.target))return;const i=this.rowNode,s=this.beans.focusService.getFocusedCell(),o={rowIndex:i.rowIndex,rowPinned:i.rowPinned,column:s&&s.column};this.beans.navigationService.navigateToNextCell(e,e.key,o,!0),e.preventDefault()}onTabKeyDown(e){if(e.defaultPrevented||S(e))return;const t=this.allRowGuis.find((t=>t.element.contains(e.target))),i=t?t.element:null,s=i===e.target;let o=null;s||(o=this.beans.focusService.findNextFocusableElement(i,!1,e.shiftKey)),(this.isFullWidth()&&s||!o)&&this.beans.navigationService.onTabKeyDown(this,e)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){var e;const t=null===(e=this.allRowGuis.find((e=>di(e.element))))||void 0===e?void 0:e.element;return t?t.getBoundingClientRect().top:0}onFullWidthRowFocused(e){var t;const i=this.rowNode,s=!!e&&(this.isFullWidth()&&e.rowIndex===i.rowIndex&&e.rowPinned==i.rowPinned),o=this.fullWidthGui?this.fullWidthGui.element:null===(t=this.centerGui)||void 0===t?void 0:t.element;o&&(o.classList.toggle("ag-full-width-focus",s),s&&null!==e&&void 0!==e&&e.forceBrowserFocus&&o.focus({preventScroll:!0}))}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,t){const i={list:[],map:{}};return e.list.forEach((e=>{e!==t&&(i.list.push(e),i.map[e.getColumn().getInstanceId()]=e)})),i}onMouseEvent(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break;case"touchstart":case"mousedown":this.onRowMouseDown(t)}}createRowEvent(e,t){return this.gos.addGridCommonParams({type:e,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:t})}createRowEventWithSource(e,t){const i=this.createRowEvent(e,t);return i.source=this,i}onRowDblClick(e){if(S(e))return;const t=this.createRowEventWithSource("rowDoubleClicked",e);this.beans.eventService.dispatchEvent(t)}onRowMouseDown(e){if(this.lastMouseDownOnDragger=Qt(e.target,"ag-row-drag",3),!this.isFullWidth())return;const t=this.rowNode,i=this.beans.visibleColsService;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges();const s=this.getFullWidthElement(),o=e.target;let n=!0;s&&s.contains(o)&&jt(o)&&(n=!1),this.beans.focusService.setFocusedCell({rowIndex:t.rowIndex,column:i.getAllCols()[0],rowPinned:t.rowPinned,forceBrowserFocus:n})}onRowClick(e){if(S(e)||this.lastMouseDownOnDragger)return;const t=this.createRowEventWithSource("rowClicked",e);this.beans.eventService.dispatchEvent(t);const i=e.ctrlKey||e.metaKey,s=e.shiftKey;if(this.gos.get("groupSelectsChildren")&&this.rowNode.group||this.isRowSelectionBlocked()||this.gos.get("suppressRowClickSelection"))return;const o=this.gos.get("rowMultiSelectWithClick"),n=!this.gos.get("suppressRowDeselection"),r="rowClicked";if(this.rowNode.isSelected())o?this.rowNode.setSelectedParams({newValue:!1,event:e,source:r}):i?n&&this.rowNode.setSelectedParams({newValue:!1,event:e,source:r}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!s,rangeSelect:s,event:e,source:r});else{const t=!o&&!i;this.rowNode.setSelectedParams({newValue:!0,clearSelection:t,rangeSelect:s,event:e,source:r})}}isRowSelectionBlocked(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!this.gos.isRowSelection()}setupDetailRowAutoHeight(e){if("FullWidthDetail"!==this.rowType)return;if(!this.gos.get("detailRowAutoHeight"))return;const t=()=>{const t=e.clientHeight;if(null!=t&&t>0){const e=()=>{this.rowNode.setRowHeight(t),("clientSide"===this.beans.rowModel.getType()||"serverSide"===this.beans.rowModel.getType())&&this.beans.rowModel.onRowHeightChanged()};window.setTimeout(e,0)}},i=this.beans.resizeObserverService.observeResize(e,t);this.addDestroyFunc(i),t()}createFullWidthCompDetails(e,t){const{gos:i,rowNode:s}=this,o=i.addGridCommonParams({fullWidth:!0,data:s.data,node:s,value:s.key,valueFormatted:s.key,eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(e,t,i,s)=>this.addFullWidthRowDragging(e,t,i,s),setTooltip:(e,t)=>this.refreshRowTooltip(e,t)}),n=this.beans.userComponentFactory;switch(this.rowType){case"FullWidthDetail":return n.getFullWidthDetailCellRendererDetails(o);case"FullWidthGroup":return n.getFullWidthGroupCellRendererDetails(o);case"FullWidthLoading":return n.getFullWidthLoadingCellRendererDetails(o);default:return n.getFullWidthCellRendererDetails(o)}}refreshRowTooltip(e,t){if(!this.fullWidthGui)return;const i={getGui:()=>this.fullWidthGui.element,getTooltipValue:()=>e,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:t};this.tooltipFeature&&this.destroyBean(this.tooltipFeature,this.beans.context),this.tooltipFeature=this.createBean(new yi(i,this.beans))}addFullWidthRowDragging(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3?arguments[3]:void 0;if(!this.isFullWidth())return;const o=new Gs((()=>i),this.rowNode,void 0,e,t,s);this.createBean(o,this.beans.context),this.addDestroyFunc((()=>{this.destroyBean(o,this.beans.context)}))}onUiLevelChanged(){const e=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=e){const t="ag-row-level-"+e,i="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach((e=>{e.rowComp.addOrRemoveCssClass(t,!0),e.rowComp.addOrRemoveCssClass(i,!1)}))}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getLastRow()}refreshFirstAndLastRowStyles(){const e=this.isFirstRowOnPage(),t=this.isLastRowOnPage();this.firstRowOnPage!==e&&(this.firstRowOnPage=e,this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass("ag-row-first",e)))),this.lastRowOnPage!==t&&(this.lastRowOnPage=t,this.allRowGuis.forEach((e=>e.rowComp.addOrRemoveCssClass("ag-row-last",t))))}stopEditing(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.stoppingRowEdit||null===(e=this.beans.rowEditService)||void 0===e||e.stopEditing(this,t)}setInlineEditingCss(e){this.allRowGuis.forEach((t=>{t.rowComp.addOrRemoveCssClass("ag-row-inline-editing",e),t.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!e)}))}setEditingRow(e){this.editingRow=e}startRowEditing(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.editingRow||null===(e=this.beans.rowEditService)||void 0===e||e.startEditing(this,t,i,s)}getAllCellCtrls(){if(0===this.leftCellCtrls.list.length&&0===this.rightCellCtrls.list.length)return this.centerCellCtrls.list;return[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){const e=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);e&&e.length&&e.forEach((e=>{this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass(e,!0)))}))}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,(e=>{this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass(e,!0)))}),(e=>{this.allRowGuis.forEach((t=>t.rowComp.addOrRemoveCssClass(e,!1)))}))}setStylesFromGridOptions(e,t){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(t,(e=>e.rowComp.setUserStyles(this.rowStyles)))}getPinnedForContainer(e){return"left"===e||"right"===e?e:null}getInitialRowClasses(e){const t=this.getPinnedForContainer(e),i={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[e],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:t};return this.beans.rowCssClassCalculator.getInitialRowClasses(i)}processStylesFromGridOptions(){const e=this.gos.get("rowStyle");if(e&&"function"===typeof e)return void ie("rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");const t=this.gos.getCallback("getRowStyle");let i;if(t){i=t({data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex})}return i||e?Object.assign({},e,i):this.emptyStyle}onRowSelected(e){const t=!!this.rowNode.isSelected();this.forEachGui(e,(e=>{e.rowComp.addOrRemoveCssClass("ag-row-selected",t),At(e.element,t);!e.element.contains(this.gos.getActiveDomElement())||e!==this.centerGui&&e!==this.fullWidthGui||this.announceDescription()}))}announceDescription(){if(this.isRowSelectionBlocked())return;const e=this.rowNode.isSelected();if(e&&this.gos.get("suppressRowDeselection"))return;const t=this.beans.localeService.getLocaleTextFunc()(e?"ariaRowDeselect":"ariaRowSelect","Press SPACE to ".concat(e?"deselect":"select"," this row."));this.beans.ariaAnnouncementService.announceValue(t)}addHoverFunctionality(e){if(!this.active)return;const{rowNode:t,beans:i,gos:s}=this;this.addManagedListeners(e,{mouseenter:()=>t.onMouseEnter(),mouseleave:()=>t.onMouseLeave()}),this.addManagedListeners(t,{mouseEnter:()=>{i.dragService.isDragging()||s.get("suppressRowHoverHighlight")||(e.classList.add("ag-row-hover"),t.setHovered(!0))},mouseLeave:()=>{e.classList.remove("ag-row-hover"),t.setHovered(!1)}})}roundRowTopToBounds(e){const t=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),i=this.applyPaginationOffset(t.top,!0)-100,s=this.applyPaginationOffset(t.bottom,!0)+100;return Math.min(Math.max(i,e),s)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(e,t){e?t(e):this.allRowGuis.forEach(t)}onRowHeightChanged(e){if(null==this.rowNode.rowHeight)return;const t=this.rowNode.rowHeight,i=this.beans.environment.getDefaultRowHeight(),s=this.gos.isGetRowHeightFunction()?this.gos.getRowHeightForNode(this.rowNode).height:void 0,o=s?"".concat(Math.min(i,s)-2,"px"):void 0;this.forEachGui(e,(e=>{e.element.style.height="".concat(t,"px"),o&&e.element.style.setProperty("--ag-line-height",o)}))}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}destroyFirstPass(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.active=!1,!e&&this.gos.isAnimateRows()&&!this.isSticky()){if(null!=this.rowNode.rowTop){const e=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(e)}else this.allRowGuis.forEach((e=>e.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0)))}this.rowNode.setHovered(!1);const t=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(t),this.beans.eventService.dispatchEvent(t),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.stopEditing();const e=e=>(e.list.forEach((e=>e.destroy())),{list:[],map:{}});this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,(e=>{e.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),e.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)}))}onCellFocusChanged(){const e=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);e!==this.rowFocused&&(this.rowFocused=e,this.setFocusedClasses()),!e&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){var e,t;const i=null!==(e=null===(t=this.beans.paginationService)||void 0===t?void 0:t.getCurrentPage())&&void 0!==e?e:0;this.paginationPage!==i&&(this.paginationPage=i,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.rowNode.isRowPinned()||this.rowNode.sticky)return e;return e+this.beans.pageBoundsService.getPixelOffset()*(t?1:-1)}setRowTop(e){if(!this.printLayout&&P(e)){const t=this.applyPaginationOffset(e),i=this.rowNode.isRowPinned()||this.rowNode.sticky?t:this.beans.rowContainerHeightService.getRealPixelPosition(t),s="".concat(i,"px");this.setRowTopStyle(s)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:"translateY(".concat(this.getInitialRowTopShared(e),")")}getInitialRowTopShared(e){if(this.printLayout)return"";const t=this.rowNode;let i;if(this.isSticky())i=t.stickyRowTop;else{const s=this.slideInAnimation[e]?this.roundRowTopToBounds(t.oldRowTop):t.rowTop,o=this.applyPaginationOffset(s);i=t.isRowPinned()?o:this.beans.rowContainerHeightService.getRealPixelPosition(o)}return i+"px"}setRowTopStyle(e){this.allRowGuis.forEach((t=>this.suppressRowTransform?t.rowComp.setTop(e):t.rowComp.setTransform("translateY(".concat(e,")"))))}getRowNode(){return this.rowNode}getCellCtrl(e){let t=null;return this.getAllCellCtrls().forEach((i=>{i.getColumn()==e&&(t=i)})),null!=t||this.getAllCellCtrls().forEach((i=>{i.getColSpanningList().indexOf(e)>=0&&(t=i)})),t}onRowIndexChanged(){null!=this.rowNode.rowIndex&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(e){var t,i;const s=this.rowNode.getRowIndexString();if(null===s)return;const o=this.beans.headerNavigationService.getHeaderRowCount()+(null!==(t=null===(i=this.beans.filterManager)||void 0===i?void 0:i.getHeaderRowCount())&&void 0!==t?t:0),n=this.rowNode.rowIndex%2===0,r=o+this.rowNode.rowIndex+1;this.forEachGui(e,(e=>{e.rowComp.setRowIndex(s),e.rowComp.addOrRemoveCssClass("ag-row-even",n),e.rowComp.addOrRemoveCssClass("ag-row-odd",!n),Pt(e.element,r)}))}setStoppingRowEdit(e){this.stoppingRowEdit=e}};Yn.DOM_DATA_KEY_ROW_CTRL="renderedRow";var qn=Yn,Qn=class extends F{wireBeans(e){this.mouseEventService=e.mouseEventService,this.valueService=e.valueService,this.menuService=e.menuService,this.ctrlsService=e.ctrlsService,this.navigationService=e.navigationService,this.focusService=e.focusService,this.undoRedoService=e.undoRedoService,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.rangeService=e.rangeService,this.clipboardService=e.clipboardService}constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",y("touchstart")?"touchstart":"mousedown"].forEach((e=>{const t=this.processMouseEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}))}processMouseEvent(e,t){if(!this.mouseEventService.isEventFromThisGrid(t)||S(t))return;const i=this.getRowForEvent(t),s=this.mouseEventService.getRenderedCellForEvent(t);"contextmenu"===e?this.handleContextMenuMouseEvent(t,void 0,i,s):(s&&s.onMouseEvent(e,t),i&&i.onMouseEvent(e,t))}mockContextMenuForIPad(){if(!Ht())return;const e=new Di(this.element);this.addManagedListeners(e,{longTap:e=>{const t=this.getRowForEvent(e.touchEvent),i=this.mouseEventService.getRenderedCellForEvent(e.touchEvent);this.handleContextMenuMouseEvent(void 0,e.touchEvent,t,i)}}),this.addDestroyFunc((()=>e.destroy()))}getRowForEvent(e){let t=e.target;for(;t;){const e=this.gos.getDomData(t,qn.DOM_DATA_KEY_ROW_CTRL);if(e)return e;t=t.parentElement}return null}handleContextMenuMouseEvent(e,t,i,s){const o=i?i.getRowNode():null,n=s?s.getColumn():null;let r=null;if(n){const i=e||t;s.dispatchCellContextMenuEvent(null!==i&&void 0!==i?i:null),r=this.valueService.getValue(n,o)}const l=this.ctrlsService.getGridBodyCtrl(),a=s?s.getGui():l.getGridBodyElement();this.menuService.showContextMenu({mouseEvent:e,touchEvent:t,rowNode:o,column:n,value:r,anchorToElement:a})}getControlsForEventTarget(e){return{cellCtrl:b(this.gos,e,Zn.DOM_DATA_KEY_CELL_CTRL),rowCtrl:b(this.gos,e,qn.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(e,t){const{cellCtrl:i,rowCtrl:s}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(i?this.processCellKeyboardEvent(i,e,t):s&&s.isFullWidth()&&this.processFullWidthRowKeyboardEvent(s,e,t))}processCellKeyboardEvent(e,t,i){const s=e.getRowNode(),o=e.getColumn(),n=e.isEditing();if(!ro(this.gos,i,s,o,n)&&"keydown"===t){!n&&this.navigationService.handlePageScrollingKey(i)||e.onKeyDown(i),this.doGridOperations(i,e.isEditing()),no(i)&&e.processCharacter(i)}if("keydown"===t){const t=e.createEvent(i,"cellKeyDown");this.eventService.dispatchEvent(t)}}processFullWidthRowKeyboardEvent(e,t,i){const s=e.getRowNode(),o=this.focusService.getFocusedCell(),n=o&&o.column;if(!ro(this.gos,i,s,n,!1)){const s=i.key;if("keydown"===t)switch(s){case Vi.PAGE_HOME:case Vi.PAGE_END:case Vi.PAGE_UP:case Vi.PAGE_DOWN:this.navigationService.handlePageScrollingKey(i,!0);break;case Vi.UP:case Vi.DOWN:e.onKeyboardNavigate(i);break;case Vi.TAB:e.onTabKeyDown(i)}}if("keydown"===t){const t=e.createRowEvent("cellKeyDown",i);this.eventService.dispatchEvent(t)}}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey)return;if(t)return;if(!this.mouseEventService.isEventFromThisGrid(e))return;const i=function(e){const{keyCode:t}=e;let i;switch(t){case 65:i=Vi.A;break;case 67:i=Vi.C;break;case 86:i=Vi.V;break;case 68:i=Vi.D;break;case 90:i=Vi.Z;break;case 89:i=Vi.Y;break;default:i=e.code}return i}(e);return i===Vi.A?this.onCtrlAndA(e):i===Vi.C?this.onCtrlAndC(e):i===Vi.D?this.onCtrlAndD(e):i===Vi.V?this.onCtrlAndV(e):i===Vi.X?this.onCtrlAndX(e):i===Vi.Y?this.onCtrlAndY():i===Vi.Z?this.onCtrlAndZ(e):void 0}onCtrlAndA(e){const{pinnedRowModel:t,rowModel:i,rangeService:s}=this;if(s&&i.isRowsToRender()){const[e,o]=[t.isEmpty("top"),t.isEmpty("bottom")],r=e?null:"top";let l,a;o?(l=null,a=i.getRowCount()-1):(l="bottom",a=t.getPinnedBottomRowNodes().length-1);const d=this.visibleColsService.getAllCols();if(D(d))return;s.setCellRange({rowStartIndex:0,rowStartPinned:r,rowEndIndex:a,rowEndPinned:l,columnStart:d[0],columnEnd:n(d)})}e.preventDefault()}onCtrlAndC(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);null!==t&&void 0!==t&&t.isEditing()||null!==i&&void 0!==i&&i.isEditing()||(e.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);null!==t&&void 0!==t&&t.isEditing()||null!==i&&void 0!==i&&i.isEditing()||(e.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(e){const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);null!==t&&void 0!==t&&t.isEditing()||null!==i&&void 0!==i&&i.isEditing()||this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(e){this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),e.preventDefault()}onCtrlAndZ(e){this.gos.get("undoRedoCellEditing")&&this.undoRedoService&&(e.preventDefault(),e.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){var e;null===(e=this.undoRedoService)||void 0===e||e.redo("ui")}},Xn=class extends F{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({leftPinnedWidthChanged:this.onPinnedLeftWidthChanged.bind(this)})}onPinnedLeftWidthChanged(){const e=this.pinnedWidthService.getPinnedLeftWidth(),t=e>0;Yt(this.element,t),hi(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}},$n=class extends F{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({rightPinnedWidthChanged:this.onPinnedRightWidthChanged.bind(this)})}onPinnedRightWidthChanged(){const e=this.pinnedWidthService.getPinnedRightWidth(),t=e>0;Yt(this.element,t),hi(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}},Jn=e=>e.getTopRowCtrls(),er=e=>e.getStickyTopRowCtrls(),tr=e=>e.getStickyBottomRowCtrls(),ir=e=>e.getBottomRowCtrls(),sr=e=>e.getCentreRowCtrls(),or={center:{type:"center",container:"ag-center-cols-container",viewport:"ag-center-cols-viewport",getRowCtrls:sr},left:{type:"left",container:"ag-pinned-left-cols-container",pinnedType:"left",getRowCtrls:sr},right:{type:"right",container:"ag-pinned-right-cols-container",pinnedType:"right",getRowCtrls:sr},fullWidth:{type:"fullWidth",container:"ag-full-width-container",fullWidth:!0,getRowCtrls:sr},topCenter:{type:"center",container:"ag-floating-top-container",viewport:"ag-floating-top-viewport",getRowCtrls:Jn},topLeft:{type:"left",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:Jn},topRight:{type:"right",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:Jn},topFullWidth:{type:"fullWidth",container:"ag-floating-top-full-width-container",fullWidth:!0,getRowCtrls:Jn},stickyTopCenter:{type:"center",container:"ag-sticky-top-container",viewport:"ag-sticky-top-viewport",getRowCtrls:er},stickyTopLeft:{type:"left",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:er},stickyTopRight:{type:"right",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:er},stickyTopFullWidth:{type:"fullWidth",container:"ag-sticky-top-full-width-container",fullWidth:!0,getRowCtrls:er},stickyBottomCenter:{type:"center",container:"ag-sticky-bottom-container",viewport:"ag-sticky-bottom-viewport",getRowCtrls:tr},stickyBottomLeft:{type:"left",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:tr},stickyBottomRight:{type:"right",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:tr},stickyBottomFullWidth:{type:"fullWidth",container:"ag-sticky-bottom-full-width-container",fullWidth:!0,getRowCtrls:tr},bottomCenter:{type:"center",container:"ag-floating-bottom-container",viewport:"ag-floating-bottom-viewport",getRowCtrls:ir},bottomLeft:{type:"left",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:ir},bottomRight:{type:"right",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:ir},bottomFullWidth:{type:"fullWidth",container:"ag-floating-bottom-full-width-container",fullWidth:!0,getRowCtrls:ir}};function nr(e){return or[e]}var rr=["center","left","right","fullWidth"],lr=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],ar=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],dr=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],cr=["stickyTopCenter","stickyTopLeft","stickyTopRight"],ur=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],hr=[...cr,"stickyTopFullWidth",...ur,"stickyBottomFullWidth"],pr=["topCenter","topLeft","topRight","bottomCenter","bottomLeft","bottomRight","center","left","right",...cr,...ur],gr=class extends F{constructor(e){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=e,this.options=nr(e)}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService,this.columnViewportService=e.columnViewportService,this.resizeObserverService=e.resizeObserverService,this.rowRenderer=e.rowRenderer}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],(()=>{this.viewportSizeFeature=this.createManagedBean(new An(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})}))}onStickyTopOffsetChanged(e){this.comp.setOffsetTop("".concat(e.offset,"px"))}registerWithCtrlsService(){this.options.fullWidth||this.ctrlsService.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(e,t,i){this.comp=e,this.eContainer=t,this.eViewport=i,this.createManagedBean(new Qn(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows(),this.forContainers(ar,(()=>{this.pinnedWidthFeature=this.createManagedBean(new Xn(this.eContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:()=>this.onPinnedWidthChanged()})})),this.forContainers(dr,(()=>{this.pinnedWidthFeature=this.createManagedBean(new $n(this.eContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:()=>this.onPinnedWidthChanged()})})),this.forContainers(rr,(()=>this.createManagedBean(new Pn(this.eContainer,"center"===this.name?i:void 0)))),this.forContainers(pr,(()=>this.createManagedBean(new kn(this.eContainer)))),this.forContainers(lr,(()=>this.createManagedBean(new rn((e=>this.comp.setContainerWidth("".concat(e,"px"))))))),this.addListeners(),this.registerWithCtrlsService()}addListeners(){this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),displayedRowsChanged:e=>this.onDisplayedRowsChanged(e.afterScroll)}),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if(hr.indexOf(this.name)>=0)return void this.comp.setDomOrder(!0);const e=()=>{const e=this.gos.get("ensureDomOrder"),t=this.gos.isDomLayout("print");this.comp.setDomOrder(e||t)};this.addManagedPropertyListener("domLayout",e),e()}stopHScrollOnPinnedRows(){this.forContainers(["topCenter","stickyTopCenter","bottomCenter","stickyBottomCenter"],(()=>{this.addManagedElementListeners(this.eViewport,{scroll:()=>this.eViewport.scrollLeft=0})}))}onDisplayedColumnsChanged(){this.forContainers(["center"],(()=>this.onHorizontalViewportChanged()))}onDisplayedColumnsWidthChanged(){this.forContainers(["center"],(()=>this.onHorizontalViewportChanged()))}addPreventScrollWhileDragging(){const e=e=>{this.dragService.isDragging()&&e.cancelable&&e.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc((()=>this.eContainer.removeEventListener("touchmove",e)))}onHorizontalViewportChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.getCenterWidth(),i=this.getCenterViewportScrollLeft();this.columnViewportService.setScrollPosition(t,i,e)}getCenterWidth(){return Jt(this.eViewport)}getCenterViewportScrollLeft(){return oi(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc((()=>t()))}isViewportInTheDOMTree(){return ai(this.eViewport)}getViewportScrollLeft(){return oi(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||(e=this.eViewport).clientWidth<e.scrollWidth;var e}getViewportElement(){return this.eViewport}setContainerTranslateX(e){this.eContainer.style.transform="translateX(".concat(e,"px)")}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){ni(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(null!=this.options.pinnedType)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.options.getRowCtrls(this.rowRenderer);if(!this.visible||0===t.length)return void this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});const i=this.gos.isDomLayout("print"),s=this.gos.get("embedFullWidthRows")||i,o=t.filter((e=>{const t=e.isFullWidth();return this.options.fullWidth?!s&&t:s||!t}));this.comp.setRowCtrls({rowCtrls:o,useFlushSync:e})}};function mr(e){return e.map((e=>'<ag-row-container name="'.concat(e,'"></ag-row-container>'))).join("")}'<div class="ag-root ag-unselectable" role="treegrid">\n        <ag-header-root></ag-header-root>\n        <div class="ag-floating-top" data-ref="eTop" role="presentation">\n            '.concat(mr(["topLeft","topCenter","topRight","topFullWidth"]),'\n        </div>\n        <div class="ag-body" data-ref="eBody" role="presentation">\n            <div class="ag-body-viewport" data-ref="eBodyViewport" role="presentation">\n            ').concat(mr(["left","center","right","fullWidth"]),'\n            </div>\n            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>\n        </div>\n        <div class="ag-sticky-top" data-ref="eStickyTop" role="presentation">\n            ').concat(mr(["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]),'\n        </div>\n        <div class="ag-sticky-bottom" data-ref="eStickyBottom" role="presentation">\n            ').concat(mr(["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]),'\n        </div>\n        <div class="ag-floating-bottom" data-ref="eBottom" role="presentation">\n            ').concat(mr(["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]),"\n        </div>\n        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>\n        <ag-overlay-wrapper></ag-overlay-wrapper>\n    </div>");var vr=class extends F{constructor(){super(...arguments),this.beanName="scrollVisibleService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnAnimationService=e.columnAnimationService}postConstruct(){this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)})}onDisplayedColumnsChanged(){this.update()}onDisplayedColumnsWidthChanged(){this.update()}update(){this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn((()=>{this.columnAnimationService.executeLaterVMTurn((()=>this.updateImpl()))})):this.updateImpl()}updateImpl(){const e=this.ctrlsService.get("center");if(!e||this.columnAnimationService.isActive())return;const t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(t)}setScrollsVisible(e){if(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing){this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing;const t={type:"scrollVisibilityChanged"};this.eventService.dispatchEvent(t)}}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}},fr="__ag_grid_instance",Cr=class e extends F{constructor(){super(...arguments),this.beanName="mouseEventService",this.gridInstanceId=e.gridInstanceSequence.next()}wireBeans(e){this.ctrlsService=e.ctrlsService}stampTopLevelGridCompWithGridInstance(e){e[fr]=this.gridInstanceId}getRenderedCellForEvent(e){return b(this.gos,e.target,Zn.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(e){return this.isElementInThisGrid(e.target)}isElementInThisGrid(e){let t=e;for(;t;){const e=t[fr];if(P(e)){return e===this.gridInstanceId}t=t.parentElement}return!1}getCellPositionForEvent(e){const t=this.getRenderedCellForEvent(e);return t?t.getCellPosition():null}getNormalisedPosition(e){const t=this.gos.isDomLayout("normal"),i=e;let s,o;if(null!=i.clientX||null!=i.clientY?(s=i.clientX,o=i.clientY):(s=i.x,o=i.y),t){const e=this.ctrlsService.getGridBodyCtrl(),t=e.getScrollFeature().getVScrollPosition();s+=e.getScrollFeature().getHScrollPosition().left,o+=t.top}return{x:s,y:o}}};Cr.gridInstanceSequence=new Ci;var wr=Cr,Sr=class extends F{constructor(){super(),this.beanName="navigationService",this.onPageDown=ce(this.onPageDown,100),this.onPageUp=ce(this.onPageUp,100)}wireBeans(e){this.mouseEventService=e.mouseEventService,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.ctrlsService=e.ctrlsService,this.rowRenderer=e.rowRenderer,this.headerNavigationService=e.headerNavigationService,this.rowPositionUtils=e.rowPositionUtils,this.cellNavigationService=e.cellNavigationService,this.pinnedRowModel=e.pinnedRowModel,this.rangeService=e.rangeService}postConstruct(){this.ctrlsService.whenReady((e=>{this.gridBodyCon=e.gridBodyCtrl}))}handlePageScrollingKey(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=e.key,s=e.altKey,o=e.ctrlKey||e.metaKey,n=!!this.rangeService&&e.shiftKey,r=this.mouseEventService.getCellPositionForEvent(e);let l=!1;switch(i){case Vi.PAGE_HOME:case Vi.PAGE_END:o||s||(this.onHomeOrEndKey(i),l=!0);break;case Vi.LEFT:case Vi.RIGHT:case Vi.UP:case Vi.DOWN:if(!r)return!1;!o||s||n||(this.onCtrlUpDownLeftRight(i,r),l=!0);break;case Vi.PAGE_DOWN:case Vi.PAGE_UP:o||s||(l=this.handlePageUpDown(i,r,t))}return l&&e.preventDefault(),l}handlePageUpDown(e,t,i){return i&&(t=this.focusService.getFocusedCell()),!!t&&(e===Vi.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0)}navigateTo(e){var t;const{scrollIndex:i,scrollType:s,scrollColumn:o,focusIndex:n,focusColumn:r}=e;P(o)&&!o.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(o),P(i)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(i,s),e.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(n),this.focusService.setFocusedCell({rowIndex:n,column:r,rowPinned:null,forceBrowserFocus:!0}),null===(t=this.rangeService)||void 0===t||t.setRangeToCell({rowIndex:n,rowPinned:null,column:r})}onPageDown(e){const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),i=this.getViewportHeight(),s=this.pageBoundsService.getPixelOffset(),o=t.top+i,n=this.rowModel.getRowIndexAtPixel(o+s);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,n):this.navigateToNextPage(e,n)}onPageUp(e){const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),i=this.pageBoundsService.getPixelOffset(),s=t.top,o=this.rowModel.getRowIndexAtPixel(s+i);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,o,!0):this.navigateToNextPage(e,o,!0)}navigateToNextPage(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=this.getViewportHeight(),o=this.pageBoundsService.getFirstRow(),n=this.pageBoundsService.getLastRow(),r=this.pageBoundsService.getPixelOffset(),l=this.rowModel.getRow(e.rowIndex),a=i?(null===l||void 0===l?void 0:l.rowHeight)-s-r:s-r,d=(null===l||void 0===l?void 0:l.rowTop)+a;let c,u=this.rowModel.getRowIndexAtPixel(d+r);if(u===e.rowIndex){const s=i?-1:1;t=u=e.rowIndex+s}i?(c="bottom",u<o&&(u=o),t<o&&(t=o)):(c="top",u>n&&(u=n),t>n&&(t=n)),this.isRowTallerThanView(u)&&(t=u,c="top"),this.navigateTo({scrollIndex:t,scrollType:c,scrollColumn:null,focusIndex:u,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout((()=>{const s=this.getNextFocusIndexForAutoHeight(e,i);this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:s,focusColumn:e.column,isAsync:!0})}),50)}getNextFocusIndexForAutoHeight(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?-1:1,i=this.getViewportHeight(),s=this.pageBoundsService.getLastRow();let o=0,n=e.rowIndex;for(;n>=0&&n<=s;){const e=this.rowModel.getRow(n);if(e){var r;const t=null!==(r=e.rowHeight)&&void 0!==r?r:0;if(o+t>i)break;o+=t}n+=t}return Math.max(0,Math.min(n,s))}getViewportHeight(){const{gridBodyCtrl:e,center:t}=this.ctrlsService.getParams(),i=e.getScrollFeature().getVScrollPosition(),s=this.gos.getScrollbarWidth();let o=i.bottom-i.top;return t.isHorizontalScrollShowing()&&(o-=s),o}isRowTallerThanView(e){const t=this.rowModel.getRow(e);if(!t)return!1;const i=t.rowHeight;return"number"===typeof i&&i>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const i=this.cellNavigationService.getNextCellToFocus(e,t,!0),{rowIndex:s}=i,o=i.column;this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:o,focusIndex:s,focusColumn:o})}onHomeOrEndKey(e){const t=e===Vi.PAGE_HOME,i=this.visibleColsService.getAllCols(),s=t?i[0]:n(i),o=t?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow();this.navigateTo({scrollIndex:o,scrollType:null,scrollColumn:s,focusIndex:o,focusColumn:s})}onTabKeyDown(e,t){const i=t.shiftKey,s=this.tabToNextCellCommon(e,i,t);if(!1===s)if(i){const{rowIndex:i,rowPinned:s}=e.getRowPosition();(s?0===i:i===this.pageBoundsService.getFirstRow())&&(0===this.gos.get("headerHeight")||this.gos.get("suppressHeaderFocus")?this.focusService.focusNextGridCoreContainer(!0,!0):(t.preventDefault(),this.focusService.focusPreviousFromFirstCell(t)))}else e instanceof Zn&&e.focusCell(!0),this.focusService.focusNextGridCoreContainer(i)&&t.preventDefault();else s&&t.preventDefault()}tabToNextCell(e,t){const i=this.focusService.getFocusedCell();if(!i)return!1;let s=this.getCellByPosition(i);return!!(s||(s=this.rowRenderer.getRowByPosition(i),s&&s.isFullWidth()))&&!!this.tabToNextCellCommon(s,e,t)}tabToNextCellCommon(e,t,i){let s,o=e.isEditing();if(!o&&e instanceof Zn){const t=e.getRowCtrl();t&&(o=t.isEditing())}return s=o?"fullRow"===this.gos.get("editType")?this.moveToNextEditingRow(e,t,i):this.moveToNextEditingCell(e,t,i):this.moveToNextCellNotEditing(e,t),null===s?s:s||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const s=e.getCellPosition();e.getGui().focus(),e.stopEditing();const o=this.findNextCellToFocusOn(s,t,!0);return!1===o?null:null!=o&&(o.startEditing(null,!0,i),o.focusCell(!1),!0)}moveToNextEditingRow(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const s=e.getCellPosition(),o=this.findNextCellToFocusOn(s,t,!0);if(!1===o)return null;if(null==o)return!1;const n=o.getCellPosition(),r=this.isCellEditable(s),l=this.isCellEditable(n),a=n&&s.rowIndex===n.rowIndex&&s.rowPinned===n.rowPinned;if(r&&e.setFocusOutOnEditor(),!a){e.getRowCtrl().stopEditing();o.getRowCtrl().startRowEditing(void 0,void 0,i)}return l?(o.setFocusInOnEditor(),o.focusCell()):o.focusCell(!0),!0}moveToNextCellNotEditing(e,t){const i=this.visibleColsService.getAllCols();let s;s=e instanceof qn?{...e.getRowPosition(),column:t?i[0]:n(i)}:e.getCellPosition();const o=this.findNextCellToFocusOn(s,t,!1);if(!1===o)return null;if(o instanceof Zn)o.focusCell(!0);else if(o)return this.tryToFocusFullWidthRow(o.getRowPosition(),t);return P(o)}findNextCellToFocusOn(e,t,i){let s=e;for(;;){var o;e!==s&&(e=s),t||(s=this.getLastCellOfColSpan(s)),s=this.cellNavigationService.getNextTabbedCell(s,t);const n=this.gos.getCallback("tabToNextCell");if(P(n)){const o=n({backwards:t,editing:i,previousCellPosition:e,nextCellPosition:s||null});if(!0===o||null===o)null===o&&ie("Returning `null` from tabToNextCell is deprecated. Return `true` to stay on the current cell, or `false` to let the browser handle the tab behaviour."),s=e;else{if(!1===o)return!1;s={rowIndex:o.rowIndex,column:o.column,rowPinned:o.rowPinned}}}if(!s)return null;if(s.rowIndex<0){const e=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:e+s.rowIndex,column:s.column},fromCell:!0}),null}const r="fullRow"===this.gos.get("editType");if(i&&!r){if(!this.isCellEditable(s))continue}this.ensureCellVisible(s);const l=this.getCellByPosition(s);if(!l){const e=this.rowRenderer.getRowByPosition(s);if(!e||!e.isFullWidth()||i)continue;return e}if(!l.isSuppressNavigable())return null===(o=this.rangeService)||void 0===o||o.setRangeToCell(s),l}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return!!t&&e.column.isCellEditable(t)}getCellByPosition(e){const t=this.rowRenderer.getRowByPosition(e);return t?t.getCellCtrl(e.column):null}lookupRowNodeForCell(e){return"top"===e.rowPinned?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):"bottom"===e.rowPinned?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.rowModel.getRow(e.rowIndex)}navigateToNextCell(e,t,i,s){let o=i,n=!1;for(;o&&(o===i||!this.isValidNavigateCell(o));)this.gos.get("enableRtl")?t===Vi.LEFT&&(o=this.getLastCellOfColSpan(o)):t===Vi.RIGHT&&(o=this.getLastCellOfColSpan(o)),o=this.cellNavigationService.getNextCellToFocus(t,o),n=M(o);if(n&&e&&e.key===Vi.UP&&(o={rowIndex:-1,rowPinned:null,column:i.column}),s){const s=this.gos.getCallback("navigateToNextCell");if(P(s)){const n=s({key:t,previousCellPosition:i,nextCellPosition:o||null,event:e});o=P(n)?{rowPinned:n.rowPinned,rowIndex:n.rowIndex,column:n.column}:null}}if(!o)return;if(o.rowIndex<0){const t=this.headerNavigationService.getHeaderRowCount();return void this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:t+o.rowIndex,column:i.column},event:e||void 0,fromCell:!0})}const r=this.getNormalisedPosition(o);r?this.focusPosition(r):this.tryToFocusFullWidthRow(o)}getNormalisedPosition(e){this.ensureCellVisible(e);const t=this.getCellByPosition(e);return t?(e=t.getCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.visibleColsService.getAllCols(),s=this.rowRenderer.getRowByPosition(e);if(!s||!s.isFullWidth())return!1;const o=this.focusService.getFocusedCell(),r={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?n(i):i[0])};this.focusPosition(r);const l=null!=o&&this.rowPositionUtils.before(r,o),a={type:"fullWidthRowFocused",rowIndex:r.rowIndex,rowPinned:r.rowPinned,column:r.column,isFullWidthCell:!0,fromBelow:l};return this.eventService.dispatchEvent(a),!0}focusPosition(e){var t;this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),null===(t=this.rangeService)||void 0===t||t.setRangeToCell(e)}isValidNavigateCell(e){return!!this.rowPositionUtils.getRowNode(e)}getLastCellOfColSpan(e){const t=this.getCellByPosition(e);if(!t)return e;const i=t.getColSpanningList();return 1===i.length?e:{rowIndex:e.rowIndex,column:n(i),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=this.gos.isGroupRowsSticky(),i=this.rowModel.getRow(e.rowIndex);!(t&&(null===i||void 0===i?void 0:i.sticky))&&M(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column)}},yr=class extends F{constructor(){super(...arguments),this.beanName="horizontalResizeService"}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService}addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0};this.dragService.addDragSource(t);return()=>this.dragService.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const i=t instanceof MouseEvent&&!0===t.shiftKey;e.onResizeStart(i)}setResizeIcons(){const e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!0),e.disableUserSelect(!0)}onDragStop(e,t){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},br=class extends F{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupService=e.popupService,this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.menuService=e.menuService}hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(e,t,i){this.showPopup(e,(s=>{this.popupService.positionPopupUnderMouseEvent({column:e,type:i,mouseEvent:t,ePopup:s})}),i,t.target,this.menuService.isLegacyMenuEnabled())}showMenuAfterButtonClick(e,t,i){let s=-1,o="left";const n=this.menuService.isLegacyMenuEnabled();!n&&this.gos.get("enableRtl")&&(s=1,o="right");const r=n?void 0:4*s,l=n?void 0:4;this.showPopup(e,(s=>{this.popupService.positionPopupByComponent({type:i,eventSource:t,ePopup:s,nudgeX:r,nudgeY:l,alignSide:o,keepWithinBounds:!0,position:"under",column:e})}),i,t,n)}showPopup(e,t,i,s,o){const n=e?this.createBean(new Ws(e,"COLUMN_MENU")):void 0;if(this.activeMenu=n,null===n||void 0===n||!n.hasFilter()||!e)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");const r=document.createElement("div");let l;pt(r,"presentation"),r.classList.add("ag-menu"),o||r.classList.add("ag-filter-menu"),[this.tabListener]=this.addManagedElementListeners(r,{keydown:e=>this.trapFocusWithin(e,r)}),r.appendChild(null===n||void 0===n?void 0:n.getGui());const a=this.menuService.isColumnMenuAnchoringEnabled()?null!==s&&void 0!==s?s:this.ctrlsService.getGridBodyCtrl().getGui():void 0,d=this.localeService.getLocaleTextFunc(),c=o&&"columnFilter"!==i?d("ariaLabelColumnMenu","Column Menu"):d("ariaLabelColumnFilter","Column Filter"),u=this.popupService.addPopup({modal:!0,eChild:r,closeOnEsc:!0,closedCallback:t=>{e.setMenuVisible(!1,"contextMenu");const o=t instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),o&&s&&di(s)){const e=this.focusService.findTabbableParent(s);e&&e.focus()}null===n||void 0===n||n.afterGuiDetached(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,i,e)},positionCallback:()=>t(r),anchorToElement:a,ariaLabel:c});u&&(this.hidePopup=l=u.hideFunc),n.afterInit().then((()=>{t(r),n.afterGuiAttached({container:i,hidePopup:l})})),e.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,i,e)}trapFocusWithin(e,t){e.key!==Vi.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(t,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,i){const s={type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:null!==i&&void 0!==i?i:null};this.eventService.dispatchEvent(s)}isMenuEnabled(e){var t;return e.isFilterAllowed()&&(null!==(t=e.getColDef().menuTabs)&&void 0!==t?t:["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},Rr=class extends F{constructor(){super(...arguments),this.beanName="resizeObserverService",this.polyfillFunctions=[]}observeResize(e,t){const i=this.gos.getWindow(),s=()=>{var i,s;let o=null!==(i=null===e||void 0===e?void 0:e.clientWidth)&&void 0!==i?i:0,n=null!==(s=null===e||void 0===e?void 0:e.clientHeight)&&void 0!==s?s:0,r=!0;const l=()=>{if(r){var i,s;const r=null!==(i=null===e||void 0===e?void 0:e.clientWidth)&&void 0!==i?i:0,a=null!==(s=null===e||void 0===e?void 0:e.clientHeight)&&void 0!==s?s:0;(r!==o||a!==n)&&(o=r,n=a,t()),this.doNextPolyfillTurn(l)}};return l(),()=>r=!1},o=this.gos.get("suppressBrowserResizeObserver");return!!i.ResizeObserver&&!o?(()=>{const s=new i.ResizeObserver(t);return s.observe(e),()=>s.disconnect()})():this.getFrameworkOverrides().wrapIncoming((()=>s()),"resize-observer")}doNextPolyfillTurn(e){this.polyfillFunctions.push(e),this.schedulePolyfill()}schedulePolyfill(){if(this.polyfillScheduled)return;this.polyfillScheduled=!0,window.setTimeout((()=>{const e=this.polyfillFunctions;this.polyfillScheduled=!1,this.polyfillFunctions=[],e.forEach((e=>e()))}),50)}},Fr=class extends F{constructor(){super(...arguments),this.beanName="animationFrameService",this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}setScrollTop(e){const t=this.gos.get("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,t&&0===e){var i,s;const e=null!==(i=null===(s=this.paginationService)||void 0===s?void 0:s.getCurrentPage())&&void 0!==i?i:0;e!==this.lastPage&&(this.lastPage=e,this.scrollGoingDown=!0)}this.lastScrollTop=e}postConstruct(){this.useAnimationFrame=!this.gos.get("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(e){!1===this.useAnimationFrame&&ie("AnimationFrameService.".concat(e," called but animation frames are off"))}createTask(e,t,i){this.verifyAnimationFrameOn(i);const s={task:e,index:t,createOrder:++this.taskCount};this.addTaskToList(this[i],s),this.schedule()}cancelTask(e){this.cancelledTasks.add(e)}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort(((e,i)=>e.index!==i.index?t*(i.index-e.index):i.createOrder-e.createOrder)),e.sorted=!0}addDestroyTask(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()}executeFrame(e){this.verifyAnimationFrameOn("executeFrame");const t=this.createTasksP1,i=t.list,s=this.createTasksP2,o=s.list,n=this.destroyTasks,r=(new Date).getTime();let l=(new Date).getTime()-r;const a=e<=0,d=this.ctrlsService.getGridBodyCtrl();for(;a||l<e;){if(!d.getScrollFeature().scrollGridIfNeeded()){let e;if(i.length)this.sortTaskList(t),e=i.pop().task;else if(o.length)this.sortTaskList(s),e=o.pop().task;else{if(!n.length){this.cancelledTasks.clear();break}e=n.pop()}this.cancelledTasks.has(e)||e()}l=(new Date).getTime()-r}i.length||o.length||n.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){this.useAnimationFrame&&this.executeFrame(-1)}schedule(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);this.requestAnimationFrame(e)}requestAnimationFrame(e){const t=this.gos.getWindow();t.requestAnimationFrame?t.requestAnimationFrame(e):t.webkitRequestAnimationFrame?t.webkitRequestAnimationFrame(e):t.setTimeout(e,0)}isQueueEmpty(){return!this.ticking}debounce(e){let t=!1;return()=>{this.isOn()?t||(t=!0,this.addDestroyTask((()=>{t=!1,e()}))):window.setTimeout(e,0)}}},Er=(e=>(e.EVERYTHING="group",e.FILTER="filter",e.SORT="sort",e.MAP="map",e.AGGREGATE="aggregate",e.FILTER_AGGREGATES="filter_aggregates",e.PIVOT="pivot",e.NOTHING="nothing",e))(Er||{}),xr=class extends F{constructor(){super(...arguments),this.beanName="expansionService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.isClientSideRowModel="clientSide"===this.rowModel.getType()}expandRows(e){if(!this.isClientSideRowModel)return;const t=new Set(e);this.rowModel.forEachNode((e=>{e.id&&t.has(e.id)&&(e.expanded=!0)})),this.onGroupExpandedOrCollapsed()}getExpandedRows(){const e=[];return this.rowModel.forEachNode((t=>{let{expanded:i,id:s}=t;i&&s&&e.push(s)})),e}expandAll(e){this.isClientSideRowModel&&this.rowModel.expandOrCollapseAll(e)}setRowNodeExpanded(e,t,i,s){e&&(i&&e.parent&&-1!==e.parent.level&&this.setRowNodeExpanded(e.parent,t,i,s),e.setExpanded(t,void 0,s))}onGroupExpandedOrCollapsed(){this.isClientSideRowModel&&this.rowModel.refreshModel({step:"map"})}},Pr=class extends F{constructor(){super(...arguments),this.beanName="menuService"}wireBeans(e){this.filterMenuFactory=e.filterMenuFactory,this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.filterManager=e.filterManager,this.rowRenderer=e.rowRenderer,this.columnChooserFactory=e.columnChooserFactory,this.contextMenuFactory=e.contextMenuFactory,this.enterpriseMenuFactory=e.enterpriseMenuFactory}postConstruct(){var e;this.activeMenuFactory=null!==(e=this.enterpriseMenuFactory)&&void 0!==e?e:this.filterMenuFactory}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){const t=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(t,e,e.containerType,!0)}showHeaderContextMenu(e,t,i){this.activeMenuFactory.showMenuAfterContextMenuEvent(e,t,i)}getContextMenuPosition(e,t){const i=this.getRowCtrl(e),s=this.getCellGui(i,t);if(!s)return i?{x:0,y:i.getRowYPosition()}:{x:0,y:0};const o=s.getBoundingClientRect();return{x:o.x+o.width/2,y:o.y+o.height/2}}showContextMenu(e){var t,i,s;const{rowNode:o}=e,n=e.column;let{anchorToElement:r,value:l}=e;o&&n&&null==l&&(l=o.getValueFromValueService(n)),null==r&&(r=this.getContextMenuAnchorElement(o,n)),null===(t=this.contextMenuFactory)||void 0===t||t.onContextMenu(null!==(i=e.mouseEvent)&&void 0!==i?i:null,null!==(s=e.touchEvent)&&void 0!==s?s:null,null!==o&&void 0!==o?o:null,null!==n&&void 0!==n?n:null,l,r)}showColumnChooser(e){var t;null===(t=this.columnChooserFactory)||void 0===t||t.showColumnChooser(e)}hidePopupMenu(){var e;null===(e=this.contextMenuFactory)||void 0===e||e.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()}hideColumnChooser(){var e;null===(e=this.columnChooserFactory)||void 0===e||e.hideActiveColumnChooser()}isColumnMenuInHeaderEnabled(e){const{suppressMenu:t,suppressHeaderMenuButton:i}=e.getColDef();return!(null!==i&&void 0!==i?i:t)&&this.activeMenuFactory.isMenuEnabled(e)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){var t;return!e.getColDef().suppressHeaderFilterButton&&!(null===(t=this.filterManager)||void 0===t||!t.isFilterAllowed(e))}isHeaderContextMenuEnabled(e){return!(null!==e&&void 0!==e&&e.getColDef().suppressHeaderContextMenu)&&"new"===this.getColumnMenuType()}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!(Ht()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){var t;return!(null===(t=this.filterManager)||void 0===t||!t.isFilterAllowed(e))&&!this.isLegacyMenuEnabled()&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isColumnMenuAnchoringEnabled(){return!this.isLegacyMenuEnabled()}areAdditionalColumnMenuItemsEnabled(){return"new"===this.getColumnMenuType()}isLegacyMenuEnabled(){return"legacy"===this.getColumnMenuType()}isFloatingFilterButtonEnabled(e){var t;const i=e.getColDef(),s=null===(t=i.floatingFilterComponentParams)||void 0===t?void 0:t.suppressFilterButton;return null!=s&&ie("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),null==i.suppressFloatingFilterButton?!s:!i.suppressFloatingFilterButton}getColumnMenuType(){return this.gos.get("columnMenu")}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gos.get("suppressMenuHide");return this.isLegacyMenuEnabled()?!!this.gos.exists("suppressMenuHide")&&e:e}showColumnMenuCommon(e,t,i,s){const{positionBy:o}=t,n=t.column;if("button"===o){const{buttonElement:o}=t;e.showMenuAfterButtonClick(n,o,i,s)}else if("mouse"===o){const{mouseEvent:o}=t;e.showMenuAfterMouseEvent(n,o,i,s)}else n&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(n,"auto"),this.animationFrameService.requestAnimationFrame((()=>{const t=this.ctrlsService.getHeaderRowContainerCtrl(n.getPinned()).getHeaderCtrlForColumn(n);e.showMenuAfterButtonClick(n,t.getAnchorElementForMenu(s),i,!0)})))}getRowCtrl(e){const{rowIndex:t,rowPinned:i}=e||{};if(null!=t)return this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:i})||void 0}getCellGui(e,t){if(!e||!t)return;const i=e.getCellCtrl(t);return(null===i||void 0===i?void 0:i.getGui())||void 0}getContextMenuAnchorElement(e,t){const i=this.ctrlsService.getGridBodyCtrl().getGridBodyElement(),s=this.getRowCtrl(e);if(!s)return i;const o=this.getCellGui(s,t);return o||(s.isFullWidth()?s.getFullWidthElement():i)}},Mr={selector:"AG-INPUT-TEXT-AREA",component:class extends zi{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){const i=super.setValue(e,t);return this.eInput.value=e,i}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}}},Dr=class extends Xi{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){this.gos.setDomData(this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),t=this.params;this.addManagedElementListeners(e,{keydown:e=>{ro(this.gos,e,t.node,t.column,!0)||t.onKeyDown(e)}})}},Ir=class extends Xi{constructor(e){super('\n            <div class="ag-cell-edit-wrapper">\n                '.concat(e.getTemplate(),"\n            </div>"),e.getAgComponents()),this.cellEditorInput=e,this.eInput=Ri}init(e){this.params=e;const t=this.eInput;let i;if(this.cellEditorInput.init(t,e),e.cellStartedEdit){this.focusAfterAttached=!0;const t=e.eventKey;t===Vi.BACKSPACE||e.eventKey===Vi.DELETE?i="":t&&1===t.length?i=t:(i=this.cellEditorInput.getStartValue(),t!==Vi.F2&&(this.highlightAllOnFocus=!0))}else this.focusAfterAttached=!1,i=this.cellEditorInput.getStartValue();null!=i&&t.setStartValue(i),this.addManagedElementListeners(t.getGui(),{keydown:e=>{const{key:t}=e;t!==Vi.PAGE_UP&&t!==Vi.PAGE_DOWN||e.preventDefault()}})}afterGuiAttached(){const e=this.localeService.getLocaleTextFunc(),t=this.eInput;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;Gt()||t.getFocusableElement().focus();const i=t.getInputElement();var s,o;this.highlightAllOnFocus?i.select():null===(s=(o=this.cellEditorInput).setCaret)||void 0===s||s.call(o)}focusIn(){const e=this.eInput,t=e.getFocusableElement(),i=e.getInputElement();t.focus(),i.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}},Tr=class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" data-ref="eInput"></ag-input-text-field>'}getAgComponents(){return[ao]}init(e,t){this.eInput=e,this.params=t,null!=t.maxLength&&e.setMaxLength(t.maxLength)}getValue(){const e=this.eInput.getValue();return P(e)||P(this.params.value)?this.params.parseValue(e):this.params.value}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){const e=this.eInput.getValue(),t=P(e)&&e.length||0;t&&this.eInput.getInputElement().setSelectionRange(t,t)}},Ar=class extends Ir{constructor(){super(new Tr)}},kr=class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" data-ref="eInput"></ag-input-number-field>'}getAgComponents(){return[uo]}init(e,t){this.eInput=e,this.params=t,null!=t.max&&e.setMax(t.max),null!=t.min&&e.setMin(t.min),null!=t.precision&&e.setPrecision(t.precision),null!=t.step&&e.setStep(t.step);const i=e.getInputElement();t.preventStepping?e.addManagedElementListeners(i,{keydown:this.preventStepping}):t.showStepperButtons&&i.classList.add("ag-number-field-input-stepper")}preventStepping(e){e.key!==Vi.UP&&e.key!==Vi.DOWN||e.preventDefault()}getValue(){const e=this.eInput.getValue();if(!P(e)&&!P(this.params.value))return this.params.value;let t=this.params.parseValue(e);if(null==t)return t;if("string"===typeof t){if(""===t)return null;t=Number(t)}return isNaN(t)?null:t}getStartValue(){return this.params.value}},Lr={selector:"AG-INPUT-DATE-FIELD",component:class extends lo{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();const e=Gt();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){this.gos.getActiveDomElement()===this.eInput&&e.preventDefault()}setMin(e){var t;const i=e instanceof Date?null!==(t=Fo(null!==e&&void 0!==e?e:null,!1))&&void 0!==t?t:void 0:e;return this.min===i||(this.min=i,vi(this.eInput,"min",i)),this}setMax(e){var t;const i=e instanceof Date?null!==(t=Fo(null!==e&&void 0!==e?e:null,!1))&&void 0!==t?t:void 0:e;return this.max===i||(this.max=i,vi(this.eInput,"max",i)),this}setStep(e){return this.step===e||(this.step=e,vi(this.eInput,"step",e)),this}getDate(){var e;if(this.eInput.validity.valid)return null!==(e=Po(this.getValue()))&&void 0!==e?e:void 0}setDate(e,t){this.setValue(Fo(null!==e&&void 0!==e?e:null,!1),t)}}},Gr=class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[Lr]}init(e,t){this.eInput=e,this.params=t,null!=t.min&&e.setMin(t.min),null!=t.max&&e.setMax(t.max),null!=t.step&&e.setStep(t.step)}getValue(){const e=this.eInput.getDate();return P(e)||P(this.params.value)?null!==e&&void 0!==e?e:null:this.params.value}getStartValue(){const{value:e}=this.params;if(e instanceof Date)return Fo(e,!1)}},Nr=class{constructor(e){this.getDataTypeService=e}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[Lr]}init(e,t){this.eInput=e,this.params=t,null!=t.min&&e.setMin(t.min),null!=t.max&&e.setMax(t.max),null!=t.step&&e.setStep(t.step)}getValue(){const e=this.formatDate(this.eInput.getDate());return P(e)||P(this.params.value)?this.params.parseValue(null!==e&&void 0!==e?e:""):this.params.value}getStartValue(){var e,t;return Fo(null!==(e=this.parseDate(null!==(t=this.params.value)&&void 0!==t?t:void 0))&&void 0!==e?e:null,!1)}parseDate(e){var t;const i=this.getDataTypeService();return i?i.getDateParserFunction(this.params.column)(e):null!==(t=Po(e))&&void 0!==t?t:void 0}formatDate(e){var t;const i=this.getDataTypeService();return i?i.getDateFormatterFunction(this.params.column)(e):null!==(t=Fo(null!==e&&void 0!==e?e:null,!1))&&void 0!==t?t:void 0}},Or=class{constructor(e){this.cellValueChanges=e}},Br=class extends Or{constructor(e,t,i,s){super(e),this.initialRange=t,this.finalRange=i,this.ranges=s}},Vr=class{constructor(e){this.actionStack=[],this.maxStackSize=e||10,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}};function Hr(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"auto";e.frameworkOverrides.wrapIncoming((()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(t,i)),"ensureVisible")}function Wr(e,t,i){e.frameworkOverrides.wrapIncoming((()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureIndexVisible(t,i)),"ensureVisible")}var zr={version:Wo,moduleName:"@ag-grid-community/edit-core",beans:[class extends F{constructor(){super(...arguments),this.beanName="editService"}wireBeans(e){this.navigationService=e.navigationService,this.userComponentFactory=e.userComponentFactory,this.valueService=e.valueService}startEditing(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const o=this.createCellEditorParams(e,t,i),n=e.getColumn().getColDef(),r=this.userComponentFactory.getCellEditorDetails(n,o),l=null!=(null===r||void 0===r?void 0:r.popupFromSelector)?r.popupFromSelector:!!n.cellEditorPopup,a=null!=(null===r||void 0===r?void 0:r.popupPositionFromSelector)?r.popupPositionFromSelector:n.cellEditorPopupPosition;e.setEditing(!0,r),e.getComp().setEditDetails(r,l,a,this.gos.get("reactiveCustomComponents"));const d=e.createEvent(s,"cellEditingStarted");this.eventService.dispatchEvent(d)}stopEditing(e,t){const i=e.getComp(),{newValue:s,newValueExists:o}=this.takeValueFromCellEditor(t,i),n=e.getRowNode(),r=e.getColumn(),l=n.getValueFromValueService(r);let a=!1;o&&(a=this.saveNewValue(e,l,s,n,r)),e.setEditing(!1,void 0),i.setEditDetails(),e.updateAndFormatValue(!1),e.refreshCell({forceRefresh:!0,suppressFlash:!0});const d={...e.createEvent(null,"cellEditingStopped"),oldValue:l,newValue:s,valueChanged:a};return this.eventService.dispatchEvent(d),a}handleColDefChanged(e){const t=e.getCellEditor();if(null!==t&&void 0!==t&&t.refresh){const{eventKey:i,cellStartedEdit:s}=e.getEditCompDetails().params,o=this.createCellEditorParams(e,i,s),n=e.getColumn().getColDef(),r=this.userComponentFactory.getCellEditorDetails(n,o);t.refresh(r.params)}}setFocusOutOnEditor(e){const t=e.getComp().getCellEditor();t&&t.focusOut&&t.focusOut()}setFocusInOnEditor(e){const t=e.getComp().getCellEditor();t&&t.focusIn?t.focusIn():e.focusCell(!0)}stopEditingAndFocus(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.stopRowOrCellEdit(),e.focusCell(!0),t||this.navigateAfterEdit(i,e.getCellPosition())}createPopupEditorWrapper(e){return new Dr(e)}takeValueFromCellEditor(e,t){const i={newValueExists:!1};if(e)return i;const s=t.getCellEditor();if(!s)return i;if(s.isCancelAfterEnd&&s.isCancelAfterEnd())return i;return{newValue:s.getValue(),newValueExists:!0}}saveNewValue(e,t,i,s,o){if(i===t)return!1;e.setSuppressRefreshCell(!0);const n=s.setDataValue(o,i,"edit");return e.setSuppressRefreshCell(!1),n}createCellEditorParams(e,t,i){const s=e.getColumn(),o=e.getRowNode();return this.gos.addGridCommonParams({value:o.getValueFromValueService(s),eventKey:t,column:s,colDef:s.getColDef(),rowIndex:e.getCellPosition().rowIndex,node:o,data:o.data,cellStartedEdit:i,onKeyDown:e.onKeyDown.bind(e),stopEditing:e.stopEditingAndFocus.bind(e),eGridCell:e.getGui(),parseValue:t=>this.valueService.parseValue(s,o,t,e.getValue()),formatValue:e.formatValue.bind(e)})}navigateAfterEdit(e,t){if(this.gos.get("enterNavigatesVerticallyAfterEdit")){const i=e?Vi.UP:Vi.DOWN;this.navigationService.navigateToNextCell(null,i,t,!1)}}}]},Ur={version:Wo,moduleName:"@ag-grid-community/edit-api",apiFunctions:{undoCellEditing:function(e){var t;null===(t=e.undoRedoService)||void 0===t||t.undo("api")},redoCellEditing:function(e){var t;null===(t=e.undoRedoService)||void 0===t||t.redo("api")},getCellEditorInstances:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.rowRenderer.getCellEditorInstances(t).map(Fs)},getEditingCells:function(e){return e.rowRenderer.getEditingCells()},stopEditing:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.rowRenderer.stopEditing(t)},startEditingCell:function(e,t){const i=e.columnModel.getCol(t.colKey);if(!i)return void ie("no column found for ".concat(t.colKey));const s={rowIndex:t.rowIndex,rowPinned:t.rowPinned||null,column:i};null==t.rowPinned&&Wr(e,t.rowIndex),Hr(e,t.colKey);const o=e.navigationService.getCellByPosition(s);o&&(e.focusService.isCellFocused(s)||e.focusService.setFocusedCell(s),o.startRowOrCellEdit(t.key))},getCurrentUndoSize:function(e){var t,i;return null!==(t=null===(i=e.undoRedoService)||void 0===i?void 0:i.getCurrentUndoStackSize())&&void 0!==t?t:0},getCurrentRedoSize:function(e){var t,i;return null!==(t=null===(i=e.undoRedoService)||void 0===i?void 0:i.getCurrentRedoStackSize())&&void 0!==t?t:0}},dependantModules:[zr]},_r={version:Wo,moduleName:"@ag-grid-community/default-editor",userComponents:[{name:"agCellEditor",classImp:Ar}],dependantModules:[zr]},Kr={version:Wo,moduleName:"@ag-grid-community/editing",dependantModules:[zr,{version:Wo,moduleName:"@ag-grid-community/undo-redo-edit",beans:[class extends F{constructor(){super(...arguments),this.beanName="undoRedoService",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=e=>{const t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},i=null!==this.activeCellEdit&&this.cellPositionUtils.equals(this.activeCellEdit,t),s=null!==this.activeRowEdit&&this.rowPositionUtils.sameRow(this.activeRowEdit,t);if(!(i||s||this.isPasting||this.isRangeInAction))return;const{rowPinned:o,rowIndex:n,column:r,oldValue:l,value:a}=e,d={rowPinned:o,rowIndex:n,columnId:r.getColId(),newValue:a,oldValue:l};this.cellValueChanges.push(d)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}wireBeans(e){this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.cellPositionUtils=e.cellPositionUtils,this.rowPositionUtils=e.rowPositionUtils,this.columnModel=e.columnModel,this.rangeService=e.rangeService}postConstruct(){if(!this.gos.get("undoRedoCellEditing"))return;const e=this.gos.get("undoRedoCellEditingLimit");if(e<=0)return;this.undoStack=new Vr(e),this.redoStack=new Vr(e),this.addListeners();const t=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:e=>{e.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:t,newColumnsLoaded:t,columnGroupOpened:t,columnRowGroupChanged:t,columnMoved:t,columnPinned:t,columnVisible:t,rowDragEnd:t}),this.ctrlsService.whenReady((e=>{this.gridBodyCtrl=e.gridBodyCtrl}))}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(e){const t={type:"undoStarted",source:e};this.eventService.dispatchEvent(t);const i={type:"undoEnded",source:e,operationPerformed:this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo")};this.eventService.dispatchEvent(i)}redo(e){const t={type:"redoStarted",source:e};this.eventService.dispatchEvent(t);const i={type:"redoEnded",source:e,operationPerformed:this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo")};this.eventService.dispatchEvent(i)}undoRedo(e,t,i,s,o){if(!e)return!1;const n=e.pop();return!(!n||!n.cellValueChanges)&&(this.processAction(n,(e=>e[s]),o),n instanceof Br?this.processRange(this.rangeService,n.ranges||[n[i]]):this.processCell(n.cellValueChanges),t.push(n),!0)}processAction(e,t,i){e.cellValueChanges.forEach((e=>{const{rowIndex:s,rowPinned:o,columnId:n}=e,r={rowIndex:s,rowPinned:o},l=this.rowPositionUtils.getRowNode(r);l.displayed&&l.setDataValue(n,t(e),i)}))}processRange(e,t){let i;e.removeAllCellRanges(!0),t.forEach(((s,o)=>{if(!s)return;const n=s.startRow,r=s.endRow;o===t.length-1&&(i={rowPinned:n.rowPinned,rowIndex:n.rowIndex,columnId:s.startColumn.getColId()},this.setLastFocusedCell(i));const l={rowStartIndex:n.rowIndex,rowStartPinned:n.rowPinned,rowEndIndex:r.rowIndex,rowEndPinned:r.rowPinned,columnStart:s.startColumn,columns:s.columns};e.addCellRange(l)}))}processCell(e){const t=e[0],{rowIndex:i,rowPinned:s}=t,o={rowIndex:i,rowPinned:s},n=this.rowPositionUtils.getRowNode(o),r={rowPinned:t.rowPinned,rowIndex:n.rowIndex,columnId:t.columnId};this.setLastFocusedCell(r,this.rangeService)}setLastFocusedCell(e,t){const{rowIndex:i,columnId:s,rowPinned:o}=e,n=this.gridBodyCtrl.getScrollFeature(),r=this.columnModel.getCol(s);if(!r)return;n.ensureIndexVisible(i),n.ensureColumnVisible(r);const l={rowIndex:i,column:r,rowPinned:o};this.focusService.setFocusedCell({...l,forceBrowserFocus:!0}),null===t||void 0===t||t.setRangeToCell(l)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{const e=new Or(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{this.activeCellEdit=null;if(e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const e=new Or(this.cellValueChanges);this.pushActionsToUndoStack(e)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{const e=new Or(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{const t=new Br(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;e=this.rangeService&&this.gos.get("enableRangeSelection")?new Br(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):new Or(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1}})}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}}],dependantModules:[zr]},{version:Wo,moduleName:"@ag-grid-community/full-row-edit",beans:[class extends F{constructor(){super(...arguments),this.beanName="rowEditService"}startEditing(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e.getAllCellCtrls().reduce(((e,o)=>{const n=o===i;return n?o.startEditing(t,n,s):o.startEditing(null,n,s),!!e||o.isEditing()}),!1)&&this.setEditing(e,!0)}stopEditing(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=e.getAllCellCtrls(),s=e.isEditing();e.setStoppingRowEdit(!0);let o=!1;for(const n of i){const e=n.stopEditing(t);s&&!t&&!o&&e&&(o=!0)}if(o){const t=e.createRowEvent("rowValueChanged");this.eventService.dispatchEvent(t)}s&&this.setEditing(e,!1),e.setStoppingRowEdit(!1)}setEditing(e,t){e.setEditingRow(t),e.forEachGui(void 0,(e=>e.rowComp.addOrRemoveCssClass("ag-row-editing",t)));const i=t?e.createRowEvent("rowEditingStarted"):e.createRowEvent("rowEditingStopped");this.eventService.dispatchEvent(i)}}],dependantModules:[zr]},{version:Wo,moduleName:"@ag-grid-community/all-editors",dependantModules:[_r,{version:Wo,moduleName:"@ag-grid-community/data-type-editors",userComponents:[{name:"agTextCellEditor",classImp:Ar},{name:"agNumberCellEditor",classImp:class extends Ir{constructor(){super(new kr)}}},{name:"agDateCellEditor",classImp:class extends Ir{constructor(){super(new Gr)}}},{name:"agDateStringCellEditor",classImp:class extends Ir{wireBeans(e){this.dataTypeService=e.dataTypeService}constructor(){super(new Nr((()=>this.dataTypeService)))}}},{name:"agCheckboxCellEditor",classImp:class extends Xi{constructor(){super('\n            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">\n                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>\n            </div>',[_i]),this.eCheckbox=Ri}init(e){var t;this.params=e;const i=null!==(t=e.value)&&void 0!==t?t:void 0;this.eCheckbox.setValue(i);this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(i),this.addManagedListeners(this.eCheckbox,{fieldValueChanged:e=>this.setAriaLabel(e.selected)})}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const t=this.localeService.getLocaleTextFunc(),i=Lt(t,e),s=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel("".concat(s," (").concat(i,")"))}}}],dependantModules:[_r]},{version:Wo,moduleName:"@ag-grid-community/select-editor",userComponents:[{name:"agSelectCellEditor",classImp:class extends Xi{constructor(){super('<div class="ag-cell-edit-wrapper">\n                <ag-select class="ag-cell-editor" data-ref="eSelect"></ag-select>\n            </div>',[to]),this.eSelect=Ri,this.startedByEnter=!1}wireBeans(e){this.valueService=e.valueService}init(e){this.focusAfterAttached=e.cellStartedEdit;const{eSelect:t,valueService:i,gos:s}=this,{values:o,value:n,eventKey:r}=e;if(M(o))return void ie("no values found for select cellEditor");this.startedByEnter=null!=r&&r===Vi.ENTER;let l=!1;o.forEach((s=>{const o={value:s},r=i.formatValue(e.column,null,s),a=null!==r&&void 0!==r;o.text=a?r:s,t.addOption(o),l=l||n===s})),l?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);const{valueListGap:a,valueListMaxWidth:d,valueListMaxHeight:c}=e;null!=a&&t.setPickerGap(a),null!=c&&t.setPickerMaxHeight(c),null!=d&&t.setPickerMaxWidth(d),"fullRow"!==s.get("editType")&&this.addManagedListeners(this.eSelect,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout((()=>{this.isAlive()&&this.eSelect.showPicker()}))}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}}}],dependantModules:[zr]},{version:Wo,moduleName:"@ag-grid-community/large-text-editor",userComponents:[{name:"agLargeTextCellEditor",classImp:class extends Xi{constructor(){super('<div class="ag-large-text">\n        <ag-input-text-area data-ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>\n        </div>',[Mr]),this.eTextArea=Ri}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),P(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){const t=e.key;(t===Vi.LEFT||t===Vi.UP||t===Vi.RIGHT||t===Vi.DOWN||e.shiftKey&&t===Vi.ENTER)&&e.stopPropagation()}afterGuiAttached(){const e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){const e=this.eTextArea.getValue();return P(e)||P(this.params.value)?this.params.parseValue(e):this.params.value}}}],dependantModules:[zr]}]},Ur]},Zr=class extends F{constructor(){super(...arguments),this.beanName="autoWidthCalculator"}wireBeans(e){this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady((e=>{this.centerRowContainerCtrl=e.center}))}getPreferredWidthForColumn(e,t){const i=this.getHeaderCellForColumn(e);if(!i)return-1;const s=this.rowRenderer.getAllCellsForColumn(e);return t||s.push(i),this.addElementsToContainerAndGetWidth(s)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.addElementsToContainerAndGetWidth([t]):-1}addElementsToContainerAndGetWidth(e){const t=document.createElement("form");t.style.position="fixed";const i=this.centerRowContainerCtrl.getContainerElement();e.forEach((e=>this.cloneItemIntoDummy(e,t))),i.appendChild(t);const s=t.offsetWidth;i.removeChild(t);return s+this.getAutoSizePadding()}getAutoSizePadding(){return this.gos.get("autoSizePadding")}getHeaderCellForColumn(e){let t=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach((i=>{const s=i.getHtmlElementForColumnHeader(e);null!=s&&(t=s)})),t}cloneItemIntoDummy(e,t){const i=e.cloneNode(!0);i.style.width="",i.style.position="static",i.style.left="";const s=document.createElement("div"),o=s.classList;["ag-header-cell","ag-header-group-cell"].some((e=>i.classList.contains(e)))?(o.add("ag-header","ag-header-row"),s.style.position="static"):o.add("ag-row");let n=e.parentElement;for(;n;){if(["ag-header-row","ag-row"].some((e=>n.classList.contains(e)))){for(let e=0;e<n.classList.length;e++){const t=n.classList[e];"ag-row-position-absolute"!=t&&o.add(t)}break}n=n.parentElement}s.appendChild(i),t.appendChild(s)}},jr=class extends F{constructor(e,t){super(),this.createRowCon=e,this.destroyRowCtrls=t,this.stickyTopRowCtrls=[],this.stickyBottomRowCtrls=[],this.topContainerHeight=0,this.bottomContainerHeight=0,this.extraTopHeight=0,this.extraBottomHeight=0}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.isClientSide="clientSide"===this.rowModel.getType(),this.ctrlsService.whenReady((e=>{this.gridBodyCtrl=e.gridBodyCtrl}))}getStickyTopRowCtrls(){return this.stickyTopRowCtrls}getStickyBottomRowCtrls(){return this.stickyBottomRowCtrls}setOffsetTop(e){if(this.extraTopHeight===e)return;this.extraTopHeight=e;const t={type:"stickyTopOffsetChanged",offset:e};this.eventService.dispatchEvent(t)}setOffsetBottom(e){this.extraBottomHeight!==e&&(this.extraBottomHeight=e)}resetOffsets(){this.setOffsetBottom(0),this.setOffsetTop(0)}getExtraTopHeight(){return this.extraTopHeight}getExtraBottomHeight(){return this.extraBottomHeight}getLastPixelOfGroup(e){return this.isClientSide?this.getClientSideLastPixelOfGroup(e):this.getServerSideLastPixelOfGroup(e)}getFirstPixelOfGroup(e){return e.footer?e.sibling.rowTop+e.sibling.rowHeight-1:e.hasChildren()?e.rowTop-1:0}getServerSideLastPixelOfGroup(e){if(this.isClientSide)throw new Error("This func should only be called in server side row model.");if(e.isExpandable()||e.footer){if(e.master)return e.detailNode.rowTop+e.detailNode.rowHeight;if(!e.sibling||1===Math.abs(e.sibling.rowIndex-e.rowIndex)){var t,i,s,o,n;let l=null===(t=e.childStore)||void 0===t?void 0:t.getStoreBounds();var r;if(e.footer)l=null===(r=e.sibling.childStore)||void 0===r?void 0:r.getStoreBounds();return(null!==(i=null===(s=l)||void 0===s?void 0:s.heightPx)&&void 0!==i?i:0)+(null!==(o=null===(n=l)||void 0===n?void 0:n.topPx)&&void 0!==o?o:0)}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}getClientSideLastPixelOfGroup(e){if(!this.isClientSide)throw new Error("This func should only be called in client side row model.");if(e.isExpandable()||e.footer){if(e.footer&&0===e.rowIndex)return Number.MAX_SAFE_INTEGER;if(!e.sibling||1===Math.abs(e.sibling.rowIndex-e.rowIndex)){let t=e.footer?e.sibling:e;for(;t.isExpandable()&&t.expanded;)if(t.master)t=t.detailNode;else if(t.childrenAfterSort){if(0===t.childrenAfterSort.length)break;t=n(t.childrenAfterSort)}return t.rowTop+t.rowHeight}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}updateStickyRows(e){const t="top"===e;let i=0;if(!this.canRowsBeSticky())return this.refreshNodesAndContainerHeight(e,new Set,i);const s=t?this.rowRenderer.getFirstVisibleVerticalPixel()-this.extraTopHeight:this.rowRenderer.getLastVisibleVerticalPixel()-this.extraTopHeight,o=new Set,n=e=>{if(o.add(e),t){const t=this.getLastPixelOfGroup(e),o=s+i+e.rowHeight;e.stickyRowTop=t<o?i+(t-o):i}else{const t=this.getFirstPixelOfGroup(e),o=s-(i+e.rowHeight);e.stickyRowTop=t>o?i-(t-o):i}i=0,o.forEach((e=>{const t=e.stickyRowTop+e.rowHeight;i<t&&(i=t)}))},r=this.areFooterRowsStickySuppressed(),l=this.gos.get("suppressGroupRowsSticky"),a=e=>{if(!e.displayed)return!1;if(e.footer){if(!0===r)return!1;if("grand"===r&&-1===e.level)return!1;if("group"===r&&e.level>-1)return!1;return!o.has(e)}if(e.isExpandable()){if(!0===l)return!1;return!o.has(e)&&e.expanded}return!1};for(let d=0;d<100;d++){let e=s+i;t||(e=s-i);const o=this.rowModel.getRowIndexAtPixel(e),r=this.rowModel.getRow(o);if(null==r)break;const l=this.getStickyAncestors(r).find((e=>(t?e.rowIndex<o:e.rowIndex>o)&&a(e)));if(l){n(l);continue}if(!(t?r.rowTop<e:r.rowTop+r.rowHeight>e)||!a(r))break;n(r)}return t||o.forEach((e=>{e.stickyRowTop=i-(e.stickyRowTop+e.rowHeight)})),this.refreshNodesAndContainerHeight(e,o,i)}areFooterRowsStickySuppressed(){const e=this.gos.get("suppressStickyTotalRow");if(!0===e)return!0;const t=!!this.gos.get("groupIncludeFooter")||"group"===e,i=!!this.gos.get("groupIncludeTotalFooter")||"grand"===e;return!(!t||!i)||(i?"grand":!!t&&"group")}canRowsBeSticky(){const e=this.gos.isGroupRowsSticky(),t=this.areFooterRowsStickySuppressed(),i=this.gos.get("suppressGroupRowsSticky");return e&&(!t||!i)}getStickyAncestors(e){const t=[];let i=e.footer?e.sibling:e.parent;for(;i;)i.sibling&&t.push(i.sibling),t.push(i),i=i.parent;return t.reverse()}checkStickyRows(){const e=this.updateStickyRows("top"),t=this.updateStickyRows("bottom");return e||t}destroyStickyCtrls(){this.refreshNodesAndContainerHeight("top",new Set,0),this.refreshNodesAndContainerHeight("bottom",new Set,0)}refreshStickyNode(e){const t=new Set;if(this.stickyTopRowCtrls.some((t=>t.getRowNode()===e))){for(let i=0;i<this.stickyTopRowCtrls.length;i++){const s=this.stickyTopRowCtrls[i].getRowNode();s!==e&&t.add(s)}this.refreshNodesAndContainerHeight("top",t,this.topContainerHeight)&&this.checkStickyRows()}else{for(let i=0;i<this.stickyBottomRowCtrls.length;i++){const s=this.stickyBottomRowCtrls[i].getRowNode();s!==e&&t.add(s)}this.refreshNodesAndContainerHeight("bottom",t,this.bottomContainerHeight)&&this.checkStickyRows()}}refreshNodesAndContainerHeight(e,t,i){const s="top"===e,o=s?this.stickyTopRowCtrls:this.stickyBottomRowCtrls,n={},r=[];for(let h=0;h<o.length;h++){const e=o[h].getRowNode();!t.has(e)?(n[e.id]=o[h],e.sticky=!1):r.push(o[h])}const l=new Set;for(let h=0;h<r.length;h++)l.add(r[h].getRowNode());const a=[];t.forEach((e=>{l.has(e)||(e.sticky=!0,a.push(this.createRowCon(e,!1,!1)))}));let d=!!a.length||r.length!==o.length;s?this.topContainerHeight!==i&&(this.topContainerHeight=i,this.gridBodyCtrl.setStickyTopHeight(i),d=!0):this.bottomContainerHeight!==i&&(this.bottomContainerHeight=i,this.gridBodyCtrl.setStickyBottomHeight(i),d=!0),this.destroyRowCtrls(n,!1);const c=[...r,...a];c.sort(((e,t)=>t.getRowNode().rowIndex-e.getRowNode().rowIndex)),s||c.reverse(),c.forEach((e=>e.setRowTop(e.getRowNode().stickyRowTop)));let u=0;return s?(t.forEach((e=>{e.rowIndex<this.pageBoundsService.getFirstRow()&&(u+=e.rowHeight)})),u>this.topContainerHeight&&(u=this.topContainerHeight),this.setOffsetTop(u)):(t.forEach((e=>{e.rowIndex>this.pageBoundsService.getLastRow()&&(u+=e.rowHeight)})),u>this.bottomContainerHeight&&(u=this.bottomContainerHeight),this.setOffsetBottom(u)),!!d&&(s?this.stickyTopRowCtrls=c:this.stickyBottomRowCtrls=c,!0)}ensureRowHeightsValid(){let e=!1;const t=t=>{const i=t.getRowNode();if(i.rowHeightEstimated){const t=this.gos.getRowHeightForNode(i);i.setRowHeight(t.height),e=!0}};return this.stickyTopRowCtrls.forEach(t),this.stickyBottomRowCtrls.forEach(t),e}},Yr=class extends F{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{this.getAllCellCtrls().forEach((e=>e.onRangeSelectionChanged()))},t=()=>{this.getAllCellCtrls().forEach((e=>e.updateRangeBordersIfRangeCount()))},i=()=>{this.eventService.addEventListener("rangeSelectionChanged",e),this.eventService.addEventListener("columnMoved",t),this.eventService.addEventListener("columnPinned",t),this.eventService.addEventListener("columnVisible",t)},s=()=>{this.eventService.removeEventListener("rangeSelectionChanged",e),this.eventService.removeEventListener("columnMoved",t),this.eventService.removeEventListener("columnPinned",t),this.eventService.removeEventListener("columnVisible",t)};this.addDestroyFunc((()=>s())),this.addManagedPropertyListener("enableRangeSelection",(e=>{e.currentValue?i():s()}));this.gos.get("enableRangeSelection")&&i()}}wireBeans(e){this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusService=e.focusService,this.beans=e,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady((e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()}))}initialise(){if(this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this)}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],(()=>this.onDomLayoutChanged())),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],(()=>this.redraw())),this.addManagedPropertyListeners(["suppressCellFocus","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],(()=>this.redrawRows())),this.gos.isGroupRowsSticky()){const e=this.rowModel.getType();"clientSide"!==e&&"serverSide"!==e||(this.stickyRowFeature=this.createManagedBean(new jr(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this))))}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gos.isDomLayout("print"),this.embedFullWidthRows=this.printLayout||this.gos.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=null!=e?e:3;this.cachedRowCtrls=new qr(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyTopRowCtrls():[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyBottomRowCtrls():[]}updateAllRowCtrls(){const e=W(this.rowCtrlsByRowIndex),t=W(this.zombieRowCtrls),i=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];t.length>0||i.length>0?this.allRowCtrls=[...e,...t,...i]:this.allRowCtrls=e}onCellFocusChanged(e){this.getAllCellCtrls().forEach((t=>t.onCellFocused(e))),this.getFullWidthRowCtrls().forEach((t=>t.onFullWidthRowFocused(e)))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>{this.onCellFocusChanged(e)},cellFocusCleared:()=>this.onCellFocusChanged(),flashCells:e=>{this.getAllCellCtrls().forEach((t=>t.onFlashCells(e)))},columnHoverChanged:()=>{this.getAllCellCtrls().forEach((e=>e.onColumnHover()))},displayedColumnsChanged:()=>{this.getAllCellCtrls().forEach((e=>e.onDisplayedColumnsChanged()))},displayedColumnsWidthChanged:()=>{this.printLayout&&this.getAllCellCtrls().forEach((e=>e.onLeftChanged()))}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach((e=>e())),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners();this.columnModel.getCols().forEach((e=>{const t=t=>{this.getAllCellCtrls().forEach((i=>{i.getColumn()===e&&t(i)}))},i=()=>{t((e=>e.onLeftChanged()))},s=()=>{t((e=>e.onWidthChanged()))},o=()=>{t((e=>e.onFirstRightPinnedChanged()))},n=()=>{t((e=>e.onLastLeftPinnedChanged()))},r=()=>{t((e=>e.onColDefChanged()))};e.addEventListener("leftChanged",i),e.addEventListener("widthChanged",s),e.addEventListener("firstRightPinnedChanged",o),e.addEventListener("lastLeftPinnedChanged",n),e.addEventListener("colDefChanged",r),this.destroyFuncsForColumnListeners.push((()=>{e.removeEventListener("leftChanged",i),e.removeEventListener("widthChanged",s),e.removeEventListener("firstRightPinnedChanged",o),e.removeEventListener("lastLeftPinnedChanged",n),e.removeEventListener("colDefChanged",r)}))}))}onDomLayoutChanged(){const e=this.gos.isDomLayout("print"),t=e||this.gos.get("embedFullWidthRows"),i=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,i&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsForColumn(e){const t=[];return this.getAllRowCtrls().forEach((i=>{const s=i.getCellElement(e);s&&t.push(s)})),t}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowNodes()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowNodes())}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(e,t){const i=Object.fromEntries(t.map((e=>[e.id,e]))),s=Object.fromEntries(e.map((e=>[e.getRowNode().id,e])));for(let o=0;o<t.length;o++){const n=t[o],r=e[o];r&&void 0===i[r.getRowNode().id]&&(r.destroyFirstPass(),r.destroySecondPass()),n.id in s?(e[o]=s[n.id],delete s[n.id]):e[o]=new qn(n,this.beans,!1,!1,this.printLayout)}e.length=t.length}onPinnedRowDataChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}redrawRow(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.sticky)this.stickyRowFeature.refreshStickyNode(e);else{if(null!==(t=this.cachedRowCtrls)&&void 0!==t&&t.has(e))return void this.cachedRowCtrls.removeRow(e);{const t=t=>{const i=t[e.rowIndex];i&&i.getRowNode()===e&&(i.destroyFirstPass(),i.destroySecondPass(),t[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":t(this.topRowCtrls);break;case"bottom":t(this.bottomRowCtrls);break;default:t(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}}i||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){if(null!=e)return null===e||void 0===e||e.forEach((e=>this.redrawRow(e,!0))),void this.dispatchDisplayedRowsChanged(!1);this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(e){const t=null!==e&&void 0!==e&&e.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(null==t)return null;const i=this.gos.getActiveDomElement(),s=this.gos.getDomData(i,Zn.DOM_DATA_KEY_CELL_CTRL),o=this.gos.getDomData(i,qn.DOM_DATA_KEY_ROW_CTRL);return s||o?t:null}redrawAfterModelUpdate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.getLockOnRefresh();const t=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);const i=!e.domLayoutChanged&&!!e.recycleRows,s=e.animate&&this.gos.isAnimateRows(),o=i?this.getRowsToRecycle():null;if(i||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature){this.stickyRowFeature.checkStickyRows();const e=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();e&&this.updateContainerHeights(e)}this.recycleRows(o,s),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),null!=t&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){const t=e.newData||e.newPage,i=this.gos.get("suppressScrollOnNewData");var s;t&&!i&&(this.gridBodyCtrl.getScrollFeature().scrollToTop(),null===(s=this.stickyRowFeature)||void 0===s||s.resetOffsets())}updateContainerHeights(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.printLayout)return void this.rowContainerHeightService.setModelHeight(null);let t=this.pageBoundsService.getCurrentPageHeight();0===t&&(t=1),this.rowContainerHeightService.setModelHeight(t+e)}getLockOnRefresh(){var e,t;if(this.refreshInProgress){var i,s,o;const e=null!==(i=null===(s=(o=this.frameworkOverrides).getLockOnRefreshError)||void 0===s?void 0:s.call(o))&&void 0!==i?i:"";throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace."+e)}this.refreshInProgress=!0,null===(e=(t=this.frameworkOverrides).getLockOnRefresh)||void 0===e||e.call(t)}releaseLockOnRefresh(){var e,t;this.refreshInProgress=!1,null===(e=(t=this.frameworkOverrides).releaseLockOnRefresh)||void 0===e||e.call(t)}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){e&&setTimeout((()=>{this.focusService.setRestoreFocusedCell(e),this.onCellFocusChanged(this.gos.addGridCommonParams({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))}))}stopEditing(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.getAllRowCtrls().forEach((t=>{t.stopEditing(e)}))}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),i=t.length;for(let s=0;s<i;s++){const i=t[s].getAllCellCtrls(),o=i.length;for(let t=0;t<o;t++)e.push(i[t])}return e}getAllRowCtrls(){const e=this.stickyRowFeature&&this.stickyRowFeature.getStickyTopRowCtrls()||[],t=this.stickyRowFeature&&this.stickyRowFeature.getStickyBottomRowCtrls()||[],i=[...this.topRowCtrls,...this.bottomRowCtrls,...e,...t];for(const s in this.rowCtrlsByRowIndex)i.push(this.rowCtrlsByRowIndex[s]);return i}addRenderedRowListener(e,t,i){const s=this.rowCtrlsByRowIndex[t];s&&s.addEventListener(e,i)}flashCells(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.getCellCtrls(e.rowNodes,e.columns).forEach((t=>t.flashCell(e)))}refreshCells(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};for(const i of this.getCellCtrls(e.rowNodes,e.columns))i.refreshOrDestroyCell(t);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=null;this.stickyRowFeature&&Wt()&&(t=this.getCellToRestoreFocusToAfterRefresh()||null);for(const i of this.getRowCtrls(e)){if(!i.isFullWidth())continue;i.refreshFullWidth()||this.redrawRow(i.getRowNode(),!0)}this.dispatchDisplayedRowsChanged(!1),t&&this.restoreFocusedCell(t)}getCellRendererInstances(e){var t;const i=this.getCellCtrls(e.rowNodes,e.columns).map((e=>e.getCellRenderer())).filter((e=>null!=e));if(null!==(t=e.columns)&&void 0!==t&&t.length)return i;const s=[],o=this.mapRowNodes(e.rowNodes);return this.getAllRowCtrls().forEach((e=>{if(o&&!this.isRowInMap(e.getRowNode(),o))return;if(!e.isFullWidth())return;const t=e.getFullWidthCellRenderers();for(let i=0;i<t.length;i++){const e=t[i];null!=e&&s.push(e)}})),[...s,...i]}getCellEditorInstances(e){const t=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach((e=>{const i=e.getCellEditor();i&&t.push(i)})),t}getEditingCells(){const e=[];return this.getAllCellCtrls().forEach((t=>{if(t.isEditing()){const i=t.getCellPosition();e.push(i)}})),e}mapRowNodes(e){if(!e)return;const t={top:{},bottom:{},normal:{}};return e.forEach((e=>{const i=e.id;switch(e.rowPinned){case"top":t.top[i]=e;break;case"bottom":t.bottom[i]=e;break;default:t.normal[i]=e}})),t}isRowInMap(e,t){const i=e.id;switch(e.rowPinned){case"top":return null!=t.top[i];case"bottom":return null!=t.bottom[i];default:return null!=t.normal[i]}}getRowCtrls(e){const t=this.mapRowNodes(e),i=this.getAllRowCtrls();return e&&t?i.filter((e=>{const i=e.getRowNode();return this.isRowInMap(i,t)})):i}getCellCtrls(e,t){let i;P(t)&&(i={},t.forEach((e=>{const t=this.columnModel.getCol(e);P(t)&&(i[t.getId()]=!0)})));const s=[];return this.getRowCtrls(e).forEach((e=>{e.getAllCellCtrls().forEach((e=>{const t=e.getColumn().getId();i&&!i[t]||s.push(e)}))})),s}destroy(){this.removeAllRowComps(),super.destroy()}removeAllRowComps(){const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e),this.stickyRowFeature&&this.stickyRowFeature.destroyStickyCtrls()}getRowsToRecycle(){const e=[];B(this.rowCtrlsByRowIndex,((t,i)=>{null==i.getRowNode().id&&e.push(t)})),this.removeRowCtrls(e);const t={};return B(this.rowCtrlsByRowIndex,((e,i)=>{const s=i.getRowNode();t[s.id]=i})),this.rowCtrlsByRowIndex={},t}removeRowCtrls(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.forEach((e=>{const i=this.rowCtrlsByRowIndex[e];i&&(i.destroyFirstPass(t),i.destroySecondPass()),delete this.rowCtrlsByRowIndex[e]}))}onBodyScroll(e){"vertical"===e.direction&&this.redraw({afterScroll:!0})}redraw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{afterScroll:t}=e;let i;this.stickyRowFeature&&Wt()&&(i=this.getCellToRestoreFocusToAfterRefresh()||void 0);const s=this.firstRenderedRow,o=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let n=!1;if(this.stickyRowFeature){n=this.stickyRowFeature.checkStickyRows();const e=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();e&&this.updateContainerHeights(e)}const r=this.firstRenderedRow!==s||this.lastRenderedRow!==o;if((!t||n||r)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,t),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(t&&!n),null!=i)){const e=this.getCellToRestoreFocusToAfterRefresh();null!=i&&null==e&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(i))}}removeRowCompsNotToDraw(e,t){const i={};e.forEach((e=>i[e]=!0));const s=Object.keys(this.rowCtrlsByRowIndex).filter((e=>!i[e]));this.removeRowCtrls(s,t)}calculateIndexesToDraw(e){const t=function(e,t){const i=[];for(let s=e;s<=t;s++)i.push(s);return i}(this.firstRenderedRow,this.lastRenderedRow),i=(e,i)=>{const s=i.getRowNode().rowIndex;null!=s&&(s<this.firstRenderedRow||s>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(i)&&t.push(s)};B(this.rowCtrlsByRowIndex,i),B(e,i),t.sort(((e,t)=>e-t));const s=[];for(let o=0;o<t.length;o++){const e=t[o],i=this.rowModel.getRow(e);i&&!i.sticky&&s.push(e)}return s}recycleRows(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=this.calculateIndexesToDraw(e);(this.printLayout||i)&&(t=!1),this.removeRowCompsNotToDraw(s,!t);const o=[];if(s.forEach((s=>{const n=this.createOrUpdateRowCtrl(s,e,t,i);P(n)&&o.push(n)})),e){i&&!this.gos.get("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask((()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()})):this.destroyRowCtrls(e,t)}this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(){const e={type:"displayedRowsChanged",afterScroll:arguments.length>0&&void 0!==arguments[0]&&arguments[0]};this.eventService.dispatchEvent(e)}onDisplayedColumnsChanged(){const e=this.visibleColsService.isPinningLeft(),t=this.visibleColsService.isPinningRight();(this.pinningLeft!==e||t!==this.pinningRight)&&(this.pinningLeft=e,this.pinningRight=t,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];this.getFullWidthRowCtrls().forEach((t=>{const i=t.getRowNode().rowIndex;e.push(i.toString())})),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=this.mapRowNodes(e);return this.getAllRowCtrls().filter((e=>{if(!e.isFullWidth())return!1;const i=e.getRowNode();return!(null!=t&&!this.isRowInMap(i,t))}))}createOrUpdateRowCtrl(e,t,i,s){let o,n=this.rowCtrlsByRowIndex[e];n||(o=this.rowModel.getRow(e),P(o)&&P(t)&&t[o.id]&&o.alreadyRendered&&(n=t[o.id],t[o.id]=null));if(!n){if(o||(o=this.rowModel.getRow(e)),!P(o))return;n=this.createRowCon(o,i,s)}return o&&(o.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=n,n}destroyRowCtrls(e,t){const i=[];B(e,((e,s)=>{s&&(this.cachedRowCtrls&&s.isCacheable()?this.cachedRowCtrls.addRow(s):(s.destroyFirstPass(!t),t?(this.zombieRowCtrls[s.getInstanceId()]=s,i.push((()=>{s.destroySecondPass(),delete this.zombieRowCtrls[s.getInstanceId()]}))):s.destroySecondPass()))})),t&&(i.push((()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()})),ne(i))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){return this.getRowBuffer()*this.gos.getRowHeightAsNumber()}workOutFirstAndLastRowsToRender(){let e,t;if(this.rowContainerHeightService.updateOffset(),this.rowModel.isRowsToRender())if(this.printLayout)this.environment.refreshRowHeightVariable(),e=this.pageBoundsService.getFirstRow(),t=this.pageBoundsService.getLastRow();else{const i=this.getRowBufferInPixels(),s=this.ctrlsService.getGridBodyCtrl(),o=this.gos.get("suppressRowVirtualisation");let n,r,l=!1;do{const e=this.pageBoundsService.getPixelOffset(),{pageFirstPixel:t,pageLastPixel:a}=this.pageBoundsService.getCurrentPagePixelRange(),d=this.rowContainerHeightService.getDivStretchOffset(),c=s.getScrollFeature().getVScrollPosition(),u=c.top,h=c.bottom;o?(n=t+d,r=a+d):(n=Math.max(u+e-i,t)+d,r=Math.min(h+e+i,a)+d),this.firstVisibleVPixel=Math.max(u+e,t)+d,this.lastVisibleVPixel=Math.min(h+e,a)+d,l=this.ensureAllRowsInRangeHaveHeightsCalculated(n,r)}while(l);let a=this.rowModel.getRowIndexAtPixel(n),d=this.rowModel.getRowIndexAtPixel(r);const c=this.pageBoundsService.getFirstRow(),u=this.pageBoundsService.getLastRow();a<c&&(a=c),d>u&&(d=u),e=a,t=d}else e=0,t=-1;const i=this.gos.isDomLayout("normal"),s=this.gos.get("suppressMaxRenderedRowRestriction"),o=Math.max(this.getRowBuffer(),500);i&&!s&&t-e>o&&(t=e+o);const n=e!==this.firstRenderedRow,r=t!==this.lastRenderedRow;if(n||r){this.firstRenderedRow=e,this.lastRenderedRow=t;const i={type:"viewportChanged",firstRow:e,lastRow:t};this.eventService.dispatchEvent(i)}}dispatchFirstDataRenderedEvent(){if(this.dataFirstRenderedFired)return;this.dataFirstRenderedFired=!0;const e={type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow};window.requestAnimationFrame((()=>{this.beans.eventService.dispatchEvent(e)}))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){var i,s;const o=null===(i=this.pinnedRowModel)||void 0===i?void 0:i.ensureRowHeightsValid(),n=null===(s=this.stickyRowFeature)||void 0===s?void 0:s.ensureRowHeightsValid(),r=this.rowModel.ensureRowHeightsValid(e,t,this.pageBoundsService.getFirstRow(),this.pageBoundsService.getLastRow());return(r||n)&&this.eventService.dispatchEvent({type:"recalculateRowBounds"}),!!(n||r||o)&&(this.updateContainerHeights(),!0)}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getLastVisibleVerticalPixel(){return this.lastVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(e){const t=e.getRowNode(),i=this.focusService.isRowNodeFocused(t),s=e.isEditing(),o=t.detail;if(!(i||s||o))return false;return!!this.isRowPresent(t)}isRowPresent(e){return!!this.rowModel.isRowPresent(e)&&(!this.paginationService||this.paginationService.isRowPresent(e))}createRowCon(e,t,i){const s=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(s)return s;const o=this.gos.get("suppressAnimationFrame"),n=i&&!o&&!this.printLayout;return new qn(e,this.beans,t,n,this.printLayout)}getRenderedNodes(){const e=this.rowCtrlsByRowIndex;return Object.values(e).map((e=>e.getRowNode()))}getRowByPosition(e){let t;const{rowIndex:i}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[i];break;case"bottom":t=this.bottomRowCtrls[i];break;default:t=this.rowCtrlsByRowIndex[i],t||(t=this.getStickyTopRowCtrls().find((e=>e.getRowNode().rowIndex===i))||null,t||(t=this.getStickyBottomRowCtrls().find((e=>e.getRowNode().rowIndex===i))||null))}return t}isRangeInRenderedViewport(e,t){if(null==e||null==t)return!1;const i=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!i}},qr=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.getRowNode().id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const e=this.entriesList[0];e.destroyFirstPass(),e.destroySecondPass(),this.removeFromCache(e)}}getRow(e){if(null==e||null==e.id)return null;const t=this.entriesMap[e.id];if(!t)return null;this.removeFromCache(t),t.setCached(!1);return t.getRowNode()!=e?null:t}has(e){return null!=this.entriesMap[e.id]}removeRow(e){const t=e.id,i=this.entriesMap[t];delete this.entriesMap[t],c(this.entriesList,i)}removeFromCache(e){const t=e.getRowNode().id;delete this.entriesMap[t],c(this.entriesList,e)}getEntries(){return this.entriesList}},Qr=class extends F{constructor(){super(...arguments),this.beanName="pinnedRowModel",this.nextId=0}wireBeans(e){this.beans=e}postConstruct(){this.setPinnedTopRowData(),this.setPinnedBottomRowData(),this.addManagedPropertyListener("pinnedTopRowData",(()=>this.setPinnedTopRowData())),this.addManagedPropertyListener("pinnedBottomRowData",(()=>this.setPinnedBottomRowData())),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}isEmpty(e){return D("top"===e?this.pinnedTopRows:this.pinnedBottomRows)}isRowsToRender(e){return!this.isEmpty(e)}getRowAtPixel(e,t){const i="top"===t?this.pinnedTopRows:this.pinnedBottomRows;if(D(i))return 0;for(let s=0;s<i.length;s++){const t=i[s];if(t.rowTop+t.rowHeight-1>=e)return s}return i.length-1}onGridStylesChanges(e){if(e.rowHeightChanged){const e=e=>{e.setRowHeight(e.rowHeight,!0)};this.pinnedBottomRows.forEach(e),this.pinnedTopRows.forEach(e)}}ensureRowHeightsValid(){var e,t;let i=!1,s=0;const o=e=>{if(e.rowHeightEstimated){const t=this.gos.getRowHeightForNode(e);e.setRowTop(s),e.setRowHeight(t.height),s+=t.height,i=!0}};null===(e=this.pinnedBottomRows)||void 0===e||e.forEach(o),s=0,null===(t=this.pinnedTopRows)||void 0===t||t.forEach(o);return this.eventService.dispatchEvent({type:"pinnedHeightChanged"}),i}setPinnedTopRowData(){const e=this.gos.get("pinnedTopRowData");this.pinnedTopRows=this.createNodesFromData(e,!0);this.eventService.dispatchEvent({type:"pinnedRowDataChanged"})}setPinnedBottomRowData(){const e=this.gos.get("pinnedBottomRowData");this.pinnedBottomRows=this.createNodesFromData(e,!1);this.eventService.dispatchEvent({type:"pinnedRowDataChanged"})}createNodesFromData(e,t){const i=[];if(e){const s=this.gos.getRowIdCallback(),o=t?Hs.ID_PREFIX_TOP_PINNED:Hs.ID_PREFIX_BOTTOM_PINNED;let n=0;const r=t?"top":"bottom";e.forEach(((e,t)=>{var l;const a=new Hs(this.beans);a.data=e,a.id=null!==(l=null===s||void 0===s?void 0:s({data:e,level:0,rowPinned:r}))&&void 0!==l?l:o+this.nextId++,a.rowPinned=r,a.setRowTop(n),a.setRowHeight(this.gos.getRowHeightForNode(a).height),a.setRowIndex(t),n+=a.rowHeight,i.push(a)}))}return i}getPinnedTopRowNodes(){return this.pinnedTopRows}getPinnedBottomRowNodes(){return this.pinnedBottomRows}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedTopRowCount(){return this.pinnedTopRows?this.pinnedTopRows.length:0}getPinnedBottomRowCount(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0}getPinnedTopRow(e){return this.pinnedTopRows[e]}getPinnedBottomRow(e){return this.pinnedBottomRows[e]}forEachPinnedTopRow(e){D(this.pinnedTopRows)||this.pinnedTopRows.forEach(e)}forEachPinnedBottomRow(e){D(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(e)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getTotalHeight(e){if(!e||0===e.length)return 0;const t=n(e);return t.rowTop+t.rowHeight}},Xr=(e=>(e.Applied="Applied",e.StoreNotFound="StoreNotFound",e.StoreLoading="StoreLoading",e.StoreWaitingToLoad="StoreWaitingToLoad",e.StoreLoadingFailed="StoreLoadingFailed",e.StoreWrongType="StoreWrongType",e.Cancelled="Cancelled",e.StoreNotStarted="StoreNotStarted",e))(Xr||{}),$r=class extends F{constructor(e){super(),this.state="needsLoading",this.version=0,this.id=e}getId(){return this.id}load(){this.state="loading",this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}getState(){return this.state}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed",this.processServerFail()),this.dispatchLoadCompleted(!1)}success(e,t){this.successCommon(e,t)}pageLoaded(e,t,i){this.successCommon(e,{rowData:t,rowCount:i})}isRequestMostRecentAndLive(e){const t=e===this.version,i=this.isAlive();return t&&i}successCommon(e,t){this.dispatchLoadCompleted();this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}dispatchLoadCompleted(){const e={type:"loadComplete",success:!(arguments.length>0&&void 0!==arguments[0])||arguments[0],block:this};this.dispatchLocalEvent(e)}},Jr={version:Wo,moduleName:"@ag-grid-community/row-node-block",beans:[class extends F{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();const e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=de(this.performCheckBlocksToLoad.bind(this),e))}getMaxConcurrentDatasourceRequests(){const e=this.gos.get("maxConcurrentDatasourceRequests");return null==e?2:e<=0?void 0:e}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){c(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchLocalEvent({type:"blockLoaded"}),0==this.activeBlockLoadsCount&&this.dispatchLocalEvent({type:"blockLoaderFinished"})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),null!=this.maxConcurrentRequests&&this.activeBlockLoadsCount>=this.maxConcurrentRequests)return void(this.gos.get("debug")&&te("RowNodeBlockLoader - checkBlockToLoad: max loads exceeded"));const e=this.getAvailableLoadingCount(),t=this.blocks.filter((e=>"needsLoading"===e.getState())).slice(0,e);this.registerLoads(t.length),t.forEach((e=>e.load())),this.printCacheStatus()}getBlockState(){if(this.gos.isRowModelType("serverSide")){return this.rowModel.getBlockStates()}const e={};return this.blocks.forEach((t=>{const{id:i,state:s}=t.getBlockStateJson();e[i]=s})),e}printCacheStatus(){this.gos.get("debug")&&te("RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ".concat(this.activeBlockLoadsCount,", blocks = ").concat(JSON.stringify(this.getBlockState())))}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(e){this.activeBlockLoadsCount+=e}getAvailableLoadingCount(){return void 0!==this.maxConcurrentRequests?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}}]},el=class{constructor(){this.root=null,this.end=null,this.cachedRange=[]}init(e){this.rowModel=e}reset(){this.root=null,this.end=null,this.cachedRange.length=0}setRoot(e){this.root=e,this.end=null,this.cachedRange.length=0}setEndRange(e){this.end=e,this.cachedRange.length=0}getRange(){if(0===this.cachedRange.length){const e=this.getRoot(),t=this.getEnd();if(null==e||null==t)return this.cachedRange;this.cachedRange=this.rowModel.getNodesInRangeForSelection(e,t)}return this.cachedRange}isInRange(e){return null!==this.root&&this.getRange().some((t=>t.id===e.id))}getRoot(){var e,t;this.root&&null===(null===(e=this.root)||void 0===e?void 0:e.key)&&(this.root=null!==(t=this.rowModel.getRowNode(this.root.id))&&void 0!==t?t:null);return this.root}getEnd(){var e,t;this.end&&null===(null===(e=this.end)||void 0===e?void 0:e.key)&&(this.end=null!==(t=this.rowModel.getRowNode(this.end.id))&&void 0!==t?t:null);return this.end}truncate(e){const t=this.getRange();if(0===t.length)return{keep:[],discard:[]};const i=t[0].id===this.root.id,s=t.findIndex((t=>t.id===e.id));if(s>-1){const o=t.slice(0,s),n=t.slice(s+1);return this.setEndRange(e),i?{keep:o,discard:n}:{keep:n,discard:o}}return{keep:t,discard:[]}}extend(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.getRoot();if(null==i){const i=this.getRange().slice();return t&&e.depthFirstSearch((e=>!e.group&&i.push(e))),i.push(e),this.setRoot(e),{keep:i,discard:[]}}if(this.rowModel.getNodesInRangeForSelection(i,e).find((e=>{var t;return e.id===(null===(t=this.end)||void 0===t?void 0:t.id)})))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{const t=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:t}}}},tl=class extends F{constructor(){super(...arguments),this.beanName="stylingService"}wireBeans(e){this.expressionService=e.expressionService}processAllCellClasses(e,t,i,s){this.processClassRules(void 0,e.cellClassRules,t,i,s),this.processStaticCellClasses(e,t,i)}processClassRules(e,t,i,s,o){if(null==t&&null==e)return;const n={},r={},l=(e,t)=>{e.split(" ").forEach((e=>{""!=e.trim()&&t(e)}))};if(t){const e=Object.keys(t);for(let s=0;s<e.length;s++){const o=e[s],a=t[o];let d;"string"===typeof a?d=this.expressionService.evaluate(a,i):"function"===typeof a&&(d=a(i)),l(o,(e=>{d?n[e]=!0:r[e]=!0}))}}e&&o&&Object.keys(e).forEach((e=>l(e,(e=>{n[e]||(r[e]=!0)})))),o&&Object.keys(r).forEach(o),Object.keys(n).forEach(s)}getStaticCellClasses(e,t){const{cellClass:i}=e;if(!i)return[];let s;if("function"===typeof i){s=i(t)}else s=i;return"string"===typeof s&&(s=[s]),s||[]}processStaticCellClasses(e,t,i){this.getStaticCellClasses(e,t).forEach((e=>{i(e)}))}},il=class extends Ui{constructor(e){super(e,"ag-toggle-button")}setValue(e,t){return super.setValue(e,t),this.addOrRemoveCssClass("ag-selected",this.getValue()),this}},sl={selector:"AG-TOGGLE-BUTTON",component:il},ol=(e=>(e.TAB_GUARD="ag-tab-guard",e.TAB_GUARD_TOP="ag-tab-guard-top",e.TAB_GUARD_BOTTOM="ag-tab-guard-bottom",e))(ol||{}),nl=class extends F{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp:t,eTopGuard:i,eBottomGuard:s,focusTrapActive:o,forceFocusOutWhenTabGuardsAreEmpty:n,isFocusableContainer:r,focusInnerElement:l,onFocusIn:a,onFocusOut:d,shouldStopEventPropagation:c,onTabKeyDown:u,handleKeyDown:h,eFocusableElement:p}=e;this.comp=t,this.eTopGuard=i,this.eBottomGuard=s,this.providedFocusInnerElement=l,this.eFocusableElement=p,this.focusTrapActive=!!o,this.forceFocusOutWhenTabGuardsAreEmpty=!!n,this.isFocusableContainer=!!r,this.providedFocusIn=a,this.providedFocusOut=d,this.providedShouldStopEventPropagation=c,this.providedOnTabKeyDown=u,this.providedHandleKeyDown=h}wireBeans(e){this.focusService=e.focusService}postConstruct(){this.createManagedBean(new Zs(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach((e=>this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)})))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return!!this.providedShouldStopEventPropagation&&this.providedShouldStopEventPropagation()}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus)return void this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);if(this.skipTabGuardFocus)return void(this.skipTabGuardFocus=!1);if(this.forceFocusOutWhenTabGuardsAreEmpty){if(0===this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length)return void this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;const t=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t)}findNextElementOutsideAndFocus(e){const t=this.gos.getDocument(),i=this.focusService.findFocusableElements(t.body,null,!0),s=i.indexOf(e?this.eTopGuard:this.eBottomGuard);if(-1===s)return;let o,n;e?(o=0,n=s):(o=s+1,n=i.length);const r=i.slice(o,n),l=this.gos.get("tabIndex");r.sort(((e,t)=>{const i=parseInt(e.getAttribute("tabindex")||"0"),s=parseInt(t.getAttribute("tabindex")||"0");return s===l?1:i===l?-1:0===i?1:0===s?-1:i-s})),r[e?r.length-1:0].focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown)return void this.providedOnTabKeyDown(e);if(this.focusTrapActive)return;if(e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const i=this.getNextFocusableElement(e.shiftKey);t&&setTimeout((()=>this.activateTabGuards()),0),i&&(i.focus(),e.preventDefault())}focusInnerElement(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length&&t[e?t.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)}forceFocusOutOfContainer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout((()=>{this.forcingFocusOut=!1,this.activateTabGuards()}))}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(null===t||void 0===t||t)}setAllowFocus(e){this.allowFocus=e}},rl=class extends F{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();const{eTopGuard:t,eBottomGuard:i,eFocusableElement:s}=this,o=[t,i],n={setTabIndex:e=>{o.forEach((t=>null!=e?t.setAttribute("tabindex",e):t.removeAttribute("tabindex")))}};this.addTabGuards(t,i);const{focusTrapActive:r=!1,onFocusIn:l,onFocusOut:a,focusInnerElement:d,handleKeyDown:c,onTabKeyDown:u,shouldStopEventPropagation:h,forceFocusOutWhenTabGuardsAreEmpty:p,isFocusableContainer:g}=e;this.tabGuardCtrl=this.createManagedBean(new nl({comp:n,focusTrapActive:r,eTopGuard:t,eBottomGuard:i,eFocusableElement:s,onFocusIn:l,onFocusOut:a,focusInnerElement:d,handleKeyDown:c,onTabKeyDown:u,shouldStopEventPropagation:h,forceFocusOutWhenTabGuardsAreEmpty:p,isFocusableContainer:g}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){const t=this.gos.getDocument().createElement("div"),i="top"===e?"ag-tab-guard-top":"ag-tab-guard-bottom";return t.classList.add("ag-tab-guard",i),pt(t,"presentation"),t}addTabGuards(e,t){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];ri(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,i){mi(t)||(t=t.getGui());const{eBottomGuard:s}=this;s?s.insertAdjacentElement("beforebegin",t):e(t,i)}},ll=class extends Fi{initialiseTabGuard(e){this.tabGuardFeature=this.createManagedBean(new rl(this)),this.tabGuardFeature.initialiseTabGuard(e)}forceFocusOutOfContainer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.tabGuardFeature.forceFocusOutOfContainer(e)}appendChild(e,t){this.tabGuardFeature.appendChild(super.appendChild.bind(this),e,t)}},al=0,dl=class extends F{constructor(){super(...arguments),this.beanName="popupService",this.popupList=[]}wireBeans(e){this.ctrlsService=e.ctrlsService,this.resizeObserverService=e.resizeObserverService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady((e=>{this.gridCtrl=e.gridCtrl})),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){const e=this.gos.get("popupParent");return e||this.gridCtrl.getGui()}positionPopupForMenu(e){const{eventSource:t,ePopup:i}=e,s=this.getPopupIndex(i);if(-1!==s){this.popupList[s].alignedToElement=t}const o=t.getBoundingClientRect(),n=this.getParentRect(),r=this.keepXYWithinBounds(i,o.top-n.top,0),l=i.clientWidth>0?i.clientWidth:200;i.style.minWidth="".concat(l,"px");const a=n.right-n.left-l;let d;function c(){return o.right-n.left-2}function u(){return o.left-n.left-l}this.gos.get("enableRtl")?(d=u(),d<0&&(d=c(),this.setAlignedStyles(i,"left")),d>a&&(d=0,this.setAlignedStyles(i,"right"))):(d=c(),d>a&&(d=u(),this.setAlignedStyles(i,"right")),d<0&&(d=0,this.setAlignedStyles(i,"left"))),i.style.left="".concat(d,"px"),i.style.top="".concat(r,"px")}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:i,nudgeY:s,skipObserver:o}=e;this.positionPopup({ePopup:t,nudgeX:i,nudgeY:s,keepWithinBounds:!0,skipObserver:o,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const{ePopup:t,nudgeX:i,nudgeY:s,keepWithinBounds:o,eventSource:n,alignSide:r="left",position:l="over",column:a,rowNode:d,type:c}=e,u=n.getBoundingClientRect(),h=this.getParentRect(),p=this.getPopupIndex(t);if(-1!==p){this.popupList[p].alignedToElement=n}this.positionPopup({ePopup:t,nudgeX:i,nudgeY:s,keepWithinBounds:o,updatePosition:()=>{let i,o=u.left-h.left;if("right"===r&&(o-=t.offsetWidth-u.width),"over"===l)i=u.top-h.top,this.setAlignedStyles(t,"over");else{this.setAlignedStyles(t,"under");i="under"===this.shouldRenderUnderOrAbove(t,u,h,e.nudgeY||0)?u.top-h.top+u.height:u.top-t.offsetHeight-2*(s||0)-h.top}return{x:o,y:i}},postProcessCallback:()=>this.callPostProcessPopup(c,t,n,null,a,d)})}shouldRenderUnderOrAbove(e,t,i,s){const o=i.bottom-t.bottom,n=t.top-i.top,r=e.offsetHeight+s;return o>r?"under":n>r||n>o?"above":"under"}setAlignedStyles(e,t){const i=this.getPopupIndex(e);if(-1===i)return;const s=this.popupList[i],{alignedToElement:o}=s;if(!o)return;["right","left","over","above","under"].forEach((t=>{o.classList.remove("ag-has-popup-positioned-".concat(t)),e.classList.remove("ag-popup-positioned-".concat(t))})),t&&(o.classList.add("ag-has-popup-positioned-".concat(t)),e.classList.add("ag-popup-positioned-".concat(t)))}callPostProcessPopup(e,t,i,s,o,n){const r=this.gos.getCallback("postProcessPopup");if(r){r({column:o,rowNode:n,ePopup:t,type:e,eventSource:i,mouseEvent:s})}}positionPopup(e){var t=this;const{ePopup:i,keepWithinBounds:s,nudgeX:o,nudgeY:n,skipObserver:r,updatePosition:l}=e,a={width:0,height:0},d=function(){let r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{x:d,y:c}=l();r&&i.clientWidth===a.width&&i.clientHeight===a.height||(a.width=i.clientWidth,a.height=i.clientHeight,o&&(d+=o),n&&(c+=n),s&&(d=t.keepXYWithinBounds(i,d,1),c=t.keepXYWithinBounds(i,c,0)),i.style.left="".concat(d,"px"),i.style.top="".concat(c,"px"),e.postProcessCallback&&e.postProcessCallback())};if(d(),!r){const e=this.resizeObserverService.observeResize(i,(()=>d(!0)));setTimeout((()=>e()),200)}}getActivePopups(){return this.popupList.map((e=>e.element))}getPopupList(){return this.popupList}getParentRect(){const e=this.gos.getDocument();let t=this.getPopupParent();return t===e.body?t=e.documentElement:"static"===getComputedStyle(t).position&&(t=t.offsetParent),ii(t)}keepXYWithinBounds(e,t,i){const s=0===i,o=s?"clientHeight":"clientWidth",n=s?"top":"left",r=s?"height":"width",l=s?"scrollTop":"scrollLeft",a=this.gos.getDocument(),d=a.documentElement,c=this.getPopupParent(),u=e.getBoundingClientRect(),h=c.getBoundingClientRect(),p=a.documentElement.getBoundingClientRect(),g=c===a.body,m=Math.ceil(u[r]);let v=g?(s?ei:ti)(d)+d[l]:c[o];g&&(v-=Math.abs(p[n]-h[n]));const f=v-m;return Math.min(Math.max(t,0),Math.abs(f))}addPopup(e){const t=this.gos.getDocument(),{eChild:i,ariaLabel:s,alwaysOnTop:o,positionCallback:n,anchorToElement:r}=e;if(!t)return ie("could not find the document, document is empty"),{hideFunc:()=>{}};const l=this.getPopupIndex(i);if(-1!==l){return{hideFunc:this.popupList[l].hideFunc}}this.initialisePopupPosition(i);const a=this.createPopupWrapper(i,s,!!o),d=this.addEventListenersToPopup({...e,wrapperEl:a});return n&&n(),this.addPopupToPopupList(i,a,d,r),{hideFunc:d}}initialisePopupPosition(e){const t=this.getPopupParent().getBoundingClientRect();P(e.style.top)||(e.style.top="".concat(-1*t.top,"px")),P(e.style.left)||(e.style.left="".concat(-1*t.left,"px"))}createPopupWrapper(e,t,i){const s=this.getPopupParent(),o=document.createElement("div");return this.environment.applyThemeClasses(o),o.classList.add("ag-popup"),e.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||pt(e,"dialog"),mt(e,t),o.appendChild(e),s.appendChild(o),i?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),o}handleThemeChange(e){if(e.themeChanged)for(const t of this.popupList)this.environment.applyThemeClasses(t.wrapper)}addEventListenersToPopup(e){var t=this;const i=this.gos.getDocument(),s=this.getPopupParent(),{wrapperEl:o,eChild:n,closedCallback:r,afterGuiAttached:l,closeOnEsc:a,modal:d}=e;let c=!1;const u=e=>{if(!o.contains(this.gos.getActiveDomElement()))return;e.key!==Vi.ESCAPE||S(e)||g({keyboardEvent:e})},h=e=>g({mouseEvent:e}),p=e=>g({touchEvent:e}),g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{mouseEvent:l,touchEvent:a,keyboardEvent:d,forceHide:g}=e;(g||!t.isEventFromCurrentPopup({mouseEvent:l,touchEvent:a},n)&&!c)&&(c=!0,s.removeChild(o),i.removeEventListener("keydown",u),i.removeEventListener("mousedown",h),i.removeEventListener("touchstart",p),i.removeEventListener("contextmenu",h),t.eventService.removeEventListener("dragStarted",h),r&&r(l||a||d),t.removePopupFromPopupList(n))};return l&&l({hidePopup:g}),window.setTimeout((()=>{a&&i.addEventListener("keydown",u),d&&(i.addEventListener("mousedown",h),this.eventService.addEventListener("dragStarted",h),i.addEventListener("touchstart",p),i.addEventListener("contextmenu",h))}),0),g}addPopupToPopupList(e,t,i,s){this.popupList.push({element:e,wrapper:t,hideFunc:i,instanceId:al++,isAnchored:!!s}),s&&this.setPopupPositionRelatedToElement(e,s)}getPopupIndex(e){return this.popupList.findIndex((t=>t.element===e))}setPopupPositionRelatedToElement(e,t){const i=this.getPopupIndex(e);if(-1===i)return;const s=this.popupList[i];if(s.stopAnchoringPromise&&s.stopAnchoringPromise.then((e=>e&&e())),s.stopAnchoringPromise=void 0,s.isAnchored=!1,!t)return;const o=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:s.hideFunc});return s.stopAnchoringPromise=o,s.isAnchored=!0,o}removePopupFromPopupList(e){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),this.popupList=this.popupList.filter((t=>t.element!==e))}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),i=t.getBoundingClientRect(),{element:s,ePopup:o}=e,n=s.getBoundingClientRect(),r=i.top-n.top,l=i.left-n.left;let a=r,d=l;const c=o.style.top,u=parseInt(c.substring(0,c.length-1),10),h=o.style.left,p=parseInt(h.substring(0,h.length-1),10),g=this.getFrameworkOverrides();return new is((i=>{g.wrapIncoming((()=>{g.setInterval((()=>{const i=t.getBoundingClientRect(),n=s.getBoundingClientRect();if(0==n.top&&0==n.left&&0==n.height&&0==n.width)return void e.hidePopup();const c=i.top-n.top;if(c!=a){const e=this.keepXYWithinBounds(o,u+r-c,0);o.style.top="".concat(e,"px")}a=c;const h=i.left-n.left;if(h!=d){const e=this.keepXYWithinBounds(o,p+l-h,1);o.style.left="".concat(e,"px")}d=h}),200).then((e=>{i((()=>{null!=e&&window.clearInterval(e)}))}))}),"popupPositioning")}))}hasAnchoredPopup(){return this.popupList.some((e=>e.isAnchored))}isEventFromCurrentPopup(e,t){const{mouseEvent:i,touchEvent:s}=e,o=i||s;if(!o)return!1;const n=this.getPopupIndex(t);if(-1===n)return!1;for(let r=n;r<this.popupList.length;r++){if(R(this.popupList[r].element,o))return!0}return this.isElementWithinCustomPopup(o.target)}isElementWithinCustomPopup(e){const t=this.gos.getDocument();for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||null===e.parentElement)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const i=this.getWrapper(e);i&&(i.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(i))}bringPopupToFront(e){const t=this.getPopupParent(),i=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),s=i.length,o=Array.prototype.slice.call(t.querySelectorAll(".ag-popup.ag-always-on-top")),r=o.length,l=this.getWrapper(e);if(!l||s<=1||!t.contains(e))return!1;const a=i.indexOf(l),d=l.querySelectorAll("div"),c=[];d.forEach((e=>{0!==e.scrollTop&&c.push([e,e.scrollTop])}));let u=!1;if(r){l.classList.contains("ag-always-on-top")?a!==s-1&&(n(o).insertAdjacentElement("afterend",l),u=!0):a!==s-r-1&&(o[0].insertAdjacentElement("beforebegin",l),u=!0)}else a!==s-1&&(n(i).insertAdjacentElement("afterend",l),u=!0);for(;c.length;){const e=c.pop();e[0].scrollTop=e[1]}return u}},cl=["touchstart","touchend","touchmove","touchcancel"],ul=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"javascript";this.frameworkName=e,this.renderingEngine="vanilla",this.wrapIncoming=e=>e(),this.wrapOutgoing=e=>e()}setInterval(e,t){return new is((i=>{i(window.setInterval(e,t))}))}addEventListener(e,t,i,s){const o=g(cl,t);e.addEventListener(t,i,{capture:!!s,passive:o})}get shouldWrapOutgoing(){return!1}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){const t="solid"===this.frameworkName?"react":this.frameworkName;return"https://www.ag-grid.com/".concat(t,"-data-grid").concat(e?"/".concat(e):"")}},hl=class extends F{constructor(){super(...arguments),this.beanName="cellNavigationService"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.pinnedRowModel=e.pinnedRowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}getNextCellToFocus(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const i=e===Vi.UP,s=e===Vi.DOWN,o=e===Vi.LEFT;let r,l;if(i||s)l=i?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow(),r=t.column;else{const e=this.visibleColsService.getAllCols(),i=this.gos.get("enableRtl");l=t.rowIndex,r=o!==i?e[0]:n(e)}return{rowIndex:l,rowPinned:null,column:r}}getNextCellToFocusWithoutCtrlPressed(e,t){let i=t,s=!1;for(;!s;){switch(e){case Vi.UP:i=this.getCellAbove(i);break;case Vi.DOWN:i=this.getCellBelow(i);break;case Vi.RIGHT:i=this.gos.get("enableRtl")?this.getCellToLeft(i):this.getCellToRight(i);break;case Vi.LEFT:i=this.gos.get("enableRtl")?this.getCellToRight(i):this.getCellToLeft(i);break;default:i=null,ie("unknown key for navigation ",e)}s=!i||this.isCellGoodToFocusOn(i)}return i}isCellGoodToFocusOn(e){const t=e.column;let i;switch(e.rowPinned){case"top":i=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case"bottom":i=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:i=this.rowModel.getRow(e.rowIndex)}if(!i)return!1;return!t.isSuppressNavigable(i)}getCellToLeft(e){if(!e)return null;const t=this.visibleColsService.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.visibleColsService.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getRowBelow(e){const t=e.rowIndex,i=e.rowPinned;if(this.isLastRowInContainer(e))switch(i){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.pageBoundsService.getFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}const s=this.rowModel.getRow(e.rowIndex),o=this.getNextStickyPosition(s);return o||{rowIndex:t+1,rowPinned:i}}getNextStickyPosition(e,t){if(!this.gos.isGroupRowsSticky()||!e||!e.sticky)return;let i=[];i=this.rowRenderer.getStickyTopRowCtrls().some((t=>t.getRowNode().rowIndex===e.rowIndex))?[...this.rowRenderer.getStickyTopRowCtrls()].sort(((e,t)=>e.getRowNode().rowIndex-t.getRowNode().rowIndex)):[...this.rowRenderer.getStickyBottomRowCtrls()].sort(((e,t)=>t.getRowNode().rowIndex-e.getRowNode().rowIndex));const s=t?-1:1,o=i.findIndex((t=>t.getRowNode().rowIndex===e.rowIndex)),n=i[o+s];return n?{rowIndex:n.getRowNode().rowIndex,rowPinned:null}:void 0}getCellBelow(e){if(!e)return null;const t=this.getRowBelow(e);return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}isLastRowInContainer(e){const t=e.rowPinned,i=e.rowIndex;if("top"===t){return this.pinnedRowModel.getPinnedTopRowNodes().length-1<=i}if("bottom"===t){return this.pinnedRowModel.getPinnedBottomRowNodes().length-1<=i}return this.pageBoundsService.getLastRow()<=i}getRowAbove(e){const t=e.rowIndex,i=e.rowPinned;if(i?0===t:t===this.pageBoundsService.getFirstRow())return"top"===i?null:i&&this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;const s=this.rowModel.getRow(e.rowIndex),o=this.getNextStickyPosition(s,!0);return o||{rowIndex:t-1,rowPinned:i}}getCellAbove(e){if(!e)return null;const t=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.pageBoundsService.getLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowNodes().length-1,rowPinned:"top"}}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){const t=this.visibleColsService.getAllCols();let i=e.rowIndex,s=e.rowPinned,o=this.visibleColsService.getColAfter(e.column);if(!o){var n,r;o=t[0];const l=this.getRowBelow(e);if(M(l))return null;if(!l.rowPinned&&null!==(n=null===(r=this.paginationService)||void 0===r?void 0:r.isRowInPage(l))&&void 0!==n&&!n)return null;i=l?l.rowIndex:null,s=l?l.rowPinned:null}return{rowIndex:i,column:o,rowPinned:s}}getNextTabbedCellBackwards(e){const t=this.visibleColsService.getAllCols();let i=e.rowIndex,s=e.rowPinned,o=this.visibleColsService.getColBefore(e.column);if(!o){var r,l;o=n(t);const a=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(M(a))return null;if(!a.rowPinned&&null!==(r=null===(l=this.paginationService)||void 0===l?void 0:l.isRowInPage(a))&&void 0!==r&&!r)return null;i=a?a.rowIndex:null,s=a?a.rowPinned:null}return{rowIndex:i,column:o,rowPinned:s}}};function pl(e,t){e.eventService.dispatchEvent(t)}var gl=class extends F{constructor(){super(...arguments),this.beanName="apiFunctionService",this.functions={dispatchEvent:pl},this.isDestroyed=!1}wireBeans(e){this.beans=e}postConstruct(){this.preDestroyLink=this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}callFunction(e,t){var i;const s=this.functions[e];return s?s.apply(s,[this.beans,...t]):this.isDestroyed?this.destroyedHandler(e):void(this.isFrameworkMethod(e)||null===(i=this.beans.validationService)||void 0===i||i.warnMissingApiFunction(e))}addFunction(e,t){const{validationService:i}=this.beans;i&&(t=i.validateApiFunction(e,t)),this.functions[e]=t}destroy(){this.functions={},this.isDestroyed=!0,super.destroy()}destroyedHandler(e){if("isDestroyed"===e)return!0;"destroy"!==e&&ie("Grid API function ".concat(e,"() cannot be called as the grid has been destroyed.\nEither clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.\nTo run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ").concat(this.preDestroyLink))}isFrameworkMethod(e){return["preWireBeans","wireBeans","preConstruct","postConstruct"].includes(e)}};function ml(e){const t=e.getBean("apiFunctionService");return new Proxy(t,{get(e,t){if("then"!==t)return function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return e.callFunction(t,s)}}})}function vl(e){return{beanName:"gridApi",bean:ml(e)}}var fl=class extends F{constructor(){super(...arguments),this.beanName="columnDefFactory"}buildColumnDefs(e,t,i){const s=[],o={};return e.forEach((e=>{let n=!0,r=this.createDefFromColumn(e,t,i),l=e.getOriginalParent(),a=null;for(;l;){let e=null;if(l.isPadding()){l=l.getOriginalParent();continue}const t=o[l.getGroupId()];if(t){t.children.push(r),n=!1;break}if(e=this.createDefFromGroup(l),e&&(e.children=[r],o[e.groupId]=e,r=e,l=l.getOriginalParent()),null!=l&&a===l){n=!1;break}a=l}n&&s.push(r)})),s}createDefFromGroup(e){const t=H(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,i){const s=H(e.getColDef());return s.colId=e.getColId(),s.width=e.getActualWidth(),s.rowGroup=e.isRowGroupActive(),s.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,s.pivot=e.isPivotActive(),s.pivotIndex=e.isPivotActive()?i.indexOf(e):null,s.aggFunc=e.isValueActive()?e.getAggFunc():null,s.hide=!e.isVisible()||void 0,s.pinned=e.isPinned()?e.getPinned():null,s.sort=e.getSort()?e.getSort():null,s.sortIndex=null!=e.getSortIndex()?e.getSortIndex():null,s}},Cl=class extends F{constructor(){super(...arguments),this.beanName="columnEventDispatcher"}visibleCols(){this.eventService.dispatchEvent({type:"displayedColumnsChanged"})}gridColumns(){this.eventService.dispatchEvent({type:"gridColumnsChanged"})}headerHeight(e){const t={type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"};this.eventService.dispatchEvent(t)}groupOpened(e){const t={type:"columnGroupOpened",columnGroup:1===e.length?e[0]:void 0,columnGroups:e};this.eventService.dispatchEvent(t)}rowGroupChanged(e,t){const i={type:"columnRowGroupChanged",columns:e,column:1===e.length?e[0]:null,source:t};this.eventService.dispatchEvent(i)}genericColumnEvent(e,t,i){const s={type:e,columns:t,column:1===t.length?t[0]:null,source:i};this.eventService.dispatchEvent(s)}pivotModeChanged(){this.eventService.dispatchEvent({type:"columnPivotModeChanged"})}virtualColumnsChanged(e){const t={type:"virtualColumnsChanged",afterScroll:e};this.eventService.dispatchEvent(t)}newColumnsLoaded(e){const t={type:"newColumnsLoaded",source:e};this.eventService.dispatchEvent(t)}everythingChanged(e){const t={type:"columnEverythingChanged",source:e};this.eventService.dispatchEvent(t)}columnMoved(e){const{movedColumns:t,source:i,toIndex:s,finished:o}=e,n={type:"columnMoved",columns:t,column:t&&1===t.length?t[0]:null,toIndex:s,finished:o,source:i};this.eventService.dispatchEvent(n)}columnPinned(e,t){if(!e.length)return;const i=1===e.length?e[0]:null,s=this.getCommonValue(e,(e=>e.getPinned())),o={type:"columnPinned",pinned:null!=s?s:null,columns:e,column:i,source:t};this.eventService.dispatchEvent(o)}columnVisible(e,t){if(!e.length)return;const i=1===e.length?e[0]:null,s={type:"columnVisible",visible:this.getCommonValue(e,(e=>e.isVisible())),columns:e,column:i,source:t};this.eventService.dispatchEvent(s)}getCommonValue(e,t){if(!e||0==e.length)return;const i=t(e[0]);for(let s=1;s<e.length;s++)if(i!==t(e[s]))return;return i}columnChanged(e,t,i){const s={type:e,columns:t,column:t&&1==t.length?t[0]:null,source:i};this.eventService.dispatchEvent(s)}columnResized(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(e&&e.length){const o={type:"columnResized",columns:e,column:1===e.length?e[0]:null,flexColumns:s,finished:t,source:i};this.eventService.dispatchEvent(o)}}},wl=class extends F{constructor(){super(...arguments),this.beanName="columnGetStateService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService}getColumnState(){if(M(this.columnModel.getColDefCols())||!this.columnModel.isAlive())return[];const e=this.columnModel.getAllCols().map(this.createStateItemFromColumn.bind(this));return this.orderColumnStateList(e),e}createStateItemFromColumn(e){const t=this.funcColsService.getRowGroupColumns(),i=this.funcColsService.getPivotColumns(),s=e.isRowGroupActive()?t.indexOf(e):null,o=e.isPivotActive()?i.indexOf(e):null,n=e.isValueActive()?e.getAggFunc():null,r=null!=e.getSort()?e.getSort():null,l=null!=e.getSortIndex()?e.getSortIndex():null,a=null!=e.getFlex()&&e.getFlex()>0?e.getFlex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:r,sortIndex:l,aggFunc:n,rowGroup:e.isRowGroupActive(),rowGroupIndex:s,pivot:e.isPivotActive(),pivotIndex:o,flex:a}}orderColumnStateList(e){const t=this.columnModel.getCols(),i=new Map(t.map(((e,t)=>[e.getColId(),t])));e.sort(((e,t)=>(i.has(e.colId)?i.get(e.colId):-1)-(i.has(t.colId)?i.get(t.colId):-1)))}},Sl=class extends F{constructor(){super(...arguments),this.beanName="columnGroupStateService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService}getColumnGroupState(){const e=[];return ye(null,this.columnModel.getColTree(),(t=>{Q(t)&&e.push({groupId:t.getGroupId(),open:t.isExpanded()})})),e}resetColumnGroupState(e){const t=this.columnModel.getColDefColTree();if(!t)return;const i=[];ye(null,t,(e=>{if(Q(e)){const t=e.getColGroupDef(),s={groupId:e.getGroupId(),open:t?t.openByDefault:void 0};i.push(s)}})),this.setColumnGroupState(i,e)}setColumnGroupState(e,t){if(!this.columnModel.getColTree())return;this.columnAnimationService.start();const i=[];e.forEach((e=>{const t=e.groupId,s=e.open,o=this.columnModel.getProvidedColGroup(t);o&&o.isExpanded()!==s&&(o.setExpanded(s),i.push(o))})),this.visibleColsService.refresh(t,!0),i.length&&this.eventDispatcher.groupOpened(i),this.columnAnimationService.finish()}},yl=class extends F{constructor(){super(...arguments),this.beanName="columnViewportService",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={}}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=this.visibleColsService.isBodyWidthDirty();if(!(e===this.scrollWidth&&t===this.scrollPosition&&!s)){if(this.scrollWidth=e,this.scrollPosition=t,this.visibleColsService.setBodyWidthDirty(),this.gos.get("enableRtl")){const e=this.visibleColsService.getBodyContainerWidth();this.viewportLeft=e-this.scrollPosition-this.scrollWidth,this.viewportRight=e-this.scrollPosition}else this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition;this.columnModel.isReady()&&this.checkViewportColumns(i)}}getHeadersToRender(e,t){let i;switch(e){case"left":i=this.rowsOfHeadersToRenderLeft[t];break;case"right":i=this.rowsOfHeadersToRenderRight[t];break;default:i=this.rowsOfHeadersToRenderCenter[t]}return i||[]}extractViewportColumns(){const e=this.visibleColsService.getCenterCols();this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||0===this.viewportRight}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return!!e.isAutoHeaderHeight()||this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,i=t+e.getActualWidth(),s=this.viewportLeft-200,o=this.viewportRight+200;return!(t<s&&i<s)&&!(t>o&&i>o)}getViewportColumns(){const e=this.visibleColsService.getLeftCols(),t=this.visibleColsService.getRightCols();return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.columnModel.isColSpanActive())return this.colsWithinViewport;const t=this.isColumnVirtualisationSuppressed()?null:this.isColumnInRowViewport.bind(this),i=this.visibleColsService.getColsCenter();return this.visibleColsService.getColsForRow(e,i,t,(e=>{const t=e.getLeft();return P(t)&&t>this.viewportLeft}))}checkViewportColumns(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.extractViewport()&&this.eventDispatcher.virtualColumnsChanged(e)}calculateHeaderRows(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={};const e={},t=this.visibleColsService.getLeftCols(),i=this.visibleColsService.getRightCols();this.headerColsWithinViewport.concat(t).concat(i).forEach((t=>e[t.getId()]=!0));const s=(t,i,o)=>{let n=!1;for(let r=0;r<t.length;r++){const l=t[r];let a=!1;if(Y(l))a=!0===e[l.getId()];else{const e=l.getDisplayedChildren();e&&(a=s(e,i,o+1))}a&&(n=!0,i[o]||(i[o]=[]),i[o].push(l))}return n};s(this.visibleColsService.getTreeLeft(),this.rowsOfHeadersToRenderLeft,0),s(this.visibleColsService.getTreeRight(),this.rowsOfHeadersToRenderRight,0),s(this.visibleColsService.getTreeCenter(),this.rowsOfHeadersToRenderCenter,0)}extractViewport(){this.extractViewportColumns();const e=this.getViewportColumns().map((e=>"".concat(e.getId(),"-").concat(e.getPinned()||"normal"))).join("#"),t=this.colsWithinViewportHash!==e;return t&&(this.colsWithinViewportHash=e,this.calculateHeaderRows()),t}},bl=class extends F{constructor(){super(...arguments),this.beanName="agComponentUtils"}wireBeans(e){this.componentMetadataProvider=e.componentMetadataProvider}adaptFunction(e,t){const i=this.componentMetadataProvider.retrieve(e);return i&&i.functionAdapter?i.functionAdapter(t):null}adaptCellRendererFunction(e){return class{refresh(){return!1}getGui(){return this.eGui}init(t){const i=e(t),s=typeof i;this.eGui="string"!==s&&"number"!==s&&"boolean"!==s?null!=i?i:ci("<span></span>"):ci("<span>"+i+"</span>")}}}doesImplementIComponent(e){return!!e&&(e.prototype&&"getGui"in e.prototype)}},Rl=class extends F{constructor(){super(...arguments),this.beanName="componentMetadataProvider"}wireBeans(e){this.agComponentUtils=e.agComponentUtils}postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}}retrieve(e){return this.componentMetaData[e]}},Fl=Object.fromEntries(["rowPositionUtils","cellPositionUtils","headerPositionUtils","paginationAutoPageSizeService","apiFunctionService","gridApi","userComponentRegistry","agComponentUtils","componentMetadataProvider","resizeObserverService","userComponentFactory","rowContainerHeightService","horizontalResizeService","localeService","validationService","pinnedRowModel","dragService","visibleColsService","eventService","gos","popupService","selectionService","columnFilterService","quickFilterService","filterManager","columnModel","headerNavigationService","pageBoundsService","paginationService","pageBoundsListener","rowRenderer","expressionService","columnFactory","alignedGridsService","navigationService","valueCache","valueService","loggerFactory","autoWidthCalculator","filterMenuFactory","dragAndDropService","focusService","mouseEventService","environment","cellNavigationService","stylingService","scrollVisibleService","sortController","columnHoverService","columnAnimationService","selectableService","autoColService","changeDetectionService","animationFrameService","undoRedoService","columnDefFactory","rowCssClassCalculator","rowNodeBlockLoader","rowNodeSorter","ctrlsService","pinnedWidthService","rowNodeEventThrottle","ctrlsFactory","dataTypeService","syncService","overlayService","stateService","expansionService","apiEventService","ariaAnnouncementService","menuService","columnApplyStateService","columnEventDispatcher","columnMoveService","columnAutosizeService","columnGetStateService","columnGroupStateService","columnSizeService","funcColsService","columnNameService","columnViewportService","pivotResultColsService","showRowGroupColsService"].map(((e,t)=>[e,t])));function El(e,t){var i,s;return(null!==(i=e.beanName?Fl[e.beanName]:void 0)&&void 0!==i?i:Number.MAX_SAFE_INTEGER)-(null!==(s=t.beanName?Fl[t.beanName]:void 0)&&void 0!==s?s:Number.MAX_SAFE_INTEGER)}function xl(e,t){return"gridDestroyService"===(null===e||void 0===e?void 0:e.beanName)?-1:0}var Pl=class extends F{constructor(){super(...arguments),this.beanName="ctrlsFactory",this.registry={}}register(e){this.registry[e.name]=e.classImp}getInstance(e){const t=this.registry[e];if(null!=t){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return new t(...s)}}},Ml=class extends F{constructor(){super(...arguments),this.beanName="ctrlsService",this.params={},this.ready=!1,this.readyCallbacks=[]}checkReady(){const e=this.params;this.ready=null!=e.gridCtrl&&null!=e.gridBodyCtrl&&null!=e.center&&null!=e.left&&null!=e.right&&null!=e.bottomCenter&&null!=e.bottomLeft&&null!=e.bottomRight&&null!=e.topCenter&&null!=e.topLeft&&null!=e.topRight&&null!=e.stickyTopCenter&&null!=e.stickyTopLeft&&null!=e.stickyTopRight&&null!=e.stickyBottomCenter&&null!=e.stickyBottomLeft&&null!=e.stickyBottomRight&&null!=e.centerHeader&&null!=e.leftHeader&&null!=e.rightHeader&&null!=e.fakeHScrollComp&&null!=e.fakeVScrollComp&&null!=e.gridHeaderCtrl,this.ready&&(this.readyCallbacks.forEach((t=>t(e))),this.readyCallbacks.length=0)}whenReady(e){this.ready?e(this.params):this.readyCallbacks.push(e)}register(e,t){this.params[e]=t,this.checkReady()}registerHeaderContainer(e,t){const i=this.params;switch(t){case"left":i.leftHeader=e;break;case"right":i.rightHeader=e;break;default:i.centerHeader=e}this.checkReady()}get(e){return this.params[e]}getParams(){return this.params}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader:e,centerHeader:t,rightHeader:i}=this.params;return[e,i,t]}getHeaderRowContainerCtrl(e){const t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}},Dl=class extends F{constructor(){super(...arguments),this.beanName="cellPositionUtils"}createId(e){const{rowIndex:t,rowPinned:i,column:s}=e;return this.createIdFromValues({rowIndex:t,column:s,rowPinned:i})}createIdFromValues(e){const{rowIndex:t,rowPinned:i,column:s}=e;return"".concat(t,".").concat(null==i?"null":i,".").concat(s.getId())}equals(e,t){const i=e.column===t.column,s=e.rowPinned===t.rowPinned,o=e.rowIndex===t.rowIndex;return i&&s&&o}},Il=class extends F{constructor(){super(...arguments),this.beanName="rowNodeEventThrottle",this.events=[]}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowModel=e.rowModel}postConstruct(){"clientSide"==this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(e,t){if(null==this.clientSideRowModel)return void this.eventService.dispatchEvent(e);this.events.push(e);const i=()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach((e=>this.eventService.dispatchEvent(e))),this.events=[]};t?i():(null==this.dispatchExpandedDebounced&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(i)),this.dispatchExpandedDebounced())}},Tl=class extends F{constructor(){super(...arguments),this.beanName="rowPositionUtils"}wireBeans(e){this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.pageBoundsService=e.pageBoundsService}getFirstRow(){let e,t=0;return this.pinnedRowModel.getPinnedTopRowCount()?e="top":this.rowModel.getRowCount()?(e=null,t=this.pageBoundsService.getFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(e="bottom"),void 0===e?null:{rowIndex:t,rowPinned:e}}getLastRow(){let e,t=null;const i=this.pinnedRowModel.getPinnedBottomRowCount(),s=this.pinnedRowModel.getPinnedTopRowCount();return i?(t="bottom",e=i-1):this.rowModel.getRowCount()?(t=null,e=this.pageBoundsService.getLastRow()):s&&(t="top",e=s-1),void 0===e?null:{rowIndex:e,rowPinned:t}}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowNodes()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowNodes()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}}sameRow(e,t){return!e&&!t||!(e&&!t||!e&&t)&&(e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned)}before(e,t){switch(e.rowPinned){case"top":if("top"!==t.rowPinned)return!0;break;case"bottom":if("bottom"!==t.rowPinned)return!1;break;default:if(P(t.rowPinned))return"top"!==t.rowPinned}return e.rowIndex<t.rowIndex}},Al={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},kl={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},Ll={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},Gl=class extends F{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.themeClasses=[],this.eThemeAncestor=null,this.eMeasurementContainer=null,this.sizesMeasured=!1}wireBeans(e){this.resizeObserverService=e.resizeObserverService,this.eGridDiv=e.eGridDiv}postConstruct(){this.addManagedPropertyListener("rowHeight",(()=>this.refreshRowHeightVariable())),this.themeClasses=this.getAncestorThemeClasses(),this.setUpThemeClassObservers(),this.getSizeEl(Al),this.getSizeEl(kl),this.getSizeEl(Ll)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(Al)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(kl)}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(Ll)}hasMeasuredSizes(){return this.sizesMeasured}getThemeClasses(){return this.themeClasses}applyThemeClasses(e){for(const t of Array.from(e.classList))t.startsWith("ag-theme-")&&!this.themeClasses.includes(t)&&e.classList.remove(t);for(const t of this.themeClasses)e.classList.contains(t)||e.classList.add(t)}getThemeAncestorElement(){return this.eThemeAncestor}refreshRowHeightVariable(){const e=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),t=this.gos.get("rowHeight");if(null==t||isNaN(t)||!isFinite(t))return null!==e&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;const i="".concat(t,"px");return e!=i?(this.eGridDiv.style.setProperty("--ag-line-height",i),t):""!=e?parseFloat(e):-1}getCSSVariablePixelValue(e){const t=this.lastKnownValues.get(e);if(null!=t)return t;const i=this.measureSizeEl(e);return"detached"===i||"no-styles"===i?e.defaultValue:(this.lastKnownValues.set(e,i),i)}measureSizeEl(e){const t=this.getSizeEl(e);if(null==t.offsetParent)return"detached";const i=t.offsetWidth;return i===Ol?"no-styles":(this.sizesMeasured=!0,i)}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;let i=this.eMeasurementContainer;i||(i=this.eMeasurementContainer=document.createElement("div"),i.className="ag-measurement-container",this.eGridDiv.appendChild(i)),t=document.createElement("div"),t.style.width="var(".concat(e.cssName,", ").concat(Ol,"px)"),i.appendChild(t),this.sizeEls.set(e,t);let s=this.measureSizeEl(e);"no-styles"===s&&ie("no value for ".concat(e.cssName,". This usually means that the grid has been initialised before styles have been loaded. The default value of ").concat(e.defaultValue," will be used and updated when styles load."));const o=this.resizeObserverService.observeResize(t,(()=>{const t=this.measureSizeEl(e);"detached"!==t&&"no-styles"!==t&&(this.lastKnownValues.set(e,t),t!==s&&(s=t,this.fireGridStylesChangedEvent(e.changeKey)))}));return this.addDestroyFunc((()=>o())),t}fireGridStylesChangedEvent(e){const t={type:"gridStylesChanged",[e]:!0};this.eventService.dispatchEvent(t)}setUpThemeClassObservers(){const e=new MutationObserver((()=>{const e=this.getAncestorThemeClasses();Nl(e,this.themeClasses)||(this.themeClasses=e,this.fireGridStylesChangedEvent("themeChanged"))}));let t=this.eGridDiv;for(;t;)e.observe(t||this.eGridDiv,{attributes:!0,attributeFilter:["class"]}),t=t.parentElement}getAncestorThemeClasses(){let e=this.eGridDiv;const t=[];for(this.eThemeAncestor=null;e;){const i=Array.from(e.classList).filter((e=>e.startsWith("ag-theme-")));for(const s of i)this.eThemeAncestor=e,t.includes(s)||t.unshift(s);e=e.parentElement}return Object.freeze(t)}},Nl=(e,t)=>e.length===t.length&&-1===e.findIndex(((i,s)=>e[s]!==t[s])),Ol=15538,Bl=class extends F{constructor(){super(...arguments),this.beanName="eventService",this.globalEventService=new s}wireBeans(e){this.globalEventListener=e.globalEventListener,this.globalSyncEventListener=e.globalSyncEventListener}postConstruct(){if(this.globalEventListener){const e=this.gos.useAsyncEvents();this.addGlobalListener(this.globalEventListener,e)}this.globalSyncEventListener&&this.addGlobalListener(this.globalSyncEventListener,!1)}addEventListener(e,t,i){this.globalEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){this.globalEventService.removeEventListener(e,t,i)}addGlobalListener(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.globalEventService.addGlobalListener(e,t)}removeGlobalListener(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.globalEventService.removeGlobalListener(e,t)}dispatchLocalEvent(){}dispatchEvent(e){this.globalEventService.dispatchEvent(this.gos.addGridCommonParams(e))}dispatchEventOnce(e){this.globalEventService.dispatchEventOnce(this.gos.addGridCommonParams(e))}},Vl=class e extends F{constructor(){super(...arguments),this.beanName="focusService"}wireBeans(e){this.eGridDiv=e.eGridDiv,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.headerNavigationService=e.headerNavigationService,this.headerPositionUtils=e.headerPositionUtils,this.rowRenderer=e.rowRenderer,this.rowPositionUtils=e.rowPositionUtils,this.cellPositionUtils=e.cellPositionUtils,this.navigationService=e.navigationService,this.ctrlsService=e.ctrlsService,this.filterManager=e.filterManager,this.rangeService=e.rangeService,this.advancedFilterService=e.advancedFilterService}static addKeyboardModeEvents(t){this.instanceCount>0||(t.addEventListener("keydown",e.toggleKeyboardMode),t.addEventListener("mousedown",e.toggleKeyboardMode))}static removeKeyboardModeEvents(t){this.instanceCount>0||(t.addEventListener("keydown",e.toggleKeyboardMode),t.addEventListener("mousedown",e.toggleKeyboardMode))}static toggleKeyboardMode(t){const i=e.keyboardModeActive,s="keydown"===t.type;s&&(t.ctrlKey||t.metaKey||t.altKey)||i!==s&&(e.keyboardModeActive=s)}static unregisterGridCompController(t){e.removeKeyboardModeEvents(t)}postConstruct(){const e=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:e,columnRowGroupChanged:e}),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady((e=>{this.gridCtrl=e.gridCtrl}))}registerKeyboardFocusEvents(){const t=this.gos.getDocument();e.addKeyboardModeEvents(t),e.instanceCount++,this.addDestroyFunc((()=>{e.instanceCount--,e.unregisterGridCompController(t)}))}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;const e=this.focusedCellPosition.column,t=this.columnModel.getCol(e.getId());e!==t&&this.clearFocusedCell()}isKeyboardMode(){return e.keyboardModeActive}getFocusCellToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(this.gos.getActiveDomElement(),qn.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(this.gos.getActiveDomElement(),Vo.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(e,t){let i=e;for(;i;){if(this.gos.getDomData(i,t))return!1;i=i.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(e){return!!this.isCellRestoreFocused(e)&&(setTimeout((()=>{this.restoredFocusedCellPosition=null}),0),!0)}isCellRestoreFocused(e){return null!=this.restoredFocusedCellPosition&&this.cellPositionUtils.equals(e,this.restoredFocusedCellPosition)}setRestoreFocusedCell(e){"react"===this.getFrameworkOverrides().renderingEngine&&(this.restoredFocusedCellPosition=e)}getFocusEventParams(){const{rowIndex:e,rowPinned:t,column:i}=this.focusedCellPosition,s={rowIndex:e,rowPinned:t,column:i,isFullWidthCell:!1},o=this.rowRenderer.getRowByPosition({rowIndex:e,rowPinned:t});return o&&(s.isFullWidthCell=o.isFullWidth()),s}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,null==this.focusedCellPosition)return;const e={type:"cellFocusCleared",...this.getFocusEventParams()};this.focusedCellPosition=null,this.eventService.dispatchEvent(e)}setFocusedCell(e){const{column:t,rowIndex:i,rowPinned:s,forceBrowserFocus:o=!1,preventScrollOnBrowserFocus:n=!1}=e,r=this.columnModel.getCol(t);if(!r)return void(this.focusedCellPosition=null);this.focusedCellPosition=r?{rowIndex:i,rowPinned:x(s),column:r}:null;const l={type:"cellFocused",...this.getFocusEventParams(),forceBrowserFocus:o,preventScrollOnBrowserFocus:n};this.eventService.dispatchEvent(l)}isCellFocused(e){return null!=this.focusedCellPosition&&this.cellPositionUtils.equals(e,this.focusedCellPosition)}isRowNodeFocused(e){return this.isRowFocused(e.rowIndex,e.rowPinned)}isHeaderWrapperFocused(e){if(null==this.focusedHeaderPosition)return!1;const t=e.getColumnGroupChild(),i=e.getRowIndex(),s=e.getPinned(),{column:o,headerRowIndex:n}=this.focusedHeaderPosition;return t===o&&i===n&&s==o.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(e,t){this.focusedHeaderPosition={headerRowIndex:e,column:t}}focusHeaderPosition(e){var t;if(this.gos.get("suppressHeaderFocus"))return!1;const{direction:i,fromTab:s,allowUserOverride:o,event:n,fromCell:r,rowWithoutSpanValue:l}=e;let{headerPosition:a}=e;if(r&&null!==(t=this.filterManager)&&void 0!==t&&t.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(a);if(o){const e=this.getFocusedHeader(),t=this.headerNavigationService.getHeaderRowCount();if(s){const s=this.gos.getCallback("tabToNextHeader");s&&(a=this.getHeaderPositionFromUserFunc({userFunc:s,direction:i,currentPosition:e,headerPosition:a,headerRowCount:t}))}else{const i=this.gos.getCallback("navigateToNextHeader");if(i&&n){a=i({key:n.key,previousHeaderPosition:e,nextHeaderPosition:a,headerRowCount:t,event:n})}}}return!!a&&this.focusProvidedHeaderPosition({headerPosition:a,direction:i,event:n,fromCell:r,rowWithoutSpanValue:l})}focusHeaderPositionFromUserFunc(e){if(this.gos.get("suppressHeaderFocus"))return!1;const{userFunc:t,headerPosition:i,direction:s,event:o}=e,n=this.getFocusedHeader(),r=this.headerNavigationService.getHeaderRowCount(),l=this.getHeaderPositionFromUserFunc({userFunc:t,direction:s,currentPosition:n,headerPosition:i,headerRowCount:r});return!!l&&this.focusProvidedHeaderPosition({headerPosition:l,direction:s,event:o})}getHeaderPositionFromUserFunc(e){const{userFunc:t,direction:i,currentPosition:s,headerPosition:o,headerRowCount:n}=e,r=t({backwards:"Before"===i,previousHeaderPosition:s,nextHeaderPosition:o,headerRowCount:n});return!0===r||null===r?(null===r&&ie("Since v31.3 Returning `null` from tabToNextHeader is deprecated. Return `true` to stay on the current header, or `false` to let the browser handle the tab behaviour."),s):!1===r?null:r}focusProvidedHeaderPosition(e){const{headerPosition:t,direction:i,fromCell:s,rowWithoutSpanValue:o,event:n}=e,{column:r,headerRowIndex:l}=t;var a;if(-1===l)return null!==(a=this.filterManager)&&void 0!==a&&a.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(t):this.focusGridView(r);this.headerNavigationService.scrollToColumn(r,i);const d=this.ctrlsService.getHeaderRowContainerCtrl(r.getPinned()).focusHeader(t.headerRowIndex,r,n);return d&&(null!=o||s)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(null!==o&&void 0!==o?o:-1),d}focusFirstHeader(){let e=this.visibleColsService.getAllCols()[0];if(!e)return!1;e.getParent()&&(e=this.visibleColsService.getColGroupAtLevel(e,0));const t=this.headerPositionUtils.getHeaderIndexToFocus(e,0);return this.focusHeaderPosition({headerPosition:t,rowWithoutSpanValue:0})}focusLastHeader(e){const t=this.headerNavigationService.getHeaderRowCount()-1,i=n(this.visibleColsService.getAllCols());return this.focusHeaderPosition({headerPosition:{headerRowIndex:t,column:i},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){var t;return null!==(t=this.filterManager)&&void 0!==t&&t.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(e,t){return null!=this.focusedCellPosition&&(this.focusedCellPosition.rowIndex===e&&this.focusedCellPosition.rowPinned===x(t))}findFocusableElements(e,t){let i=Zt;t&&(i+=", "+t),arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&(i+=', [tabindex="-1"]');const s=Array.prototype.slice.apply(e.querySelectorAll("[tabindex], input, select, button, textarea, [href]")).filter((e=>di(e))),o=Array.prototype.slice.apply(e.querySelectorAll(i));if(!o.length)return s;return n=o,s.filter((e=>-1===n.indexOf(e)));var n}focusInto(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=this.findFocusableElements(e,null,i),o=t?n(s):s[0];return!!o&&(o.focus({preventScroll:!0}),!0)}findFocusableElementBeforeTabGuard(e,t){if(!t)return null;const i=this.findFocusableElements(e),s=i.indexOf(t);if(-1===s)return null;let o=-1;for(let n=s-1;n>=0;n--)if(i[n].classList.contains("ag-tab-guard-top")){o=n;break}return o<=0?null:i[o-1]}findNextFocusableElement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.eGridDiv,t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;const s=this.findFocusableElements(e,t?':not([tabindex="-1"])':null),o=this.gos.getActiveDomElement();let n;n=t?s.findIndex((e=>e.contains(o))):s.indexOf(o);const r=n+(i?-1:1);return r<0||r>=s.length?null:s[r]}isTargetUnderManagedComponent(e,t){if(!t)return!1;const i=e.querySelectorAll(".".concat(Zs.FOCUS_MANAGED_CLASS));if(!i.length)return!1;for(let s=0;s<i.length;s++)if(i[s].contains(t))return!0;return!1}findTabbableParent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,i=0;for(;e&&null===zt(e)&&++i<=t;)e=e.parentElement;return null===zt(e)?null:e}focusGridView(e,t){var i;if(this.gos.get("suppressCellFocus"))return t?this.gos.get("suppressHeaderFocus")?this.focusNextGridCoreContainer(!0,!0):this.focusLastHeader():this.focusNextGridCoreContainer(!1);const s=t?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!s)return!1;const{rowIndex:o,rowPinned:n}=s,r=this.getFocusedHeader();return!e&&r&&(e=r.column),!(null==o||!e)&&(this.navigationService.ensureCellVisible({rowIndex:o,column:e,rowPinned:n}),this.setFocusedCell({rowIndex:o,column:e,rowPinned:x(n),forceBrowserFocus:!0}),null===(i=this.rangeService)||void 0===i||i.setRangeToCell({rowIndex:o,rowPinned:n,column:e}),!0)}focusNextGridCoreContainer(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!(t||!this.gridCtrl.focusNextInnerContainer(e))||((t||!e&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(e),!1)}focusAdvancedFilter(e){var t,i;return this.advancedFilterFocusColumn=null===e||void 0===e?void 0:e.column,null!==(t=null===(i=this.advancedFilterService)||void 0===i?void 0:i.getCtrl().focusHeaderComp())&&void 0!==t&&t}focusNextFromAdvancedFilter(e,t){var i,s;const o=null!==(i=t?void 0:this.advancedFilterFocusColumn)&&void 0!==i?i:null===(s=this.visibleColsService.getAllCols())||void 0===s?void 0:s[0];return e?this.focusHeaderPosition({headerPosition:{column:o,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(o)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}addFocusableContainer(e){this.gridCtrl.addFocusableContainer(e)}removeFocusableContainer(e){this.gridCtrl.removeFocusableContainer(e)}focusGridInnerElement(e){return this.gridCtrl.focusInnerElement(e)}};Vl.keyboardModeActive=!1,Vl.instanceCount=0;var Hl=Vl,Wl=class extends F{constructor(){super(...arguments),this.beanName="pinnedWidthService"}wireBeans(e){this.visibleColsService=e.visibleColsService}postConstruct(){const e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const e=this.gos.isDomLayout("print"),t=e?0:this.visibleColsService.getColsLeftWidth(),i=e?0:this.visibleColsService.getDisplayedColumnsRightWidth();t!=this.leftWidth&&(this.leftWidth=t,this.eventService.dispatchEvent({type:"leftPinnedWidthChanged"})),i!=this.rightWidth&&(this.rightWidth=i,this.eventService.dispatchEvent({type:"rightPinnedWidthChanged"}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}},zl=class extends F{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}wireBeans(e){this.beans=e,this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}setComp(e,t,i){this.view=e,this.eGridHostDiv=t,this.eGui=i,this.eGui.setAttribute("grid-id",this.gridId);const{dragAndDropService:s,mouseEventService:o,ctrlsService:n,resizeObserverService:r}=this.beans;s.addDropTarget({getContainer:()=>this.eGui,isInterestedIn:e=>1===e||0===e,getIconName:()=>"notAllowed"}),o.stampTopLevelGridCompWithGridInstance(t),this.createManagedBean(new Rn(this.view)),this.addRtlSupport();const l=r.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc((()=>l())),n.register("gridCtrl",this)}isDetailGrid(){var e;const t=this.focusService.findTabbableParent(this.getGui());return(null===t||void 0===t||null===(e=t.getAttribute("row-id"))||void 0===e?void 0:e.startsWith("detail"))||!1}getOptionalSelectors(){var e,t,i,s,o;const n=this.beans;return{paginationSelector:null===(e=n.paginationService)||void 0===e?void 0:e.getPaginationSelector(),gridHeaderDropZonesSelector:null===(t=n.columnDropZonesService)||void 0===t?void 0:t.getDropZoneSelector(),sideBarSelector:null===(i=n.sideBarService)||void 0===i?void 0:i.getSideBarSelector(),statusBarSelector:null===(s=n.statusBarService)||void 0===s?void 0:s.getStatusPanelSelector(),watermarkSelector:null===(o=n.licenseManager)||void 0===o?void 0:o.getWatermarkSelector()}}onGridSizeChanged(){const e={type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight};this.eventService.dispatchEvent(e)}addRtlSupport(){const e=this.gos.get("enableRtl")?"ag-rtl":"ag-ltr";this.view.setRtlClass(e)}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){this.view.setCursor(e?"ew-resize":null)}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.getFocusableContainers(),i=this.gos.getActiveDomElement(),s=t.findIndex((e=>e.getGui().contains(i))),o=s+(e?-1:1);if(o<0||o>=t.length)return!1;if(0===o){if(s>0){const e=n(this.visibleColsService.getAllCols());if(this.focusService.focusGridView(e,!0))return!0}return!1}return this.focusContainer(t[o],e)}focusInnerElement(e){const t=this.getFocusableContainers(),i=this.visibleColsService.getAllCols(),s=this.gos.getCallback("focusGridInnerElement");if(s&&s({fromBottom:!!e}))return!0;if(e){if(t.length>1)return this.focusContainer(n(t),!0);const e=n(i);if(this.focusService.focusGridView(e,!0))return!0}if(0===this.gos.get("headerHeight")||this.gos.get("suppressHeaderFocus")){if(this.focusService.focusGridView(i[0]))return!0;for(let e=1;e<t.length;e++)if(this.focusService.focusInto(t[e].getGui()))return!0;return!1}return this.focusService.focusFirstHeader()}forceFocusOutOfContainer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}focusContainer(e,t){var i,s;null===e||void 0===e||null===(i=e.setAllowFocus)||void 0===i||i.call(e,!0);const o=this.focusService.focusInto(e.getGui(),t);return null===e||void 0===e||null===(s=e.setAllowFocus)||void 0===s||s.call(e,!1),o}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers.values()]}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},Ul={version:Wo,moduleName:"@ag-grid-community/aligned-grid",beans:[class extends F{constructor(){super(...arguments),this.beanName="alignedGridsService",this.consuming=!1}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.ctrlsService=e.ctrlsService,this.columnApplyStateService=e.columnApplyStateService}getAlignedGridApis(){var e;let t=null!==(e=this.gos.get("alignedGrids"))&&void 0!==e?e:[];const i="function"===typeof t;"function"===typeof t&&(t=t());const s=()=>"See ".concat(this.getFrameworkOverrides().getDocLink("aligned-grids"));return t.map((e=>{if(!e)return se("alignedGrids contains an undefined option."),i||se('You may want to configure via a callback to avoid setup race conditions:\n                     "alignedGrids: () => [linkedGrid]"'),void se(s());if(this.isGridApi(e))return e;const t=e;var o;return"current"in t?null===(o=t.current)||void 0===o?void 0:o.api:(t.api||se("alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ".concat(s())),t.api)})).filter((e=>!!e&&!e.isDestroyed()))}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){const e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:e=>{let{event:t}=e;return this.onColumnEvent(t)},alignedGridScroll:e=>{let{event:t}=e;return this.onScrollEvent(t)}})}fireEvent(e){this.consuming||this.getAlignedGridApis().forEach((t=>{t.isDestroyed()||t.dispatchEvent(e)}))}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){const t={type:"alignedGridColumn",event:e};this.fireEvent(t)}fireScrollEvent(e){if("horizontal"!==e.direction)return;const t={type:"alignedGridScroll",event:e};this.fireEvent(t)}onScrollEvent(e){this.onEvent((()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(e.left,!0)}))}getMasterColumns(e){const t=[];return e.columns?e.columns.forEach((e=>{t.push(e)})):e.column&&t.push(e.column),t}getColumnIds(e){const t=[];return e.columns?e.columns.forEach((e=>{t.push(e.getColId())})):e.column&&t.push(e.column.getColId()),t}onColumnEvent(e){this.onEvent((()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":{const t=e;this.processColumnEvent(t);break}case"columnGroupOpened":{const t=e;this.processGroupOpenedEvent(t);break}case"columnPivotChanged":ie("pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.")}}))}processGroupOpenedEvent(e){e.columnGroups.forEach((e=>{let t=null;if(e){const i=e.getGroupId();t=this.columnModel.getProvidedColGroup(i)}e&&!t||this.columnModel.setColumnGroupOpened(t,e.isExpanded(),"alignedGridChanged")}))}processColumnEvent(e){const t=e.column;let i=null;if(t&&(i=this.columnModel.getColDefCol(t.getColId())),t&&!i)return;const s=this.getMasterColumns(e);switch(e.type){case"columnMoved":{const t=e.api.getColumnState().map((e=>({colId:e.colId})));this.columnApplyStateService.applyColumnState({state:t,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{const t=e.api.getColumnState().map((e=>({colId:e.colId,hide:e.hide})));this.columnApplyStateService.applyColumnState({state:t},"alignedGridChanged")}break;case"columnPinned":{const t=e.api.getColumnState().map((e=>({colId:e.colId,pinned:e.pinned})));this.columnApplyStateService.applyColumnState({state:t},"alignedGridChanged")}break;case"columnResized":{var o;const t=e,i={};s.forEach((e=>{i[e.getId()]={key:e.getColId(),newWidth:e.getActualWidth()}})),null===(o=t.flexColumns)||void 0===o||o.forEach((e=>{i[e.getId()]&&delete i[e.getId()]})),this.columnSizeService.setColumnWidths(Object.values(i),!1,t.finished,"alignedGridChanged");break}}const n=this.ctrlsService.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach((e=>{e.setGridOption("alwaysShowVerticalScroll",n)}))}}]};var _l={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},Kl=["january","february","march","april","may","june","july","august","september","october","november","december"],Zl={version:Wo,moduleName:"@ag-grid-community/data-type",beans:[class extends F{constructor(){super(...arguments),this.beanName="dataTypeService",this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}wireBeans(e){this.rowModel=e.rowModel,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.columnApplyStateService=e.columnApplyStateService}postConstruct(){this.groupHideOpenParents=this.gos.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",(()=>{this.groupHideOpenParents=this.gos.get("groupHideOpenParents")})),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",(e=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs(Re(e.source))}))}processDataTypeDefinitions(){var e;const t=this.getDefaultDataTypes();this.dataTypeDefinitions={},this.formatValueFuncs={};const i=e=>t=>{const{column:i,node:s,value:o}=t;let n=i.getColDef().valueFormatter;return n===e.groupSafeValueFormatter&&(n=e.valueFormatter),this.valueService.formatValue(i,s,o,n)};Object.entries(t).forEach((e=>{let[t,s]=e;const o={...s,groupSafeValueFormatter:this.createGroupSafeValueFormatter(s)};this.dataTypeDefinitions[t]=o,this.formatValueFuncs[t]=i(o)}));const s=null!==(e=this.gos.get("dataTypeDefinitions"))&&void 0!==e?e:{};this.dataTypeMatchers={},Object.entries(s).forEach((e=>{let[o,n]=e;const r=this.processDataTypeDefinition(n,s,[o],t);r&&(this.dataTypeDefinitions[o]=r,n.dataTypeMatcher&&(this.dataTypeMatchers[o]=n.dataTypeMatcher),this.formatValueFuncs[o]=i(r))})),this.checkObjectValueHandlers(t),["dateString","text","number","boolean","date"].forEach((e=>{const i=this.dataTypeMatchers[e];i&&delete this.dataTypeMatchers[e],this.dataTypeMatchers[e]=null!==i&&void 0!==i?i:t[e].dataTypeMatcher}))}mergeDataTypeDefinitions(e,t){const i={...e,...t};return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(i.columnTypes=[...we(e.columnTypes),...we(t.columnTypes)]),i}processDataTypeDefinition(e,t,i,s){let o;const n=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let i=s[n];const r=t[n];if(i&&r&&(i=r),!this.validateDataTypeDefinition(e,i,n))return;o=this.mergeDataTypeDefinitions(i,e)}else{if(i.includes(n))return void ie('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');const r=t[n];if(!this.validateDataTypeDefinition(e,r,n))return;const l=this.processDataTypeDefinition(r,t,[...i,n],s);if(!l)return;o=this.mergeDataTypeDefinitions(l,e)}return{...o,groupSafeValueFormatter:this.createGroupSafeValueFormatter(o)}}validateDataTypeDefinition(e,t,i){return t?t.baseDataType===e.baseDataType||(ie('The "baseDataType" property of a data type definition must match that of its parent.'),!1):(ie("The data type definition ".concat(i," does not exist.")),!1)}createGroupSafeValueFormatter(e){if(e.valueFormatter)return t=>{var i;if(null!==(i=t.node)&&void 0!==i&&i.group){const i=t.column.getAggFunc();if(i){if("first"===i||"last"===i)return e.valueFormatter(t);if("number"===e.baseDataType&&"count"!==i){if("number"===typeof t.value)return e.valueFormatter(t);if("object"===typeof t.value){if(!t.value)return;if("toNumber"in t.value)return e.valueFormatter({...t,value:t.value.toNumber()});if("value"in t.value)return e.valueFormatter({...t,value:t.value.value})}}}if(!this.gos.get("suppressGroupMaintainValueType"))return}else if(this.groupHideOpenParents&&t.column.isRowGroupActive()){var s;if("string"!==typeof t.value||null!==(s=e.dataTypeMatcher)&&void 0!==s&&s.call(e,t.value))return e.valueFormatter(t);if(!this.gos.get("suppressGroupMaintainValueType"))return}return e.valueFormatter(t)}}updateColDefAndGetColumnType(e,t,i){let{cellDataType:s}=t;const{field:o}=t;if(void 0===s&&(s=e.cellDataType),null!=s&&!0!==s||(s=!!this.canInferCellDataType(e,t)&&this.inferCellDataType(o,i)),!s)return void(e.cellDataType=!1);const n=this.dataTypeDefinitions[s];if(n)return e.cellDataType=s,n.groupSafeValueFormatter&&(e.valueFormatter=n.groupSafeValueFormatter),n.valueParser&&(e.valueParser=n.valueParser),n.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,s,n,i),n.columnTypes;ie('Missing data type definition - "'.concat(s,'"'))}addColumnListeners(e){if(!this.isWaitingForRowData)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const i=e=>{t.add(e.key)};e.addEventListener("columnStateUpdated",i),this.columnStateUpdateListenerDestroyFuncs.push((()=>e.removeEventListener("columnStateUpdated",i)))}canInferCellDataType(e,t){if("clientSide"!==this.rowModel.getType())return!1;const i={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(t,i))return!1;const s=null===t.type?e.type:t.type;if(s){var o;const e=null!==(o=this.gos.get("columnTypes"))&&void 0!==o?o:{};if(we(s).some((t=>{const s=e[t.trim()];return s&&this.doColDefPropsPreventInference(s,i)})))return!1}return!this.doColDefPropsPreventInference(e,i)}doColDefPropsPreventInference(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some((i=>{let[s,o]=i;return this.doesColDefPropPreventInference(e,t,s,o)}))}doesColDefPropPreventInference(e,t,i,s){if(!t[i])return!1;const o=e[i];return null===o?(t[i]=!1,!1):void 0===s?!!o:o===s}inferCellDataType(e,t){var i;if(!e)return;let s;const o=this.getInitialData();if(o){const t=e.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");s=U(o,e,t)}else this.initWaitForRowData(t);if(null==s)return;const[n]=null!==(i=Object.entries(this.dataTypeMatchers).find((e=>{let[t,i]=e;return i(s)})))&&void 0!==i?i:["object"];return n}getInitialData(){const e=this.gos.get("rowData");if(null!==e&&void 0!==e&&e.length)return e[0];if(this.initialData)return this.initialData;{const e=this.rowModel.getRootNode().allLeafChildren;if(null!==e&&void 0!==e&&e.length)return e[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions;t&&this.columnModel.queueResizeOperations();const[i]=this.addManagedEventListeners({rowDataUpdateStarted:e=>{const{firstRowData:s}=e;if(!s)return;null===i||void 0===i||i(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(s,t),this.columnStateUpdatesPendingInference={},t&&this.columnModel.processResizeOperations();this.eventService.dispatchEvent({type:"dataTypesInferred"})}})}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(e,t){this.initialData=e;const i=[];this.destroyColumnStateUpdateListeners();const s={},o={};Object.entries(this.columnStateUpdatesPendingInference).forEach((e=>{let[n,r]=e;const l=this.columnModel.getCol(n);if(!l)return;const a=l.getColDef();if(!this.columnModel.resetColDefIntoCol(l,"cellDataTypeInferred"))return;const d=l.getColDef();if(t&&d.type&&d.type!==a.type){const e=this.getUpdatedColumnState(l,r);e.rowGroup&&null==e.rowGroupIndex&&(s[n]=e),e.pivot&&null==e.pivotIndex&&(o[n]=e),i.push(e)}})),t&&i.push(...this.funcColsService.generateColumnStateForRowGroupAndPivotIndexes(s,o)),i.length&&this.columnApplyStateService.applyColumnState({state:i},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(e,t){const i=this.columnApplyStateService.getColumnStateFromColDef(e);return t.forEach((e=>{delete i[e],"rowGroup"===e?delete i.rowGroupIndex:"pivot"===e&&delete i.pivotIndex})),i}checkObjectValueHandlers(e){const t=this.dataTypeDefinitions.object,i=e.object;this.hasObjectValueParser=t.valueParser!==i.valueParser,this.hasObjectValueFormatter=t.valueFormatter!==i.valueFormatter}getDateStringTypeDefinition(e){var t;return e&&null!==(t=this.getDataTypeDefinition(e))&&void 0!==t?t:this.dataTypeDefinitions.dateString}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){var t;return null===(t=this.getDataTypeDefinition(e))||void 0===t?void 0:t.baseDataType}checkType(e,t){var i;if(null==t)return!0;const s=null===(i=this.getDataTypeDefinition(e))||void 0===i?void 0:i.dataTypeMatcher;return!s||s(t)}validateColDef(e){"object"===e.cellDataType&&(e.valueFormatter!==this.dataTypeDefinitions.object.groupSafeValueFormatter||this.hasObjectValueFormatter||ie('Cell data type is "object" but no value formatter has been provided. Please either provide an object data type definition with a value formatter, or set "colDef.valueFormatter"'),e.editable&&e.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&ie('Cell data type is "object" but no value parser has been provided. Please either provide an object data type definition with a value parser, or set "colDef.valueParser"'))}getFormatValue(e){return this.formatValueFuncs[e]}setColDefPropertiesForBaseDataType(e,t,i,s){const o=this.formatValueFuncs[t],n=Ni.__isRegistered("@ag-grid-enterprise/set-filter",this.gridId),r=this.localeService.getLocaleTextFunc(),l=t=>{const{filterParams:i}=e;e.filterParams="object"===typeof i?{...i,...t}:t};switch(i.baseDataType){case"number":e.cellEditor="agNumberCellEditor",n&&l({comparator:(e,t)=>{const i=null==e?0:parseInt(e),s=null==t?0:parseInt(t);return i===s?0:i>s?1:-1}});break;case"boolean":e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=e=>!!e.colDef.editable&&e.event.key===Vi.SPACE,l(n?{valueFormatter:e=>P(e.value)?r(String(e.value),e.value?"True":"False"):r("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(e,t)=>t,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(e,t)=>!1===t,numberOfInputs:0}]});break;case"date":e.cellEditor="agDateCellEditor",e.keyCreator=o,n&&l({valueFormatter:e=>{const t=o(e);return P(t)?t:r("blanks","(Blanks)")},treeList:!0,treeListFormatter:(e,t)=>{if(1===t&&null!=e){const t=Kl[Number(e)-1];return r(t,_l[t])}return null!==e&&void 0!==e?e:r("blanks","(Blanks)")}});break;case"dateString":{e.cellEditor="agDateStringCellEditor",e.keyCreator=o;const t=i.dateParser;l(n?{valueFormatter:e=>{const t=o(e);return P(t)?t:r("blanks","(Blanks)")},treeList:!0,treeListPathGetter:e=>{const i=t(null!==e&&void 0!==e?e:void 0);return i?[String(i.getFullYear()),String(i.getMonth()+1),String(i.getDate())]:null},treeListFormatter:(e,t)=>{if(1===t&&null!=e){const t=Kl[Number(e)-1];return r(t,_l[t])}return null!==e&&void 0!==e?e:r("blanks","(Blanks)")}}:{comparator:(e,i)=>{const s=t(i);return null==i||s<e?-1:s>e?1:0}});break}case"object":e.cellEditorParams={useFormatter:!0},e.comparator=(e,t)=>{const i=this.columnModel.getColDefCol(s),n=null===i||void 0===i?void 0:i.getColDef();if(!i||!n)return 0;const r=null==e?"":o({column:i,node:null,value:e}),l=null==t?"":o({column:i,node:null,value:t});return r===l?0:r>l?1:-1},e.keyCreator=o,n?l({valueFormatter:e=>{const t=o(e);return P(t)?t:r("blanks","(Blanks)")}}):e.filterValueGetter=e=>o({column:e.column,node:e.node,value:this.valueService.getValue(e.column,e.node)})}}getDefaultDataTypes(){const e=e=>!!e.match("^\\d{4}-\\d{2}-\\d{2}$"),t=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:e=>{var t,i;return""===(null===(t=e.newValue)||void 0===t||null===(i=t.trim)||void 0===i?void 0:i.call(t))?null:Number(e.newValue)},valueFormatter:e=>null==e.value?"":"number"!==typeof e.value||isNaN(e.value)?t("invalidNumber","Invalid Number"):String(e.value),dataTypeMatcher:e=>"number"===typeof e},text:{baseDataType:"text",valueParser:e=>""===e.newValue?null:I(e.newValue),dataTypeMatcher:e=>"string"===typeof e},boolean:{baseDataType:"boolean",valueParser:e=>{var t,i;return null==e.newValue?e.newValue:""===(null===(t=e.newValue)||void 0===t||null===(i=t.trim)||void 0===i?void 0:i.call(t))?null:"true"===String(e.newValue).toLowerCase()},valueFormatter:e=>null==e.value?"":String(e.value),dataTypeMatcher:e=>"boolean"===typeof e},date:{baseDataType:"date",valueParser:e=>Po(null==e.newValue?null:String(e.newValue)),valueFormatter:e=>{var i;return null==e.value?"":e.value instanceof Date&&!isNaN(e.value.getTime())?null!==(i=Fo(e.value,!1))&&void 0!==i?i:"":t("invalidDate","Invalid Date")},dataTypeMatcher:e=>e instanceof Date},dateString:{baseDataType:"dateString",dateParser:e=>{var t;return null!==(t=Po(e))&&void 0!==t?t:void 0},dateFormatter:e=>{var t;return null!==(t=Fo(null!==e&&void 0!==e?e:null,!1))&&void 0!==t?t:void 0},valueParser:t=>e(String(t.newValue))?t.newValue:null,valueFormatter:t=>e(String(t.value))?t.value:"",dataTypeMatcher:t=>"string"===typeof t&&e(t)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:e=>{var t;return null!==(t=I(e.value))&&void 0!==t?t:""}}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach((e=>e())),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}}]};function jl(e,t){var i;const{colKey:s,rowNode:o,useFormatter:n}=t,r=null!==(i=e.columnModel.getColDefCol(s))&&void 0!==i?i:e.columnModel.getCol(s);if(M(r))return null;const l=e.valueService.getValue(r,o);if(n){const t=e.valueService.formatValue(r,o,l);return null!==t&&void 0!==t?t:ke(l,!0)}return l}function Yl(e,t){e.gos.updateGridOptions({options:t})}function ql(e){return e.rowRenderer.getFirstVirtualRenderedRow()}function Ql(e){return e.rowRenderer.getLastVirtualRenderedRow()}var Xl={version:Wo,moduleName:"@ag-grid-community/menu-api",apiFunctions:{showColumnMenuAfterButtonClick:function(e,t,i){const s=e.columnModel.getCol(t);e.menuService.showColumnMenu({column:s,buttonElement:i,positionBy:"button"})},showColumnMenuAfterMouseClick:function(e,t,i){let s=e.columnModel.getCol(t);s||(s=e.columnModel.getColDefCol(t)),s?e.menuService.showColumnMenu({column:s,mouseEvent:i,positionBy:"mouse"}):se("column '".concat(t,"' not found"))},showColumnMenu:function(e,t){const i=e.columnModel.getCol(t);i?e.menuService.showColumnMenu({column:i,positionBy:"auto"}):se("column '".concat(t,"' not found"))},hidePopupMenu:function(e){e.menuService.hidePopupMenu()}}},$l={version:Wo,moduleName:"@ag-grid-community/api",dependantModules:[{version:Wo,moduleName:"@ag-grid-community/core-api",apiFunctions:{getGridId:function(e){return e.context.getGridId()},destroy:function(e){e.gridDestroyService.destroy()},isDestroyed:function(e){return e.gridDestroyService.isDestroyCalled()},getGridOption:function(e,t){return e.gos.get(t)},setGridOption:function(e,t,i){Yl(e,{[t]:i})},updateGridOptions:Yl}},{version:Wo,moduleName:"@ag-grid-community/pinned-row-api",apiFunctions:{getPinnedTopRowCount:function(e){return e.pinnedRowModel.getPinnedTopRowCount()},getPinnedBottomRowCount:function(e){return e.pinnedRowModel.getPinnedBottomRowCount()},getPinnedTopRow:function(e,t){return e.pinnedRowModel.getPinnedTopRow(t)},getPinnedBottomRow:function(e,t){return e.pinnedRowModel.getPinnedBottomRow(t)}}},{version:Wo,moduleName:"@ag-grid-community/row-selection-api",apiFunctions:{setNodesSelected:function(e,t){if(!t.nodes.every((e=>e.rowPinned?(ie("cannot select pinned rows"),!1):void 0!==e.id||(ie("cannot select node until id for node is known"),!1))))return;const{nodes:i,source:s,newValue:o}=t,n=i;e.selectionService.setNodesSelected({nodes:n,source:null!==s&&void 0!==s?s:"api",newValue:o})},selectAll:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"apiSelectAll";e.selectionService.selectAllRowNodes({source:t})},deselectAll:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"apiSelectAll";e.selectionService.deselectAllRowNodes({source:t})},selectAllFiltered:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"apiSelectAllFiltered";e.selectionService.selectAllRowNodes({source:t,justFiltered:!0})},deselectAllFiltered:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"apiSelectAllFiltered";e.selectionService.deselectAllRowNodes({source:t,justFiltered:!0})},selectAllOnCurrentPage:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"apiSelectAllCurrentPage";e.selectionService.selectAllRowNodes({source:t,justCurrentPage:!0})},deselectAllOnCurrentPage:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"apiSelectAllCurrentPage";e.selectionService.deselectAllRowNodes({source:t,justCurrentPage:!0})},getSelectedNodes:function(e){return e.selectionService.getSelectedNodes()},getSelectedRows:function(e){return e.selectionService.getSelectedRows()}}},{version:Wo,moduleName:"@ag-grid-community/column-api",apiFunctions:{getColumnDef:function(e,t){const i=e.columnModel.getColDefCol(t);return i?i.getColDef():null},getColumnDefs:function(e){return e.columnModel.getColumnDefs()},sizeColumnsToFit:function(e,t){"number"===typeof t?e.columnSizeService.sizeColumnsToFit(t,"api"):e.ctrlsService.getGridBodyCtrl().sizeColumnsToFit(t)},setColumnGroupOpened:function(e,t,i){e.columnModel.setColumnGroupOpened(t,i,"api")},getColumnGroup:function(e,t,i){return e.visibleColsService.getColumnGroup(t,i)},getProvidedColumnGroup:function(e,t){return e.columnModel.getProvidedColGroup(t)},getDisplayNameForColumn:function(e,t,i){return e.columnNameService.getDisplayNameForColumn(t,i)||""},getDisplayNameForColumnGroup:function(e,t,i){return e.columnNameService.getDisplayNameForColumnGroup(t,i)||""},getColumn:function(e,t){return e.columnModel.getColDefCol(t)},getColumns:function(e){return e.columnModel.getColDefCols()},applyColumnState:function(e,t){return e.columnApplyStateService.applyColumnState(t,"api")},getColumnState:function(e){return e.columnGetStateService.getColumnState()},resetColumnState:function(e){e.columnApplyStateService.resetColumnState("api")},getColumnGroupState:function(e){return e.columnGroupStateService.getColumnGroupState()},setColumnGroupState:function(e,t){e.columnGroupStateService.setColumnGroupState(t,"api")},resetColumnGroupState:function(e){e.columnGroupStateService.resetColumnGroupState("api")},isPinning:function(e){return e.visibleColsService.isPinningLeft()||e.visibleColsService.isPinningRight()},isPinningLeft:function(e){return e.visibleColsService.isPinningLeft()},isPinningRight:function(e){return e.visibleColsService.isPinningRight()},getDisplayedColAfter:function(e,t){return e.visibleColsService.getColAfter(t)},getDisplayedColBefore:function(e,t){return e.visibleColsService.getColBefore(t)},setColumnVisible:function(e,t,i){e.columnModel.setColsVisible([t],i,"api")},setColumnsVisible:function(e,t,i){e.columnModel.setColsVisible(t,i,"api")},setColumnPinned:function(e,t,i){e.columnModel.setColsPinned([t],i,"api")},setColumnsPinned:function(e,t,i){e.columnModel.setColsPinned(t,i,"api")},getAllGridColumns:function(e){return e.columnModel.getCols()},getDisplayedLeftColumns:function(e){return e.visibleColsService.getLeftCols()},getDisplayedCenterColumns:function(e){return e.visibleColsService.getCenterCols()},getDisplayedRightColumns:function(e){return e.visibleColsService.getRightCols()},getAllDisplayedColumns:function(e){return e.visibleColsService.getAllCols()},getAllDisplayedVirtualColumns:function(e){return e.columnViewportService.getViewportColumns()},moveColumn:function(e,t,i){e.columnMoveService.moveColumns([t],i,"api")},moveColumnByIndex:function(e,t,i){e.columnMoveService.moveColumnByIndex(t,i,"api")},moveColumns:function(e,t,i){e.columnMoveService.moveColumns(t,i,"api")},setColumnWidth:function(e,t,i){let s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"api";e.columnSizeService.setColumnWidths([{key:t,newWidth:i}],!1,s,o)},setColumnWidths:function(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"api";e.columnSizeService.setColumnWidths(t,!1,i,s)},getLeftDisplayedColumnGroups:function(e){return e.visibleColsService.getTreeLeft()},getCenterDisplayedColumnGroups:function(e){return e.visibleColsService.getTreeCenter()},getRightDisplayedColumnGroups:function(e){return e.visibleColsService.getTreeRight()},getAllDisplayedColumnGroups:function(e){return e.visibleColsService.getAllTrees()},autoSizeColumn:function(e,t,i){return e.columnAutosizeService.autoSizeCols({colKeys:[t],skipHeader:i,source:"api"})},autoSizeColumns:function(e,t,i){e.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:i,source:"api"})},autoSizeAllColumns:function(e,t){e.columnAutosizeService.autoSizeAllColumns("api",t)}}},{version:Wo,moduleName:"@ag-grid-community/row-api",apiFunctions:{redrawRows:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming((()=>e.rowRenderer.redrawRows(i)))},setRowNodeExpanded:function(e,t,i,s,o){e.expansionService.setRowNodeExpanded(t,i,s,o)},getRowNode:function(e,t){return e.rowModel.getRowNode(t)},addRenderedRowListener:function(e,t,i,s){e.rowRenderer.addRenderedRowListener(t,i,s)},getRenderedNodes:function(e){return e.rowRenderer.getRenderedNodes()},forEachNode:function(e,t,i){e.rowModel.forEachNode(t,i)},getFirstDisplayedRow:function(e){return ql(e)},getFirstDisplayedRowIndex:ql,getLastDisplayedRow:function(e){return Ql(e)},getLastDisplayedRowIndex:Ql,getDisplayedRowAtIndex:function(e,t){return e.rowModel.getRow(t)},getDisplayedRowCount:function(e){return e.rowModel.getRowCount()},getModel:function(e){return e.rowModel}}},{version:Wo,moduleName:"@ag-grid-community/drag-api",apiFunctions:{addRowDropZone:function(e,t){e.ctrlsService.getGridBodyCtrl().getRowDragFeature().addRowDropZone(t)},removeRowDropZone:function(e,t){const i=e.dragAndDropService.findExternalZone(t);i&&e.dragAndDropService.removeDropTarget(i)},getRowDropZoneParams:function(e,t){return e.ctrlsService.getGridBodyCtrl().getRowDragFeature().getRowDropZone(t)}}},{version:Wo,moduleName:"@ag-grid-community/scroll-api",apiFunctions:{getVerticalPixelRange:function(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition()},getHorizontalPixelRange:function(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getHScrollPosition()},ensureColumnVisible:Hr,ensureIndexVisible:Wr,ensureNodeVisible:function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.frameworkOverrides.wrapIncoming((()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureNodeVisible(t,i)),"ensureVisible")}}},{version:Wo,moduleName:"@ag-grid-community/overlay-api",apiFunctions:{showLoadingOverlay:function(e){e.overlayService.showLoadingOverlay()},showNoRowsOverlay:function(e){e.overlayService.showNoRowsOverlay()},hideOverlay:function(e){e.overlayService.hideOverlay()}}},{version:Wo,moduleName:"@ag-grid-community/keyboard-navigation-api",apiFunctions:{getFocusedCell:function(e){return e.focusService.getFocusedCell()},clearFocusedCell:function(e){return e.focusService.clearFocusedCell()},setFocusedCell:function(e,t,i,s){e.focusService.setFocusedCell({rowIndex:t,column:i,rowPinned:s,forceBrowserFocus:!0})},setFocusedHeader:function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=e.headerNavigationService.getHeaderPositionForColumn(t,i);s&&e.focusService.focusHeaderPosition({headerPosition:s})},tabToNextCell:function(e,t){return e.navigationService.tabToNextCell(!1,t)},tabToPreviousCell:function(e,t){return e.navigationService.tabToNextCell(!0,t)}}},{version:Wo,moduleName:"@ag-grid-community/event-api",apiFunctions:{addEventListener:function(e,t,i){e.apiEventService.addEventListener(t,i)},addGlobalListener:function(e,t){e.apiEventService.addGlobalListener(t)},removeEventListener:function(e,t,i){e.apiEventService.removeEventListener(t,i)},removeGlobalListener:function(e,t){e.apiEventService.removeGlobalListener(t)}}},{version:Wo,moduleName:"@ag-grid-community/render-api",apiFunctions:{setGridAriaProperty:function(e,t,i){if(!t)return;const s=e.ctrlsService.getGridBodyCtrl().getGui(),o="aria-".concat(t);null===i?s.removeAttribute(o):s.setAttribute(o,i)},refreshCells:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.frameworkOverrides.wrapIncoming((()=>e.rowRenderer.refreshCells(t)))},flashCells:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=e=>ie("Since v31.1 api.flashCells parameter '".concat(e,"Delay' is deprecated. Please use '").concat(e,"Duration' instead."));P(t.fadeDelay)&&i("fade"),P(t.flashDelay)&&i("flash"),e.frameworkOverrides.wrapIncoming((()=>e.rowRenderer.flashCells(t)))},refreshHeader:function(e){e.frameworkOverrides.wrapIncoming((()=>e.ctrlsService.getHeaderRowContainerCtrls().forEach((e=>e.refresh()))))},isAnimationFrameQueueEmpty:function(e){return e.animationFrameService.isQueueEmpty()},flushAllAnimationFrames:function(e){e.animationFrameService.flushAllFrames()},getSizesForCurrentTheme:function(e){return{rowHeight:e.gos.getRowHeightAsNumber(),headerHeight:e.columnModel.getHeaderHeight()}},getCellRendererInstances:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.rowRenderer.getCellRendererInstances(t).map(Fs)}}},{version:Wo,moduleName:"@ag-grid-community/cell-api",apiFunctions:{expireValueCache:function(e){e.valueCache.expire()},getValue:function(e,t,i){return jl(e,{colKey:t,rowNode:i})},getCellValue:jl}},Xl,{version:Wo,moduleName:"@ag-grid-community/sort-api",apiFunctions:{onSortChanged:function(e){e.sortController.onSortChanged("api")}}}]};var Jl={version:Wo,moduleName:"@ag-grid-community/state-core",beans:[class extends F{constructor(){super(...arguments),this.beanName="stateService",this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=de((()=>this.dispatchQueuedStateUpdateEvents()),0),this.onRowGroupOpenedDebounced=de((()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState())),0),this.onRowSelectedDebounced=de((()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())}),0),this.staleStateKeys=new Set}wireBeans(e){this.filterManager=e.filterManager,this.ctrlsService=e.ctrlsService,this.pivotResultColsService=e.pivotResultColsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnGroupStateService=e.columnGroupStateService,this.columnGetStateService=e.columnGetStateService,this.paginationService=e.paginationService,this.rowModel=e.rowModel,this.selectionService=e.selectionService,this.expansionService=e.expansionService,this.columnAnimationService=e.columnAnimationService,this.columnApplyStateService=e.columnApplyStateService,this.sideBarService=e.sideBarService,this.rangeService=e.rangeService}postConstruct(){var e;this.isClientSideRowModel="clientSide"===this.rowModel.getType(),this.cachedState=null!==(e=this.gos.get("initialState"))&&void 0!==e?e:{},this.ctrlsService.whenReady((()=>this.suppressEventsAndDispatchInitEvent((()=>this.setupStateOnGridReady()))));const[t,i,s]=this.addManagedEventListeners({newColumnsLoaded:e=>{let{source:i}=e;"gridInitializing"===i&&(t(),this.suppressEventsAndDispatchInitEvent((()=>this.setupStateOnColumnsInitialised())))},rowCountReady:()=>{null===i||void 0===i||i(),this.suppressEventsAndDispatchInitEvent((()=>this.setupStateOnRowCountReady()))},firstDataRendered:()=>{null===s||void 0===s||s(),this.suppressEventsAndDispatchInitEvent((()=>this.setupStateOnFirstDataRendered()))}})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){this.updateCachedState("sideBar",this.getSideBarState());const e=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:e,sideBarUpdated:e})}setupStateOnColumnsInitialised(){var e;const t=null!==(e=this.gos.get("initialState"))&&void 0!==e?e:{};this.setColumnState(t),this.setColumnGroupState(t),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState()),this.addManagedEventListeners({columnValueChanged:()=>this.updateColumnState(["aggregation"]),columnMoved:()=>this.updateColumnState(["columnOrder"]),columnPinned:()=>this.updateColumnState(["columnPinning"]),columnResized:()=>this.updateColumnState(["columnSizing"]),columnVisible:()=>this.updateColumnState(["columnVisibility"]),columnPivotChanged:()=>this.updateColumnState(["pivot"]),columnPivotModeChanged:()=>this.updateColumnState(["pivot"]),columnRowGroupChanged:()=>this.updateColumnState(["rowGroup"]),sortChanged:()=>this.updateColumnState(["sort"]),newColumnsLoaded:()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setupStateOnRowCountReady(){var e;const{filter:t,rowGroupExpansion:i,rowSelection:s,pagination:o}=null!==(e=this.gos.get("initialState"))&&void 0!==e?e:{},n=this.gos.get("advancedFilterModel");(t||n)&&this.setFilterState(t,n),i&&this.setRowGroupExpansionState(i),s&&this.setRowSelectionState(s),o&&this.setPaginationState(o),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState()),this.addManagedEventListeners({filterChanged:()=>this.updateCachedState("filter",this.getFilterState()),rowGroupOpened:()=>this.onRowGroupOpenedDebounced(),expandOrCollapseAll:()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:e=>{(e.newPage||e.newPageSize)&&this.updateCachedState("pagination",this.getPaginationState())}})}setupStateOnFirstDataRendered(){var e;const{scroll:t,rangeSelection:i,focusedCell:s,columnOrder:o}=null!==(e=this.gos.get("initialState"))&&void 0!==e?e:{};s&&this.setFocusedCellState(s),i&&this.setRangeSelectionState(i),t&&this.setScrollState(t),this.setColumnPivotState(!(null===o||void 0===o||!o.orderedColIds)),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState()),this.updateCachedState("rangeSelection",this.getRangeSelectionState()),this.updateCachedState("scroll",this.getScrollState()),this.addManagedEventListeners({cellFocused:()=>this.updateCachedState("focusedCell",this.getFocusedCellState()),rangeSelectionChanged:e=>{e.finished&&this.updateCachedState("rangeSelection",this.getRangeSelectionState())},bodyScrollEnd:()=>this.updateCachedState("scroll",this.getScrollState())})}getColumnState(){const e=this.columnModel.isPivotMode(),t=[],i=[],s=[],o=[],n=[],r=[],l=[],a=[],d=[],c=this.columnGetStateService.getColumnState();for(let u=0;u<c.length;u++){const{colId:e,sort:h,sortIndex:p,rowGroup:g,rowGroupIndex:m,aggFunc:v,pivot:f,pivotIndex:C,pinned:w,hide:S,width:y,flex:b}=c[u];d.push(e),h&&(t[null!==p&&void 0!==p?p:0]={colId:e,sort:h}),g&&(i[null!==m&&void 0!==m?m:0]=e),"string"===typeof v&&s.push({colId:e,aggFunc:v}),f&&(o[null!==C&&void 0!==C?C:0]=e),w&&("right"===w?r:n).push(e),S&&l.push(e),(b||y)&&a.push({colId:e,flex:null!==b&&void 0!==b?b:void 0,width:y})}return{sort:t.length?{sortModel:t}:void 0,rowGroup:i.length?{groupColIds:i}:void 0,aggregation:s.length?{aggregationModel:s}:void 0,pivot:o.length||e?{pivotMode:e,pivotColIds:o}:void 0,columnPinning:n.length||r.length?{leftColIds:n,rightColIds:r}:void 0,columnVisibility:l.length?{hiddenColIds:l}:void 0,columnSizing:a.length?{columnSizingModel:a}:void 0,columnOrder:d.length?{orderedColIds:d}:void 0}}setColumnState(e){const{sort:t,rowGroup:i,aggregation:s,pivot:o,columnPinning:n,columnVisibility:r,columnSizing:l,columnOrder:a}=e,d={},c=e=>{let t=d[e];return t||(t={colId:e},d[e]=t,t)};t&&t.sortModel.forEach(((e,t)=>{let{colId:i,sort:s}=e;const o=c(i);o.sort=s,o.sortIndex=t})),i&&i.groupColIds.forEach(((e,t)=>{const i=c(e);i.rowGroup=!0,i.rowGroupIndex=t})),s&&s.aggregationModel.forEach((e=>{let{colId:t,aggFunc:i}=e;c(t).aggFunc=i})),o&&(o.pivotColIds.forEach(((e,t)=>{const i=c(e);i.pivot=!0,i.pivotIndex=t})),this.gos.updateGridOptions({options:{pivotMode:o.pivotMode},source:"gridInitializing"})),n&&(n.leftColIds.forEach((e=>{c(e).pinned="left"})),n.rightColIds.forEach((e=>{c(e).pinned="right"}))),r&&r.hiddenColIds.forEach((e=>{c(e).hide=!0})),l&&l.columnSizingModel.forEach((e=>{let{colId:t,flex:i,width:s}=e;const o=c(t);o.flex=null!==i&&void 0!==i?i:null,o.width=s}));const u=null===a||void 0===a?void 0:a.orderedColIds,h=!(null===u||void 0===u||!u.length),p=h?u.map((e=>c(e))):Object.values(d);if(p.length){this.columnStates=p;const e={sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};this.columnApplyStateService.applyColumnState({state:p,applyOrder:h,defaultState:e},"gridInitializing")}}setColumnPivotState(e){const t=this.columnStates;this.columnStates=void 0;const i=this.columnGroupStates;if(this.columnGroupStates=void 0,this.pivotResultColsService.isPivotResultColsPresent()){if(t){const i=[];for(const e of t)this.pivotResultColsService.getPivotResultCol(e.colId)&&i.push(e);this.columnApplyStateService.applyColumnState({state:i,applyOrder:e},"gridInitializing")}i&&this.columnGroupStateService.setColumnGroupState(i,"gridInitializing")}}getColumnGroupState(){const e=this.columnGroupStateService.getColumnGroupState(),t=[];return e.forEach((e=>{let{groupId:i,open:s}=e;s&&t.push(i)})),t.length?{openColumnGroupIds:t}:void 0}setColumnGroupState(e){var t;if(!Object.prototype.hasOwnProperty.call(e,"columnGroup"))return;const i=new Set(null===(t=e.columnGroup)||void 0===t?void 0:t.openColumnGroupIds),s=this.columnGroupStateService.getColumnGroupState().map((e=>{let{groupId:t}=e;const s=i.has(t);return s&&i.delete(t),{groupId:t,open:s}}));i.forEach((e=>{s.push({groupId:e,open:!0})})),s.length&&(this.columnGroupStates=s),this.columnGroupStateService.setColumnGroupState(s,"gridInitializing")}getFilterState(){var e,t,i;let s=null===(e=this.filterManager)||void 0===e?void 0:e.getFilterModel();s&&0===Object.keys(s).length&&(s=void 0);const o=null!==(t=null===(i=this.filterManager)||void 0===i?void 0:i.getAdvancedFilterModel())&&void 0!==t?t:void 0;return s||o?{filterModel:s,advancedFilterModel:o}:void 0}setFilterState(e,t){const{filterModel:i,advancedFilterModel:s}=null!==e&&void 0!==e?e:{advancedFilterModel:t};var o,n;i&&(null===(o=this.filterManager)||void 0===o||o.setFilterModel(i,"columnFilter"));s&&(null===(n=this.filterManager)||void 0===n||n.setAdvancedFilterModel(s))}getRangeSelectionState(){var e;const t=null===(e=this.rangeService)||void 0===e?void 0:e.getCellRanges().map((e=>{const{id:t,type:i,startRow:s,endRow:o,columns:n,startColumn:r}=e;return{id:t,type:i,startRow:s,endRow:o,colIds:n.map((e=>e.getColId())),startColId:r.getColId()}}));return null!==t&&void 0!==t&&t.length?{cellRanges:t}:void 0}setRangeSelectionState(e){if(!this.gos.get("enableRangeSelection")||!this.rangeService)return;const t=[];e.cellRanges.forEach((e=>{const i=[];if(e.colIds.forEach((e=>{const t=this.columnModel.getCol(e);t&&i.push(t)})),!i.length)return;let s=this.columnModel.getCol(e.startColId);if(!s){const e=this.visibleColsService.getAllCols(),t=new Set(i);s=e.find((e=>t.has(e)))}t.push({...e,columns:i,startColumn:s})})),this.rangeService.setCellRanges(t)}getScrollState(){var e,t,i;if(!this.isClientSideRowModel)return;const s=null===(e=this.ctrlsService.getGridBodyCtrl())||void 0===e?void 0:e.getScrollFeature(),{left:o}=null!==(t=null===s||void 0===s?void 0:s.getHScrollPosition())&&void 0!==t?t:{left:0},{top:n}=null!==(i=null===s||void 0===s?void 0:s.getVScrollPosition())&&void 0!==i?i:{top:0};return n||o?{top:n,left:o}:void 0}setScrollState(e){var t;if(!this.isClientSideRowModel)return;const{top:i,left:s}=e;null===(t=this.ctrlsService.getGridBodyCtrl())||void 0===t||t.getScrollFeature().setScrollPosition(i,s)}getSideBarState(){var e;return null===(e=this.sideBarService)||void 0===e||null===(e=e.getSideBarComp())||void 0===e?void 0:e.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const e=this.focusService.getFocusedCell();if(e){const{column:t,rowIndex:i,rowPinned:s}=e;return{colId:t.getColId(),rowIndex:i,rowPinned:s}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;const{colId:t,rowIndex:i,rowPinned:s}=e;this.focusService.setFocusedCell({column:this.columnModel.getCol(t),rowIndex:i,rowPinned:s,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){if(!this.paginationService)return;const e=this.paginationService.getCurrentPage(),t=this.gos.get("paginationAutoPageSize")?void 0:this.paginationService.getPageSize();return e||t?{page:e,pageSize:t}:void 0}setPaginationState(e){this.paginationService&&(e.pageSize&&!this.gos.get("paginationAutoPageSize")&&this.paginationService.setPageSize(e.pageSize,"initialState"),"number"===typeof e.page&&this.paginationService.setPage(e.page))}getRowSelectionState(){var e;const t=this.selectionService.getSelectionState();return!t||!Array.isArray(t)&&(!1===t.selectAll||!1===t.selectAllChildren)&&!(null!==t&&void 0!==t&&null!==(e=t.toggledNodes)&&void 0!==e&&e.length)?void 0:t}setRowSelectionState(e){this.selectionService.setSelectionState(e,"gridInitializing")}getRowGroupExpansionState(){const e=this.expansionService.getExpandedRows();return e.length?{expandedRowGroupIds:e}:void 0}setRowGroupExpansionState(e){this.expansionService.expandRows(e.expandedRowGroupIds)}updateColumnState(e){const t=this.getColumnState();let i=!1;Object.entries(t).forEach((e=>{let[t,s]=e;L(s,this.cachedState[t])||(i=!0)})),this.cachedState={...this.cachedState,...t},i&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){const i=this.cachedState[e];this.setCachedStateValue(e,t),L(t,i)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState={...this.cachedState,[e]:t}}refreshStaleState(){this.staleStateKeys.forEach((e=>{if("rowSelection"===e)this.setCachedStateValue(e,this.getRowSelectionState())})),this.staleStateKeys.clear()}dispatchStateUpdateEvent(e){this.suppressEvents||(e.forEach((e=>this.queuedUpdateSources.add(e))),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){const e=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear();const t={type:"stateUpdated",sources:e,state:this.cachedState};this.eventService.dispatchEvent(t)}suppressEventsAndDispatchInitEvent(e){this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),e(),setTimeout((()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.columnAnimationService.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))}))}}]},ea={version:Wo,moduleName:"@ag-grid-community/state",dependantModules:[Jl,{version:Wo,moduleName:"@ag-grid-community/state-api",apiFunctions:{getState:function(e){var t,i;return null!==(t=null===(i=e.stateService)||void 0===i?void 0:i.getState())&&void 0!==t?t:{}}},dependantModules:[Jl]}]};function ta(e,t,i){e.addManagedElementListeners(t,{keydown:e=>{if(!e.defaultPrevented&&e.key===Vi.TAB){const s=e.shiftKey;i.findNextFocusableElement(t,!1,s)||i.focusNextGridCoreContainer(s)&&e.preventDefault()}}})}var ia={selector:"AG-PAGE-SIZE-SELECTOR",component:class extends Fi{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const e=this.selectPageSizeComp.getValue();if(!e)return;const t=Number(e);isNaN(t)||t<1||t===this.paginationService.getPageSize()||(this.paginationService.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.paginationService=e.paginationService}postConstruct(){this.addManagedPropertyListener("paginationPageSizeSelector",(()=>{this.onPageSizeSelectorValuesChange()})),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||null===e||void 0===e||!e.newPageSize)return;const t=this.paginationService.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp&&this.appendChild(this.selectPageSizeComp))}reset(){ri(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&!1!==this.gos.get("paginationPageSizeSelector")}reloadPageSizesSelector(){const e=this.getPageSizeSelectorValues(),t=this.paginationService.getPageSize(),i=!t||!e.includes(t);i&&(e.unshift(""),ie("The paginationPageSize grid option is set to a value that is not in the list of page size options.\n                Please make sure that the paginationPageSize grid option is set to one of the values in the \n                paginationPageSizeSelector array, or set the paginationPageSizeSelector to false to hide the page size selector.")),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp));const s=this.localeService.getLocaleTextFunc(),o=s("pageSizeSelectorLabel","Page Size:"),n=e.map((e=>({value:String(e),text:String(e)}))),r=s("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new eo).addOptions(n).setValue(String(i?"":t)).setAriaLabel(r).setLabel(o).onValueChange((()=>this.handlePageSizeItemSelected())),this.hasEmptyOption=i}getPageSizeSelectorValues(){const e=[20,50,100],t=this.gos.get("paginationPageSizeSelector");return Array.isArray(t)&&this.validateValues(t)?[...t].sort(((e,t)=>e-t)):e}validateValues(e){if(!e.length)return ie("The paginationPageSizeSelector grid option is an empty array. This is most likely a mistake.\n                If you want to hide the page size selector, please set the paginationPageSizeSelector to false."),!1;for(let t=0;t<e.length;t++){const i=e[t],s=i>0;if(!("number"===typeof i))return ie("The paginationPageSizeSelector grid option contains a non-numeric value.\n                    Please make sure that all values in the paginationPageSizeSelector array are numbers."),!1;if(!s)return ie("The paginationPageSizeSelector grid option contains a negative number or zero.\n                    Please make sure that all values in the paginationPageSizeSelector array are positive."),!1}return!0}destroy(){this.toggleSelectDisplay(!1),super.destroy()}}},sa={selector:"AG-PAGINATION",component:class extends ll{constructor(){super(),this.btFirst=Ri,this.btPrevious=Ri,this.btNext=Ri,this.btLast=Ri,this.lbRecordCount=Ri,this.lbFirstRowOnPage=Ri,this.lbLastRowOnPage=Ri,this.lbCurrent=Ri,this.lbTotal=Ri,this.pageSizeComp=Ri,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1}wireBeans(e){this.rowNodeBlockLoader=e.rowNodeBlockLoader,this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.focusService=e.focusService}postConstruct(){const e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[ia]);const{btFirst:t,btPrevious:i,btNext:s,btLast:o}=this;this.activateTabIndex([t,i,s,o]),t.insertAdjacentElement("afterbegin",Pi(e?"last":"first",this.gos)),i.insertAdjacentElement("afterbegin",Pi(e?"next":"previous",this.gos)),s.insertAdjacentElement("afterbegin",Pi(e?"previous":"next",this.gos)),o.insertAdjacentElement("afterbegin",Pi(e?"first":"last",this.gos)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],(()=>this.onPageSizeRelatedOptionsChange())),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:e=>{this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(e):this.focusService.focusGridInnerElement(e)},forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){const e=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(e),e&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)}),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach((e=>{const{el:t,fn:i}=e;this.addManagedListeners(t,{click:i,keydown:e=>{e.key!==Vi.ENTER&&e.key!==Vi.SPACE||(e.preventDefault(),i())}})})),ta(this,this.getGui(),this.focusService),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationService.goToFirstPage()}setCurrentPageLabel(){const e=this.paginationService.getTotalPages()>0,t=this.paginationService.getCurrentPage(),i=e?t+1:0;this.lbCurrent.textContent=this.formatNumber(i)}formatNumber(e){const t=this.gos.getCallback("paginationNumberFormatter");if(t){return t({value:e})}const i=this.localeService.getLocaleTextFunc();return Ro(e,i("thousandSeparator",","),i("decimalSeparator","."))}getTemplate(){const e=this.localeService.getLocaleTextFunc(),t=e("page","Page"),i=e("to","to"),s=e("of","of"),o=e("firstPage","First Page"),n=e("previousPage","Previous Page"),r=e("nextPage","Next Page"),l=e("lastPage","Last Page"),a=this.getCompId();return'<div class="ag-paging-panel ag-unselectable" id="ag-'.concat(a,'">\n                <ag-page-size-selector data-ref="pageSizeComp"></ag-page-size-selector>\n                <span class="ag-paging-row-summary-panel" role="status">\n                    <span id="ag-').concat(a,'-first-row" data-ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-').concat(a,'-to">').concat(i,'</span>\n                    <span id="ag-').concat(a,'-last-row" data-ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-').concat(a,'-of">').concat(s,'</span>\n                    <span id="ag-').concat(a,'-row-count" data-ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>\n                </span>\n                <span class="ag-paging-page-summary-panel" role="presentation">\n                    <div data-ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="').concat(o,'"></div>\n                    <div data-ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="').concat(n,'"></div>\n                    <span class="ag-paging-description" role="status">\n                        <span id="ag-').concat(a,'-start-page">').concat(t,'</span>\n                        <span id="ag-').concat(a,'-start-page-number" data-ref="lbCurrent" class="ag-paging-number"></span>\n                        <span id="ag-').concat(a,'-of-page">').concat(s,'</span>\n                        <span id="ag-').concat(a,'-of-page-number" data-ref="lbTotal" class="ag-paging-number"></span>\n                    </span>\n                    <div data-ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="').concat(r,'"></div>\n                    <div data-ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="').concat(l,'"></div>\n                </span>\n            </div>')}onBtNext(){this.nextButtonDisabled||this.paginationService.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationService.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationService.goToLastPage()}enableOrDisableButtons(){const e=this.paginationService.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),i=this.paginationService.getTotalPages();this.previousAndFirstButtonsDisabled=0===e,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const s=this.isZeroPagesToDisplay(),o=e===i-1;this.nextButtonDisabled=o||s,this.lastButtonDisabled=!t||s||e===i-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){St(e,t),e.classList.toggle("ag-disabled",t)}updateRowLabels(){var e;const t=this.paginationService.getCurrentPage(),i=this.paginationService.getPageSize(),s=this.rowModel.isLastRowIndexKnown(),o=this.rowModel.isLastRowIndexKnown()?this.paginationService.getMasterRowCount():null;let n,r;if(this.isZeroPagesToDisplay()?n=r=0:(n=i*t+1,r=n+i-1,s&&r>o&&(r=o)),this.lbFirstRowOnPage.textContent=this.formatNumber(n),null!==(e=this.rowNodeBlockLoader)&&void 0!==e&&e.isLoading()){const e=this.localeService.getLocaleTextFunc();this.lbLastRowOnPage.innerHTML=e("pageLastRowUnknown","?")}else this.lbLastRowOnPage.textContent=this.formatNumber(r)}isZeroPagesToDisplay(){const e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages();return e&&0===t}setTotalLabels(){const e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages(),i=e?this.paginationService.getMasterRowCount():null;if(1===i){const e=this.rowModel.getRow(0);if(e&&e.group&&!(e.groupData||e.aggData))return void this.setTotalLabelsToZero()}if(e)this.lbTotal.textContent=this.formatNumber(t),this.lbRecordCount.textContent=this.formatNumber(i);else{const e=this.localeService.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=e,this.lbRecordCount.innerHTML=e}}setTotalLabelsToZero(){this.lbFirstRowOnPage.textContent=this.formatNumber(0),this.lbCurrent.textContent=this.formatNumber(0),this.lbLastRowOnPage.textContent=this.formatNumber(0),this.lbTotal.textContent=this.formatNumber(0),this.lbRecordCount.textContent=this.formatNumber(0)}}},oa={version:Wo,moduleName:"@ag-grid-community/pagination-core",beans:[class extends F{constructor(){super(...arguments),this.beanName="paginationService",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.active=this.gos.get("pagination"),this.pageSizeFromGridOptions=this.gos.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return sa}isPaginateChildRows(){return!(!this.gos.get("groupRemoveSingleChildren")&&!this.gos.get("groupRemoveLowestSingleChildren"))||this.gos.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){this.active&&this.currentPage!==e&&"number"===typeof this.currentPage&&(this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0}))}isRowPresent(e){return e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex}getPageForIndex(e){return Math.floor(e/this.pageSize)}goToPageWithIndex(e){if(!this.active)return;const t=this.getPageForIndex(e);this.goToPage(t)}isRowInPage(e){if(!this.active)return!0;return this.getPageForIndex(e.rowIndex)===this.currentPage}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return P(this.pageSizeAutoCalculated)?this.pageSizeAutoCalculated:P(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:P(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:P(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.pageBoundsService.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(void 0===this.pageSizeAutoCalculated)return;const e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){const i=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,0!==this.currentPage&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,0!==this.currentPage&&this.goToFirstPage()}i!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0)return void this.setZeroRows();const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid();const t=this.pageSize*this.currentPage;let i=this.pageSize*(this.currentPage+1)-1;if(i>e&&(i=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(t),i===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{const e=this.rowModel.getTopLevelRowDisplayedIndex(i+1);this.bottomDisplayedRowIndex=e-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),0===this.masterRowCount)return void this.setZeroRows();const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){const{keepRenderedRows:t=!1,newPage:i=!1,newPageSize:s=!1}=e,o={type:"paginationChanged",animate:!1,newData:!1,newPage:i,newPageSize:s,keepRenderedRows:t};this.eventService.dispatchEvent(o)}},class extends F{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}postConstruct(){this.ctrlsService.whenReady((e=>{this.centerRowsCtrl=e.center;const t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()}))}notActive(){return!this.gos.get("paginationAutoPageSize")||null==this.centerRowsCtrl}onPaginationAutoSizeChanged(){this.notActive()?this.paginationService.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const e=this.centerRowsCtrl.getViewportSizeFeature().getBodyHeight();if(e>0){const t=()=>{const t=Math.max(this.gos.getRowHeightAsNumber(),1),i=Math.floor(e/t);this.paginationService.setPageSize(i,"autoCalculated")};this.isBodyRendered?de((()=>t()),50)():(t(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}}]},na={version:Wo,moduleName:"@ag-grid-community/pagination",dependantModules:[oa,{version:Wo,moduleName:"@ag-grid-community/pagination-api",dependantModules:[oa],apiFunctions:{paginationIsLastPageFound:function(e){return e.rowModel.isLastRowIndexKnown()},paginationGetPageSize:function(e){var t,i;return null!==(t=null===(i=e.paginationService)||void 0===i?void 0:i.getPageSize())&&void 0!==t?t:100},paginationGetCurrentPage:function(e){var t,i;return null!==(t=null===(i=e.paginationService)||void 0===i?void 0:i.getCurrentPage())&&void 0!==t?t:0},paginationGetTotalPages:function(e){var t,i;return null!==(t=null===(i=e.paginationService)||void 0===i?void 0:i.getTotalPages())&&void 0!==t?t:1},paginationGetRowCount:function(e){return e.paginationService?e.paginationService.getMasterRowCount():e.rowModel.getRowCount()},paginationGoToNextPage:function(e){var t;null===(t=e.paginationService)||void 0===t||t.goToNextPage()},paginationGoToPreviousPage:function(e){var t;null===(t=e.paginationService)||void 0===t||t.goToPreviousPage()},paginationGoToFirstPage:function(e){var t;null===(t=e.paginationService)||void 0===t||t.goToFirstPage()},paginationGoToLastPage:function(e){var t;null===(t=e.paginationService)||void 0===t||t.goToLastPage()},paginationGoToPage:function(e,t){var i;null===(i=e.paginationService)||void 0===i||i.goToPage(t)}}}]},ra="@ag-grid-community/core",la="@ag-grid-community/client-side-row-model",aa="@ag-grid-community/csv-export",da="@ag-grid-community/infinite-row-model",ca="@ag-grid-enterprise/advanced-filter",ua="@ag-grid-enterprise/charts",ha="@ag-grid-enterprise/clipboard",pa="@ag-grid-enterprise/excel-export",ga="@ag-grid-enterprise/master-detail",ma="@ag-grid-enterprise/menu",va="@ag-grid-enterprise/range-selection",fa="@ag-grid-enterprise/row-grouping",Ca="@ag-grid-enterprise/server-side-row-model",wa="@ag-grid-enterprise/side-bar",Sa={dispatchEvent:ra,getState:ra,getGridId:ra,destroy:ra,isDestroyed:ra,getGridOption:ra,setGridOption:ra,updateGridOptions:ra,setNodesSelected:ra,selectAll:ra,deselectAll:ra,selectAllFiltered:ra,deselectAllFiltered:ra,selectAllOnCurrentPage:ra,deselectAllOnCurrentPage:ra,getSelectedNodes:ra,getSelectedRows:ra,redrawRows:ra,setRowNodeExpanded:ra,getRowNode:ra,addRenderedRowListener:ra,getRenderedNodes:ra,forEachNode:ra,getFirstDisplayedRow:ra,getFirstDisplayedRowIndex:ra,getLastDisplayedRow:ra,getLastDisplayedRowIndex:ra,getDisplayedRowAtIndex:ra,getDisplayedRowCount:ra,getModel:ra,getVerticalPixelRange:ra,getHorizontalPixelRange:ra,ensureColumnVisible:ra,ensureIndexVisible:ra,ensureNodeVisible:ra,getFocusedCell:ra,clearFocusedCell:ra,setFocusedCell:ra,tabToNextCell:ra,tabToPreviousCell:ra,setFocusedHeader:ra,addEventListener:ra,addGlobalListener:ra,removeEventListener:ra,removeGlobalListener:ra,expireValueCache:ra,getValue:ra,getCellValue:ra,showColumnMenuAfterButtonClick:ra,showColumnMenuAfterMouseClick:ra,showColumnMenu:ra,hidePopupMenu:ra,onSortChanged:ra,getPinnedTopRowCount:ra,getPinnedBottomRowCount:ra,getPinnedTopRow:ra,getPinnedBottomRow:ra,showLoadingOverlay:ra,showNoRowsOverlay:ra,hideOverlay:ra,setGridAriaProperty:ra,refreshCells:ra,flashCells:ra,refreshHeader:ra,isAnimationFrameQueueEmpty:ra,flushAllAnimationFrames:ra,getSizesForCurrentTheme:ra,getCellRendererInstances:ra,addRowDropZone:ra,removeRowDropZone:ra,getRowDropZoneParams:ra,getColumnDef:ra,getColumnDefs:ra,sizeColumnsToFit:ra,setColumnGroupOpened:ra,getColumnGroup:ra,getProvidedColumnGroup:ra,getDisplayNameForColumn:ra,getDisplayNameForColumnGroup:ra,getColumn:ra,getColumns:ra,applyColumnState:ra,getColumnState:ra,resetColumnState:ra,getColumnGroupState:ra,setColumnGroupState:ra,resetColumnGroupState:ra,isPinning:ra,isPinningLeft:ra,isPinningRight:ra,getDisplayedColAfter:ra,getDisplayedColBefore:ra,setColumnVisible:ra,setColumnsVisible:ra,setColumnPinned:ra,setColumnsPinned:ra,getAllGridColumns:ra,getDisplayedLeftColumns:ra,getDisplayedCenterColumns:ra,getDisplayedRightColumns:ra,getAllDisplayedColumns:ra,getAllDisplayedVirtualColumns:ra,moveColumn:ra,moveColumnByIndex:ra,moveColumns:ra,setColumnWidth:ra,setColumnWidths:ra,getLeftDisplayedColumnGroups:ra,getCenterDisplayedColumnGroups:ra,getRightDisplayedColumnGroups:ra,getAllDisplayedColumnGroups:ra,autoSizeColumn:ra,autoSizeColumns:ra,autoSizeAllColumns:ra,undoCellEditing:ra,redoCellEditing:ra,getCellEditorInstances:ra,getEditingCells:ra,stopEditing:ra,startEditingCell:ra,getCurrentUndoSize:ra,getCurrentRedoSize:ra,isAnyFilterPresent:ra,onFilterChanged:ra,isColumnFilterPresent:ra,getFilterInstance:ra,getColumnFilterInstance:ra,destroyFilter:ra,setFilterModel:ra,getFilterModel:ra,getColumnFilterModel:ra,setColumnFilterModel:ra,showColumnFilter:ra,isQuickFilterPresent:ra,getQuickFilter:ra,resetQuickFilter:ra,paginationIsLastPageFound:ra,paginationGetPageSize:ra,paginationGetCurrentPage:ra,paginationGetTotalPages:ra,paginationGetRowCount:ra,paginationGoToNextPage:ra,paginationGoToPreviousPage:ra,paginationGoToFirstPage:ra,paginationGoToLastPage:ra,paginationGoToPage:ra,expandAll:ra,collapseAll:ra,onRowHeightChanged:ra,setRowCount:ra,getCacheBlockState:ra,onGroupExpandedOrCollapsed:la,refreshClientSideRowModel:la,forEachLeafNode:la,forEachNodeAfterFilter:la,forEachNodeAfterFilterAndSort:la,resetRowHeights:la,applyTransaction:la,applyTransactionAsync:la,flushAsyncTransactions:la,getBestCostNodeSelection:la,getDataAsCsv:aa,exportDataAsCsv:aa,refreshInfiniteCache:da,purgeInfiniteCache:da,getInfiniteRowCount:da,isLastRowIndexKnown:da,getAdvancedFilterModel:ca,setAdvancedFilterModel:ca,showAdvancedFilterBuilder:ca,hideAdvancedFilterBuilder:ca,getChartModels:ua,getChartRef:ua,getChartImageDataURL:ua,downloadChart:ua,openChartToolPanel:ua,closeChartToolPanel:ua,createRangeChart:ua,createPivotChart:ua,createCrossFilterChart:ua,updateChart:ua,restoreChart:ua,copyToClipboard:ha,cutToClipboard:ha,copySelectedRowsToClipboard:ha,copySelectedRangeToClipboard:ha,copySelectedRangeDown:ha,pasteFromClipboard:ha,getDataAsExcel:pa,exportDataAsExcel:pa,getSheetDataForExcel:pa,getMultipleSheetsAsExcel:pa,exportMultipleSheetsAsExcel:pa,addDetailGridInfo:ga,removeDetailGridInfo:ga,getDetailGridInfo:ga,forEachDetailGridInfo:ga,showContextMenu:ma,showColumnChooser:ma,hideColumnChooser:ma,getCellRanges:va,addCellRange:va,clearRangeSelection:va,addAggFunc:fa,addAggFuncs:fa,clearAggFuncs:fa,setColumnAggFunc:fa,isPivotMode:fa,getPivotResultColumn:fa,setValueColumns:fa,getValueColumns:fa,removeValueColumn:fa,removeValueColumns:fa,addValueColumn:fa,addValueColumns:fa,setRowGroupColumns:fa,removeRowGroupColumn:fa,removeRowGroupColumns:fa,addRowGroupColumn:fa,addRowGroupColumns:fa,getRowGroupColumns:fa,moveRowGroupColumn:fa,setPivotColumns:fa,removePivotColumn:fa,removePivotColumns:fa,addPivotColumn:fa,addPivotColumns:fa,getPivotColumns:fa,setPivotResultColumns:fa,getPivotResultColumns:fa,getServerSideSelectionState:Ca,setServerSideSelectionState:Ca,applyServerSideTransaction:Ca,applyServerSideTransactionAsync:Ca,applyServerSideRowData:Ca,retryServerSideLoads:Ca,flushServerSideAsyncTransactions:Ca,refreshServerSide:Ca,getServerSideGroupLevelState:Ca,isSideBarVisible:wa,setSideBarVisible:wa,setSideBarPosition:wa,openToolPanel:wa,closeToolPanel:wa,getOpenedToolPanel:wa,refreshToolPanel:wa,isToolPanelShowing:wa,getToolPanelInstance:wa,getSideBar:wa,getStatusPanel:"@ag-grid-enterprise/status-bar"},ya="clientSide",ba="serverSide",Ra="infinite",Fa={onGroupExpandedOrCollapsed:[ya],refreshClientSideRowModel:[ya],forEachLeafNode:[ya],forEachNodeAfterFilter:[ya],forEachNodeAfterFilterAndSort:[ya],resetRowHeights:[ya],applyTransaction:[ya],applyTransactionAsync:[ya],flushAsyncTransactions:[ya],getBestCostNodeSelection:[ya],getServerSideSelectionState:[ba],setServerSideSelectionState:[ba],applyServerSideTransaction:[ba],applyServerSideTransactionAsync:[ba],applyServerSideRowData:[ba],retryServerSideLoads:[ba],flushServerSideAsyncTransactions:[ba],refreshServerSide:[ba],getServerSideGroupLevelState:[ba],refreshInfiniteCache:[Ra],purgeInfiniteCache:[Ra],getInfiniteRowCount:[Ra],isLastRowIndexKnown:[Ra],expandAll:[ya,ba],collapseAll:[ya,ba],onRowHeightChanged:[ya,ba],setRowCount:[Ra,ba],getCacheBlockState:[Ra,ba]},Ea={getValue:{version:"v31.3",new:"getCellValue"},getFirstDisplayedRow:{version:"v31.1",new:"getFirstDisplayedRowIndex"},getLastDisplayedRow:{version:"v31.1",new:"getLastDisplayedRowIndex"},getModel:{version:"v31.1",message:"Please use the appropriate grid API methods instead."},setColumnVisible:{version:"v31.1",old:"setColumnVisible(key,visible)",new:"setColumnsVisible([key],visible)"},setColumnPinned:{version:"v31.1",old:"setColumnPinned(key,pinned)",new:"setColumnsPinned([key],pinned)"},moveColumn:{version:"v31.1",old:"moveColumn(key, toIndex)",new:"moveColumns([key], toIndex)"},setColumnWidth:{version:"v31.1",old:"setColumnWidth(col, width)",new:"setColumnWidths([{key: col, newWidth: width}])"},autoSizeColumn:{version:"v31.1",old:"autoSizeColumn(key, skipHeader)",new:"autoSizeColumns([key], skipHeader)"},addAggFunc:{version:"v31.1",old:"addAggFunc(key, func)",new:"addAggFuncs({ key: func })"},removeValueColumn:{version:"v31.1",old:"removeValueColumn(colKey)",new:"removeValueColumns([colKey])"},addValueColumn:{version:"v31.1",old:"addValueColumn(colKey)",new:"addValueColumns([colKey])"},removeRowGroupColumn:{version:"v31.1",old:"removeRowGroupColumn(colKey)",new:"removeRowGroupColumns([colKey])"},addRowGroupColumn:{version:"v31.1",old:"addRowGroupColumn(colKey)",new:"addRowGroupColumns([colKey])"},removePivotColumn:{version:"v31.1",old:"removePivotColumn(colKey)",new:"removePivotColumns([colKey])"},addPivotColumn:{version:"v31.1",old:"addPivotColumn(colKey)",new:"addPivotColumns([colKey])"},showColumnMenuAfterButtonClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere."},showColumnMenuAfterMouseClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere."},getFilterInstance:{version:"v31.1",message:"'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."},showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'}};var xa=(e,t)=>{var i;return"clientSide"===(null!==(i=t.rowModelType)&&void 0!==i?i:"clientSide")?{module:"@ag-grid-enterprise/row-grouping"}:null},Pa={enableRowGroup:xa,rowGroup:xa,rowGroupIndex:xa,enablePivot:xa,enableValue:xa,pivot:xa,pivotIndex:xa,aggFunc:xa,cellEditor:e=>"agRichSelect"===e.cellEditor||"agRichSelectCellEditor"===e.cellEditor?{module:"@ag-grid-enterprise/rich-select"}:null,menuTabs:e=>{var t;const i=["columnsMenuTab","generalMenuTab"];return null!==(t=e.menuTabs)&&void 0!==t&&t.some((e=>i.includes(e)))?{module:"@ag-grid-enterprise/menu"}:null},columnsMenuParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},columnChooserParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],dependencies:(e,t)=>{let{rowSelection:i}=t;return"multiple"===i?null:"headerCheckboxSelection is only supported with rowSelection=multiple"}},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],dependencies:(e,t)=>{let{rowSelection:i}=t;return"multiple"===i?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"}},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],dependencies:(e,t)=>{let{rowSelection:i}=t;return"multiple"===i?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"}},children:()=>Ma},Ma={objectName:"colDef",allProperties:Object.keys({headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0}),docsUrl:"column-properties/",deprecations:{columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."},suppressCellFlash:{version:"31.2",message:"Use `enableCellChangeFlash={false}` in the ColDef"}},validations:Pa},Da={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"\t",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0},Ia={version:Wo,moduleName:"@ag-grid-community/core-community-features",dependantModules:[{version:Wo,moduleName:"@ag-grid-community/core"},{version:Wo,moduleName:"@ag-grid-community/core-validations",beans:[class extends F{constructor(){super(...arguments),this.beanName="validationService"}wireBeans(e){this.beans=e,this.gridOptions=e.gridOptions}postConstruct(){this.processGridOptions(this.gridOptions)}processGridOptions(e){this.processOptions(e,{objectName:"gridOptions",allProperties:[...Ye.ALL_PROPERTIES,...Qe.EVENT_CALLBACKS],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:{advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"},enableCellChangeFlash:{version:"31.2",message:"Use `enableCellChangeFlash` in the `ColDef` or `defaultColDef` for all columns."},groupIncludeFooter:{version:"31.3",message:"Use `groupTotalRow` instead."},groupIncludeTotalFooter:{version:"31.3",message:"Use `grandTotalRow` instead."},suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."}},validations:{sideBar:{module:"@ag-grid-enterprise/side-bar"},statusBar:{module:"@ag-grid-enterprise/status-bar"},enableCharts:{module:"@ag-grid-enterprise/charts"},getMainMenuItems:{module:"@ag-grid-enterprise/menu"},getContextMenuItems:{module:"@ag-grid-enterprise/menu"},allowContextMenuWithControlKey:{module:"@ag-grid-enterprise/menu"},enableAdvancedFilter:{module:"@ag-grid-enterprise/advanced-filter"},treeData:{supportedRowModels:["clientSide","serverSide"],module:"@ag-grid-enterprise/row-grouping",dependencies:e=>{var t;const i=null!==(t=e.rowModelType)&&void 0!==t?t:"clientSide";switch(i){case"clientSide":{const t="treeData requires 'getDataPath' in the ".concat(i," row model.");return e.getDataPath?null:t}case"serverSide":{const t="treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ".concat(i," row model.");return e.isServerSideGroup&&e.getServerSideGroupKey?null:t}}return null}},masterDetail:{module:"@ag-grid-enterprise/master-detail"},enableRangeSelection:{module:"@ag-grid-enterprise/range-selection"},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],dependencies:e=>{var t;switch(null!==(t=e.rowModelType)&&void 0!==t?t:"clientSide"){case"clientSide":return null;case"serverSide":{const t="groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll";return e.suppressServerSideInfiniteScroll?t:null}}return null}},groupHideOpenParents:{supportedRowModels:["clientSide"],dependencies:{groupTotalRow:[void 0,"bottom"]}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},viewportDatasource:{supportedRowModels:["viewport"],module:"@ag-grid-enterprise/viewport-row-model"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"@ag-grid-enterprise/server-side-row-model"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:"@ag-grid-community/infinite-row-model"},rowData:{supportedRowModels:["clientSide"],module:"@ag-grid-community/client-side-row-model"},columnDefs:()=>Ma,defaultColDef:()=>Ma,defaultColGroupDef:()=>Ma,autoGroupColumnDef:()=>Ma}})}processColumnDefs(e){this.processOptions(e,Ma)}warnMissingApiFunction(e){!function(e,t){const i=Sa[e];i?Ni.__assertRegistered(i,"api.".concat(e),t)&&ie("API function '".concat(e,"' not registered to module '").concat(i,"'")):se("Unknown API function: '".concat(e,"' on GridApi."))}(e,this.gridId)}validateApiFunction(e,t){return function(e,t,i){const s=Ea[e];if(s){const{version:i,new:o,old:n,message:r}=s,l=null!==n&&void 0!==n?n:e;return function(){const e=o?"Please use ".concat(o," instead. "):"";ie("Since ".concat(i," api.").concat(l," is deprecated. ").concat(e).concat(null!==r&&void 0!==r?r:""));for(var s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];return t.apply(t,n)}}const o=Fa[e];return o?function(){const s=i.rowModel.getType();if(o.includes(s)){for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t.apply(t,r)}se("api.".concat(e," can only be called when gridOptions.rowModelType is ").concat(o.join(" or ")))}:t}(e,t,this.beans)}processOptions(e,t){const{validations:i,deprecations:s,allProperties:o,propertyExceptions:n,objectName:r,docsUrl:l}=t;o&&!0!==this.gridOptions.suppressPropertyNamesCheck&&this.checkProperties(e,[...null!==n&&void 0!==n?n:[],...Object.keys(s)],o,r,l);const a=new Set;Object.keys(e).forEach((t=>{const o=s[t];if(o)if("renamed"in o){const{renamed:i,version:s}=o;a.add("As of v".concat(s,", ").concat(String(t)," is deprecated. Please use ").concat(String(i)," instead.")),e[i]=e[t]}else{const{message:e,version:i}=o;a.add("As of v".concat(i,", ").concat(String(t)," is deprecated. ").concat(null!==e&&void 0!==e?e:""))}const n=e[t];if(null==n||!1===n)return;const r=i[t];let l;if(!r)return;if("function"===typeof r){const i=r(e,this.gridOptions);if(!i)return;if("objectName"in i){const s=e[t];return Array.isArray(s)?void s.forEach((e=>{this.processOptions(e,i)})):void this.processOptions(e[t],i)}l=i}else l=r;const{module:d,dependencies:c,supportedRowModels:u}=l;if(u){var h;const e=null!==(h=this.gridOptions.rowModelType)&&void 0!==h?h:"clientSide";if(!u.includes(e))return void a.add("".concat(String(t)," is not supported with the '").concat(e,"' row model."))}if(d){const e=Array.isArray(d)?d:[d];let i=!0;if(e.forEach((e=>{Ni.__assertRegistered(e,String(t),this.gridId)||(i=!1,a.add("".concat(String(t)," is only available when ").concat(e," is loaded.")))})),!i)return}if(c){const i=this.checkForWarning(t,c,e);if(i)return void a.add(i)}})),a.size>0&&a.forEach((e=>{ie(e)}))}checkForWarning(e,t,i){if("function"===typeof t)return t(i,this.gridOptions);const s=Object.entries(t).find((e=>{let[t,s]=e;const o=i[t];return!s.includes(o)}));if(!s)return null;const[o,n]=s;return n.length>1?"'".concat(String(e),"' requires '").concat(o,"' to be one of [").concat(n.join(", "),"]."):"'".concat(String(e),"' requires '").concat(o,"' to be ").concat(n[0],".")}checkProperties(e,t,i,s,o){const n=function(e,t,i){const s={},o=e.filter((e=>!t.some((t=>t===e))));return o.length>0&&o.forEach((e=>s[e]=Ji(e,i).values)),s}(Object.getOwnPropertyNames(e),["__ob__","__v_skip","__metadata__",...t,...i],i);if(B(n,((e,t)=>{let o="invalid ".concat(s," property '").concat(e,"' did you mean any of these: ").concat(t.slice(0,8).join(", "),".");i.includes("context")&&(o+="\nIf you are trying to annotate ".concat(s," with application data, use the '").concat(s,".context' property instead.")),ie(o)})),Object.keys(n).length>0&&o){const e=this.getFrameworkOverrides().getDocLink(o);ie("to see all the valid ".concat(s," properties please check: ").concat(e))}}}]},Kr,tn,ea,Zl,Ul,na,$l]},Ta=class extends F{constructor(){super(...arguments),this.beanName="gridDestroyService",this.destroyCalled=!1}wireBeans(e){this.beans=e}destroy(){var e,t,i;if(this.destroyCalled)return;const s={type:"gridPreDestroyed",state:null!==(e=null===(t=this.beans.stateService)||void 0===t?void 0:t.getState())&&void 0!==e?e:{}};this.eventService.dispatchEvent(s),this.destroyCalled=!0,null===(i=this.beans.ctrlsService.get("gridCtrl"))||void 0===i||i.destroyGridUi(),this.beans.context.destroy(),super.destroy()}isDestroyCalled(){return this.destroyCalled}},Aa=new Set(["gridPreDestroyed","fillStart","pasteStart"]),ka=e=>"checkboxSelected"===e||"rowClicked"===e||"spaceKey"===e||"uiSelectAll"===e||"uiSelectAllCurrentPage"===e||"uiSelectAllFiltered"===e,La=new Map([...Ye.BOOLEAN_PROPERTIES.map((e=>[e,k])),...Ye.NUMBER_PROPERTIES.map((e=>[e,wo])),["groupAggFiltering",e=>"function"===typeof e?e:k(e)],["pageSize",So(1)],["autoSizePadding",So(0)],["keepDetailRowsCount",So(1)],["rowBuffer",So(0)],["infiniteInitialRowCount",So(1)],["cacheOverflowSize",So(1)],["cacheBlockSize",So(1)],["serverSideInitialRowCount",So(1)],["viewportRowModelPageSize",So(1)],["viewportRowModelBufferSize",So(0)]]);function Ga(e,t){const i=La.get(e);return i?i(t):t}var Na=class e extends F{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new s,this.globalEventHandlerFactory=e=>(t,i)=>{if(!this.isAlive())return;const s=Aa.has(t);if(s&&!e||!s&&e)return;const o=Qe.getCallbackForEvent(t),n=this.gridOptions[o];"function"===typeof n&&this.frameworkOverrides.wrapOutgoing((()=>{n(i)}))}}wireBeans(e){this.gridOptions=e.gridOptions,this.eGridDiv=e.eGridDiv,this.validationService=e.validationService,this.environment=e.environment,this.api=e.gridApi}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){const e=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),e),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.getScrollbarWidth(),this.addManagedEventListeners({gridOptionsChanged:e=>{let{options:t}=e;this.updateGridOptions({options:t,force:!0,source:"gridOptionsUpdated"})}})}get(e){var t;return null!==(t=this.gridOptions[e])&&void 0!==t?t:Da[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return P(this.gridOptions[e])}mergeGridCommonParams(e){if(e){return t=>{const i=t;return i.api=this.api,i.context=this.gridOptionsContext,e(i)}}return e}updateGridOptions(t){var i;let{options:s,force:o,source:n="api"}=t;const r={id:e.changeSetId++,properties:[]},l=[];Object.entries(s).forEach((e=>{let[t,i]=e;"api"===n&&Ze[t]&&ie("".concat(t," is an initial property and cannot be updated."));const s=Ga(t,i),a=o||"object"===typeof s&&"api"===n,d=this.gridOptions[t];if(a||d!==s){this.gridOptions[t]=s;const e={type:t,currentValue:s,previousValue:d,changeSet:r,source:n};l.push(e)}})),null===(i=this.validationService)||void 0===i||i.processGridOptions(this.gridOptions),r.properties=l.map((e=>e.type)),l.forEach((e=>{this.gridOptions.debug&&te("Updated property ".concat(e.type," from"),e.previousValue," to ",e.currentValue),this.propertyEventService.dispatchEvent(e)}))}addPropertyEventListener(e,t){this.propertyEventService.addEventListener(e,t)}removePropertyEventListener(e,t){this.propertyEventService.removeEventListener(e,t)}getScrollbarWidth(){if(null==this.scrollbarWidth){const e="number"===typeof this.gridOptions.scrollbarWidth&&this.gridOptions.scrollbarWidth>=0?this.gridOptions.scrollbarWidth:(null==rt&&Ut(),rt);null!=e&&(this.scrollbarWidth=e,this.eventService.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}isRowModelType(e){return this.gridOptions.rowModelType===e||"clientSide"===e&&M(this.gridOptions.rowModelType)}isDomLayout(e){var t;return(null!==(t=this.gridOptions.domLayout)&&void 0!==t?t:"normal")===e}isRowSelection(){return"single"===this.gridOptions.rowSelection||"multiple"===this.gridOptions.rowSelection}useAsyncEvents(){return!this.get("suppressAsyncEvents")}isGetRowHeightFunction(){return"function"===typeof this.gridOptions.getRowHeight}getRowHeightForNode(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;if(null==i&&(i=this.environment.getDefaultRowHeight()),this.isGetRowHeightFunction()){if(t)return{height:i,estimated:!0};const s={node:e,data:e.data},o=this.getCallback("getRowHeight")(s);if(this.isNumeric(o))return 0===o&&ie("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,o),estimated:!1}}if(e.detail&&this.get("masterDetail"))return this.getMasterDetailRowHeight();return{height:this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:i,estimated:!1}}getMasterDetailRowHeight(){return this.get("detailRowAutoHeight")?{height:1,estimated:!1}:this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:300,estimated:!1}}getRowHeightAsNumber(){if(!this.gridOptions.rowHeight||M(this.gridOptions.rowHeight))return this.environment.getDefaultRowHeight();const e=this.environment.refreshRowHeightVariable();return-1!==e?e:(ie("row height must be a number if not using standard row model"),this.environment.getDefaultRowHeight())}isNumeric(e){return!isNaN(e)&&"number"===typeof e&&isFinite(e)}getDomDataKey(){return this.domDataKey}getDomData(e,t){const i=e[this.getDomDataKey()];return i?i[t]:void 0}setDomData(e,t,i){const s=this.getDomDataKey();let o=e[s];M(o)&&(o={},e[s]=o),o[t]=i}getDocument(){let e=null;return this.gridOptions.getDocument&&P(this.gridOptions.getDocument)?e=this.gridOptions.getDocument():this.eGridDiv&&(e=this.eGridDiv.ownerDocument),e&&P(e)?e:document}getWindow(){return this.getDocument().defaultView||window}getRootNode(){return this.eGridDiv.getRootNode()}getActiveDomElement(){return this.getRootNode().activeElement}getAsyncTransactionWaitMillis(){return P(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:50}isAnimateRows(){return!this.get("ensureDomOrder")&&this.get("animateRows")}isGroupRowsSticky(){return!(this.get("paginateChildRows")||this.get("groupHideOpenParents")||this.isDomLayout("print"))}isColumnsSortingCoupledToGroup(){const e=this.gridOptions.autoGroupColumnDef;return!(null!==e&&void 0!==e&&e.comparator)&&!this.get("treeData")}getGroupAggFiltering(){const e=this.gridOptions.groupAggFiltering;return"function"===typeof e?this.getCallback("groupAggFiltering"):!0===e?()=>!0:void 0}getGrandTotalRow(){const e=this.gridOptions.grandTotalRow;if(e)return e;return this.gridOptions.groupIncludeTotalFooter?"bottom":void 0}getGroupTotalRowCallback(){const e=this.get("groupTotalRow");if("function"===typeof e)return this.getCallback("groupTotalRow");if(e)return()=>e;const t=this.get("groupIncludeFooter");if("function"===typeof t){const e=this.getCallback("groupIncludeFooter");return t=>e(t)?"bottom":void 0}return()=>t?"bottom":void 0}isGroupMultiAutoColumn(){return this.gridOptions.groupDisplayType?"multipleColumns"===this.gridOptions.groupDisplayType:this.get("groupHideOpenParents")}isGroupUseEntireRow(e){return!e&&"groupRows"===this.gridOptions.groupDisplayType}getGridCommonParams(){return{api:this.api,context:this.gridOptionsContext}}addGridCommonParams(e){const t=e;return t.api=this.api,t.context=this.gridOptionsContext,t}getRowIdCallback(){const e=this.getCallback("getRowId");return void 0===e?e:t=>{let i=e(t);return"string"!==typeof i&&(ie("The getRowId callback must return a string. The ID ",i," is being cast to a string."),i=String(i)),i}}};Na.changeSetId=0;var Oa=Na,Ba=class extends F{constructor(){super(...arguments),this.beanName="headerPositionUtils"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}findHeader(e,t){let i,s;if(Be(e.column)?i=this.visibleColsService.getGroupAtDirection(e.column,t):(s="getCol".concat(t),i=this.visibleColsService[s](e.column)),!i)return;const{headerRowIndex:o}=e;if("filter"!==this.getHeaderRowType(o)){const e=[i];for(;i.getParent();)i=i.getParent(),e.push(i);i=e[e.length-1-o]}const{column:n,headerRowIndex:r}=this.getHeaderIndexToFocus(i,o);return{column:n,headerRowIndex:r}}getHeaderIndexToFocus(e,t){let i;if(Be(e)&&this.isAnyChildSpanningHeaderHeight(e)&&e.isPadding()){const s=e;i=s.getLeafColumns()[0];let o=i;for(;o!==s;)t++,o=o.getParent()}return{column:i||e,headerRowIndex:t}}isAnyChildSpanningHeaderHeight(e){return!!e&&e.getLeafColumns().some((e=>e.isSpanHeaderHeight()))}getColumnVisibleParent(e,t){const i=this.getHeaderRowType(t),s="column"===i;let o="filter"===i?e:e.getParent(),n=t-1,r=n;if(s&&this.isAnyChildSpanningHeaderHeight(e.getParent())){for(;o&&o.isPadding();)o=o.getParent(),n--;r=n,n<0&&(o=e,n=t,r=void 0)}return{column:o,headerRowIndex:n,headerRowIndexWithoutSpan:r}}getColumnVisibleChild(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"After";let s=e,o=t+1;const r=o;if("group"===this.getHeaderRowType(t)){const t=e.getDisplayedLeafColumns(),r="After"===i?t[0]:n(t),l=[];let a=r;for(;a.getParent()!==e;)a=a.getParent(),l.push(a);if(s=r,r.isSpanHeaderHeight())for(let e=l.length-1;e>=0;e--){const t=l[e];if(!t.isPadding()){s=t;break}o++}else s=n(l),s||(s=r)}return{column:s,headerRowIndex:o,headerRowIndexWithoutSpan:r}}getHeaderRowType(e){const t=this.ctrlsService.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}findColAtEdgeForHeaderRow(e,t){const i=this.visibleColsService.getAllCols(),s=i["start"===t?0:i.length-1];if(!s)return;const o=this.ctrlsService.getHeaderRowContainerCtrl(s.getPinned()).getRowType(e);if("group"==o){return{headerRowIndex:e,column:this.visibleColsService.getColGroupAtLevel(s,e)}}return{headerRowIndex:null==o?-1:e,column:s}}},Va=class extends F{constructor(){super(...arguments),this.beanName="localeService"}getLocaleTextFunc(){const e=this.gos.getCallback("getLocaleText");if(e)return(t,i,s)=>e({key:t,defaultValue:i,variableValues:s});const t=this.gos.get("localeText");return(e,i,s)=>{var o;let n=t&&t[e];if(n&&s&&s.length){let e=0;for(;!(e>=s.length);){if(-1===n.indexOf("${variable}"))break;n=n.replace("${variable}",s[e++])}}return null!==(o=n)&&void 0!==o?o:i}}},Ha=class extends F{constructor(){super(...arguments),this.beanName="apiEventService",this.syncEventListeners=new Map,this.asyncEventListeners=new Map,this.syncGlobalEventListeners=new Set,this.globalEventListenerPairs=new Map}postConstruct(){this.frameworkEventWrappingService=new E(this.getFrameworkOverrides())}addEventListener(e,t){const i=this.frameworkEventWrappingService.wrap(t),s=this.gos.useAsyncEvents()&&!Aa.has(e),o=s?this.asyncEventListeners:this.syncEventListeners;o.has(e)||o.set(e,new Set),o.get(e).add(i),this.eventService.addEventListener(e,i,s)}removeEventListener(e,t){const i=this.frameworkEventWrappingService.unwrap(t),s=this.asyncEventListeners.get(e),o=!(null===s||void 0===s||!s.delete(i));var n;o||(null===(n=this.syncEventListeners.get(e))||void 0===n||n.delete(i));this.eventService.removeEventListener(e,i,o)}addGlobalListener(e){const t=this.frameworkEventWrappingService.wrapGlobal(e);if(this.gos.useAsyncEvents()){const i=(e,i)=>{Aa.has(e)&&t(e,i)},s=(e,i)=>{Aa.has(e)||t(e,i)};this.globalEventListenerPairs.set(e,{syncListener:i,asyncListener:s}),this.eventService.addGlobalListener(i,!1),this.eventService.addGlobalListener(s,!0)}else this.syncGlobalEventListeners.add(t),this.eventService.addGlobalListener(t,!1)}removeGlobalListener(e){const t=this.frameworkEventWrappingService.unwrapGlobal(e);if(this.globalEventListenerPairs.has(t)){const{syncListener:i,asyncListener:s}=this.globalEventListenerPairs.get(t);this.eventService.removeGlobalListener(i,!1),this.eventService.removeGlobalListener(s,!0),this.globalEventListenerPairs.delete(e)}else this.syncGlobalEventListeners.delete(t),this.eventService.removeGlobalListener(t,!1)}destroyEventListeners(e,t){e.forEach(((e,i)=>{e.forEach((e=>this.eventService.removeEventListener(i,e,t))),e.clear()})),e.clear()}destroyGlobalListeners(e,t){e.forEach((e=>this.eventService.removeGlobalListener(e,t))),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.globalEventListenerPairs.forEach((e=>{let{syncListener:t,asyncListener:i}=e;this.eventService.removeGlobalListener(t,!1),this.eventService.removeGlobalListener(i,!0)})),this.globalEventListenerPairs.clear()}},Wa=class extends F{constructor(){super(...arguments),this.beanName="pageBoundsListener"}wireBeans(e){this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages();const t={type:"paginationChanged",animate:!!e&&e.animate,newData:!!e&&e.newData,newPage:!!e&&e.newPage,newPageSize:!!e&&e.newPageSize,keepRenderedRows:!!e&&e.keepRenderedRows};this.eventService.dispatchEvent(t)}calculatePages(){this.paginationService?this.paginationService.calculatePages():this.pageBoundsService.calculateBounds(0,this.rowModel.getRowCount()-1)}},za=class extends F{constructor(){super(...arguments),this.beanName="pageBoundsService",this.pixelOffset=0}wireBeans(e){this.rowModel=e.rowModel}getFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getCurrentPageHeight(){return M(this.topRowBounds)||M(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){return{pageFirstPixel:this.topRowBounds?this.topRowBounds.rowTop:0,pageLastPixel:this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0}}calculateBounds(e,t){this.topRowBounds=this.rowModel.getRowBounds(e),this.topRowBounds&&(this.topRowBounds.rowIndex=e),this.bottomRowBounds=this.rowModel.getRowBounds(t),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=t),this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){const e=P(this.topRowBounds)?this.topRowBounds.rowTop:0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},Ua=class extends F{constructor(){super(),this.beanName="ariaAnnouncementService",this.descriptionContainer=null,this.announceValue=de(this.announceValue.bind(this),200)}wireBeans(e){this.eGridDiv=e.eGridDiv}postConstruct(){const e=this.gos.getDocument(),t=this.descriptionContainer=e.createElement("div");t.classList.add("ag-aria-description-container"),Ct(t,"polite"),dt(t,"relevant","additions text"),function(e,t){dt(e,"atomic",t)}(t,!0),this.eGridDiv.appendChild(t)}announceValue(e){this.descriptionContainer&&(this.descriptionContainer.textContent="",setTimeout((()=>{this.isAlive()&&this.descriptionContainer&&(this.descriptionContainer.textContent=e)}),50))}destroy(){super.destroy();const{descriptionContainer:e}=this;e&&(ri(e),e.parentElement&&e.parentElement.removeChild(e)),this.descriptionContainer=null,this.eGridDiv=null}},_a=class extends F{constructor(){super(...arguments),this.beanName="columnAnimationService",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.suppressAnimation=!1,this.animationThreadCount=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady((e=>this.gridBodyCtrl=e.gridBodyCtrl))}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){this.active||this.gos.get("suppressColumnMoveAnimation")||this.gos.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0)}finish(){this.active&&this.flush((()=>{this.active=!1}))}executeNextVMTurn(e){this.active?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push((()=>{this.animationThreadCount===e&&this.gridBodyCtrl.setColumnMovingCss(!1)}))}flush(e){if(0===this.executeNextFuncs.length&&0===this.executeLaterFuncs.length)return void e();const t=e=>{for(;e.length;){const t=e.pop();t&&t()}};this.getFrameworkOverrides().wrapIncoming((()=>{window.setTimeout((()=>t(this.executeNextFuncs)),0),window.setTimeout((()=>{e(),t(this.executeLaterFuncs)}),200)}))}},Ka=class extends F{constructor(){super(...arguments),this.beanName="columnHoverService"}setMouseOver(e){this.selectedColumns=e;this.eventService.dispatchEvent({type:"columnHoverChanged"})}clearMouseOver(){this.selectedColumns=null;this.eventService.dispatchEvent({type:"columnHoverChanged"})}isHovered(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0}},Za=class extends F{constructor(){super(...arguments),this.beanName="overlayService",this.state=0,this.showInitialOverlay=!0}wireBeans(e){this.userComponentFactory=e.userComponentFactory,this.rowModel=e.rowModel,this.columnModel=e.columnModel}postConstruct(){const e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e}),this.addManagedPropertyListener("loading",e)}registerOverlayWrapperComp(e){this.overlayWrapperComp=e,this.updateOverlayVisibility()}showLoadingOverlay(){this.showInitialOverlay=!1;const e=this.gos.get("loading");(e||void 0===e&&!this.gos.get("suppressLoadingOverlay"))&&this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1,this.gos.get("loading")||this.gos.get("suppressNoRowsOverlay")||this.doShowNoRowsOverlay()}hideOverlay(){this.showInitialOverlay=!1,this.gos.get("loading")||this.doHideOverlay()}updateOverlayVisibility(){let e=this.gos.get("loading");this.showInitialOverlay&&void 0===e&&!this.gos.get("suppressLoadingOverlay")&&(e=!this.gos.get("columnDefs")||!this.columnModel.isReady()||!this.gos.get("rowData")&&this.gos.isRowModelType("clientSide")),e?1!==this.state&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,this.rowModel.isEmpty()&&!this.gos.get("suppressNoRowsOverlay")&&this.gos.isRowModelType("clientSide")?2!==this.state&&this.doShowNoRowsOverlay():0!==this.state&&this.doHideOverlay())}doShowLoadingOverlay(){this.state=1,this.showOverlay(this.userComponentFactory.getLoadingOverlayCompDetails({}),"ag-overlay-loading-wrapper","loadingOverlayComponentParams")}doShowNoRowsOverlay(){this.state=2,this.showOverlay(this.userComponentFactory.getNoRowsOverlayCompDetails({}),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams")}doHideOverlay(){this.state=0,this.overlayWrapperComp.hideOverlay()}showOverlay(e,t,i){const s=e.newAgStackInstance();this.overlayWrapperComp.showOverlay(s,t,i)}},ja=class extends F{constructor(){super(...arguments),this.beanName="rowCssClassCalculator"}wireBeans(e){this.stylingService=e.stylingService}getInitialRowClasses(e){const t=[];return P(e.extraCssClass)&&t.push(e.extraCssClass),t.push("ag-row"),t.push(e.rowFocused?"ag-row-focus":"ag-row-no-focus"),e.fadeRowIn&&t.push("ag-opacity-zero"),t.push(e.rowIsEven?"ag-row-even":"ag-row-odd"),e.rowNode.isRowPinned()&&t.push("ag-row-pinned"),e.rowNode.isSelected()&&t.push("ag-row-selected"),e.rowNode.footer&&t.push("ag-row-footer"),t.push("ag-row-level-"+e.rowLevel),e.rowNode.stub&&t.push("ag-row-loading"),e.fullWidthRow&&t.push("ag-full-width-row"),e.expandable&&(t.push("ag-row-group"),t.push(e.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),e.rowNode.dragging&&t.push("ag-row-dragging"),m(t,this.processClassesFromGridOptions(e.rowNode)),m(t,this.preProcessRowClassRules(e.rowNode)),t.push(e.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),e.firstRowOnPage&&t.push("ag-row-first"),e.lastRowOnPage&&t.push("ag-row-last"),e.fullWidthRow&&("left"===e.pinned&&t.push("ag-cell-last-left-pinned"),"right"===e.pinned&&t.push("ag-cell-first-right-pinned")),t}processClassesFromGridOptions(e){const t=[],i=e=>{"string"===typeof e?t.push(e):Array.isArray(e)&&e.forEach((e=>t.push(e)))},s=this.gos.get("rowClass");if(s){if("function"===typeof s)return ie("rowClass should not be a function, please use getRowClass instead"),[];i(s)}const o=this.gos.getCallback("getRowClass");if(o){i(o({data:e.data,node:e,rowIndex:e.rowIndex}))}return t}preProcessRowClassRules(e){const t=[];return this.processRowClassRules(e,(e=>{t.push(e)}),(()=>{})),t}processRowClassRules(e,t,i){const s=this.gos.addGridCommonParams({data:e.data,node:e,rowIndex:e.rowIndex});this.stylingService.processClassRules(void 0,this.gos.get("rowClassRules"),s,t,i)}calculateRowLevel(e){return e.group?e.level:e.parent?e.parent.level+1:0}},Ya=class extends F{constructor(){super(...arguments),this.beanName="rowContainerHeightService",this.scrollY=0,this.uiBodyHeight=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=function(){if(!document.body)return-1;let e=1e6;const t=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,i=document.createElement("div");for(document.body.appendChild(i);;){const s=2*e;if(i.style.height=s+"px",s>t||i.clientHeight!==s)break;e=s}return document.body.removeChild(i),e}(),this.gos.get("debug")&&te("RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;const e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,t=this.getUiBodyHeight();(e!==this.scrollY||t!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=t,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;this.gos.get("debug")&&te("RowContainerHeightService - Div Stretch Offset = ".concat(t," (").concat(this.pixelsToShave," * ").concat(e,")")),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t="number"===typeof e?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventService.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=null!=e&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=e/(this.modelHeight-this.getUiBodyHeight());return this.maxScrollY*t}},qa=class extends F{constructor(){super(...arguments),this.beanName="rowNodeSorter"}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.showRowGroupColsService=e.showRowGroupColsService}postConstruct(){this.isAccentedSort=this.gos.get("accentedSort"),this.primaryColumnsSortGroups=this.gos.isColumnsSortingCoupledToGroup(),this.addManagedPropertyListener("accentedSort",(e=>this.isAccentedSort=e.currentValue)),this.addManagedPropertyListener("autoGroupColumnDef",(()=>this.primaryColumnsSortGroups=this.gos.isColumnsSortingCoupledToGroup()))}doFullSort(e,t){const i=e.map(((e,t)=>({currentPos:t,rowNode:e})));return i.sort(this.compareRowNodes.bind(this,t)),i.map((e=>e.rowNode))}compareRowNodes(e,t,i){const s=t.rowNode,o=i.rowNode;for(let n=0,r=e.length;n<r;n++){const t=e[n],i="desc"===t.sort,r=this.getValue(s,t.column),l=this.getValue(o,t.column);let a;const d=this.getComparator(t,s);a=d?d(r,l,s,o,i):G(r,l,this.isAccentedSort);if(!isNaN(a)&&0!==a)return"asc"===t.sort?a:-1*a}return t.currentPos-i.currentPos}getComparator(e,t){const i=e.column,s=i.getColDef().comparator;if(null!=s)return s;if(!i.getColDef().showRowGroup)return;const o=!t.group&&i.getColDef().field;if(!o)return;const n=this.columnModel.getColDefCol(o);return n?n.getColDef().comparator:void 0}getValue(e,t){if(!this.primaryColumnsSortGroups)return this.valueService.getValue(t,e,!1,!1);if(e.rowGroupColumn===t){var i,s;if(this.gos.isGroupUseEntireRow(this.columnModel.isPivotActive())){var o;const i=null===(o=e.allLeafChildren)||void 0===o?void 0:o[0];return i?this.valueService.getValue(t,i,!1,!1):void 0}const n=null===(i=this.showRowGroupColsService)||void 0===i?void 0:i.getShowRowGroupCol(t.getId());if(!n)return;return null===(s=e.groupData)||void 0===s?void 0:s[n.getId()]}return e.group&&t.getColDef().showRowGroup?void 0:this.valueService.getValue(t,e,!1,!1)}},Qa=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(e,t){if(e.children)for(let i=0;i<e.children.length;i++)this.depthFirstSearchChangedPath(e.children[i],t);t(e.rowNode)}depthFirstSearchEverything(e,t,i){if(e.childrenAfterGroup)for(let s=0;s<e.childrenAfterGroup.length;s++){const o=e.childrenAfterGroup[s];o.childrenAfterGroup?this.depthFirstSearchEverything(e.childrenAfterGroup[s],t,i):i&&t(o)}t(e)}forEachChangedNodeDepthFirst(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.active&&!i?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,i=0;for(;!this.mapToItems[t.id];){const e={rowNode:t,children:null};this.mapToItems[t.id]=e,i++,t=t.parent}return i}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let i=e;for(;i;)this.nodeIdsToColumns[i.id]||(this.nodeIdsToColumns[i.id]={}),t.forEach((e=>this.nodeIdsToColumns[i.id][e.getId()]=!0)),i=i.parent}linkPathItems(e,t){let i=e;for(let s=0;s<t;s++){const e=this.mapToItems[i.id],t=this.mapToItems[i.parent.id];t.children||(t.children=[]),t.children.push(e),i=i.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const i=this.createPathItems(e);this.linkPathItems(e,i),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const i=this.nodeIdsToColumns[e.id];return t.filter((e=>i[e.getId()]))}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const i=this.nodeIdsToColumns[e.id];return t.filter((e=>!i[e.getId()]))}},Xa=class extends F{constructor(){super(...arguments),this.beanName="selectionService",this.selectedNodes=new Map,this.selectionCtx=new el}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.selectionCtx.init(this.rowModel),this.rowSelection=this.gos.get("rowSelection"),this.groupSelectsChildren=this.gos.get("groupSelectsChildren"),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],(()=>{this.groupSelectsChildren=this.gos.get("groupSelectsChildren"),this.rowSelection=this.gos.get("rowSelection"),this.deselectAllRowNodes({source:"api"})})),this.addManagedEventListeners({rowSelected:this.onRowSelected.bind(this)})}destroy(){super.destroy(),this.resetNodes(),this.selectionCtx.reset()}isMultiselect(){return"multiple"===this.rowSelection}overrideSelectionValue(e,t){var i;if(!ka(t))return e;const s=this.selectionCtx.getRoot();return!s||null!==(i=s.isSelected())&&void 0!==i&&i}setNodesSelected(e){const{newValue:t,clearSelection:i,suppressFinishActions:s,rangeSelect:o,nodes:n,event:r,source:l}=e;if(0===n.length)return 0;if(n.length>1&&!this.isMultiselect())return ie("cannot multi select while rowSelection='single'"),0;const a=this.groupSelectsChildren&&!0===e.groupSelectsFiltered,d=n.map((e=>e.footer?e.sibling:e));if(o){if(d.length>1)return ie("cannot range select while selecting multiple rows"),0;const e=d[0],i=this.overrideSelectionValue(t,l);if(this.isMultiselect()){if(this.selectionCtx.isInRange(e)){const t=this.selectionCtx.truncate(e);return i&&this.selectRange(t.discard,!1,l),this.selectRange(t.keep,i,l)}if(this.selectionCtx.getRoot()!==e){const t=this.selectionCtx.extend(e,this.groupSelectsChildren);return i&&this.selectRange(t.discard,!1,l),this.selectRange(t.keep,i,l)}}else;}s||this.selectionCtx.setRoot(d[0]);let c=0;for(let h=0;h<d.length;h++){var u;const e=d[h];if(!(a&&e.group)){e.selectThisNode(t,r,l)&&c++}this.groupSelectsChildren&&null!==(u=e.childrenAfterGroup)&&void 0!==u&&u.length&&(c+=this.selectChildren(e,t,a,l))}if(!s){t&&(i||!this.isMultiselect())&&(c+=this.clearOtherNodes(d[0],l)),c>0&&(this.updateGroupsFromChildrenSelections(l),this.dispatchSelectionChanged(l))}return c}selectRange(e,t,i){let s=0;return e.forEach((e=>{if(e.group&&this.groupSelectsChildren)return;e.selectThisNode(t,void 0,i)&&s++})),s>0&&(this.updateGroupsFromChildrenSelections(i),this.dispatchSelectionChanged(i)),s}selectChildren(e,t,i,s){const o=i?e.childrenAfterAggFilter:e.childrenAfterGroup;return M(o)?0:this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:i,source:s,nodes:o})}getSelectedNodes(){const e=[];return this.selectedNodes.forEach((t=>{t&&e.push(t)})),e}getSelectedRows(){const e=[];return this.selectedNodes.forEach((t=>{t&&t.data&&e.push(t.data)})),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){const t=new Map;this.selectedNodes.forEach(((i,s)=>{i&&e(i)&&t.set(s,i)})),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsChildren)return!1;if("clientSide"!==this.rowModel.getType())return!1;const i=this.rowModel.getRootNode();t||(t=new Qa(!0,i)).setInactive();let s=!1;return t.forEachChangedNodeDepthFirst((t=>{if(t!==i){const i=t.calculateSelectedFromChildren();s=t.selectThisNode(null!==i&&i,void 0,e)||s}})),s}clearOtherNodes(e,t){const i=new Map;let s=0;return this.selectedNodes.forEach((o=>{if(o&&o.id!==e.id){const e=this.selectedNodes.get(o.id);s+=e.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:t}),this.groupSelectsChildren&&o.parent&&i.set(o.parent.id,o.parent)}})),i.forEach((e=>{const i=e.calculateSelectedFromChildren();e.selectThisNode(null!==i&&i,void 0,t)})),s}onRowSelected(e){const t=e.node;this.groupSelectsChildren&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}syncInOldRowNode(e,t){if(P(t)&&e.id!==t.id&&t){const i=t.id;this.selectedNodes.get(i)==e&&this.selectedNodes.set(t.id,t)}}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.setSelectedInitialValue(!0),this.selectedNodes.set(e.id,e)):e.setSelectedInitialValue(!1)}reset(e){const t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){var e;null===(e=this.selectedNodes)||void 0===e||e.clear()}getBestCostNodeSelection(){if("clientSide"!==this.rowModel.getType())return;const e=this.rowModel.getTopLevelNodes();if(null===e)return;const t=[];return function e(i){for(let s=0,o=i.length;s<o;s++){const o=i[s];if(o.isSelected())t.push(o);else{const t=o;t.group&&t.children&&e(t.children)}}}(e),t}isEmpty(){let e=0;return this.selectedNodes.forEach((t=>{t&&e++})),0===e}deselectAllRowNodes(e){const t=e=>e.selectThisNode(!1,void 0,s),i="clientSide"===this.rowModel.getType(),{source:s,justFiltered:o,justCurrentPage:n}=e;if(n||o){if(!i)return void se("selecting just filtered only works when gridOptions.rowModelType='clientSide'");this.getNodesToSelect(o,n).forEach(t)}else this.selectedNodes.forEach((e=>{e&&t(e)})),this.reset(s);this.selectionCtx.reset(),i&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(s),this.dispatchSelectionChanged(s)}getSelectedCounts(e,t){let i=0,s=0;return this.getNodesToSelect(e,t).forEach((e=>{this.groupSelectsChildren&&e.group||(e.isSelected()?i++:e.selectable&&s++)})),{selectedCount:i,notSelectedCount:s}}getSelectAllState(e,t){const{selectedCount:i,notSelectedCount:s}=this.getSelectedCounts(e,t);return(0!==i||0!==s)&&(i>0&&s>0?null:i>0)}hasNodesToSelect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getNodesToSelect(e,t).filter((e=>e.selectable)).length>0}getNodesToSelect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("clientSide"!==this.rowModel.getType())throw new Error("selectAll only available when rowModelType='clientSide', ie not ".concat(this.rowModel.getType()));const i=[];if(t)return this.forEachNodeOnPage((e=>{if(e.group)if(e.expanded)this.groupSelectsChildren||i.push(e);else{const t=e=>{var s;i.push(e),null!==(s=e.childrenAfterFilter)&&void 0!==s&&s.length&&e.childrenAfterFilter.forEach(t)};t(e)}else i.push(e)})),i;const s=this.rowModel;return e?(s.forEachNodeAfterFilter((e=>{i.push(e)})),i):(s.forEachNode((e=>{i.push(e)})),i)}forEachNodeOnPage(e){const t=this.pageBoundsService.getFirstRow(),i=this.pageBoundsService.getLastRow();for(let s=t;s<=i;s++){const t=this.rowModel.getRow(s);t&&e(t)}}selectAllRowNodes(e){var t,i;if("clientSide"!==this.rowModel.getType())throw new Error("selectAll only available when rowModelType='clientSide', ie not ".concat(this.rowModel.getType()));const{source:s,justFiltered:o,justCurrentPage:r}=e,l=this.getNodesToSelect(o,r);l.forEach((e=>e.selectThisNode(!0,void 0,s))),this.selectionCtx.setRoot(null!==(t=l[0])&&void 0!==t?t:null),this.selectionCtx.setEndRange(null!==(i=n(l))&&void 0!==i?i:null),"clientSide"===this.rowModel.getType()&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(s),this.dispatchSelectionChanged(s)}getSelectionState(){const e=[];return this.selectedNodes.forEach((t=>{null!==t&&void 0!==t&&t.id&&e.push(t.id)})),e.length?e:null}setSelectionState(e,t){if(!Array.isArray(e))return;const i=new Set(e),s=[];this.rowModel.forEachNode((e=>{i.has(e.id)&&s.push(e)})),this.setNodesSelected({newValue:!0,nodes:s,source:t})}dispatchSelectionChanged(e){const t={type:"selectionChanged",source:e};this.eventService.dispatchEvent(t)}},$a=class extends F{constructor(){super(...arguments),this.beanName="selectableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){this.addManagedPropertyListener("isRowSelectable",(()=>this.updateSelectable()))}updateSelectableAfterGrouping(){this.updateSelectable(!0)}updateSelectable(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=!!this.gos.get("rowSelection"),i=this.gos.get("isRowSelectable");if(!t||!i)return;const s=this.gos.get("groupSelectsChildren"),o="clientSide"===this.rowModel.getType()&&s,n=[],r=t=>{if(e&&!t.group)return;if(o&&t.group){const e=t.childrenAfterGroup.some((e=>!0===e.selectable));return void t.setRowSelectable(e,!0)}const s=!i||i(t);t.setRowSelectable(s,!0),!s&&t.isSelected()&&n.push(t)};if(o){const e=this.rowModel;new Qa(!1,e.getRootNode()).forEachChangedNodeDepthFirst(r,!0,!0)}else this.rowModel.forEachNode(r);n.length&&this.selectionService.setNodesSelected({nodes:n,newValue:!1,source:"selectableChanged"}),o&&this.selectionService instanceof Xa&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}},Ja=["asc","desc",null],ed=class extends F{constructor(){super(...arguments),this.beanName="sortController"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.showRowGroupColsService=e.showRowGroupColsService}progressSort(e,t,i){const s=this.getNextSortDirection(e);this.setSortForColumn(e,s,t,i)}setSortForColumn(e,t,i,s){"asc"!==t&&"desc"!==t&&(t=null);let o=[e];if(this.gos.isColumnsSortingCoupledToGroup()&&e.getColDef().showRowGroup){const t=this.funcColsService.getSourceColumnsForGroupColumn(e),i=null===t||void 0===t?void 0:t.filter((e=>e.isSortable()));i&&(o=[e,...i])}o.forEach((e=>e.setSort(t,s)));const n=[];if(!((i||this.gos.get("alwaysMultiSort"))&&!this.gos.get("suppressMultiSort"))){const e=this.clearSortBarTheseColumns(o,s);n.push(...e)}this.updateSortIndex(e),n.push(...o),this.dispatchSortChangedEvents(s,n)}updateSortIndex(e){var t;const i=this.gos.isColumnsSortingCoupledToGroup(),s=null===(t=this.showRowGroupColsService)||void 0===t?void 0:t.getShowRowGroupCol(e.getId()),o=i&&s||e,n=this.getColumnsWithSortingOrdered();this.columnModel.getAllCols().forEach((e=>e.setSortIndex(null)));const r=n.filter((e=>(!i||!e.getColDef().showRowGroup)&&e!==o));(o.getSort()?[...r,o]:r).forEach(((e,t)=>{e.setSortIndex(t)}))}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){const e=this.columnModel.getAllCols().filter((e=>!!e.getSort()));return e&&e.length>0}dispatchSortChangedEvents(e,t){const i={type:"sortChanged",source:e};t&&(i.columns=t),this.eventService.dispatchEvent(i)}clearSortBarTheseColumns(e,t){const i=[];return this.columnModel.getAllCols().forEach((s=>{e.includes(s)||(s.getSort()&&i.push(s),s.setSort(void 0,t))})),i}getNextSortDirection(e){let t;if(t=e.getColDef().sortingOrder?e.getColDef().sortingOrder:this.gos.get("sortingOrder")?this.gos.get("sortingOrder"):Ja,!Array.isArray(t)||t.length<=0)return ie("sortingOrder must be an array with at least one element, currently it's ".concat(t)),null;const i=t.indexOf(e.getSort()),s=i<0,o=i==t.length-1;let n;return n=s||o?t[0]:t[i+1],Ja.indexOf(n)<0?(ie("invalid sort type ",n),null):n}getIndexedSortMap(){let e=this.columnModel.getAllCols().filter((e=>!!e.getSort()));if(this.columnModel.isPivotMode()){const t=this.gos.isColumnsSortingCoupledToGroup();e=e.filter((e=>{var i;const s=!!e.getAggFunc(),o=!e.isPrimary(),n=t?null===(i=this.showRowGroupColsService)||void 0===i?void 0:i.getShowRowGroupCol(e.getId()):e.getColDef().showRowGroup;return s||o||n}))}const t=this.funcColsService.getRowGroupColumns().filter((e=>!!e.getSort())),i={};e.forEach(((e,t)=>i[e.getId()]=t)),e.sort(((e,t)=>{const s=e.getSortIndex(),o=t.getSortIndex();if(null!=s&&null!=o)return s-o;if(null==s&&null==o){return i[e.getId()]>i[t.getId()]?1:-1}return null==o?-1:1}));const s=this.gos.isColumnsSortingCoupledToGroup()&&!!t.length;s&&(e=[...new Set(e.map((e=>{var t,i;return null!==(t=null===(i=this.showRowGroupColsService)||void 0===i?void 0:i.getShowRowGroupCol(e.getId()))&&void 0!==t?t:e})))]);const o=new Map;return e.forEach(((e,t)=>o.set(e,t))),s&&t.forEach((e=>{const t=this.showRowGroupColsService.getShowRowGroupCol(e.getId());o.set(e,o.get(t))})),o}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(((e,t)=>{let[i,s]=e,[o,n]=t;return s-n})).map((e=>{let[t]=e;return t}))}getSortModel(){return this.getColumnsWithSortingOrdered().filter((e=>e.getSort())).map((e=>({sort:e.getSort(),colId:e.getId()})))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter((e=>e.getSort())).map((e=>({sort:e.getSort(),column:e})))}canColumnDisplayMixedSort(e){const t=this.gos.isColumnsSortingCoupledToGroup(),i=!!e.getColDef().showRowGroup;return t&&i}getDisplaySortForColumn(e){const t=this.funcColsService.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||null===t||void 0===t||!t.length)return e.getSort();const i=null!=e.getColDef().field||!!e.getColDef().valueGetter?[e,...t]:t,s=i[0].getSort();return i.every((e=>e.getSort()==s))?s:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}},td=class extends F{constructor(){super(...arguments),this.beanName="syncService",this.waitingForColumns=!1}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.rowModel=e.rowModel}postConstruct(){this.addManagedPropertyListener("columnDefs",(e=>this.setColumnDefs(e)))}start(){this.ctrlsService.whenReady((()=>{const e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()}))}setColumnsAndData(e){this.columnModel.setColumnDefs(null!==e&&void 0!==e?e:[],"gridInitializing"),this.rowModel.start()}gridReady(){this.dispatchGridReadyEvent();const e=Ni.__isRegistered("@ag-grid-enterprise/core",this.gridId);this.gos.get("debug")&&te("initialised successfully, enterprise = ".concat(e))}dispatchGridReadyEvent(){this.eventService.dispatchEvent({type:"gridReady"})}setColumnDefs(e){const t=this.gos.get("columnDefs");if(t)return this.waitingForColumns?(this.waitingForColumns=!1,void this.setColumnsAndData(t)):void this.columnModel.setColumnDefs(t,Re(e.source))}},id=class extends F{constructor(){super(...arguments),this.beanName="changeDetectionService"}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer}postConstruct(){"clientSide"===this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){"paste"!==e.source&&this.doChangeDetection(e.node,e.column)}doChangeDetection(e,t){if(this.gos.get("suppressChangeDetection"))return;const i=[e];if(this.clientSideRowModel&&!e.isRowPinned()){const s=this.gos.get("aggregateOnlyChangedColumns"),o=new Qa(s,this.clientSideRowModel.getRootNode());o.addParentNode(e.parent,[t]),this.clientSideRowModel.doAggregate(o),o.forEachChangedNodeDepthFirst((e=>{i.push(e)}))}this.rowRenderer.refreshCells({rowNodes:i})}},sd=class extends F{constructor(){super(...arguments),this.beanName="expressionService",this.expressionToFunctionCache={}}evaluate(e,t){if("string"===typeof e)return this.evaluateExpression(e,t);se("value should be either a string or a function",e)}evaluateExpression(e,t){try{const i=this.createExpressionFunction(e);return i(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(i){return te("Processing of the expression failed"),te("Expression = ",e),te("Params = ",t),te("Exception = ",i),null}}createExpressionFunction(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];const t=this.createFunctionBody(e),i=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",t);return this.expressionToFunctionCache[e]=i,i}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}},od=class extends F{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){this.active=this.gos.get("valueCache"),this.neverExpires=this.gos.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,i){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[t]=i)}getValue(e,t){if(this.active&&e.__cacheVersion===this.cacheVersion)return e.__cacheData[t]}},nd=class extends F{constructor(){super(...arguments),this.beanName="valueService",this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionService=e.expressionService,this.columnModel=e.columnModel,this.valueCache=e.valueCache,this.dataTypeService=e.dataTypeService}postConstruct(){this.initialised||this.init()}init(){this.isSsrm=this.gos.isRowModelType("serverSide"),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;const e=e=>this.callColumnCellValueChangedHandler(e),t=this.gos.useAsyncEvents();this.eventService.addEventListener("cellValueChanged",e,t),this.addDestroyFunc((()=>this.eventService.removeEventListener("cellValueChanged",e,t))),this.addManagedPropertyListener("treeData",(e=>this.isTreeData=e.currentValue))}getValue(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.initialised||this.init(),!t)return;const o=e.getColDef(),n=o.field,r=e.getColId(),l=t.data;let a;const d=t.groupData&&void 0!==t.groupData[r],c=!s&&t.aggData&&void 0!==t.aggData[r],u=this.isSsrm&&s&&!!e.getColDef().aggFunc,h=this.isSsrm&&t.footer&&t.field&&(!0===e.getColDef().showRowGroup||e.getColDef().showRowGroup===t.field);if(i&&o.filterValueGetter?a=this.executeFilterValueGetter(o.filterValueGetter,l,e,t):this.isTreeData&&c?a=t.aggData[r]:this.isTreeData&&o.valueGetter?a=this.executeValueGetter(o.valueGetter,l,e,t):this.isTreeData&&n&&l?a=U(l,n,e.isFieldContainsDots()):d?a=t.groupData[r]:c?a=t.aggData[r]:o.valueGetter?a=this.executeValueGetter(o.valueGetter,l,e,t):h?a=U(l,t.field,e.isFieldContainsDots()):n&&l&&!u&&(a=U(l,n,e.isFieldContainsDots())),this.cellExpressions&&"string"===typeof a&&0===a.indexOf("=")){const i=a.substring(1);a=this.executeValueGetter(i,l,e,t)}if(null==a){const i=this.getOpenedGroup(t,e);if(null!=i)return i}return a}parseValue(e,t,i,s){const o=e.getColDef(),n=this.gos.addGridCommonParams({node:t,data:null===t||void 0===t?void 0:t.data,oldValue:s,newValue:i,colDef:o,column:e}),r=o.valueParser;return P(r)?"function"===typeof r?r(n):this.expressionService.evaluate(r,n):i}formatValue(e,t,i,s){let o,n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=null;const l=e.getColDef();if(s?o=s:n&&(o=l.valueFormatter),o){const s=this.gos.addGridCommonParams({value:i,node:t,data:t?t.data:null,colDef:l,column:e});r="function"===typeof o?o(s):this.expressionService.evaluate(o,s)}else if(l.refData)return l.refData[i]||"";return null==r&&Array.isArray(i)&&(r=i.join(", ")),r}getOpenedGroup(e,t){if(!this.gos.get("showOpenedGroup"))return;if(!t.getColDef().showRowGroup)return;const i=t.getColDef().showRowGroup;let s=e.parent;for(;null!=s;){if(s.rowGroupColumn&&(!0===i||i===s.rowGroupColumn.getColId()))return s.key;s=s.parent}}setValue(e,t,i,s){const o=this.columnModel.getColDefCol(t);if(!e||!o)return!1;M(e.data)&&(e.data={});const{field:n,valueSetter:r}=o.getColDef();if(M(n)&&M(r))return ie("you need either field or valueSetter set on colDef for editing to work"),!1;if(this.dataTypeService&&!this.dataTypeService.checkType(o,i))return ie("Data type of the new value does not match the cell data type of the column"),!1;const l=this.gos.addGridCommonParams({node:e,data:e.data,oldValue:this.getValue(o,e),newValue:i,colDef:o.getColDef(),column:o});let a;if(l.newValue=i,a=P(r)?"function"===typeof r?r(l):this.expressionService.evaluate(r,l):this.setValueUsingField(e.data,n,i,o.isFieldContainsDots()),void 0===a&&(a=!0),!a)return!1;e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),l.newValue=this.getValue(o,e);const d={type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:l.column,api:l.api,colDef:l.colDef,context:l.context,data:e.data,node:e,oldValue:l.oldValue,newValue:l.newValue,value:l.newValue,source:s};return this.eventService.dispatchEvent(d),!0}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;"function"===typeof t&&this.getFrameworkOverrides().wrapOutgoing((()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})}))}setValueUsingField(e,t,i,s){if(!t)return!1;let o=!1;if(s){const s=t.split(".");let n=e;for(;s.length>0&&n;){const e=s.shift();0===s.length?(o=n[e]===i,o||(n[e]=i)):n=n[e]}}else o=e[t]===i,o||(e[t]=i);return!o}executeFilterValueGetter(e,t,i,s){const o=this.gos.addGridCommonParams({data:t,node:s,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,s)});return"function"===typeof e?e(o):this.expressionService.evaluate(e,o)}executeValueGetter(e,t,i,s){const o=i.getColId(),n=this.valueCache.getValue(s,o);if(void 0!==n)return n;const r=this.gos.addGridCommonParams({data:t,node:s,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,s)});let l;return l="function"===typeof e?e(r):this.expressionService.evaluate(e,r),this.valueCache.setValue(s,o,l),l}getValueCallback(e,t){const i=this.columnModel.getColDefCol(t);return i?this.getValue(i,e):null}getKeyForNode(e,t){const i=this.getValue(e,t),s=e.getColDef().keyCreator;let o=i;if(s){o=s(this.gos.addGridCommonParams({value:i,colDef:e.getColDef(),column:e,node:t,data:t.data}))}return"string"===typeof o||null==o||(o=String(o),"[object Object]"===o&&ie("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),o}},rd=class{};rd.gridOptions=void 0;var ld=1,ad=class{create(e,t,i,s,o){var n;let r={};rd.gridOptions?(z(r,rd.gridOptions,!0,!0),r={...r,...t}):r=t;const l=function(e){const t={};return Object.entries(e).forEach((e=>{let[i,s]=e;const o=Ga(i,s);t[i]=o})),t}(r),a=null!==(n=l.gridId)&&void 0!==n?n:String(ld++),d=this.getRegisteredModules(o,a),c=this.createBeansList(l.rowModelType,d,a),u=this.createProvidedBeans(e,l,o);if(!c)return void se("Failed to create grid.");const h=new xs({providedBeanInstances:u,beanClasses:c,gridId:a,beanInitComparator:El,beanDestroyComparator:xl,derivedBeans:[vl]});return this.registerModuleUserComponents(h,d),this.registerControllers(h,d),this.registerModuleApiFunctions(h,d),i(h),h.getBean("syncService").start(),s&&s(h),h.getBean("gridApi")}registerControllers(e,t){const i=e.getBean("ctrlsFactory");t.forEach((e=>{e.controllers&&e.controllers.forEach((e=>i.register(e)))}))}getRegisteredModules(e,t){const i=e?e.modules:null,s=Ni.__getRegisteredModules(t),o=[],n={},r=(e,t,i)=>{var s;n[(s=t).moduleName]||(n[s.moduleName]=!0,o.push(s),Ni.__register(s,e,i)),t.dependantModules&&t.dependantModules.forEach((t=>r(e,t,i)))};return r(!(null===i||void 0===i||!i.length)||!Ni.__isPackageBased(),Ia,void 0),i&&i.forEach((e=>r(!0,e,t))),s&&s.forEach((e=>r(!Ni.__isPackageBased(),e,void 0))),o}registerModuleUserComponents(e,t){const i=this.extractModuleEntity(t,(e=>e.userComponents?e.userComponents:[])),s=e.getBean("userComponentRegistry");i.forEach((e=>{s.registerDefaultComponent(e.name,e.classImp)}))}registerModuleApiFunctions(e,t){const i=e.getBean("apiFunctionService");t.forEach((e=>{var t;const s=null!==(t=e.apiFunctions)&&void 0!==t?t:{};Object.keys(s).forEach((e=>{null===i||void 0===i||i.addFunction(e,s[e])}))}))}createProvidedBeans(e,t,i){let s=i?i.frameworkOverrides:null;M(s)&&(s=new ul);const o={gridOptions:t,eGridDiv:e,globalEventListener:i?i.globalEventListener:null,globalSyncEventListener:i?i.globalSyncEventListener:null,frameworkOverrides:s};return i&&i.providedBeanInstances&&Object.assign(o,i.providedBeanInstances),o}createBeansList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"clientSide",t=arguments.length>2?arguments[2]:void 0;const i=(arguments.length>1?arguments[1]:void 0).filter((t=>!t.rowModel||t.rowModel===e)),s={clientSide:"@ag-grid-community/client-side-row-model",infinite:"@ag-grid-community/infinite-row-model",serverSide:"@ag-grid-enterprise/server-side-row-model",viewport:"@ag-grid-enterprise/viewport-row-model"};if(!s[e])return void se("Could not find row model for rowModelType = ",e);if(!Ni.__assertRegistered(s[e],"rowModelType = '".concat(e,"'"),t))return;const o=[Tl,Dl,Ba,Ta,gl,ts,bl,Rl,Rr,Rs,Ya,yr,Va,Qr,Ls,We,Bl,Oa,dl,Xa,be,on,za,Wa,Yr,sd,Se,Sr,od,nd,Zr,br,Is,Hl,wr,Gl,hl,tl,vr,ed,Ka,_a,$a,id,Fr,fl,ja,qa,Ml,Wl,Il,Pl,td,Za,xr,Ha,Ua,Pr,Pe,Cl,De,Ee,wl,Sl,Ne,xe,Le,yl,Ge],n=this.extractModuleEntity(i,(e=>e.beans?e.beans:[]));o.push(...n);const r=[];return o.forEach((e=>{r.indexOf(e)<0&&r.push(e)})),r}extractModuleEntity(e,t){return[].concat(...e.map(t))}},dd=class extends F{constructor(){super(...arguments),this.beanName="rowModelHelperService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){const e=this.rowModel;switch(e.getType()){case"clientSide":this.clientSideRowModel=e;break;case"infinite":this.infiniteRowModel=e;break;case"serverSide":this.serverSideRowModel=e}}getClientSideRowModel(){return this.clientSideRowModel}getInfiniteRowModel(){return this.infiniteRowModel}getServerSideRowModel(){return this.serverSideRowModel}};var cd={version:Wo,moduleName:"@ag-grid-community/csrm-ssrm-shared-api",apiFunctions:{expandAll:function(e){e.expansionService.expandAll(!0)},collapseAll:function(e){e.expansionService.expandAll(!1)},onRowHeightChanged:function(e){var t,i;const s=null===(t=e.rowModelHelperService)||void 0===t?void 0:t.getClientSideRowModel(),o=null===(i=e.rowModelHelperService)||void 0===i?void 0:i.getServerSideRowModel();s?s.onRowHeightChanged():o&&o.onRowHeightChanged()}}},ud={version:Wo,moduleName:"@ag-grid-community/ssrm-infinite-shared-api",apiFunctions:{setRowCount:function(e,t,i){var s,o;const n=null===(s=e.rowModelHelperService)||void 0===s?void 0:s.getServerSideRowModel();if(n)return e.funcColsService.isRowGroupEmpty()?void n.setRowCount(t,i):void se("setRowCount cannot be used while using row grouping.");const r=null===(o=e.rowModelHelperService)||void 0===o?void 0:o.getInfiniteRowModel();r&&r.setRowCount(t,i)},getCacheBlockState:function(e){var t,i;return null!==(t=null===(i=e.rowNodeBlockLoader)||void 0===i?void 0:i.getBlockState())&&void 0!==t?t:{}}}},hd=class{wrap(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=arguments.length>3?arguments[3]:void 0;const o=this.createWrapper(e,s);return t.forEach((e=>{this.createMethod(o,e,!0)})),i.forEach((e=>{this.createMethod(o,e,!1)})),o}unwrap(e){return e}createMethod(e,t,i){e.addMethod(t,this.createMethodProxy(e,t,i))}createMethodProxy(e,t,i){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(i&&ie("Framework component is missing the method "+t+"()"),null)}}};function pd(e,t){if(!e)return!1;const i=(e,i)=>{const s=t[e.id],o=t[i.id],n=void 0!==s,r=void 0!==o;return n&&r?s-o:!n&&!r?e.__objectId-i.__objectId:n?1:-1};let s,o,n=!1;for(let r=0;r<e.length-1;r++)if(s=e[r],o=e[r+1],i(s,o)>0){n=!0;break}return!!n&&(e.sort(i),!0)}var gd=class{};gd.CHART_TYPE_TO_SERIES_TYPE={column:"bar",groupedColumn:"bar",stackedColumn:"bar",normalizedColumn:"bar",bar:"bar",groupedBar:"bar",stackedBar:"bar",normalizedBar:"bar",line:"line",scatter:"scatter",bubble:"bubble",pie:"pie",donut:"donut",doughnut:"donut",area:"area",stackedArea:"area",normalizedArea:"area",histogram:"histogram",radarLine:"radar-line",radarArea:"radar-area",nightingale:"nightingale",radialColumn:"radial-column",radialBar:"radial-bar",sunburst:"sunburst",rangeBar:"range-bar",rangeArea:"range-area",boxPlot:"box-plot",treemap:"treemap",heatmap:"heatmap",waterfall:"waterfall"},gd.COMBO_CHART_TYPES=["columnLineCombo","areaColumnCombo","customCombo"],gd.SERIES_GROUP_TYPES=["grouped","stacked","normalized"];var md="undefined"===typeof global?{}:global;md.HTMLElement="undefined"===typeof HTMLElement?{}:HTMLElement,md.HTMLButtonElement="undefined"===typeof HTMLButtonElement?{}:HTMLButtonElement,md.HTMLSelectElement="undefined"===typeof HTMLSelectElement?{}:HTMLSelectElement,md.HTMLInputElement="undefined"===typeof HTMLInputElement?{}:HTMLInputElement,md.Node="undefined"===typeof Node?{}:Node,md.MouseEvent="undefined"===typeof MouseEvent?{}:MouseEvent},7154:(e,t,i)=>{"use strict";i.d(t,{EH:()=>x,IU:()=>v,Lc:()=>u,WK:()=>n,aC:()=>a,aV:()=>r,jM:()=>p,z0:()=>o});var s=i(30845),o=class extends s.AS9{setBeans(e){this.beans=e}getFileName(e){const t=this.getDefaultFileExtension();return null!=e&&e.length||(e=this.getDefaultFileName()),-1===e.indexOf(".")?"".concat(e,".").concat(t):e}getData(e){const t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return"export.".concat(this.getDefaultFileExtension())}},n=class{constructor(e){this.groupColumns=[];const{columnModel:t,funcColsService:i,columnNameService:s,valueService:o,gos:n,processCellCallback:r,processHeaderCallback:l,processGroupHeaderCallback:a,processRowGroupCallback:d}=e;this.columnModel=t,this.funcColsService=i,this.columnNameService=s,this.valueService=o,this.gos=n,this.processCellCallback=r,this.processHeaderCallback=l,this.processGroupHeaderCallback=a,this.processRowGroupCallback=d}prepare(e){this.groupColumns=e.filter((e=>!!e.getColDef().showRowGroup))}extractHeaderValue(e){const t=this.getHeaderName(this.processHeaderCallback,e);return null!==t&&void 0!==t?t:""}extractRowCellValue(e,t,i,s,o){const n=this.gos.get("groupHideOpenParents")&&!o.footer||!this.shouldRenderGroupSummaryCell(o,e,t)?this.valueService.getValue(e,o):this.createValueForGroupNode(e,o);return this.processCell({accumulatedRowIndex:i,rowNode:o,column:e,value:n,processCellCallback:this.processCellCallback,type:s})}shouldRenderGroupSummaryCell(e,t,i){if(!(e&&e.group))return!1;if(-1!==this.groupColumns.indexOf(t)){var s;if(null!=(null===(s=e.groupData)||void 0===s?void 0:s[t.getId()]))return!0;if(this.gos.isRowModelType("serverSide")&&e.group)return!0;if(e.footer&&-1===e.level){const e=t.getColDef();return null==e||!0===e.showRowGroup||e.showRowGroup===this.funcColsService.getRowGroupColumns()[0].getId()}}const o=this.gos.isGroupUseEntireRow(this.columnModel.isPivotMode());return 0===i&&o}getHeaderName(e,t){return e?e(this.gos.addGridCommonParams({column:t})):this.columnNameService.getDisplayNameForColumn(t,"csv",!0)}createValueForGroupNode(e,t){if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gos.addGridCommonParams({column:e,node:t}));const i=this.gos.get("treeData"),s=this.gos.get("suppressGroupMaintainValueType"),o=t=>{var o,n;if(i||s)return t.key;const r=null===(o=t.groupData)||void 0===o?void 0:o[e.getId()];return r&&t.rowGroupColumn&&!1!==t.rowGroupColumn.getColDef().useValueFormatterForExport&&null!==(n=this.valueService.formatValue(t.rowGroupColumn,t,r))&&void 0!==n?n:r},n=t.footer,r=[o(t)];if(!this.gos.isGroupMultiAutoColumn())for(;t.parent;)t=t.parent,r.push(o(t));const l=r.reverse().join(" -> ");return n?"Total ".concat(l):l}processCell(e){const{accumulatedRowIndex:t,rowNode:i,column:s,value:o,processCellCallback:n,type:r}=e;var l;return n?{value:null!==(l=n(this.gos.addGridCommonParams({accumulatedRowIndex:t,column:s,node:i,value:o,type:r,parseValue:e=>this.valueService.parseValue(s,i,e,this.valueService.getValue(s,i)),formatValue:e=>{var t;return null!==(t=this.valueService.formatValue(s,i,e))&&void 0!==t?t:e}})))&&void 0!==l?l:""}:!1!==s.getColDef().useValueFormatterForExport?{value:null!==o&&void 0!==o?o:"",valueFormatted:this.valueService.formatValue(s,i,o)}:{value:null!==o&&void 0!==o?o:""}}},r=class{static download(e,t){const i=document.defaultView||window;if(!i)return void(0,s.Brh)("There is no `window` associated with the current `document`");const o=document.createElement("a"),n=i.URL.createObjectURL(t);o.setAttribute("href",n),o.setAttribute("download",e),o.style.display="none",document.body.appendChild(o),o.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:i})),document.body.removeChild(o),i.setTimeout((()=>{i.URL.revokeObjectURL(n)}),0)}},l=class extends n{constructor(e){super(e),this.isFirstLine=!0,this.result="";const{suppressQuotes:t,columnSeparator:i}=e;this.suppressQuotes=t,this.columnSeparator=i}addCustomContent(e){e&&("string"===typeof e?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,"\r\n"),this.result+=e):e.forEach((e=>{this.beginNewLine(),e.forEach(((e,t)=>{0!==t&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(e.data.value||""),e.mergeAcross&&this.appendEmptyCells(e.mergeAcross)}))})))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,i,s){0!=i&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(s)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){0!=t&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,i){var s;0!=t&&(this.result+=this.columnSeparator);const o=this.extractRowCellValue(e,t,t,"csv",i);this.result+=this.putInQuotes(null!==(s=o.valueFormatted)&&void 0!==s?s:o.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(null===e||void 0===e)return'""';let t;"string"===typeof e?t=e:"function"===typeof e.toString?t=e.toString():((0,s.Brh)("unknown value type during csv conversion"),t="");return'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+="\r\n"),this.isFirstLine=!1}};var a=(e=>(e[e.HEADER_GROUPING=0]="HEADER_GROUPING",e[e.HEADER=1]="HEADER",e[e.BODY=2]="BODY",e))(a||{}),d=class extends s.AS9{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.selectionService=e.selectionService,this.rowNodeSorter=e.rowNodeSorter,this.sortController=e.sortController}serialize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{allColumns:i,columnKeys:o,skipRowGroups:n}=t,r=this.getColumnsToExport(i,n,o);return(0,s.yE0)(this.prepareSession(r),this.prependContent(t),this.exportColumnGroups(t,r),this.exportHeaders(t,r),this.processPinnedTopRows(t,r),this.processRows(t,r),this.processPinnedBottomRows(t,r),this.appendContent(t))(e).parse()}processRow(e,t,i,s){var o;const n=t.shouldRowBeSkipped||(()=>!1),r=this.gos.get("groupRemoveSingleChildren"),l=this.gos.get("groupRemoveLowestSingleChildren"),a=null!=t.rowPositions||!!t.onlySelected,d=this.gos.get("groupHideOpenParents")&&!a,c=this.columnModel.isPivotMode()?s.leafGroup:!s.group,u=!!s.footer,h=l&&s.leafGroup,p=1===s.allChildrenCount&&1===(null===(o=s.childrenAfterGroup)||void 0===o?void 0:o.length)&&(r||h);if(!c&&!u&&(t.skipRowGroups||p||d)||t.onlySelected&&!s.isSelected()||t.skipPinnedTop&&"top"===s.rowPinned||t.skipPinnedBottom&&"bottom"===s.rowPinned)return;if(-1===s.level&&!c&&!u)return;if(n(this.gos.addGridCommonParams({node:s})))return;const g=e.onNewBodyRow(s);if(i.forEach(((e,t)=>{g.onColumn(e,t,s)})),t.getCustomContentBelowRow){const i=t.getCustomContentBelowRow(this.gos.addGridCommonParams({node:s}));i&&e.addCustomContent(i)}}appendContent(e){return t=>{const i=e.appendContent;return i&&t.addCustomContent(i),t}}prependContent(e){return t=>{const i=e.prependContent;return i&&t.addCustomContent(i),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return i=>{if(!e.skipColumnGroupHeaders){const o=new s.fkf,n=this.visibleColsService.createGroups({columns:t,idCreator:o,pinned:null,isStandaloneStructure:!0});this.recursivelyAddHeaderGroups(n,i,e.processGroupHeaderCallback)}return i}}exportHeaders(e,t){return i=>{if(!e.skipColumnHeaders){const e=i.onNewHeaderRow();t.forEach(((t,i)=>{e.onColumn(t,i,void 0)}))}return i}}processPinnedTopRows(e,t){return i=>{const s=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter((e=>"top"===e.rowPinned)).sort(((e,t)=>e.rowIndex-t.rowIndex)).map((e=>this.pinnedRowModel.getPinnedTopRow(e.rowIndex))).forEach(s):this.pinnedRowModel.forEachPinnedTopRow(s),i}}processRows(e,t){return i=>{const s=this.rowModel,o=s.getType(),n="clientSide"===o,r="serverSide"===o,l=!n&&e.onlySelected,a=this.processRow.bind(this,i,e,t),{exportedRows:d="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter((e=>null==e.rowPinned)).sort(((e,t)=>e.rowIndex-t.rowIndex)).map((e=>s.getRow(e.rowIndex))).forEach(a);else if(this.columnModel.isPivotMode())n?s.forEachPivotNode(a,!0):r?s.forEachNodeAfterFilterAndSort(a,!0):s.forEachNode(a);else if(e.onlySelectedAllPages||l){const e=this.selectionService.getSelectedNodes();this.replicateSortedOrder(e),e.forEach(a)}else"all"===d?s.forEachNode(a):n||r?s.forEachNodeAfterFilterAndSort(a,!0):s.forEachNode(a);return i}}replicateSortedOrder(e){const t=this.sortController.getSortOptions(),i=(e,s)=>{return null!=e.rowIndex&&null!=s.rowIndex?e.rowIndex-s.rowIndex:e.level===s.level?(null===(o=e.parent)||void 0===o?void 0:o.id)===(null===(n=s.parent)||void 0===n?void 0:n.id)?this.rowNodeSorter.compareRowNodes(t,{rowNode:e,currentPos:null!==(r=e.rowIndex)&&void 0!==r?r:-1},{rowNode:s,currentPos:null!==(l=s.rowIndex)&&void 0!==l?l:-1}):i(e.parent,s.parent):e.level>s.level?i(e.parent,s):i(e,s.parent);var o,n,r,l};e.sort(i)}processPinnedBottomRows(e,t){return i=>{const s=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter((e=>"bottom"===e.rowPinned)).sort(((e,t)=>e.rowIndex-t.rowIndex)).map((e=>this.pinnedRowModel.getPinnedBottomRow(e.rowIndex))).forEach(s):this.pinnedRowModel.forEachPinnedBottomRow(s),i}}getColumnsToExport(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;const o=this.columnModel.isPivotMode();if(i&&i.length)return this.columnModel.getColsForKeys(i);const n=this.gos.get("treeData");let r=[];return r=e&&!o?this.columnModel.getCols():this.visibleColsService.getAllCols(),t&&!n&&(r=r.filter((e=>e.getColId()!==s.eHy))),r}recursivelyAddHeaderGroups(e,t,i){const o=[];e.forEach((e=>{const t=e;t.getChildren&&t.getChildren().forEach((e=>o.push(e)))})),e.length>0&&(0,s.GLL)(e[0])&&this.doAddHeaderHeader(t,e,i),o&&o.length>0&&this.recursivelyAddHeaderGroups(o,t,i)}doAddHeaderHeader(e,t,i){const o=e.onNewHeaderGroupingRow();let n=0;t.forEach((e=>{const t=e;let r;r=i?i(this.gos.addGridCommonParams({columnGroup:t})):this.columnNameService.getDisplayNameForColumnGroup(t,"header");const l=t.getLeafColumns().reduce(((e,t,i,o)=>{let n=(0,s._O9)(e);return"open"===t.getColumnGroupShow()?n&&null==n[1]||(n=[i],e.push(n)):n&&null==n[1]&&(n[1]=i-1),i===o.length-1&&n&&null==n[1]&&(n[1]=i),e}),[]);o.onColumn(t,r||"",n++,t.getLeafColumns().length-1,l)}))}},c="32.0.1",u={version:c,moduleName:"".concat(s.GXE.CsvExportModule,"-core"),beans:[class extends o{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(e){this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.gridSerializer=e.gridSerializer}postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gos:this.gos})}getMergedParams(e){const t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed())return void(0,s.Brh)("Export cancelled. Export is not allowed as per your configuration.");const t=this.getMergedParams(e),i=this.getData(t),o=new Blob(["\ufeff",i],{type:"text/plain"}),n="function"===typeof t.fileName?t.fileName(this.gos.getGridCommonParams()):t.fileName;r.download(this.getFileName(n),o)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?Object.assign({},e):this.getMergedParams(e);return this.getData(t)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){const{columnModel:t,columnNameService:i,funcColsService:s,valueService:o,gos:n}=this,{processCellCallback:r,processHeaderCallback:a,processGroupHeaderCallback:d,processRowGroupCallback:c,suppressQuotes:u,columnSeparator:h}=e;return new l({columnModel:t,columnNameService:i,funcColsService:s,valueService:o,gos:n,processCellCallback:r||void 0,processHeaderCallback:a||void 0,processGroupHeaderCallback:d||void 0,processRowGroupCallback:c||void 0,suppressQuotes:u||!1,columnSeparator:h||","})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}},d]},h={version:c,moduleName:"".concat(s.GXE.CsvExportModule,"-api"),apiFunctions:{getDataAsCsv:function(e,t){var i;return null===(i=e.csvCreator)||void 0===i?void 0:i.getDataAsCsv(t)},exportDataAsCsv:function(e,t){var i;null===(i=e.csvCreator)||void 0===i||i.exportDataAsCsv(t)}},dependantModules:[u]},p={version:c,moduleName:s.GXE.CsvExportModule,dependantModules:[u,h]},g="\r\n";function m(e,t,i){if(!t&&""!==t&&0!==t)return"";let s=t;return"boolean"===typeof t&&i&&(s=i(t))," ".concat(e,'="').concat(s,'"')}var v=class{static createHeader(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=["version"];e.version||(e.version="1.0"),e.encoding&&t.push("encoding"),e.standalone&&t.push("standalone");const i=t.map((t=>"".concat(t,'="').concat(e[t],'"'))).join(" ");return"".concat("<?","xml ").concat(i," ").concat("?>")}static createXml(e,t){let i="";e.properties&&(e.properties.prefixedAttributes&&e.properties.prefixedAttributes.forEach((e=>{Object.keys(e.map).forEach((s=>{i+=m(e.prefix+s,e.map[s],t)}))})),e.properties.rawMap&&Object.keys(e.properties.rawMap).forEach((s=>{i+=m(s,e.properties.rawMap[s],t)})));let s="<"+e.name+i;return e.children||null!=e.textNode?null!=e.textNode?s+">"+e.textNode+"</"+e.name+">"+g:(s+=">\r\n",e.children&&e.children.forEach((e=>{s+=this.createXml(e,t)})),s+"</"+e.name+">"+g):s+"/>"+g}},f=async e=>{const t=new Blob([e]),{size:i,content:s}=await(async e=>{let t=0;const i=[],s=new WritableStream({write:e=>{i.push(e),t+=e.length}}),o=new ReadableStream({start:t=>{const i=new FileReader;i.onload=e=>{var i;null!==(i=e.target)&&void 0!==i&&i.result&&t.enqueue(e.target.result),t.close()},i.readAsArrayBuffer(e)}}),n=new window.CompressionStream("deflate-raw");return await o.pipeThrough(n).pipeTo(s),{size:t,content:new Blob(i)}})(t);return{size:i,content:new Uint8Array(await s.arrayBuffer())}};function C(e,t){let i="";for(let s=0;s<t;s++)i+=String.fromCharCode(255&e),e>>>=8;return i}var w=e=>{if(!e.length)return 0;let t=-1,i=0,s=0,o=0;for(let n=0;n<e.length;n++)i=e[n],s=255&(t^i),o=y[s],t=t>>>8^o;return-1^t},S=e=>e.length?w("string"===typeof e?(new TextEncoder).encode(e):e):0,y=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),b=(e,t,i,o,n,r)=>{const{content:l,path:a,created:d}=e,c=(e=>{let t=e.getHours();return t<<=6,t|=e.getMinutes(),t<<=5,t|=e.getSeconds()/2,t})(d),u=(e=>{let t=e.getFullYear()-1980;return t<<=4,t|=e.getMonth()+1,t<<=5,t|=e.getDate(),t})(d),h=S(n),p=void 0!==r?r:o,g=(0,s.E0s)(a),m=g!==a;let v="";if(m){const e=C(1,1)+C(S(g),4)+g;v="up"+C(e.length,2)+e}const f="\x14\0"+(m?"\0\b":"\0\0")+C(t?8:0,2)+C(c,2)+C(u,2)+C(p?h:0,4)+C(null!==r&&void 0!==r?r:o,4)+C(o,4)+C(g.length,2)+C(v.length,2),w="PK\x03\x04"+f+g+v,y="PK\x01\x02\x14\0"+f+"\0\0\0\0\0\0"+(l?"\0\0\0\0":"\x10\0\0\0")+C(i,4)+g+v;return{localFileHeader:Uint8Array.from(w,(e=>e.charCodeAt(0))),centralDirectoryHeader:Uint8Array.from(y,(e=>e.charCodeAt(0)))}},R=e=>{let t;if("string"===typeof e){const i=atob(e.split(";base64,")[1]);t=Uint8Array.from(i,(e=>e.charCodeAt(0)))}else t=e;return{size:t.length,content:t}},F=async(e,t)=>{const{content:i}=e,{size:s,content:o}=i?R(i):{size:0,content:Uint8Array.from([])};let n,r,l=!1;if("file"===e.type&&o&&s>0){const e=await f(o);n=e.content,r=e.size,l=!0}return{...b(e,l,t,s,o,r),content:n||o,isCompressed:l}},E=(e,t)=>{const{content:i}=e,{content:s}=i?R(i):{content:Uint8Array.from([])};return{...b(e,!1,t,s.length,s,void 0),content:s,isCompressed:!1}},x=class{static addFolders(e){e.forEach(this.addFolder.bind(this))}static addFolder(e){this.folders.push({path:e,created:new Date,isBase64:!1,type:"folder"})}static addFile(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.files.push({path:e,created:new Date,content:i?t:(new TextEncoder).encode(t),isBase64:i,type:"file"})}static async getZipFile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"application/zip";const t=await this.buildCompressedFileStream();return this.clearStream(),new Blob([t],{type:e})}static getUncompressedZipFile(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"application/zip";const t=this.buildFileStream();return this.clearStream(),new Blob([t],{type:e})}static clearStream(){this.folders=[],this.files=[]}static packageFiles(e){let t=0,i=0;for(const d of e){const{localFileHeader:e,centralDirectoryHeader:s,content:o}=d;t+=e.length+o.length,i+=s.length}const s=new Uint8Array(t),o=new Uint8Array(i);let n=0,r=0;for(const d of e){const{localFileHeader:e,centralDirectoryHeader:t,content:i}=d;s.set(e,n),n+=e.length,s.set(i,n),n+=i.length,o.set(t,r),r+=t.length}const l=((e,t,i)=>{const s="PK\x05\x06\0\0\0\0"+C(e,2)+C(e,2)+C(t,4)+C(i,4)+"\0\0";return Uint8Array.from(s,(e=>e.charCodeAt(0)))})(e.length,i,t),a=new Uint8Array(s.length+o.length+l.length);return a.set(s),a.set(o,s.length),a.set(l,s.length+o.length),a}static async buildCompressedFileStream(){const e=[...this.folders,...this.files],t=[];let i=0;for(const s of e){const e=await F(s,i),{localFileHeader:o,content:n}=e;t.push(e),i+=o.length+n.length}return this.packageFiles(t)}static buildFileStream(){const e=[...this.folders,...this.files],t=[];let i=0;for(const s of e){const e=E(s,i),{localFileHeader:o,content:n}=e;t.push(e),i+=o.length+n.length}return this.packageFiles(t)}};x.folders=[],x.files=[]},83090:(e,t,i)=>{"use strict";i.d(t,{f:()=>c});var s=i(30845),o=class extends s.NlK{wireBeans(e){this.beans=e}constructor(e,t,i){super(e),this.parentCache=t,this.params=i,this.startRow=e*i.blockSize,this.endRow=this.startRow+i.blockSize}postConstruct(){this.createRowNodes()}getBlockStateJson(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}}setDataAndId(e,t,i){(0,s.fTC)(t)?e.setDataAndId(t,i.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){const e=this.createLoadParams();(0,s.n92)(this.params.datasource.getRows)?(0,s.Brh)("datasource is missing getRows method"):window.setTimeout((()=>{this.params.datasource.getRows(e)}),0)}processServerFail(){}createLoadParams(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gos.getGridCommonParams().context}}forEachNode(e,t,i){this.rowNodes.forEach(((s,o)=>{this.startRow+o<i&&e(s,t.next())}))}getLastAccessed(){return this.lastAccessed}getRow(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]||(this.lastAccessed=this.params.lastAccessedSequence.next());const t=e-this.startRow;return this.rowNodes[t]}getStartRow(){return this.startRow}getEndRow(){return this.endRow}createRowNodes(){this.rowNodes=[];for(let e=0;e<this.params.blockSize;e++){const t=this.startRow+e,i=new s.Fxk(this.beans);i.setRowHeight(this.params.rowHeight),i.uiLevel=0,i.setRowIndex(t),i.setRowTop(this.params.rowHeight*t),this.rowNodes.push(i)}}processServerResult(e){this.rowNodes.forEach(((t,i)=>{const o=e.rowData?e.rowData[i]:void 0;!t.id&&t.alreadyRendered&&o&&(this.rowNodes[i]=new s.Fxk(this.beans),this.rowNodes[i].setRowIndex(t.rowIndex),this.rowNodes[i].setRowTop(t.rowTop),this.rowNodes[i].setRowHeight(t.rowHeight),t.clearRowTopAndRowIndex()),this.setDataAndId(this.rowNodes[i],o,this.startRow+i)}));const t=null!=e.rowCount&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,t)}destroy(){this.rowNodes.forEach((e=>{e.clearRowTopAndRowIndex()})),super.destroy()}},n=class extends s.AS9{constructor(e){super(),this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount,this.params=e}wireBeans(e){this.rowRenderer=e.rowRenderer,this.focusService=e.focusService}getRow(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=Math.floor(e/this.params.blockSize);let s=this.blocks[i];if(!s){if(t)return;s=this.createBlock(i)}return s.getRow(e)}createBlock(e){const t=this.createBean(new o(e,this,this.params));return this.blocks[t.getId()]=t,this.blockCount++,this.purgeBlocksIfNeeded(t),this.params.rowNodeBlockLoader.addBlock(t),t}refreshCache(){0==this.blockCount?this.purgeCache():(this.getBlocksInOrder().forEach((e=>e.setStateWaitingToLoad())),this.params.rowNodeBlockLoader.checkBlockToLoad())}destroy(){this.getBlocksInOrder().forEach((e=>this.destroyBlock(e))),super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(this.gos.get("debug")&&(0,s.s8e)("InfiniteCache - onPageLoaded: page = ".concat(e.getId(),", lastRow = ").concat(t)),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){const t=this.getBlocksInOrder().filter((t=>t!=e));t.sort(((e,t)=>t.getLastAccessed()-e.getLastAccessed()));const i=this.params.maxBlocksInCache>0,s=i?this.params.maxBlocksInCache-1:null;t.forEach(((e,t)=>{if("needsLoading"===e.getState()&&t>=1||!!i&&t>=s){if(this.isBlockCurrentlyDisplayed(e))return;if(this.isBlockFocused(e))return;this.removeBlockFromCache(e)}}))}isBlockFocused(e){const t=this.focusService.getFocusCellToUseAfterRefresh();if(!t)return!1;if(null!=t.rowPinned)return!1;const i=e.getStartRow(),s=e.getEndRow();return t.rowIndex>=i&&t.rowIndex<s}isBlockCurrentlyDisplayed(e){const t=e.getStartRow(),i=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(t,i)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if("number"===typeof t&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const t=(e.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<t&&(this.rowCount=t)}}setRowCount(e,t){this.rowCount=e,(0,s.fTC)(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){const t=new s.at1;this.getBlocksInOrder().forEach((i=>i.forEachNode(e,t,this.rowCount)))}getBlocksInOrder(){return(0,s.QgP)(this.blocks).sort(((e,t)=>e.getId()-t.getId()))}destroyBlock(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){if(this.isAlive()){this.destroyAllBlocksPastVirtualRowCount();const e={type:"storeUpdated"};this.eventService.dispatchEvent(e)}}destroyAllBlocksPastVirtualRowCount(){const e=[];this.getBlocksInOrder().forEach((t=>{t.getId()*this.params.blockSize>=this.rowCount&&e.push(t)})),e.length>0&&e.forEach((e=>this.destroyBlock(e)))}purgeCache(){this.getBlocksInOrder().forEach((e=>this.removeBlockFromCache(e))),this.lastRowIndexKnown=!1,0===this.rowCount&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){const i=[];let o=-1,n=!1;const r=new s.at1;let l=!1;this.getBlocksInOrder().forEach((s=>{l||(n&&o+1!==s.getId()?l=!0:(o=s.getId(),s.forEachNode((s=>{const o=s===e||s===t;(n||o)&&i.push(s),o&&(n=!n)}),r,this.rowCount)))}));return l||n?[]:i}},r=class extends s.AS9{constructor(){super(...arguments),this.beanName="rowModel"}wireBeans(e){this.filterManager=e.filterManager,this.sortController=e.sortController,this.selectionService=e.selectionService,this.rowRenderer=e.rowRenderer,this.rowNodeBlockLoader=e.rowNodeBlockLoader}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){this.gos.isRowModelType("infinite")&&(this.rowHeight=this.gos.getRowHeightAsNumber(),this.addEventListeners(),this.addDestroyFunc((()=>this.destroyCache())),this.verifyProps())}verifyProps(){this.gos.exists("initialGroupOrderComparator")&&(0,s.Brh)("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy()}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.onCacheUpdated.bind(this)}),this.addManagedPropertyListener("datasource",(()=>this.setDatasource(this.gos.get("datasource")))),this.addManagedPropertyListener("cacheBlockSize",(()=>this.resetCache())),this.addManagedPropertyListener("rowHeight",(()=>{this.rowHeight=this.gos.getRowHeightAsNumber(),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()}))}onFilterChanged(){this.reset()}onSortChanged(){this.reset()}onColumnEverything(){let e;e=!this.cacheParams||this.isSortModelDifferent(),e&&this.reset()}isSortModelDifferent(){return!(0,s.jHe)(this.cacheParams.sortModel,this.sortController.getSortModel())}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(e,t):[]}reset(){if(!this.datasource)return;null!=this.gos.getRowIdCallback()||this.selectionService.reset("rowDataChanged"),this.resetCache()}createModelUpdatedEvent(){return{type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1}}resetCache(){var e,t;this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:null!==(e=null===(t=this.filterManager)||void 0===t?void 0:t.getFilterModel())&&void 0!==e?e:{},sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gos.get("infiniteInitialRowCount"),maxBlocksInCache:this.gos.get("maxBlocksInCache"),rowHeight:this.gos.getRowHeightAsNumber(),overflowSize:this.gos.get("cacheOverflowSize"),blockSize:this.gos.get("cacheBlockSize"),lastAccessedSequence:new s.at1},this.infiniteCache=this.createBean(new n(this.cacheParams)),this.eventService.dispatchEventOnce({type:"rowCountReady"});const i=this.createModelUpdatedEvent();this.eventService.dispatchEvent(i)}updateRowHeights(){this.forEachNode((e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)}));const e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)}destroyCache(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))}onCacheUpdated(){const e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)}getRow(e){if(this.infiniteCache&&!(e>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(e)}getRowNode(e){let t;return this.forEachNode((i=>{i.id===e&&(t=i)})),t}forEachNode(e){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(0!==this.rowHeight){const t=Math.floor(e/this.rowHeight),i=this.getRowCount()-1;return t>i?i:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache&&this.infiniteCache.refreshCache()}purgeCache(){this.infiniteCache&&this.infiniteCache.purgeCache()}isLastRowIndexKnown(){return!!this.infiniteCache&&this.infiniteCache.isLastRowIndexKnown()}setRowCount(e,t){this.infiniteCache&&this.infiniteCache.setRowCount(e,t)}};var l="32.0.1",a={version:l,moduleName:"".concat(s.GXE.InfiniteRowModelModule,"-core"),rowModel:"infinite",beans:[r],dependantModules:[s.fqf]},d={version:l,moduleName:"".concat(s.GXE.InfiniteRowModelModule,"-api"),beans:[s.iO9],apiFunctions:{refreshInfiniteCache:function(e){var t;null===(t=e.rowModelHelperService)||void 0===t||null===(t=t.getInfiniteRowModel())||void 0===t||t.refreshCache()},purgeInfiniteCache:function(e){var t;null===(t=e.rowModelHelperService)||void 0===t||null===(t=t.getInfiniteRowModel())||void 0===t||t.purgeCache()},getInfiniteRowCount:function(e){var t;return null===(t=e.rowModelHelperService)||void 0===t||null===(t=t.getInfiniteRowModel())||void 0===t?void 0:t.getRowCount()},isLastRowIndexKnown:function(e){var t;return null===(t=e.rowModelHelperService)||void 0===t||null===(t=t.getInfiniteRowModel())||void 0===t?void 0:t.isLastRowIndexKnown()}},dependantModules:[a,s.Z0d]},c={version:l,moduleName:s.GXE.InfiniteRowModelModule,dependantModules:[a,d]}},57875:(e,t,i)=>{"use strict";i.d(t,{E9:()=>Fe,s:()=>be});var s=i(57435),o=i(30845),n=i(33882),r=s.createContext({}),l=(e,t,i,s)=>{if(!e||e.componentFromFramework||t.isDestroyed())return;const o=e.newAgStackInstance();if(null==o)return;let n,r,l=!1;return o.then((e=>{l?t.destroyBean(e):(n=e,r=n.getGui(),i.appendChild(r),a(s,n))})),()=>{l=!0,n&&(r&&r.parentElement&&r.parentElement.removeChild(r),t.destroyBean(n),s&&a(s,void 0))}},a=(e,t)=>{if(e)if(e instanceof Function){e(t)}else{e.current=t}},d=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.filter((e=>null!=e&&""!==e)).join(" ")},c=class e{constructor(){this.classesMap={};for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach((e=>{this.classesMap[e]=!0}))}setClass(t,i){if(!!this.classesMap[t]==i)return this;const s=new e;return s.classesMap={...this.classesMap},s.classesMap[t]=i,s}toString(){return Object.keys(this.classesMap).filter((e=>this.classesMap[e])).join(" ")}},u=e=>"function"===typeof e&&!(e.prototype&&e.prototype.isReactComponent)||"object"===typeof e&&e.$$typeof===("function"===typeof Symbol&&Symbol.for?Symbol.for("react.memo"):60115),h=null!=n.createRoot&&null!=n.flushSync;var p=!1;var g=(e,t)=>{h&&e&&!p?n.flushSync(t):t()};function m(e,t,i){if(null==t||null==e)return t;if(e===t||0===t.length&&0===e.length)return e;if(i||0===e.length&&t.length>0||e.length>0&&0===t.length)return t;const s=[],o=[],n=new Map,r=new Map;for(let l=0;l<t.length;l++){const e=t[l];r.set(e.getInstanceId(),e)}for(let l=0;l<e.length;l++){const t=e[l];n.set(t.getInstanceId(),t),r.has(t.getInstanceId())&&s.push(t)}for(let l=0;l<t.length;l++){const e=t[l],i=e.getInstanceId();n.has(i)||o.push(e)}return s.length===e.length&&0===o.length?e:0===s.length&&o.length===t.length?t:0===s.length?o:0===o.length?s:[...s,...o]}var v=(0,s.forwardRef)(((e,t)=>{var i;const{ctrlsFactory:n,context:a}=(0,s.useContext)(r),d=(0,s.useRef)(null),u=(0,s.useRef)(null),h=(0,s.useRef)(null),p=(0,s.useRef)(null),g=(0,s.useRef)(null),m=(0,s.useRef)(),[f,C]=(0,s.useState)(),[w,S]=(0,s.useState)(),[y,b]=(0,s.useState)(),[R,F]=(0,s.useState)((()=>new c)),[E,x]=(0,s.useState)((()=>new c("ag-hidden"))),[P,M]=(0,s.useState)((()=>new c("ag-hidden"))),[D,I]=(0,s.useState)((()=>new c("ag-invisible")));(0,s.useImperativeHandle)(t,(()=>({refresh:()=>!1}))),(0,s.useLayoutEffect)((()=>l(f,a,u.current)),[f]);const T=(0,s.useCallback)((t=>{if(d.current=t,!d.current)return a.destroyBean(m.current),void(m.current=null);const i={setInnerRenderer:(e,t)=>{C(e),b(t)},setChildCount:e=>S(e),addOrRemoveCssClass:(e,t)=>F((i=>i.setClass(e,t))),setContractedDisplayed:e=>M((t=>t.setClass("ag-hidden",!e))),setExpandedDisplayed:e=>x((t=>t.setClass("ag-hidden",!e))),setCheckboxVisible:e=>I((t=>t.setClass("ag-invisible",!e)))},s=n.getInstance("groupCellRendererCtrl");s&&(m.current=a.createBean(s),m.current.init(i,d.current,h.current,p.current,g.current,v,e))}),[]),A=(0,s.useMemo)((()=>"ag-cell-wrapper ".concat(R.toString())),[R]),k=(0,s.useMemo)((()=>"ag-group-expanded ".concat(E.toString())),[E]),L=(0,s.useMemo)((()=>"ag-group-contracted ".concat(P.toString())),[P]),G=(0,s.useMemo)((()=>"ag-group-checkbox ".concat(D.toString())),[D]),N=f&&f.componentFromFramework,O=N?f.componentClass:void 0,B=null==f&&null!=y,V=(0,o.BYN)(y,!0);return s.createElement("span",{className:A,ref:T,...e.colDef?{}:{role:null===(i=m.current)||void 0===i?void 0:i.getCellAriaRole()}},s.createElement("span",{className:k,ref:p}),s.createElement("span",{className:L,ref:g}),s.createElement("span",{className:G,ref:h}),s.createElement("span",{className:"ag-group-value",ref:u},B&&s.createElement(s.Fragment,null,V),N&&s.createElement(O,{...f.params})),s.createElement("span",{className:"ag-group-child-count"},w))})),f=v,C=(0,s.createContext)({setMethods:()=>{}}),w=e=>{const{initialProps:t,addUpdateCallback:i,CustomComponentClass:o,setMethods:n}=e,[r,l]=(0,s.useState)(t);return(0,s.useEffect)((()=>{i((e=>l(e)))}),[]),s.createElement(C.Provider,{value:{setMethods:n}},s.createElement(o,{...r}))},S=(0,s.memo)(w),y=0;function b(){return"agPortalKey_".concat(++y)}var R=class{constructor(e,t,i,s){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=t,this.componentType=i,this.suppressFallbackMethods=!!s,this.statelessComponent=this.isStateless(this.reactComponent),this.key=b(),this.portalKey=b(),this.instanceCreated=this.isStatelessComponent()?o.j_S.resolve(!1):new o.j_S((e=>{this.resolveInstanceCreated=e}))}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&"function"==typeof this.componentInstance.destroy&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const t=this.portalManager.getComponentWrappingElement(),i=document.createElement(t||"div");return i.classList.add("ag-react-container"),e.reactContainer=i,i}addParentContainerStyleAndClasses(){if(this.componentInstance&&(this.componentInstance.getReactContainerStyle&&this.componentInstance.getReactContainerStyle()&&((0,o.Brh)('Since v31.1 "getReactContainerStyle" is deprecated. Apply styling directly to ".ag-react-container" if needed.'),Object.assign(this.eParentElement.style,this.componentInstance.getReactContainerStyle())),this.componentInstance.getReactContainerClasses&&this.componentInstance.getReactContainerClasses())){(0,o.Brh)('Since v31.1 "getReactContainerClasses" is deprecated. Apply styling directly to ".ag-react-container" if needed.');this.componentInstance.getReactContainerClasses().forEach((e=>this.eParentElement.classList.add(e)))}}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return"function"===typeof Symbol&&Symbol.for}isStateless(e){return"function"===typeof e&&!(e.prototype&&e.prototype.isReactComponent)||"object"===typeof e&&e.$$typeof===this.getMemoType()}hasMethod(e){const t=this.getFrameworkComponentInstance();return!!t&&null!=t[e]||this.fallbackMethodAvailable(e)}callMethod(e,t){const i=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,t&&t[0]?t[0]:{});if(!i)return void setTimeout((()=>this.callMethod(e,t)));const s=i[e];return s?s.apply(i,t):this.fallbackMethodAvailable(e)?this.fallbackMethod(e,t&&t[0]?t[0]:{}):void 0}addMethod(e,t){this[e]=t}init(e){return this.eParentElement=this.createParentElement(e),this.params=e,this.createOrUpdatePortal(e),new o.j_S((e=>this.createReactComponent(e)))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=e=>{var t;this.componentInstance=e,this.addParentContainerStyleAndClasses(),null===(t=this.resolveInstanceCreated)||void 0===t||t.call(this,!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=(0,n.createPortal)(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,t){return(0,s.createElement)(e,t)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!(this.isStatelessComponent()||!this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,t){const i=this["".concat(e,"Component")];if(!this.suppressFallbackMethods&&i)return i.bind(this)(t)}fallbackMethodAvailable(e){if(this.suppressFallbackMethods)return!1;return!!this["".concat(e,"Component")]}};function F(e,t,i){e.forEach((e=>{const s=t[e];s&&(i[e]=s)}))}var E=class extends R{constructor(){super(...arguments),this.awaitUpdateCallback=new o.j_S((e=>{this.resolveUpdateCallback=e})),this.wrapperComponent=S}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then((()=>this.componentInstance))}getFrameworkComponentInstance(){return this}createElement(e,t){return super.createElement(this.wrapperComponent,{initialProps:t,CustomComponentClass:e,setMethods:e=>this.setMethods(e),addUpdateCallback:e=>{this.updateCallback=()=>(e(this.getProps()),new o.j_S((e=>{setTimeout((()=>{e()}))}))),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,F(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new o.j_S((e=>this.awaitUpdateCallback.then((()=>{this.updateCallback().then((()=>e()))}))))}},x=class extends E{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},P=class extends E{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},M=class extends E{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterChangedCallback(),this.expectingNewMethods=!0}isFilterActive(){return null!=this.model}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getOptionalMethods(){return["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){var t;!1===this.expectingNewMethods&&(null===(t=this.providedMethods)||void 0===t?void 0:t.doesFilterPass)!==(null===e||void 0===e?void 0:e.doesFilterPass)&&setTimeout((()=>{this.sourceParams.filterChangedCallback()})),this.expectingNewMethods=!1,super.setMethods(e)}updateModel(e){this.setModel(e).then((()=>this.sourceParams.filterChangedCallback()))}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,delete e.filterModifiedCallback,delete e.valueGetter,e}};function D(e,t){e.parentFilterInstance((i=>{(i.setModel(t)||o.j_S.resolve()).then((()=>{e.filterParams.filterChangedCallback()}))}))}var I=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t,this.model=null,this.onModelChange=e=>this.updateModel(e)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){F(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),D(this.floatingFilterParams,e)}},T=class extends E{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),D(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},A=class extends E{refresh(e){this.sourceParams=e,this.refreshProps()}},k=class extends E{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const t=this.awaitSetActive(e);e&&t.then((()=>this.sourceParams.onItemActivated()))}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},L=class extends E{refresh(e){this.sourceParams=e,this.refreshProps()}},G=class extends E{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},N=class extends E{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function O(){(0,o.Brh)("As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.")}var B=class{constructor(e,t,i){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=t||"div",this.refresher=e,this.maxComponentCreationTimeMs=i||1e3}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter((t=>t!==e)),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,t,i){this.portals=[...this.portals,e],this.waitForInstance(t,i),this.batchUpdate()}updateReactPortal(e,t){this.portals[this.portals.indexOf(e)]=t,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout((()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)})),this.hasPendingPortalUpdate=!0)}waitForInstance(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();if(this.destroyed)t(null);else if(e.rendered())t(e);else{if(Date.now()-i>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate)return;window.setTimeout((()=>{this.waitForInstance(e,t,i)}))}}},V=e=>{const{ctrl:t}=e,i=t.isAlive(),{context:n}=(0,s.useContext)(r),a=i?t.getColId():void 0,[d,c]=(0,s.useState)(),h=(0,s.useRef)(null),p=(0,s.useRef)(null),g=(0,s.useRef)(null),m=(0,s.useRef)(),v=(0,s.useRef)();i&&!v.current&&(v.current=new o.fRQ((()=>h.current)));const f=(0,s.useCallback)((e=>{var s;if(h.current=e,!h.current||!i)return;const n={setWidth:e=>{h.current&&(h.current.style.width=e)},addOrRemoveCssClass:(e,t)=>v.current.addOrRemoveCssClass(e,t),setAriaSort:e=>{h.current&&(e?(0,o.gCM)(h.current,e):(0,o.KxL)(h.current))},setUserCompDetails:e=>c(e),getUserCompInstance:()=>m.current||void 0};t.setComp(n,h.current,p.current,g.current);const r=t.getSelectAllGui();null===(s=p.current)||void 0===s||s.insertAdjacentElement("afterend",r)}),[]);(0,s.useLayoutEffect)((()=>l(d,n,g.current,m)),[d]),(0,s.useEffect)((()=>{t.setDragSource(h.current)}),[d]);const C=(0,s.useMemo)((()=>!!((null===d||void 0===d?void 0:d.componentFromFramework)&&u(d.componentClass))),[d]),w=d&&d.componentFromFramework,S=d&&d.componentClass;return s.createElement("div",{ref:f,className:"ag-header-cell","col-id":a,role:"columnheader"},s.createElement("div",{ref:p,className:"ag-header-cell-resize",role:"presentation"}),s.createElement("div",{ref:g,className:"ag-header-cell-comp-wrapper",role:"presentation"},w&&C&&s.createElement(S,{...d.params}),w&&!C&&s.createElement(S,{...d.params,ref:m})))},H=(0,s.memo)(V),W=e=>{const{context:t,gos:i}=(0,s.useContext)(r),[n,a]=(0,s.useState)((()=>new c("ag-header-cell","ag-floating-filter"))),[d,h]=(0,s.useState)((()=>new c)),[p,g]=(0,s.useState)((()=>new c("ag-floating-filter-button","ag-hidden"))),[m,v]=(0,s.useState)("false"),[f,w]=(0,s.useState)(),[,S]=(0,s.useState)(1),y=(0,s.useRef)(null),b=(0,s.useRef)(null),R=(0,s.useRef)(null),F=(0,s.useRef)(null),E=(0,s.useRef)(),x=(0,s.useRef)(),P=e=>{null!=e&&E.current&&E.current(e)},{ctrl:M}=e,D=(0,s.useCallback)((e=>{if(y.current=e,!y.current)return;x.current=new o.j_S((e=>{E.current=e}));const t={addOrRemoveCssClass:(e,t)=>a((i=>i.setClass(e,t))),addOrRemoveBodyCssClass:(e,t)=>h((i=>i.setClass(e,t))),setButtonWrapperDisplayed:e=>{g((t=>t.setClass("ag-hidden",!e))),v(e?"false":"true")},setWidth:e=>{y.current&&(y.current.style.width=e)},setCompDetails:e=>w(e),getFloatingFilterComp:()=>x.current?x.current:null,setMenuIcon:e=>{var t;return null===(t=F.current)||void 0===t?void 0:t.appendChild(e)}};M.setComp(t,y.current,F.current,b.current)}),[]);(0,s.useLayoutEffect)((()=>l(f,t,b.current,P)),[f]);const T=(0,s.useMemo)((()=>n.toString()),[n]),A=(0,s.useMemo)((()=>d.toString()),[d]),k=(0,s.useMemo)((()=>p.toString()),[p]),L=(0,s.useMemo)((()=>!!(f&&f.componentFromFramework&&u(f.componentClass))),[f]),G=(0,s.useMemo)((()=>i.get("reactiveCustomComponents")),[]),N=(0,s.useMemo)((()=>{if(f){if(G){const e=new I(f.params,(()=>S((e=>e+1))));return P(e),e}f.componentFromFramework&&O()}}),[f]),B=null===N||void 0===N?void 0:N.getProps(),V=f&&f.componentFromFramework,H=f&&f.componentClass;return s.createElement("div",{ref:D,className:T,role:"gridcell"},s.createElement("div",{ref:b,className:A,role:"presentation"},V&&!G&&s.createElement(H,{...f.params,ref:L?()=>{}:P}),V&&G&&s.createElement(C.Provider,{value:{setMethods:e=>N.setMethods(e)}},s.createElement(H,{...B}))),s.createElement("div",{ref:R,"aria-hidden":m,className:k,role:"presentation"},s.createElement("button",{ref:F,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},z=(0,s.memo)(W),U=e=>{const{context:t}=(0,s.useContext)(r),{ctrl:i}=e,[o,n]=(0,s.useState)((()=>new c)),[a,d]=(0,s.useState)((()=>new c)),[h,p]=(0,s.useState)("false"),[g,m]=(0,s.useState)(),[v,f]=(0,s.useState)(),C=(0,s.useMemo)((()=>i.getColId()),[]),w=(0,s.useRef)(null),S=(0,s.useRef)(null),y=(0,s.useRef)(),b=(0,s.useCallback)((e=>{if(w.current=e,!w.current)return;const t={setWidth:e=>{w.current&&(w.current.style.width=e)},addOrRemoveCssClass:(e,t)=>n((i=>i.setClass(e,t))),setUserCompDetails:e=>f(e),setResizableDisplayed:e=>{d((t=>t.setClass("ag-hidden",!e))),p(e?"false":"true")},setAriaExpanded:e=>m(e),getUserCompInstance:()=>y.current||void 0};i.setComp(t,w.current,S.current)}),[]);(0,s.useLayoutEffect)((()=>l(v,t,w.current)),[v]),(0,s.useEffect)((()=>{w.current&&i.setDragSource(w.current)}),[v]);const R=(0,s.useMemo)((()=>!!((null===v||void 0===v?void 0:v.componentFromFramework)&&u(v.componentClass))),[v]),F=(0,s.useMemo)((()=>"ag-header-group-cell "+o.toString()),[o]),E=(0,s.useMemo)((()=>"ag-header-cell-resize "+a.toString()),[a]),x=v&&v.componentFromFramework,P=v&&v.componentClass;return s.createElement("div",{ref:b,className:F,"col-id":C,role:"columnheader","aria-expanded":g},x&&R&&s.createElement(P,{...v.params}),x&&!R&&s.createElement(P,{...v.params,ref:y}),s.createElement("div",{ref:S,"aria-hidden":h,className:E}))},_=(0,s.memo)(U),K=e=>{const{ctrl:t}=e,{topOffset:i,rowHeight:n}=(0,s.useMemo)((()=>t.getTopAndHeight()),[]),r=t.getAriaRowIndex(),l=t.getHeaderRowClass(),[a,d]=(0,s.useState)((()=>n+"px")),[c,u]=(0,s.useState)((()=>i+"px")),h=(0,s.useRef)(null),p=(0,s.useRef)(null),[v,f]=(0,s.useState)((()=>t.getHeaderCtrls())),C=(0,s.useRef)(null),w=(0,s.useCallback)((e=>{if(C.current=e,!e)return;const i={setHeight:e=>d(e),setTop:e=>u(e),setHeaderCtrls:(e,t,i)=>{p.current=h.current,h.current=e;const s=m(p.current,e,t);s!==p.current&&g(i,(()=>f(s)))},setWidth:e=>{C.current&&(C.current.style.width=e)}};t.setComp(i,!1)}),[]),S=(0,s.useMemo)((()=>({height:a,top:c})),[a,c]),y=(0,s.useCallback)((e=>{switch(t.getType()){case o.A6C.COLUMN_GROUP:return s.createElement(_,{ctrl:e,key:e.getInstanceId()});case o.A6C.FLOATING_FILTER:return s.createElement(z,{ctrl:e,key:e.getInstanceId()});default:return s.createElement(H,{ctrl:e,key:e.getInstanceId()})}}),[]);return s.createElement("div",{ref:w,className:l,role:"row",style:S,"aria-rowindex":r},v.map(y))},Z=(0,s.memo)(K),j=e=>{const[t,i]=(0,s.useState)(!0),[n,l]=(0,s.useState)([]),{context:a}=(0,s.useContext)(r),d=(0,s.useRef)(null),c=(0,s.useRef)(null),u=(0,s.useRef)(null),h="left"===e.pinned,p="right"===e.pinned,g=!h&&!p,m=(0,s.useCallback)((t=>{if(d.current=t,!d.current)return a.destroyBean(u.current),void(u.current=null);const s={setDisplayed:i,setCtrls:e=>l(e),setCenterWidth:e=>{c.current&&(c.current.style.width=e)},setViewportScrollLeft:e=>{d.current&&(d.current.scrollLeft=e)},setPinnedContainerWidth:e=>{d.current&&(d.current.style.width=e,d.current.style.minWidth=e,d.current.style.maxWidth=e)}};u.current=a.createBean(new o.TsN(e.pinned)),u.current.setComp(s,d.current)}),[]),v=t?"":"ag-hidden",f=()=>n.map((e=>s.createElement(Z,{ctrl:e,key:e.getInstanceId()})));return s.createElement(s.Fragment,null,h&&s.createElement("div",{ref:m,className:"ag-pinned-left-header "+v,"aria-hidden":!t,role:"rowgroup"},f()),p&&s.createElement("div",{ref:m,className:"ag-pinned-right-header "+v,"aria-hidden":!t,role:"rowgroup"},f()),g&&s.createElement("div",{ref:m,className:"ag-header-viewport "+v,role:"presentation"},s.createElement("div",{ref:c,className:"ag-header-container",role:"rowgroup"},f())))},Y=(0,s.memo)(j),q=()=>{const[e,t]=(0,s.useState)((()=>new c)),[i,n]=(0,s.useState)(),{context:l}=(0,s.useContext)(r),a=(0,s.useRef)(null),d=(0,s.useRef)(null),u=(0,s.useCallback)((e=>{if(a.current=e,!e)return l.destroyBean(d.current),void(d.current=null);const i={addOrRemoveCssClass:(e,i)=>t((t=>t.setClass(e,i))),setHeightAndMinHeight:e=>n(e)};d.current=l.createBean(new o.gA7),d.current.setComp(i,a.current,a.current)}),[]),h=(0,s.useMemo)((()=>"ag-header "+e.toString()),[e]),p=(0,s.useMemo)((()=>({height:i,minHeight:i})),[i]);return s.createElement("div",{ref:u,className:h,style:p,role:"presentation"},s.createElement(Y,{pinned:"left"}),s.createElement(Y,{pinned:null}),s.createElement(Y,{pinned:"right"}))},Q=(0,s.memo)(q),X=(e,t)=>{(0,s.useEffect)((()=>{const i=t.current;if(i){const t=i.parentElement;if(t){const s=document.createComment(e);return t.insertBefore(s,i),()=>{t.removeChild(s)}}}}),[e])},$=class{constructor(e,t){this.cellEditorParams=e,this.refreshProps=t,this.instanceCreated=new o.j_S((e=>{this.resolveInstanceCreated=e})),this.onValueChange=e=>this.updateValue(e),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){F(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then((()=>this.componentInstance))}setRef(e){var t;this.componentInstance=e,null===(t=this.resolveInstanceCreated)||void 0===t||t.call(this),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached"]}updateValue(e){this.value=e,this.refreshProps()}},J=e=>{const[t,i]=(0,s.useState)(),{context:o,popupService:l,localeService:a,gos:d,editService:c}=(0,s.useContext)(r);return(e=>{const t=(0,s.useRef)(e),i=(0,s.useRef)(),o=(0,s.useRef)(!1),n=(0,s.useRef)(!1),[,r]=(0,s.useState)(0);o.current&&(n.current=!0),(0,s.useEffect)((()=>(o.current||(i.current=t.current(),o.current=!0),r((e=>e+1)),()=>{n.current&&i.current&&i.current()})),[])})((()=>{const{editDetails:t,cellCtrl:s,eParentCell:n}=e,{compDetails:r}=t,u=d.get("stopEditingWhenCellsLoseFocus"),h=o.createBean(c.createPopupEditorWrapper(r.params)),p=h.getGui();if(e.jsChildComp){const t=e.jsChildComp.getGui();t&&p.appendChild(t)}const g={column:s.getColumn(),rowNode:s.getRowNode(),type:"popupCellEditor",eventSource:n,ePopup:p,position:t.popupPosition,keepWithinBounds:!0},m=l.positionPopupByComponent.bind(l,g),v=a.getLocaleTextFunc(),f=l.addPopup({modal:u,eChild:p,closeOnEsc:!0,closedCallback:()=>{s.onPopupEditorClosed()},anchorToElement:n,positionCallback:m,ariaLabel:v("ariaLabelCellEditor","Cell Editor")}),C=f?f.hideFunc:void 0;return i(h),e.jsChildComp&&e.jsChildComp.afterGuiAttached&&e.jsChildComp.afterGuiAttached(),()=>{null!=C&&C(),o.destroyBean(h)}})),s.createElement(s.Fragment,null,t&&e.wrappedContent&&(0,n.createPortal)(e.wrappedContent,t.getGui()))},ee=(0,s.memo)(J),te=(e,t,i,o,n,l)=>{const{context:a}=(0,s.useContext)(r),d=(0,s.useCallback)((()=>{const e=n.current;if(!e)return;const t=e.getGui();t&&t.parentElement&&t.parentElement.removeChild(t),a.destroyBean(e),n.current=void 0}),[]);(0,s.useEffect)((()=>{const s=null!=e,o=e&&e.compDetails&&!e.compDetails.componentFromFramework;if(!(s&&o&&!(t&&null==i)))return void d();const r=e.compDetails;if(n.current){const t=n.current,i=!!(null!=t.refresh&&0==e.force)&&t.refresh(r.params);if(!0===i||void 0===i)return;d()}const a=r.newAgStackInstance();null!=a&&a.then((e=>{if(!e)return;const s=e.getGui();if(!s)return;(t?i:l.current).appendChild(s),n.current=e}))}),[e,t,o]),(0,s.useEffect)((()=>d),[])},ie=(e,t,i)=>{const o=e.compProxy;return s.createElement(s.Fragment,null,!o&&s.createElement(t,{...e.compDetails.params,ref:i}),o&&((e,t,i)=>{const{compProxy:o}=e;i(o);const n=o.getProps(),r=u(t);return s.createElement(C.Provider,{value:{setMethods:e=>o.setMethods(e)}},r&&s.createElement(t,{...n}),!r&&s.createElement(t,{...n,ref:e=>o.setRef(e)}))})(e,t,i))},se=e=>{const{context:t}=(0,s.useContext)(r),{cellCtrl:i,printLayout:n,editingRow:l}=e,a=i.getTabIndex(),d=i.getColumnIdSanitised(),c=i.getInstanceId(),[h,p]=(0,s.useState)((()=>i.isCellRenderer()?void 0:{compDetails:void 0,value:i.getValueToDisplay(),force:!1})),[g,m]=(0,s.useState)(),[v,f]=(0,s.useState)(1),[C,w]=(0,s.useState)(),[S,y]=(0,s.useState)(!1),[b,R]=(0,s.useState)(!1),[F,E]=(0,s.useState)(!1),[x,P]=(0,s.useState)(),M=(0,s.useMemo)((()=>i.isForceWrapper()),[i]),D=(0,s.useMemo)((()=>i.getCellAriaRole()),[i]),I=(0,s.useRef)(null),T=(0,s.useRef)(null),A=(0,s.useRef)(),k=(0,s.useRef)(),L=(0,s.useRef)(),G=(0,s.useRef)([]),N=(0,s.useRef)(),[B,V]=(0,s.useState)(0),H=(0,s.useCallback)((e=>{N.current=e,V((e=>e+1))}),[]),W=M||null!=h&&(S||F||b),z=(0,s.useCallback)(((e,t)=>{if(k.current=t,t){t.isCancelBeforeStart&&t.isCancelBeforeStart()&&setTimeout((()=>{i.stopEditing(!0),i.focusCell(!0)}))}}),[i]),U=(0,s.useCallback)((e=>z(!0,e)),[z]),_=(0,s.useCallback)((e=>z(!1,e)),[z]),K=(0,s.useRef)();K.current||(K.current=new o.fRQ((()=>I.current))),te(h,W,N.current,B,A,I);const Z=(0,s.useRef)();(0,s.useLayoutEffect)((()=>{const e=Z.current,t=h;if(Z.current=h,null==e||null==e.compDetails||null==t||null==t.compDetails)return;const i=e.compDetails,s=t.compDetails;if(i.componentClass!=s.componentClass)return;if(null==T.current||null==T.current.refresh)return;1!=T.current.refresh(s.params)&&f((e=>e+1))}),[h]),(0,s.useLayoutEffect)((()=>{if(!(g&&!g.compDetails.componentFromFramework))return;const e=g.compDetails,i=!0===g.popup,s=e.newAgStackInstance();return s.then((e=>{if(!e)return;const t=e.getGui();if(z(i,e),!i){const i=(M?L:I).current;null===i||void 0===i||i.appendChild(t),e.afterGuiAttached&&e.afterGuiAttached()}P(e)})),()=>{s.then((e=>{const s=e.getGui();t.destroyBean(e),z(i,void 0),P(void 0),s&&s.parentElement&&s.parentElement.removeChild(s)}))}}),[g]);const j=(0,s.useCallback)((e=>{if(L.current=e,!L.current)return G.current.forEach((e=>e())),void(G.current=[]);const s=e=>{if(e){var i;const s=e.getGui();null===(i=L.current)||void 0===i||i.insertAdjacentElement("afterbegin",s),G.current.push((()=>{t.destroyBean(e),(0,o.taW)(s)}))}return e};if(S){s(i.createSelectionCheckbox())}F&&s(i.createDndSource()),b&&s(i.createRowDragComp())}),[i,t,F,b,S]),Y=(0,s.useCallback)((e=>{if(I.current=e,!I.current)return;if(!i)return;const t={addOrRemoveCssClass:(e,t)=>K.current.addOrRemoveCssClass(e,t),setUserStyles:e=>w(e),getFocusableElement:()=>I.current,setIncludeSelection:e=>y(e),setIncludeRowDrag:e=>R(e),setIncludeDndSource:e=>E(e),getCellEditor:()=>k.current||null,getCellRenderer:()=>T.current?T.current:A.current,getParentOfValue:()=>N.current?N.current:L.current?L.current:I.current,setRenderDetails:(e,t,i)=>{p((s=>(null===s||void 0===s?void 0:s.compDetails)!==e||(null===s||void 0===s?void 0:s.value)!==t||(null===s||void 0===s?void 0:s.force)!==i?{value:t,compDetails:e,force:i}:s))},setEditDetails:(e,t,i,s)=>{if(e){let o;s?o=new $(e.params,(()=>f((e=>e+1)))):e.componentFromFramework&&O(),m({compDetails:e,popup:t,popupPosition:i,compProxy:o}),t||p(void 0)}else m((e=>{null!==e&&void 0!==e&&e.compProxy&&(k.current=void 0)}))}},s=L.current||void 0;i.setComp(t,I.current,s,n,l)}),[]),q=(0,s.useMemo)((()=>!!(h&&h.compDetails&&h.compDetails.componentFromFramework&&u(h.compDetails.componentClass))),[h]);(0,s.useLayoutEffect)((()=>{var e;I.current&&(K.current.addOrRemoveCssClass("ag-cell-value",!W),K.current.addOrRemoveCssClass("ag-cell-inline-editing",!!g&&!g.popup),K.current.addOrRemoveCssClass("ag-cell-popup-editing",!!g&&!!g.popup),K.current.addOrRemoveCssClass("ag-cell-not-inline-editing",!g||!!g.popup),null===(e=i.getRowCtrl())||void 0===e||e.setInlineEditingCss(!!g),i.shouldRestoreFocus()&&!i.isEditing()&&I.current.focus({preventScroll:!0}))}));const Q=()=>s.createElement(s.Fragment,null,null!=h&&((e,t,i,o,n,r,l)=>{const{compDetails:a,value:d}=e,c=!a,u=a&&a.componentFromFramework,h=a&&a.componentClass,p=null!==d&&void 0!==d&&d.toString?d.toString():d,g=()=>s.createElement(s.Fragment,null,c&&s.createElement(s.Fragment,null,p),u&&!r&&s.createElement(h,{...a.params,key:t,ref:o}),u&&r&&s.createElement(h,{...a.params,key:t}));return s.createElement(s.Fragment,null,n?s.createElement("span",{role:"presentation",id:"cell-".concat(i),className:"ag-cell-value",ref:l},g()):g())})(h,v,c,T,W,q,H),null!=g&&((e,t,i,o,n,r)=>{const l=e.compDetails,a=l.componentClass,d=l.componentFromFramework&&!e.popup,c=l.componentFromFramework&&e.popup,u=!l.componentFromFramework&&e.popup;return s.createElement(s.Fragment,null,d&&ie(e,a,t),c&&s.createElement(ee,{editDetails:e,cellCtrl:n,eParentCell:o,wrappedContent:ie(e,a,i)}),u&&r&&s.createElement(ee,{editDetails:e,cellCtrl:n,eParentCell:o,jsChildComp:r}))})(g,_,U,I.current,i,x));return s.createElement("div",{ref:Y,style:C,tabIndex:a,role:D,"col-id":d},W?s.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:j},Q()):Q())},oe=(0,s.memo)(se),ne=e=>{const{context:t,gos:i}=(0,s.useContext)(r),{rowCtrl:n,containerType:a}=e,d=n.getTabIndex(),c=(0,s.useRef)(n.getDomOrder()),h=n.isFullWidth(),p=n.getRowNode().displayed,[v,f]=(0,s.useState)((()=>p?n.getRowIndex():null)),[C,w]=(0,s.useState)((()=>n.getRowId())),[S,y]=(0,s.useState)((()=>n.getBusinessKey())),[b,R]=(0,s.useState)((()=>n.getRowStyles())),F=(0,s.useRef)(null),E=(0,s.useRef)(null),[x,P]=(0,s.useState)((()=>null)),[M,D]=(0,s.useState)(),[I,T]=(0,s.useState)((()=>p?n.getInitialRowTop(a):void 0)),[A,k]=(0,s.useState)((()=>p?n.getInitialTransform(a):void 0)),L=(0,s.useRef)(null),G=(0,s.useRef)(),N=(0,s.useRef)(!1),[O,B]=(0,s.useState)(0);(0,s.useEffect)((()=>{var e;if(N.current)return;if(!M)return;if(O>10)return;const t=null===(e=L.current)||void 0===e?void 0:e.firstChild;t?(n.setupDetailRowAutoHeight(t),N.current=!0):B((e=>e+1))}),[M,O]);const V=(0,s.useRef)();V.current||(V.current=new o.fRQ((()=>L.current)));const H=(0,s.useCallback)((e=>{if(L.current=e,!L.current)return void n.unsetComp(a);if(!n.isAlive())return;const t={setTop:T,setTransform:k,addOrRemoveCssClass:(e,t)=>V.current.addOrRemoveCssClass(e,t),setDomOrder:e=>c.current=e,setRowIndex:f,setRowId:w,setRowBusinessKey:y,setUserStyles:R,setCellCtrls:(e,t)=>{E.current=F.current,F.current=e;const i=m(E.current,e,c.current);i!==E.current&&g(t,(()=>P(i)))},showFullWidth:e=>D(e),getFullWidthCellRenderer:()=>G.current,refreshFullWidth:e=>K.current?(D((t=>({...t,params:e()}))),!0):!(!G.current||!G.current.refresh)&&G.current.refresh(e())};n.setComp(t,L.current,a)}),[]);(0,s.useLayoutEffect)((()=>l(M,t,L.current,G)),[M]);const W=(0,s.useMemo)((()=>{const e={top:I,transform:A};return Object.assign(e,b),e}),[I,A,b]),z=h&&M&&M.componentFromFramework,U=!h&&null!=x,_=(0,s.useMemo)((()=>!!((null===M||void 0===M?void 0:M.componentFromFramework)&&u(M.componentClass))),[M]),K=(0,s.useRef)(!1);(0,s.useEffect)((()=>{K.current=_&&!!M&&!!i.get("reactiveCustomComponents")}),[_,M]);return s.createElement("div",{ref:H,role:"row",style:W,"row-index":v,"row-id":C,"row-business-key":S,tabIndex:d},U&&(null===x||void 0===x?void 0:x.map((e=>s.createElement(oe,{cellCtrl:e,editingRow:n.isEditing(),printLayout:n.isPrintLayout(),key:e.getInstanceId()})))),z&&(()=>{const e=M.componentClass;return s.createElement(s.Fragment,null,_&&s.createElement(e,{...M.params}),!_&&s.createElement(e,{...M.params,ref:G}))})())},re=(0,s.memo)(ne),le=e=>{const{context:t}=(0,s.useContext)(r),{name:i}=e,n=(0,s.useMemo)((()=>(0,o.TjA)(i)),[i]),l=(0,s.useRef)(null),a=(0,s.useRef)(null),c=(0,s.useRef)([]),u=(0,s.useRef)([]),[h,p]=(0,s.useState)((()=>[])),v=(0,s.useRef)(!1),f=(0,s.useRef)(),C=(0,s.useMemo)((()=>d(n.viewport)),[n]),w=(0,s.useMemo)((()=>d(n.container)),[n]),S="center"===n.type;X(" AG Row Container "+i+" ",S?l:a);const y=(0,s.useCallback)((()=>S?null!=l.current&&null!=a.current:null!=a.current),[]),b=(0,s.useCallback)((()=>S?null==l.current&&null==a.current:null==a.current),[]),R=(0,s.useCallback)((()=>{if(b()&&(t.destroyBean(f.current),f.current=null),y()){const e=e=>{const t=m(u.current,c.current,v.current);t!==u.current&&(u.current=t,g(e,(()=>p(t))))},s={setViewportHeight:e=>{l.current&&(l.current.style.height=e)},setRowCtrls:t=>{let{rowCtrls:i,useFlushSync:s}=t;const o=!!s&&c.current.length>0&&i.length>0;c.current=i,e(o)},setDomOrder:t=>{v.current!=t&&(v.current=t,e(!1))},setContainerWidth:e=>{a.current&&(a.current.style.width=e)},setOffsetTop:e=>{a.current&&(a.current.style.transform="translateY(".concat(e,")"))}};f.current=t.createBean(new o.RiB(i)),f.current.setComp(s,a.current,l.current)}}),[y,b]),F=(0,s.useCallback)((e=>{a.current=e,R()}),[R]),E=(0,s.useCallback)((e=>{l.current=e,R()}),[R]),x=()=>s.createElement("div",{className:w,ref:F,role:"rowgroup"},h.map((e=>s.createElement(re,{rowCtrl:e,containerType:n.type,key:e.getInstanceId()}))));return s.createElement(s.Fragment,null,S?s.createElement("div",{className:C,ref:E,role:"presentation"},x()):x())},ae=(0,s.memo)(le),de=()=>{const{context:e,resizeObserverService:t}=(0,s.useContext)(r),[i,n]=(0,s.useState)(""),[l,a]=(0,s.useState)(0),[c,u]=(0,s.useState)(0),[h,p]=(0,s.useState)("0px"),[g,m]=(0,s.useState)("0px"),[v,f]=(0,s.useState)("100%"),[C,w]=(0,s.useState)("0px"),[S,y]=(0,s.useState)("0px"),[b,R]=(0,s.useState)("100%"),[F,E]=(0,s.useState)(""),[x,P]=(0,s.useState)(""),[M,D]=(0,s.useState)(null),[I,T]=(0,s.useState)(""),[A,k]=(0,s.useState)(null),[L,G]=(0,s.useState)("ag-layout-normal"),N=(0,s.useRef)();N.current||(N.current=new o.fRQ((()=>O.current)));const O=(0,s.useRef)(null),B=(0,s.useRef)(null),V=(0,s.useRef)(null),H=(0,s.useRef)(null),W=(0,s.useRef)(null),z=(0,s.useRef)(null),U=(0,s.useRef)(null),_=(0,s.useRef)([]),K=(0,s.useRef)([]);X(" AG Grid Body ",O),X(" AG Pinned Top ",B),X(" AG Sticky Top ",V),X(" AG Middle ",z),X(" AG Pinned Bottom ",U);const Z=(0,s.useCallback)((i=>{if(O.current=i,!O.current)return e.destroyBeans(_.current),K.current.forEach((e=>e())),_.current=[],void(K.current=[]);if(!e)return;const s=(e,t)=>{e.appendChild(t),K.current.push((()=>e.removeChild(t)))},r=(t,i,o)=>{s(t,document.createComment(o)),s(t,(t=>{const i=e.createBean(new t);return _.current.push(i),i})(i).getGui())};r(O.current,o.iVQ," AG Fake Horizontal Scroll "),r(O.current,o.lsF," AG Overlay Wrapper "),W.current&&r(W.current,o._P_," AG Fake Vertical Scroll ");const l={setRowAnimationCssOnBodyViewport:n,setColumnCount:e=>{O.current&&(0,o.FN9)(O.current,e)},setRowCount:e=>{O.current&&(0,o.OtO)(O.current,e)},setTopHeight:a,setBottomHeight:u,setStickyTopHeight:p,setStickyTopTop:m,setStickyTopWidth:f,setTopDisplay:E,setBottomDisplay:P,setColumnMovingCss:(e,t)=>N.current.addOrRemoveCssClass(e,t),updateLayoutClasses:G,setAlwaysVerticalScrollClass:D,setPinnedTopBottomOverflowY:T,setCellSelectableCss:(e,t)=>k(t?e:null),setBodyViewportWidth:e=>{z.current&&(z.current.style.width=e)},registerBodyViewportResizeListener:e=>{if(z.current){const i=t.observeResize(z.current,e);K.current.push((()=>i()))}},setStickyBottomHeight:w,setStickyBottomBottom:y,setStickyBottomWidth:R},d=e.createBean(new o.wox);_.current.push(d),d.setComp(l,O.current,z.current,B.current,U.current,V.current,H.current)}),[]),j=(0,s.useMemo)((()=>d("ag-root","ag-unselectable",L)),[L]),Y=(0,s.useMemo)((()=>d("ag-body-viewport",i,L,M,A)),[i,L,M,A]),q=(0,s.useMemo)((()=>d("ag-body",L)),[L]),$=(0,s.useMemo)((()=>d("ag-floating-top",A)),[A]),J=(0,s.useMemo)((()=>d("ag-sticky-top",A)),[A]),ee=(0,s.useMemo)((()=>d("ag-sticky-bottom",A)),[A]),te=(0,s.useMemo)((()=>d("ag-floating-bottom",A)),[A]),ie=(0,s.useMemo)((()=>({height:l,minHeight:l,display:F,overflowY:I})),[l,F,I]),se=(0,s.useMemo)((()=>({height:h,top:g,width:v})),[h,g,v]),oe=(0,s.useMemo)((()=>({height:C,bottom:S,width:b})),[C,S,b]),ne=(0,s.useMemo)((()=>({height:c,minHeight:c,display:x,overflowY:I})),[c,x,I]),re=e=>s.createElement(ae,{name:e,key:"".concat(e,"-container")}),le=e=>{let{section:t,children:i,className:o,style:n}=e;return s.createElement("div",{ref:t,className:o,role:"presentation",style:n},i.map(re))};return s.createElement("div",{ref:Z,className:j,role:"treegrid"},s.createElement(Q,null),le({section:B,className:$,style:ie,children:["topLeft","topCenter","topRight","topFullWidth"]}),s.createElement("div",{className:q,ref:W,role:"presentation"},le({section:z,className:Y,children:["left","center","right","fullWidth"]})),le({section:V,className:J,style:se,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),le({section:H,className:ee,style:oe,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),le({section:U,className:te,style:ne,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},ce=(0,s.memo)(de),ue=(e,t)=>{const{children:i,eFocusableElement:n,onTabKeyDown:l,gridCtrl:a,forceFocusOutWhenTabGuardsAreEmpty:d}=e,{context:c}=(0,s.useContext)(r),u=(0,s.useRef)(null),h=(0,s.useRef)(null),p=(0,s.useRef)(),g=e=>{const t=null==e?void 0:parseInt(e,10).toString();[u,h].forEach((e=>{var i,s;void 0===t?null===(i=e.current)||void 0===i||i.removeAttribute("tabindex"):null===(s=e.current)||void 0===s||s.setAttribute("tabindex",t)}))};(0,s.useImperativeHandle)(t,(()=>({forceFocusOutOfContainer(e){var t;null===(t=p.current)||void 0===t||t.forceFocusOutOfContainer(e)}})));const m=(0,s.useCallback)((()=>{if(!u.current&&!h.current)return c.destroyBean(p.current),void(p.current=null);if(u.current&&h.current){const e={setTabIndex:g};p.current=c.createBean(new o.s$r({comp:e,eTopGuard:u.current,eBottomGuard:h.current,eFocusableElement:n,onTabKeyDown:l,forceFocusOutWhenTabGuardsAreEmpty:d,focusInnerElement:e=>a.focusInnerElement(e)}))}}),[]),v=(0,s.useCallback)((e=>{u.current=e,m()}),[m]),f=(0,s.useCallback)((e=>{h.current=e,m()}),[m]),C=e=>{const t="top"===e?o.zn.TAB_GUARD_TOP:o.zn.TAB_GUARD_BOTTOM;return s.createElement("div",{className:"".concat(o.zn.TAB_GUARD," ").concat(t),role:"presentation",ref:"top"===e?v:f})};return s.createElement(s.Fragment,null,C("top"),i,C("bottom"))},he=(0,s.forwardRef)(ue),pe=(0,s.memo)(he),ge=e=>{let{context:t}=e;const[i,n]=(0,s.useState)(""),[l,a]=(0,s.useState)(""),[c,u]=(0,s.useState)(null),[h,p]=(0,s.useState)(null),[g,m]=(0,s.useState)(!1),[v,f]=(0,s.useState)(),C=(0,s.useRef)(null),w=(0,s.useRef)(null),S=(0,s.useRef)(),[y,b]=(0,s.useState)(null),R=(0,s.useRef)((()=>{})),F=(0,s.useRef)(),E=(0,s.useRef)([]),x=(0,s.useCallback)((()=>{}),[]),P=(0,s.useMemo)((()=>t.isDestroyed()?null:t.getBeans()),[t]);X(" AG Grid ",w);const M=(0,s.useCallback)((e=>{if(w.current=e,!w.current)return t.destroyBean(C.current),void(C.current=null);if(t.isDestroyed())return;C.current=t.createBean(new o.l3s);const i=C.current;R.current=i.focusInnerElement.bind(i);const s={destroyGridUi:()=>{},setRtlClass:n,forceFocusOutOfContainer:e=>{var t,i;e||null===(t=F.current)||void 0===t||!t.isDisplayed()?null===(i=S.current)||void 0===i||i.forceFocusOutOfContainer(e):F.current.forceFocusOutOfContainer(e)},updateLayoutClasses:a,getFocusableContainers:()=>{var e;const t=[],i=null===(e=w.current)||void 0===e?void 0:e.querySelector(".ag-root");return i&&t.push({getGui:()=>i}),E.current.forEach((e=>{e.isDisplayed()&&t.push(e)})),t},setCursor:u,setUserSelect:p};i.setComp(s,w.current,w.current),m(!0)}),[]);(0,s.useEffect)((()=>{if(!v||!P||!C.current||!y||!w.current)return;const e=C.current,i=[],{watermarkSelector:s,paginationSelector:o,sideBarSelector:n,statusBarSelector:r,gridHeaderDropZonesSelector:l}=e.getOptionalSelectors(),a=[],d=w.current;if(l){const e=t.createBean(new l.component),s=e.getGui();d.insertAdjacentElement("afterbegin",s),a.push(s),i.push(e)}if(n){const e=t.createBean(new n.component),s=e.getGui(),o=y.querySelector(".ag-tab-guard-bottom");o&&(o.insertAdjacentElement("beforebegin",s),a.push(s)),i.push(e),E.current.push(e)}const c=e=>{const s=t.createBean(new e),o=s.getGui();return d.insertAdjacentElement("beforeend",o),a.push(o),i.push(s),s};if(r&&c(r.component),o){const e=c(o.component);F.current=e,E.current.push(e)}return s&&c(s.component),()=>{t.destroyBeans(i),a.forEach((e=>{e.parentElement&&e.parentElement.removeChild(e)}))}}),[v,y,P]);const D=(0,s.useMemo)((()=>d("ag-root-wrapper",i,l)),[i,l]),I=(0,s.useMemo)((()=>d("ag-root-wrapper-body","ag-focus-managed",l)),[l]),T=(0,s.useMemo)((()=>({userSelect:null!=h?h:"",WebkitUserSelect:null!=h?h:"",cursor:null!=c?c:""})),[h,c]),A=(0,s.useCallback)((e=>{S.current=e,f(null!==e)}),[]);return s.createElement("div",{ref:M,className:D,style:T,role:"presentation"},s.createElement("div",{className:I,ref:b,role:"presentation"},g&&y&&P&&s.createElement(r.Provider,{value:P},s.createElement(pe,{ref:A,eFocusableElement:y,onTabKeyDown:x,gridCtrl:C.current,forceFocusOutWhenTabGuardsAreEmpty:!0},s.createElement(ce,null)))))},me=(0,s.memo)(ge),ve=class extends o.AS9{wireBeans(e){this.ctrlsService=e.ctrlsService}areHeaderCellsRendered(){return this.ctrlsService.getHeaderRowContainerCtrls().every((e=>e.getAllCtrls().every((e=>e.areCellsRendered()))))}},fe=e=>{var t,i;const n=(0,s.useRef)(),r=(0,s.useRef)(null),l=(0,s.useRef)(null),a=(0,s.useRef)([]),d=(0,s.useRef)([]),c=(0,s.useRef)(e),u=(0,s.useRef)(),p=(0,s.useRef)(!1),[g,m]=(0,s.useState)(void 0),[,v]=(0,s.useState)(0),f=(0,s.useCallback)((t=>{var i;if(r.current=t,!r.current)return a.current.forEach((e=>e())),void(a.current.length=0);const s=e.modules||[];l.current||(l.current=new B((()=>v((e=>e+1))),e.componentWrappingElement,e.maxComponentCreationTimeMs),a.current.push((()=>{var e;null===(e=l.current)||void 0===e||e.destroy(),l.current=null})));const c=(0,o.F97)(e.gridOptions,e),g=h?new Se:new ye((()=>{if(p.current){const e=()=>{var e;return null!==(e=u.current)&&void 0!==e&&e.shouldQueueUpdates()?void 0:d.current.shift()};let t=e();for(;t;)t(),t=e()}}));u.current=g;const f=new ve,C={providedBeanInstances:{frameworkComponentWrapper:new Ce(l.current,null===(i=c.reactiveCustomComponents)||void 0===i||i),renderStatusService:f},modules:s,frameworkOverrides:g},w=new o.zmG;n.current=w.create(r.current,c,(t=>{m(t),t.createBean(f),a.current.push((()=>{t.destroy()}));t.getBean("ctrlsService").whenReady((()=>{if(t.isDestroyed())return;const i=n.current;i&&e.setGridApi&&e.setGridApi(i)}))}),(e=>{e.getBean("ctrlsService").whenReady((()=>{d.current.forEach((e=>e())),d.current.length=0,p.current=!0}))}),C)}),[]),C=(0,s.useMemo)((()=>({height:"100%",...e.containerStyle||{}})),[e.containerStyle]),w=(0,s.useCallback)((e=>{var t;!p.current||null!==(t=u.current)&&void 0!==t&&t.shouldQueueUpdates()?d.current.push(e):e()}),[]);return(0,s.useEffect)((()=>{const t=function(e,t){const i={};return Object.keys(t).forEach((s=>{const o=t[s];e[s]!==o&&(i[s]=o)})),i}(c.current,e);c.current=e,w((()=>{n.current&&(0,o.UgJ)(t,n.current)}))}),[e]),s.createElement("div",{style:C,className:e.className,ref:f},g&&!g.isDestroyed()?s.createElement(me,{context:g}):null,null!==(t=null===(i=l.current)||void 0===i?void 0:i.getPortals())&&void 0!==t?t:null)};var Ce=class extends o.Nk3{constructor(e,t){super(),this.parent=e,this.reactiveCustomComponents=t}createWrapper(e,t){if(this.reactiveCustomComponents){const i=(e=>{switch(e){case"filter":return M;case"floatingFilterComponent":return T;case"dateComponent":return P;case"loadingOverlayComponent":return A;case"noRowsOverlayComponent":return L;case"statusPanel":return G;case"toolPanel":return N;case"menuItem":return k;case"cellRenderer":return x}})(t.propertyName);if(i)return new i(e,this.parent,t)}else switch(t.propertyName){case"filter":case"floatingFilterComponent":case"dateComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":O()}const i=!t.cellRenderer&&"toolPanel"!==t.propertyName;return new R(e,this.parent,t,i)}},we=(0,s.forwardRef)(((e,t)=>{const{ctrlsFactory:i,context:n,gos:l,resizeObserverService:a,rowModel:d}=(0,s.useContext)(r),[u,h]=(0,s.useState)((()=>new c)),[p,g]=(0,s.useState)((()=>new c)),[m,v]=(0,s.useState)(),[f,C]=(0,s.useState)(),w=(0,s.useRef)(),S=(0,s.useRef)(null),y=(0,s.useRef)(),b=(0,s.useMemo)((()=>o.O3h.__getGridRegisteredModules(e.api.getGridId())),[e]),R=(0,s.useMemo)((()=>u.toString()+" ag-details-row"),[u]),F=(0,s.useMemo)((()=>p.toString()+" ag-details-grid"),[p]);t&&(0,s.useImperativeHandle)(t,(()=>({refresh(){var e,t;return null!==(e=null===(t=w.current)||void 0===t?void 0:t.refresh())&&void 0!==e&&e}}))),e.template&&(0,o.Brh)("detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://ag-grid.com/react-data-grid/master-detail-custom-detail/");const E=(0,s.useCallback)((t=>{if(S.current=t,!S.current)return n.destroyBean(w.current),void(y.current&&y.current());const s={addOrRemoveCssClass:(e,t)=>h((i=>i.setClass(e,t))),addOrRemoveDetailGridCssClass:(e,t)=>g((i=>i.setClass(e,t))),setDetailGrid:e=>v(e),setRowData:e=>C(e),getGui:()=>S.current},o=i.getInstance("detailCellRenderer");if(o&&(n.createBean(o),o.init(s,e),w.current=o,l.get("detailRowAutoHeight"))){const t=()=>{if(null==S.current)return;const t=S.current.clientHeight;if(null!=t&&t>0){setTimeout((()=>{e.node.setRowHeight(t),("clientSide"===d.getType()||"serverSide"===d.getType())&&d.onRowHeightChanged()}),0)}};y.current=a.observeResize(S.current,t),t()}}),[]),x=(0,s.useCallback)((e=>{var t;null===(t=w.current)||void 0===t||t.registerDetailWithMaster(e)}),[]);return s.createElement("div",{className:R,ref:E},m&&s.createElement(fe,{className:F,...m,modules:b,rowData:f,setGridApi:x}))})),Se=class extends o.vA3{constructor(){super("react"),this.frameworkComponents={agGroupCellRenderer:f,agGroupRowRenderer:f,agDetailCellRenderer:we},this.wrapIncoming=(e,t)=>{return"ensureVisible"===t?(i=e,p||setTimeout((()=>p=!1),0),p=!0,i()):e();var i},this.renderingEngine="react"}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const t=e.prototype;return!(t&&"getGui"in t)}shouldQueueUpdates(){return!1}getLockOnRefreshError(){return" This error can also occur if using 'ReactDOM.render' instead of 'createRoot'. If so, please upgrade to 'createRoot'."}},ye=class extends Se{constructor(e){super(),this.processQueuedUpdates=e,this.queueUpdates=!1}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}getLockOnRefreshError(){return""}},be=class extends s.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e,this.apiListeners.forEach((t=>t(e)))}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return s.createElement(fe,{...this.props,setGridApi:this.setGridApi})}};function Re(e){const{setMethods:t}=(0,s.useContext)(C);t(e)}function Fe(e){Re(e)}},11214:(e,t,i)=>{"use strict";i.d(t,{I:()=>g});var s=i(30845),o=i(7154),n=i(8701);var r="paste",l="dragCopy",a="clipboard",d=e=>"AG Grid: Unable to use the Clipboard API (navigator.clipboard.".concat(e,"()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API."),c=class e extends s.AS9{constructor(){super(...arguments),this.beanName="clipboardService",this.lastPasteOperationTime=0,this.navigatorApiFailed=!1}wireBeans(e){this.csvCreator=e.csvCreator,this.selectionService=e.selectionService,this.rowModel=e.rowModel,this.ctrlsService=e.ctrlsService,this.valueService=e.valueService,this.focusService=e.focusService,this.rowRenderer=e.rowRenderer,this.visibleColsService=e.visibleColsService,this.funcColsService=e.funcColsService,this.cellNavigationService=e.cellNavigationService,this.cellPositionUtils=e.cellPositionUtils,this.rowPositionUtils=e.rowPositionUtils,this.rangeService=e.rangeService}postConstruct(){"clientSide"===this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady((e=>{this.gridCtrl=e.gridCtrl}))}pasteFromClipboard(){!this.gos.get("suppressClipboardApi")&&!this.navigatorApiFailed&&navigator.clipboard&&navigator.clipboard.readText?navigator.clipboard.readText().then(this.processClipboardData.bind(this)).catch((e=>{(0,s.Brh)("".concat(e,"\n").concat(d("readText"))),this.navigatorApiFailed=!0,this.pasteFromClipboardLegacy()})):this.pasteFromClipboardLegacy()}pasteFromClipboardLegacy(){let e=!1;const t=t=>{const i=(new Date).getTime();i-this.lastPasteOperationTime<50&&(e=!0,t.preventDefault()),this.lastPasteOperationTime=i};this.executeOnTempElement((e=>{e.addEventListener("paste",t),e.focus({preventScroll:!0})}),(i=>{const s=i.value;e?this.refocusLastFocusedCell():this.processClipboardData(s),i.removeEventListener("paste",t)}))}refocusLastFocusedCell(){const e=this.focusService.getFocusedCell();e&&this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0})}getClipboardDelimiter(){const e=this.gos.get("clipboardDelimiter");return(0,s.fTC)(e)?e:"\t"}processClipboardData(t){if(null==t)return;let i=e.stringToArray(t,this.getClipboardDelimiter());const s=this.gos.getCallback("processDataFromClipboard");if(s&&(i=s({data:i})),null==i)return;this.gos.get("suppressLastEmptyLineOnPaste")&&this.removeLastLineIfBlank(i);this.doPasteOperation(((e,t,s,o)=>{var n;(null===(n=this.rangeService)||void 0===n?void 0:n.isMoreThanOneCell())&&!this.hasOnlyOneValueToPaste(i)?this.pasteIntoActiveRange(this.rangeService,i,e,t,o):this.pasteStartingFromFocusedCell(i,e,t,s,o)}))}static stringToArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";const i=[],s=e=>"\r"===e||"\n"===e;let o=!1;if(""===e)return[[""]];for(let n=0,r=0,l=0;l<e.length;l++){const a=e[l-1],d=e[l],c=e[l+1],u=()=>{i[n]||(i[n]=[]),i[n][r]||(i[n][r]="")};if(u(),'"'===d&&(o?'"'===c?(i[n][r]+='"',l++):o=!1:(void 0===a||a===t||s(a))&&(o=!0)),!o&&'"'!==d){if(d===t){r++,u();continue}if(s(d)){r=0,n++,u(),"\r"===d&&"\n"===c&&l++;continue}}i[n][r]+=d}return i}doPasteOperation(e){const t="clipboard";let i;if(this.eventService.dispatchEvent({type:"pasteStart",source:t}),this.clientSideRowModel){const e=this.gos.get("aggregateOnlyChangedColumns");i=new s.Dkq(e,this.clientSideRowModel.getRootNode())}const o={},n=[];e(o,n,this.focusService.getFocusedCell(),i);const r=[...n];i&&(this.clientSideRowModel.doAggregate(i),i.forEachChangedNodeDepthFirst((e=>{r.push(e)}))),this.rowRenderer.refreshCells({rowNodes:r}),this.dispatchFlashCells(o),this.fireRowChanged(n),this.refocusLastFocusedCell();const l={type:"pasteEnd",source:t};this.eventService.dispatchEvent(l)}pasteIntoActiveRange(e,t,i,s,o){const n=this.getRangeSize(e)%t.length!=0;let a=0,d=0;this.iterateActiveRanges(!1,((e,c,u,h)=>{if(h-a>=t.length){if(n)return;a+=d,d=0}const p=t[h-a];s.push(c);const g=this.gos.getCallback("processCellFromClipboard");u.forEach(((t,s)=>{if(!t.isCellEditable(c)||t.isSuppressPaste(c))return;s>=p.length&&(s%=p.length);const n=this.processCell(c,t,p[s],l,g,!0);c.setDataValue(t,n,r),o&&o.addParentNode(c.parent,[t]);const{rowIndex:a,rowPinned:d}=e,u=this.cellPositionUtils.createIdFromValues({rowIndex:a,column:t,rowPinned:d});i[u]=!0})),d++}))}getDisplayedColumnsStartingAt(e){let t=e;const i=[];for(;null!=t;)i.push(t),t=this.visibleColsService.getColAfter(t);return i}pasteStartingFromFocusedCell(e,t,i,s,o){if(!s)return;const n={rowIndex:s.rowIndex,rowPinned:s.rowPinned},r=this.getDisplayedColumnsStartingAt(s.column);this.isPasteSingleValueIntoRange(e)?this.pasteSingleValueIntoRange(e,i,t,o):this.pasteMultipleValues(e,n,i,r,t,a,o)}isPasteSingleValueIntoRange(e){return this.hasOnlyOneValueToPaste(e)&&null!=this.rangeService&&!this.rangeService.isEmpty()}pasteSingleValueIntoRange(e,t,i,s){const o=e[0][0];this.iterateActiveRanges(!1,((e,n,r)=>{t.push(n),r.forEach((e=>this.updateCellValue(n,e,o,i,a,s)))}))}hasOnlyOneValueToPaste(e){return 1===e.length&&1===e[0].length}copyRangeDown(){if(!this.rangeService||this.rangeService.isEmpty())return;const e=[];this.doPasteOperation(((t,i,s,o)=>{const n=this.gos.getCallback("processCellForClipboard"),a=this.gos.getCallback("processCellFromClipboard");this.iterateActiveRanges(!0,((s,d,c)=>{e.length?(i.push(d),c.forEach(((i,n)=>{if(!i.isCellEditable(d)||i.isSuppressPaste(d))return;const c=this.processCell(d,i,e[n],l,a,!0);d.setDataValue(i,c,r),o&&o.addParentNode(d.parent,[i]);const{rowIndex:u,rowPinned:h}=s,p=this.cellPositionUtils.createIdFromValues({rowIndex:u,column:i,rowPinned:h});t[p]=!0}))):c.forEach((t=>{const i=this.processCell(d,t,this.valueService.getValue(t,d),l,n,!1,!0);e.push(i)}))}))}))}removeLastLineIfBlank(e){const t=(0,s._O9)(e);if(t&&1===t.length&&""===t[0]){if(1===e.length)return;(0,s.Pi9)(e,t)}}fireRowChanged(e){"fullRow"===this.gos.get("editType")&&e.forEach((e=>{const t={type:"rowValueChanged",node:e,data:e.data,rowIndex:e.rowIndex,rowPinned:e.rowPinned};this.eventService.dispatchEvent(t)}))}pasteMultipleValues(e,t,i,s,o,n,r){let l=t;const a=null!=this.clientSideRowModel&&!this.gos.get("enableGroupEdit")&&!this.gos.get("treeData"),d=()=>{for(;;){if(!l)return null;const e=this.rowPositionUtils.getRowNode(l);if(l=this.cellNavigationService.getRowBelow({rowPinned:l.rowPinned,rowIndex:l.rowIndex}),null==e)return null;if(!(e.detail||e.footer||a&&e.group))return e}};e.forEach((e=>{const t=d();t&&(e.forEach(((e,i)=>this.updateCellValue(t,s[i],e,o,n,r))),i.push(t))}))}updateCellValue(e,t,i,s,o,n){if(!e||!t||!t.isCellEditable(e)||t.isSuppressPaste(e))return;if(e.group&&t.isValueActive())return;const l=this.processCell(e,t,i,o,this.gos.getCallback("processCellFromClipboard"),!0);e.setDataValue(t,l,r);const{rowIndex:a,rowPinned:d}=e;s[this.cellPositionUtils.createIdFromValues({rowIndex:a,column:t,rowPinned:d})]=!0,n&&n.addParentNode(e.parent,[t])}copyToClipboard(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.copyOrCutToClipboard(e)}cutToClipboard(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";if(this.gos.get("suppressCutToClipboard"))return;const i={type:"cutStart",source:t};this.eventService.dispatchEvent(i),this.copyOrCutToClipboard(e,!0);const s={type:"cutEnd",source:t};this.eventService.dispatchEvent(s)}copyOrCutToClipboard(e,t){let{includeHeaders:i,includeGroupHeaders:s}=e;null==i&&(i=this.gos.get("copyHeadersToClipboard")),null==s&&(s=this.gos.get("copyGroupHeadersToClipboard"));const o={includeHeaders:i,includeGroupHeaders:s},n=!this.gos.get("suppressCopyRowsToClipboard");let r=null;!this.rangeService||this.rangeService.isEmpty()||this.shouldSkipSingleCellRange(this.rangeService)?n&&!this.selectionService.isEmpty()?(this.copySelectedRowsToClipboard(o),r=1):this.focusService.isAnyCellFocused()&&(this.copyFocusedCellToClipboard(o),r=2):(this.copySelectedRangeToClipboard(o),r=0),t&&null!==r&&this.clearCellsAfterCopy(r)}clearCellsAfterCopy(e){if(this.eventService.dispatchEvent({type:"keyShortcutChangedCellStart"}),0===e)this.rangeService.clearCellRangeCellValues({cellEventSource:"clipboardService"});else if(1===e)this.clearSelectedRows();else{const e=this.focusService.getFocusedCell();if(null==e)return;const t=this.rowPositionUtils.getRowNode(e);t&&this.clearCellValue(t,e.column)}this.eventService.dispatchEvent({type:"keyShortcutChangedCellEnd"})}clearSelectedRows(){const e=this.selectionService.getSelectedNodes(),t=this.visibleColsService.getAllCols();for(const i of e)for(const e of t)this.clearCellValue(i,e)}clearCellValue(e,t){var i;if(!t.isCellEditable(e))return;const s=null!==(i=this.valueService.parseValue(t,e,"",e.getValueFromValueService(t)))&&void 0!==i?i:null;e.setDataValue(t,s,"clipboardService")}shouldSkipSingleCellRange(e){return this.gos.get("suppressCopySingleCellRanges")&&!e.isMoreThanOneCell()}iterateActiveRanges(e,t,i){if(!this.rangeService||this.rangeService.isEmpty())return;const s=this.rangeService.getCellRanges();e?this.iterateActiveRange(s[0],t,i,!0):s.forEach(((e,o)=>this.iterateActiveRange(e,t,i,o===s.length-1)))}iterateActiveRange(e,t,i,s){if(!this.rangeService)return;let o=this.rangeService.getRangeStartRow(e);const n=this.rangeService.getRangeEndRow(e);i&&e.columns&&i(e.columns);let r=0,l=!1;for(;!l&&null!=o;){const i=this.rowPositionUtils.getRowNode(o);l=this.rowPositionUtils.sameRow(o,n),t(o,i,e.columns,r++,l&&s),o=this.cellNavigationService.getRowBelow(o)}}copySelectedRangeToClipboard(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.rangeService||this.rangeService.isEmpty())return;const t=this.rangeService.areAllRangesAbleToMerge(),{data:i,cellsToFlash:s}=t?this.buildDataFromMergedRanges(this.rangeService,e):this.buildDataFromRanges(this.rangeService,e);this.copyDataToClipboard(i),this.dispatchFlashCells(s)}buildDataFromMergedRanges(e,t){const i=new Set,s=e.getCellRanges(),o=new Map,n=[],r={};s.forEach((t=>{t.columns.forEach((e=>i.add(e)));const{rowPositions:s,cellsToFlash:l}=this.getRangeRowPositionsAndCellsToFlash(e,t);s.forEach((e=>{const t="".concat(e.rowIndex,"-").concat(e.rowPinned||"null");o.get(t)||(o.set(t,!0),n.push(e))})),Object.assign(r,l)}));const l=this.visibleColsService.getAllCols(),a=Array.from(i);a.sort(((e,t)=>l.indexOf(e)-l.indexOf(t)));return{data:this.buildExportParams({columns:a,rowPositions:n,includeHeaders:t.includeHeaders,includeGroupHeaders:t.includeGroupHeaders}),cellsToFlash:r}}buildDataFromRanges(e,t){const i=e.getCellRanges(),s=[],o={};return i.forEach((i=>{const{rowPositions:n,cellsToFlash:r}=this.getRangeRowPositionsAndCellsToFlash(e,i);Object.assign(o,r),s.push(this.buildExportParams({columns:i.columns,rowPositions:n,includeHeaders:t.includeHeaders,includeGroupHeaders:t.includeGroupHeaders}))})),{data:s.join("\n"),cellsToFlash:o}}getRangeRowPositionsAndCellsToFlash(e,t){const i=[],s={},o=e.getRangeStartRow(t),n=e.getRangeEndRow(t);let r=o;for(;r&&(i.push(r),t.columns.forEach((e=>{const{rowIndex:t,rowPinned:i}=r,o=this.cellPositionUtils.createIdFromValues({rowIndex:t,column:e,rowPinned:i});s[o]=!0})),!this.rowPositionUtils.sameRow(r,n));)r=this.cellNavigationService.getRowBelow(r);return{rowPositions:i,cellsToFlash:s}}getCellsToFlashFromRowNodes(e){const t=this.visibleColsService.getAllCols(),i={};for(let s=0;s<e.length;s++){const{rowIndex:o,rowPinned:n}=e[s];if(null!=o)for(let e=0;e<t.length;e++){const s=t[e];i[this.cellPositionUtils.createIdFromValues({rowIndex:o,column:s,rowPinned:n})]=!0}}return i}copyFocusedCellToClipboard(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.focusService.getFocusedCell();if(null==t)return;const i=this.cellPositionUtils.createId(t),s={rowPinned:t.rowPinned,rowIndex:t.rowIndex},o=t.column,n=this.buildExportParams({columns:[o],rowPositions:[s],includeHeaders:e.includeHeaders,includeGroupHeaders:e.includeGroupHeaders});this.copyDataToClipboard(n),this.dispatchFlashCells({[i]:!0})}copySelectedRowsToClipboard(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{columnKeys:t,includeHeaders:i,includeGroupHeaders:s}=e,o=this.buildExportParams({columns:t,includeHeaders:i,includeGroupHeaders:s});this.copyDataToClipboard(o);const n=this.selectionService.getSelectedNodes()||[];this.dispatchFlashCells(this.getCellsToFlashFromRowNodes(n))}buildExportParams(e){const{columns:t,rowPositions:i,includeHeaders:s=!1,includeGroupHeaders:o=!1}=e,n={columnKeys:t,rowPositions:i,skipColumnHeaders:!s,skipColumnGroupHeaders:!o,suppressQuotes:!0,columnSeparator:this.getClipboardDelimiter(),onlySelected:!i,processCellCallback:this.gos.getCallback("processCellForClipboard"),processRowGroupCallback:e=>this.processRowGroupCallback(e),processHeaderCallback:this.gos.getCallback("processHeaderForClipboard"),processGroupHeaderCallback:this.gos.getCallback("processGroupHeaderForClipboard")};return this.csvCreator.getDataAsCsv(n,!0)}processRowGroupCallback(e){const{node:t,column:i}=e,s=this.gos.get("treeData"),o=this.gos.get("suppressGroupMaintainValueType");let n=(()=>{var e,n;if(s||o||!i)return t.key;const r=null===(e=t.groupData)||void 0===e?void 0:e[i.getId()];return r&&t.rowGroupColumn&&!1!==t.rowGroupColumn.getColDef().useValueFormatterForExport&&null!==(n=this.valueService.formatValue(t.rowGroupColumn,t,r))&&void 0!==n?n:r})();if(e.node.footer){let e="";n&&n.length&&(e=" ".concat(n)),n="Total".concat(e)}const r=this.gos.getCallback("processCellForClipboard");if(r){let e=t.rowGroupColumn;return!e&&t.footer&&-1===t.level&&(e=this.funcColsService.getRowGroupColumns()[0]),r({value:n,node:t,column:e,type:"clipboard",formatValue:i=>{var s;return null!==(s=this.valueService.formatValue(e,t,i))&&void 0!==s?s:i},parseValue:i=>this.valueService.parseValue(e,t,i,this.valueService.getValue(e,t))})}return n}dispatchFlashCells(e){window.setTimeout((()=>{const t={type:"flashCells",cells:e};this.eventService.dispatchEvent(t)}),0)}processCell(e,t,i,s,o,n,r){if(o){return o({column:t,node:e,value:i,type:s,formatValue:i=>{var s;return null!==(s=this.valueService.formatValue(t,null!==e&&void 0!==e?e:null,i))&&void 0!==s?s:i},parseValue:i=>this.valueService.parseValue(t,null!==e&&void 0!==e?e:null,i,this.valueService.getValue(t,e))})}return n&&!1!==t.getColDef().useValueParserForImport?this.valueService.parseValue(t,null!==e&&void 0!==e?e:null,i,this.valueService.getValue(t,e)):r&&!1!==t.getColDef().useValueFormatterForExport&&null!==(l=this.valueService.formatValue(t,null!==e&&void 0!==e?e:null,i))&&void 0!==l?l:i;var l}copyDataToClipboard(e){const t=this.gos.getCallback("sendToClipboard");if(t)return void t({data:e});!this.gos.get("suppressClipboardApi")&&navigator.clipboard?navigator.clipboard.writeText(e).catch((t=>{(0,s.Brh)("".concat(t,"\n").concat(d("writeText"))),this.copyDataToClipboardLegacy(e)})):this.copyDataToClipboardLegacy(e)}copyDataToClipboardLegacy(e){this.executeOnTempElement((t=>{const i=this.gos.getDocument(),o=this.gos.getActiveDomElement();t.value=e||" ",t.select(),t.focus({preventScroll:!0});i.execCommand("copy")||(0,s.Brh)("Browser did not allow document.execCommand('copy'). Ensure api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons."),null!=o&&null!=o.focus&&o.focus({preventScroll:!0})}))}executeOnTempElement(e,t){const i=this.gos.getDocument(),o=i.createElement("textarea");o.style.width="1px",o.style.height="1px",o.style.top=i.documentElement.scrollTop+"px",o.style.left=i.documentElement.scrollLeft+"px",o.style.position="absolute",o.style.opacity="0";const n=this.gridCtrl.getGui();n.appendChild(o);try{e(o)}catch(r){(0,s.Brh)("Browser does not support document.execCommand('copy') for clipboard operations")}t?window.setTimeout((()=>{t(o),n.removeChild(o)}),100):n.removeChild(o)}getRangeSize(e){const t=e.getCellRanges();let i=0,s=0;return t.length>0&&(i=e.getRangeStartRow(t[0]).rowIndex,s=e.getRangeEndRow(t[0]).rowIndex),i-s+1}},u="32.0.1",h={version:u,moduleName:"".concat(s.GXE.ClipboardModule,"-core"),beans:[c],dependantModules:[n.f$,o.jM]},p={version:u,moduleName:"".concat(s.GXE.ClipboardModule,"-api"),apiFunctions:{copyToClipboard:function(e,t){var i;null===(i=e.clipboardService)||void 0===i||i.copyToClipboard(t)},cutToClipboard:function(e,t){var i;null===(i=e.clipboardService)||void 0===i||i.cutToClipboard(t)},copySelectedRowsToClipboard:function(e,t){var i;null===(i=e.clipboardService)||void 0===i||i.copySelectedRowsToClipboard(t)},copySelectedRangeToClipboard:function(e,t){var i;null===(i=e.clipboardService)||void 0===i||i.copySelectedRangeToClipboard(t)},copySelectedRangeDown:function(e){var t;null===(t=e.clipboardService)||void 0===t||t.copyRangeDown()},pasteFromClipboard:function(e){var t;null===(t=e.clipboardService)||void 0===t||t.pasteFromClipboard()}},dependantModules:[h]},g={version:u,moduleName:s.GXE.ClipboardModule,dependantModules:[h,p]}},8701:(e,t,i)=>{"use strict";i.d(t,{$z:()=>w,CP:()=>g,O_:()=>S,QE:()=>x,WD:()=>E,WN:()=>d,_3:()=>m,f$:()=>u,js:()=>c,nA:()=>P,x$:()=>F,xu:()=>v});var s=i(30845),o=class{constructor(){this.ieCompatibility=!1}init(){this.ieCompatibility="5d41402abc4b2a76b9719d911017c592"!=this.md5("hello")}md5cycle(e,t){let i=e[0],s=e[1],o=e[2],n=e[3];i=this.ff(i,s,o,n,t[0],7,-680876936),n=this.ff(n,i,s,o,t[1],12,-389564586),o=this.ff(o,n,i,s,t[2],17,606105819),s=this.ff(s,o,n,i,t[3],22,-1044525330),i=this.ff(i,s,o,n,t[4],7,-176418897),n=this.ff(n,i,s,o,t[5],12,1200080426),o=this.ff(o,n,i,s,t[6],17,-1473231341),s=this.ff(s,o,n,i,t[7],22,-45705983),i=this.ff(i,s,o,n,t[8],7,1770035416),n=this.ff(n,i,s,o,t[9],12,-1958414417),o=this.ff(o,n,i,s,t[10],17,-42063),s=this.ff(s,o,n,i,t[11],22,-1990404162),i=this.ff(i,s,o,n,t[12],7,1804603682),n=this.ff(n,i,s,o,t[13],12,-40341101),o=this.ff(o,n,i,s,t[14],17,-1502002290),s=this.ff(s,o,n,i,t[15],22,1236535329),i=this.gg(i,s,o,n,t[1],5,-165796510),n=this.gg(n,i,s,o,t[6],9,-1069501632),o=this.gg(o,n,i,s,t[11],14,643717713),s=this.gg(s,o,n,i,t[0],20,-373897302),i=this.gg(i,s,o,n,t[5],5,-701558691),n=this.gg(n,i,s,o,t[10],9,38016083),o=this.gg(o,n,i,s,t[15],14,-660478335),s=this.gg(s,o,n,i,t[4],20,-405537848),i=this.gg(i,s,o,n,t[9],5,568446438),n=this.gg(n,i,s,o,t[14],9,-1019803690),o=this.gg(o,n,i,s,t[3],14,-187363961),s=this.gg(s,o,n,i,t[8],20,1163531501),i=this.gg(i,s,o,n,t[13],5,-1444681467),n=this.gg(n,i,s,o,t[2],9,-51403784),o=this.gg(o,n,i,s,t[7],14,1735328473),s=this.gg(s,o,n,i,t[12],20,-1926607734),i=this.hh(i,s,o,n,t[5],4,-378558),n=this.hh(n,i,s,o,t[8],11,-2022574463),o=this.hh(o,n,i,s,t[11],16,1839030562),s=this.hh(s,o,n,i,t[14],23,-35309556),i=this.hh(i,s,o,n,t[1],4,-1530992060),n=this.hh(n,i,s,o,t[4],11,1272893353),o=this.hh(o,n,i,s,t[7],16,-155497632),s=this.hh(s,o,n,i,t[10],23,-1094730640),i=this.hh(i,s,o,n,t[13],4,681279174),n=this.hh(n,i,s,o,t[0],11,-358537222),o=this.hh(o,n,i,s,t[3],16,-722521979),s=this.hh(s,o,n,i,t[6],23,76029189),i=this.hh(i,s,o,n,t[9],4,-640364487),n=this.hh(n,i,s,o,t[12],11,-421815835),o=this.hh(o,n,i,s,t[15],16,530742520),s=this.hh(s,o,n,i,t[2],23,-995338651),i=this.ii(i,s,o,n,t[0],6,-198630844),n=this.ii(n,i,s,o,t[7],10,1126891415),o=this.ii(o,n,i,s,t[14],15,-1416354905),s=this.ii(s,o,n,i,t[5],21,-57434055),i=this.ii(i,s,o,n,t[12],6,1700485571),n=this.ii(n,i,s,o,t[3],10,-1894986606),o=this.ii(o,n,i,s,t[10],15,-1051523),s=this.ii(s,o,n,i,t[1],21,-2054922799),i=this.ii(i,s,o,n,t[8],6,1873313359),n=this.ii(n,i,s,o,t[15],10,-30611744),o=this.ii(o,n,i,s,t[6],15,-1560198380),s=this.ii(s,o,n,i,t[13],21,1309151649),i=this.ii(i,s,o,n,t[4],6,-145523070),n=this.ii(n,i,s,o,t[11],10,-1120210379),o=this.ii(o,n,i,s,t[2],15,718787259),s=this.ii(s,o,n,i,t[9],21,-343485551),e[0]=this.add32(i,e[0]),e[1]=this.add32(s,e[1]),e[2]=this.add32(o,e[2]),e[3]=this.add32(n,e[3])}cmn(e,t,i,s,o,n){return t=this.add32(this.add32(t,e),this.add32(s,n)),this.add32(t<<o|t>>>32-o,i)}ff(e,t,i,s,o,n,r){return this.cmn(t&i|~t&s,e,t,o,n,r)}gg(e,t,i,s,o,n,r){return this.cmn(t&s|i&~s,e,t,o,n,r)}hh(e,t,i,s,o,n,r){return this.cmn(t^i^s,e,t,o,n,r)}ii(e,t,i,s,o,n,r){return this.cmn(i^(t|~s),e,t,o,n,r)}md51(e){const t=e.length,i=[1732584193,-271733879,-1732584194,271733878];let s;for(s=64;s<=e.length;s+=64)this.md5cycle(i,this.md5blk(e.substring(s-64,s)));e=e.substring(s-64);const o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(s=0;s<e.length;s++)o[s>>2]|=e.charCodeAt(s)<<(s%4<<3);if(o[s>>2]|=128<<(s%4<<3),s>55)for(this.md5cycle(i,o),s=0;s<16;s++)o[s]=0;return o[14]=8*t,this.md5cycle(i,o),i}md5blk(e){const t=[];for(let i=0;i<64;i+=4)t[i>>2]=e.charCodeAt(i)+(e.charCodeAt(i+1)<<8)+(e.charCodeAt(i+2)<<16)+(e.charCodeAt(i+3)<<24);return t}rhex(e){const t="0123456789abcdef".split("");let i="",s=0;for(;s<4;s++)i+=t[e>>8*s+4&15]+t[e>>8*s&15];return i}hex(e){for(let t=0;t<e.length;t++)e[t]=this.rhex(e[t]);return e.join("")}md5(e){return this.hex(this.md51(e))}add32(e,t){return this.ieCompatibility?this.add32Compat(e,t):this.add32Std(e,t)}add32Std(e,t){return e+t&4294967295}add32Compat(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}},n={"01":"GRID","02":"CHARTS","0102":"BOTH"},r=class e{constructor(e){this.watermarkMessage=void 0,this.totalMessageLength=124,this.document=e,this.md5=new o,this.md5.init()}validateLicense(){const t=this.getLicenseDetails(e.licenseKey),i="AG Grid ".concat("BOTH"===t.currentLicenseType?"and AG Charts ":"","Enterprise"),s=void 0===t.suppliedLicenseType?"":"AG ".concat("BOTH"===t.suppliedLicenseType?"Grid and AG Charts":"GRID"===t.suppliedLicenseType?"Grid":"Charts"," Enterprise");if(t.missing)this.isWebsiteUrl()&&!this.isForceWatermark()||this.outputMissingLicenseKey(i);else if(t.expired){const o=e.getGridReleaseDate(),n=e.formatDate(o);this.outputExpiredKey(t.expiry,n,i,s)}else t.valid?t.isTrial&&t.trialExpired&&this.outputExpiredTrialKey(t.expiry,i,s):this.outputInvalidLicenseKey(!!t.incorrectLicenseType,i,s)}static extractExpiry(t){const i=t.substring(t.lastIndexOf("_")+1,t.length);return new Date(parseInt(e.decode(i),10))}static extractLicenseComponents(t){let i=t.replace(/[\u200B-\u200D\uFEFF]/g,"");if(i=i.replace(/\r?\n|\r/g,""),t.length<=32)return{md5:null,license:t,version:null,isTrial:null};const s=i.length-32,o=i.substring(s),n=i.substring(0,s),[r,l,a]=e.extractBracketedInformation(i);return{md5:o,license:n,version:r,isTrial:l,type:a}}getLicenseDetails(t){const i=e.chartsLicenseManager?"BOTH":"GRID";if((0,s.vfG)(t))return{licenseKey:t,valid:!1,missing:!0,currentLicenseType:i};const o=e.getGridReleaseDate(),{md5:r,license:l,version:a,isTrial:d,type:c}=e.extractLicenseComponents(t);let u,h,p,g=r===this.md5.md5(l)&&-1===t.indexOf("For_Trialing_ag-Grid_Only"),m=null,v=!1;function f(){u=m<new Date,h=void 0}if(g&&(m=e.extractExpiry(l),g=!isNaN(m.getTime()),g))switch(h=o>m,a){case"legacy":case"2":d&&f();break;case"3":(0,s.vfG)(c)?g=!1:(p=c,c!==n["01"]&&c!==n["0102"]||"BOTH"===i&&"BOTH"!==p?(g=!1,v=!0):d&&f())}return g?{licenseKey:t,valid:g,expiry:e.formatDate(m),expired:h,version:a,isTrial:d,trialExpired:u,incorrectLicenseType:v,currentLicenseType:i,suppliedLicenseType:p}:{licenseKey:t,valid:g,incorrectLicenseType:v,currentLicenseType:i,suppliedLicenseType:p}}isDisplayWatermark(){return this.isForceWatermark()||!this.isLocalhost()&&!this.isWebsiteUrl()&&!(0,s.vfG)(this.watermarkMessage)}getWatermarkMessage(){return this.watermarkMessage||""}getHostname(){const e=(this.document.defaultView||window).location,{hostname:t=""}=e;return t}isForceWatermark(){const e=(this.document.defaultView||window).location,{pathname:t}=e;return!!t&&-1!==t.indexOf("forceWatermark")}isWebsiteUrl(){return null!==this.getHostname().match(/^((?:[\w-]+\.)?ag-grid\.com)$/)}isLocalhost(){return null!==this.getHostname().match(/^(?:127\.0\.0\.1|localhost)$/)}static formatDate(e){const t=e.getDate(),i=e.getMonth(),s=e.getFullYear();return t+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][i]+" "+s}static getGridReleaseDate(){return new Date(parseInt(e.decode(e.RELEASE_INFORMATION),10))}static decode(t){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let s,o,n,r,l,a,d,c="",u=0;const h=t.replace(/[^A-Za-z0-9+/=]/g,"");for(;u<h.length;)r=i.indexOf(h.charAt(u++)),l=i.indexOf(h.charAt(u++)),a=i.indexOf(h.charAt(u++)),d=i.indexOf(h.charAt(u++)),s=r<<2|l>>4,o=(15&l)<<4|a>>2,n=(3&a)<<6|d,c+=String.fromCharCode(s),64!=a&&(c+=String.fromCharCode(o)),64!=d&&(c+=String.fromCharCode(n));return c=e.utf8_decode(c),c}static utf8_decode(e){e=e.replace(/rn/g,"n");let t="";for(let i=0;i<e.length;i++){const s=e.charCodeAt(i);s<128?t+=String.fromCharCode(s):s>127&&s<2048?(t+=String.fromCharCode(s>>6|192),t+=String.fromCharCode(63&s|128)):(t+=String.fromCharCode(s>>12|224),t+=String.fromCharCode(s>>6&63|128),t+=String.fromCharCode(63&s|128))}return t}static setChartsLicenseManager(e){this.chartsLicenseManager=e}static setLicenseKey(e){this.licenseKey=e,this.chartsLicenseManager&&this.chartsLicenseManager.setLicenseKey(e,!0)}static extractBracketedInformation(e){if(!e.includes("["))return["legacy",!1,void 0];const t=e.match(/\[(.*?)\]/g).map((e=>e.replace("[","").replace("]","")));if(!t||0===t.length)return["legacy",!1,void 0];const i=1===t.filter((e=>"TRIAL"===e)).length,s=t.filter((e=>0===e.indexOf("v")))[0];return[s?s.replace("v",""):"legacy",i,n[t.filter((e=>n[e]))[0]]]}centerPadAndOutput(e){const t=this.totalMessageLength-e.length;console.error(e.padStart(t/2+e.length,"*").padEnd(this.totalMessageLength,"*"))}padAndOutput(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";console.error(e.padEnd(this.totalMessageLength-i.length,t)+i)}outputInvalidLicenseKey(e,t,i){e?(this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(t," License ")),this.centerPadAndOutput(" Incompatible License Key "),this.padAndOutput("* Your license key is for ".concat(i," only and does not cover you for ").concat(t,".")," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to obtain a combined license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")):(this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(t," License ")),this.centerPadAndOutput(" Invalid License Key "),this.padAndOutput("* Your license key is not valid - please contact info@ag-grid.com to obtain a valid license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="Invalid License"}outputExpiredTrialKey(e,t,i){this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(t," License ")),this.centerPadAndOutput(" Trial Period Expired. "),this.padAndOutput("* Your trial only license for ".concat(i," expired on ").concat(e,".")," ","*"),this.padAndOutput("* Please email info@ag-grid.com to purchase a license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="Trial Period Expired"}outputMissingLicenseKey(e){this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(e," License ")),this.centerPadAndOutput(" License Key Not Found "),this.padAndOutput("* All ".concat(e," features are unlocked for trial.")," ","*"),this.padAndOutput("* If you want to hide the watermark please email info@ag-grid.com for a trial license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="For Trial Use Only"}outputExpiredKey(e,t,i,s){this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(i," License ")),this.centerPadAndOutput(" Incompatible Software Version "),this.padAndOutput("* Your license key works with versions of ".concat(s," released before ").concat(e,".")," ","*"),this.padAndOutput("* The version you are trying to use was released on ".concat(t,".")," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to renew your license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="License Expired"}};r.RELEASE_INFORMATION="MTcxOTQzMTYzMDEwNw==";var l=r,a={selector:"AG-WATERMARK",component:class extends s.wA2{constructor(){super('<div class="ag-watermark">\n                <div data-ref="eLicenseTextRef" class="ag-watermark-text"></div>\n            </div>'),this.eLicenseTextRef=s.CUI}wireBeans(e){this.licenseManager=e.licenseManager}postConstruct(){const e=this.shouldDisplayWatermark();this.setDisplayed(e),e&&(this.eLicenseTextRef.innerText=this.licenseManager.getWatermarkMessage(),window.setTimeout((()=>this.addCssClass("ag-opacity-zero")),0),window.setTimeout((()=>this.setDisplayed(!1)),5e3))}shouldDisplayWatermark(){return this.licenseManager.isDisplayWatermark()}}},d=class extends s.AS9{constructor(){super(...arguments),this.beanName="licenseManager"}postConstruct(){this.validateLicense()}validateLicense(){this.licenseManager=new l(this.gos.getDocument()),this.licenseManager.validateLicense()}static getLicenseDetails(e){return new l(null).getLicenseDetails(e)}getWatermarkSelector(){return a}isDisplayWatermark(){return this.licenseManager.isDisplayWatermark()}getWatermarkMessage(){return this.licenseManager.getWatermarkMessage()}static setLicenseKey(e){l.setLicenseKey(e)}static setChartsLicenseManager(e){l.setChartsLicenseManager(e)}},c=class extends s.wA2{constructor(){super(),this.setTemplate("<div></div>")}init(e){var t;this.params=e,this.cssClassPrefix=null!==(t=this.params.cssClassPrefix)&&void 0!==t?t:"ag-menu-option",this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu()}configureDefaults(){return!0}addIcon(){if(this.params.isCompact)return;const e=(0,s.awi)('<span data-ref="eIcon" class="'.concat(this.getClassName("part")," ").concat(this.getClassName("icon"),'" role="presentation"></span>')),{checked:t,icon:i}=this.params;t?e.appendChild((0,s.scM)("check",this.gos)):i&&((0,s.Iul)(i)?e.appendChild(i):"string"===typeof i?e.innerHTML=i:(0,s.Brh)("menu item icon must be DOM node or string")),this.getGui().appendChild(e)}addName(){const e=(0,s.awi)('<span data-ref="eName" class="'.concat(this.getClassName("part")," ").concat(this.getClassName("text"),'">').concat(this.params.name||"","</span>"));this.getGui().appendChild(e)}addShortcut(){if(this.params.isCompact)return;const e=(0,s.awi)('<span data-ref="eShortcut" class="'.concat(this.getClassName("part")," ").concat(this.getClassName("shortcut"),'">').concat(this.params.shortcut||"","</span>"));this.getGui().appendChild(e)}addSubMenu(){const e=(0,s.awi)('<span data-ref="ePopupPointer" class="'.concat(this.getClassName("part")," ").concat(this.getClassName("popup-pointer"),'"></span>')),t=this.getGui();if(this.params.subMenu){const i=this.gos.get("enableRtl")?"smallLeft":"smallRight";(0,s.mmg)(t,!1),e.appendChild((0,s.scM)(i,this.gos))}t.appendChild(e)}getClassName(e){return"".concat(this.cssClassPrefix,"-").concat(e)}destroy(){super.destroy()}},u={version:"32.0.1",moduleName:s.GXE.EnterpriseCoreModule,beans:[d],userComponents:[{name:"agMenuItem",classImp:c}]};s.wA2;var h="ag-disabled-group-title-bar";var p=class extends s.wA2{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(function(e){var t;const i=null!==(t=e.cssIdentifier)&&void 0!==t?t:"default",s=e.suppressKeyboardNavigation?"presentation":"role";return'\n        <div class="ag-group-title-bar ag-'.concat(i,'-group-title-bar ag-unselectable" role="').concat(s,'">\n            <span class="ag-group-title-bar-icon ag-').concat(i,'-group-title-bar-icon" data-ref="eGroupOpenedIcon" role="presentation"></span>\n            <span class="ag-group-title-bar-icon ag-').concat(i,'-group-title-bar-icon" data-ref="eGroupClosedIcon" role="presentation"></span>\n            <span data-ref="eTitle" class="ag-group-title ag-').concat(i,'-group-title"></span>\n        </div>\n    ')}(e)),this.suppressOpenCloseIcons=!1,this.suppressKeyboardNavigation=!1,this.eGroupOpenedIcon=s.CUI,this.eGroupClosedIcon=s.CUI,this.eTitle=s.CUI;const{title:t,suppressOpenCloseIcons:i,suppressKeyboardNavigation:o}=e;t&&t.length>0&&(this.title=t),null!=i&&(this.suppressOpenCloseIcons=i),this.suppressKeyboardNavigation=null!==o&&void 0!==o&&o}postConstruct(){this.setTitle(this.title),this.hideOpenCloseIcons(this.suppressOpenCloseIcons),this.setupExpandContract()}setupExpandContract(){this.eGroupClosedIcon.appendChild((0,s.ucQ)("columnSelectClosed",this.gos,null)),this.eGroupOpenedIcon.appendChild((0,s.ucQ)("columnSelectOpen",this.gos,null)),this.addManagedElementListeners(this.getGui(),{click:()=>this.dispatchExpandChanged(),keydown:e=>{switch(e.key){case s.VDZ.ENTER:case s.VDZ.SPACE:e.preventDefault(),this.dispatchExpandChanged();break;case s.VDZ.RIGHT:case s.VDZ.LEFT:e.preventDefault(),this.dispatchExpandChanged(e.key===s.VDZ.RIGHT)}}})}refreshOnExpand(e){this.refreshAriaStatus(e),this.refreshOpenCloseIcons(e)}refreshAriaStatus(e){this.suppressOpenCloseIcons||(0,s.mmg)(this.getGui(),e)}refreshOpenCloseIcons(e){const t=!this.suppressOpenCloseIcons;(0,s.DIH)(this.eGroupOpenedIcon,t&&e),(0,s.DIH)(this.eGroupClosedIcon,t&&!e)}isSuppressCollapse(){return this.suppressOpenCloseIcons}dispatchExpandChanged(e){const t={type:"expandedChanged",expanded:e};this.dispatchLocalEvent(t)}setTitle(e){var t;const i=this.getGui(),o=!!e&&e.length>0;e=o?e:void 0,this.eTitle.textContent=null!==(t=e)&&void 0!==t?t:"",(0,s.DIH)(i,o),e!==this.title&&(this.title=e);const n=i.classList.contains(h);return this.refreshDisabledStyles(n),this}addWidget(e){return this.getGui().appendChild(e),this}hideOpenCloseIcons(e){return this.suppressOpenCloseIcons=e,e&&this.dispatchExpandChanged(!0),this}refreshDisabledStyles(e){const t=this.getGui();e?(t.classList.add(h),t.removeAttribute("tabindex")):(t.classList.remove(h),"string"!==typeof this.title||this.suppressKeyboardNavigation?t.removeAttribute("tabindex"):t.setAttribute("tabindex","0"))}};var g=class extends s.BxR{constructor(e){super(function(e){return'<div class="ag-virtual-list-viewport ag-'.concat(e,'-virtual-list-viewport" role="presentation">\n            <div class="ag-virtual-list-container ag-').concat(e,'-virtual-list-container" data-ref="eContainer"></div>\n        </div>')}((null===e||void 0===e?void 0:e.cssIdentifier)||"default")),this.renderedRows=new Map,this.rowHeight=20,this.pageSize=-1,this.isScrolling=!1,this.isHeightFromTheme=!0,this.eContainer=s.CUI;const{cssIdentifier:t="default",ariaRole:i="listbox",listName:o}=e||{};this.cssIdentifier=t,this.ariaRole=i,this.listName=o}wireBeans(e){this.resizeObserverService=e.resizeObserverService,this.animationFrameService=e.animationFrameService,this.environment=e.environment}postConstruct(){this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e),focusInnerElement:e=>this.focusInnerElement(e),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)}),this.setAriaProperties(),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanged.bind(this)})}onGridStylesChanged(e){e.listItemHeightChanged&&(this.rowHeight=this.getItemHeight(),this.refresh())}setAriaProperties(){const e=this.localeService.getLocaleTextFunc()("ariaDefaultListName",this.listName||"List"),t=this.eContainer;(0,s.Znd)(t,this.ariaRole),(0,s.xER)(t,e)}addResizeObserver(){const e=this.resizeObserverService.observeResize(this.getGui(),(()=>this.animationFrameService.requestAnimationFrame((()=>this.drawVirtualRows()))));this.addDestroyFunc(e)}focusInnerElement(e){this.focusRow(e?this.model.getRowCount()-1:0)}onFocusIn(e){const t=e.target;t.classList.contains("ag-virtual-list-item")&&(this.lastFocusedRowIndex=(0,s.zRb)(t)-1)}onFocusOut(e){this.getFocusableElement().contains(e.relatedTarget)||(this.lastFocusedRowIndex=null)}handleKeyDown(e){switch(e.key){case s.VDZ.UP:case s.VDZ.DOWN:this.navigate(e.key===s.VDZ.UP)&&e.preventDefault();break;case s.VDZ.PAGE_HOME:case s.VDZ.PAGE_END:case s.VDZ.PAGE_UP:case s.VDZ.PAGE_DOWN:null!==this.navigateToPage(e.key)&&e.preventDefault()}}onTabKeyDown(e){(0,s.yth)(e),this.forceFocusOutOfContainer(e.shiftKey)}navigate(e){if(null==this.lastFocusedRowIndex)return!1;const t=this.lastFocusedRowIndex+(e?-1:1);return!(t<0||t>=this.model.getRowCount())&&(this.focusRow(t),!0)}navigateToPage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"focused",i=!1;"focused"===t&&(t=this.getLastFocusedRow(),i=!0);const o=this.model.getRowCount()-1;let n=-1;return e===s.VDZ.PAGE_HOME?n=0:e===s.VDZ.PAGE_END?n=o:e===s.VDZ.PAGE_DOWN?n=Math.min(t+this.pageSize,o):e===s.VDZ.PAGE_UP&&(n=Math.max(t-this.pageSize,0)),-1===n?null:(i?this.focusRow(n):this.ensureIndexVisible(n),n)}getLastFocusedRow(){return this.lastFocusedRowIndex}focusRow(e){this.isScrolling||(this.isScrolling=!0,this.ensureIndexVisible(e),this.animationFrameService.requestAnimationFrame((()=>{if(this.isScrolling=!1,!this.isAlive())return;const t=this.renderedRows.get(e);t&&t.eDiv.focus()})))}getComponentAt(e){const t=this.renderedRows.get(e);return t&&t.rowComponent}forEachRenderedRow(e){this.renderedRows.forEach(((t,i)=>e(t.rowComponent,i)))}getItemHeight(){return this.isHeightFromTheme?this.environment.getDefaultListItemHeight():this.rowHeight}ensureIndexVisible(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=this.model.getRowCount();if("number"!==typeof e||e<0||e>=i)return(0,s.Brh)("invalid row index for ensureIndexVisible: ",e),!1;const o=e*this.rowHeight,n=o+this.rowHeight,r=this.getGui(),l=r.scrollTop,a=r.offsetHeight,d=l+a,c=t?0:this.rowHeight,u=d<n-c;if(l>o+c)return r.scrollTop=o,!0;if(u){const e=n-a;return r.scrollTop=e,!0}return!1}setComponentCreator(e){this.componentCreator=e}setComponentUpdater(e){this.componentUpdater=e}getRowHeight(){return this.rowHeight}getScrollTop(){return this.getGui().scrollTop}setRowHeight(e){this.isHeightFromTheme=!1,this.rowHeight=e,this.refresh()}refresh(e){if(null==this.model||!this.isAlive())return;const t=this.model.getRowCount();this.eContainer.style.height="".concat(t*this.rowHeight,"px"),(0,s.naX)((()=>this.eContainer.clientHeight>=t*this.rowHeight),(()=>{this.isAlive()&&(this.canSoftRefresh(e)?this.drawVirtualRows(!0):(this.clearVirtualRows(),this.drawVirtualRows()))}))}canSoftRefresh(e){return!!(e&&this.renderedRows.size&&"function"===typeof this.model.areRowsEqual&&this.componentUpdater)}clearVirtualRows(){this.renderedRows.forEach(((e,t)=>this.removeRow(t)))}drawVirtualRows(e){if(!this.isAlive()||!this.model)return;const t=this.getGui(),i=t.scrollTop,s=i+t.offsetHeight,o=Math.floor(i/this.rowHeight),n=Math.floor(s/this.rowHeight);this.pageSize=Math.floor((s-i)/this.rowHeight),this.ensureRowsRendered(o,n,e)}ensureRowsRendered(e,t,i){this.renderedRows.forEach(((i,s)=>{(s<e||s>t)&&s!==this.lastFocusedRowIndex&&this.removeRow(s)})),i&&this.refreshRows();for(let s=e;s<=t;s++)this.renderedRows.has(s)||s<this.model.getRowCount()&&this.insertRow(s)}insertRow(e){const t=this.model.getRow(e),i=document.createElement("div");i.classList.add("ag-virtual-list-item","ag-".concat(this.cssIdentifier,"-virtual-list-item")),(0,s.Znd)(i,"tree"===this.ariaRole?"treeitem":"option"),(0,s.VzM)(i,this.model.getRowCount()),(0,s.Qnv)(i,e+1),i.setAttribute("tabindex","-1"),i.style.height="".concat(this.rowHeight,"px"),i.style.top="".concat(this.rowHeight*e,"px");const o=this.componentCreator(t,i);o.addGuiEventListener("focusin",(()=>this.lastFocusedRowIndex=e)),i.appendChild(o.getGui()),this.renderedRows.has(e-1)?this.renderedRows.get(e-1).eDiv.insertAdjacentElement("afterend",i):this.renderedRows.has(e+1)?this.renderedRows.get(e+1).eDiv.insertAdjacentElement("beforebegin",i):this.eContainer.appendChild(i),this.renderedRows.set(e,{rowComponent:o,eDiv:i,value:t})}removeRow(e){const t=this.renderedRows.get(e);this.eContainer.removeChild(t.eDiv),this.destroyBean(t.rowComponent),this.renderedRows.delete(e)}refreshRows(){const e=this.model.getRowCount();this.renderedRows.forEach(((t,i)=>{if(i>=e)this.removeRow(i);else{var s,o;const e=this.model.getRow(i);null!==(s=(o=this.model).areRowsEqual)&&void 0!==s&&s.call(o,t.value,e)?this.componentUpdater(e,t.rowComponent):this.removeRow(i)}}))}addScrollListener(){this.addGuiEventListener("scroll",(()=>this.drawVirtualRows()),{passive:!0})}setModel(e){this.model=e}getAriaElement(){return this.eContainer}destroy(){this.isAlive()&&(this.clearVirtualRows(),super.destroy())}},m=class extends s.wA2{constructor(e,t,i,o,n){super(),this.dragSourceDropTarget=e,this.ghost=t,this.horizontal=i,this.template=o,this.agComponents=n,this.eText=s.CUI,this.eDragHandle=s.CUI,this.eButton=s.CUI}wireBeans(e){this.dragAndDropService=e.dragAndDropService}postConstruct(){var e;this.setTemplate(null!==(e=this.template)&&void 0!==e?e:'\n            <span role="option">\n              <span data-ref="eDragHandle" class="ag-drag-handle ag-column-drop-cell-drag-handle" role="presentation"></span>\n              <span data-ref="eText" class="ag-column-drop-cell-text" aria-hidden="true"></span>\n              <span data-ref="eButton" class="ag-column-drop-cell-button" role="presentation"></span>\n            </span>',this.agComponents);const t=this.getGui();this.addElementClasses(t),this.addElementClasses(this.eDragHandle,"drag-handle"),this.addElementClasses(this.eText,"text"),this.addElementClasses(this.eButton,"button"),this.eDragHandle.appendChild((0,s.scM)("columnDrag",this.gos)),this.eButton.appendChild((0,s.scM)("cancel",this.gos)),this.setupComponents(),!this.ghost&&this.isDraggable()&&this.addDragSource(),this.setupAria(),this.setupTooltip(),this.activateTabIndex(),this.refreshDraggable()}isDraggable(){return!0}refreshDraggable(){this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!this.isDraggable())}setupAria(){const e=this.localeService.getLocaleTextFunc(),t=[this.getAriaDisplayName()];this.addAdditionalAriaInstructions(t,e),(0,s.xER)(this.getGui(),t.join(". "))}addAdditionalAriaInstructions(e,t){if(this.isRemovable()){const i=t("ariaDropZoneColumnComponentDescription","Press DELETE to remove");e.push(i)}}setupTooltip(){const e=()=>{const e=this.getTooltip();this.setTooltip({newTooltipText:e})};e(),this.addManagedEventListeners({newColumnsLoaded:e})}getDragSourceId(){}getDefaultIconName(){return"notAllowed"}addDragSource(){const{dragAndDropService:e,eDragHandle:t}=this,i=this.createGetDragItem(),s=this.getDefaultIconName(),o={type:this.getDragSourceType(),sourceId:this.getDragSourceId(),eElement:t,getDefaultIconName:()=>s,getDragItem:i,dragItemName:this.getDisplayName()};e.addDragSource(o,!0),this.addDestroyFunc((()=>e.removeDragSource(o)))}setupComponents(){this.setTextValue(),this.setupRemove(),this.ghost&&this.addCssClass("ag-column-drop-cell-ghost")}isRemovable(){return!0}refreshRemove(){(0,s.DIH)(this.eButton,this.isRemovable())}setupRemove(){this.refreshRemove();const e={type:"columnRemove"};this.addGuiEventListener("keydown",(e=>this.onKeyDown(e))),this.addManagedElementListeners(this.eButton,{click:t=>{this.dispatchLocalEvent(e),t.stopPropagation()}});const t=new s.rwP(this.eButton);this.addManagedListeners(t,{tap:()=>this.dispatchLocalEvent(e)}),this.addDestroyFunc(t.destroy.bind(t))}onKeyDown(e){e.key===s.VDZ.DELETE&&this.isRemovable()&&(e.preventDefault(),this.dispatchLocalEvent({type:"columnRemove"}))}getDisplayValue(){return this.getDisplayName()}setTextValue(){const e=this.getDisplayValue(),t=(0,s.BYN)(e);this.eText.innerHTML=t}addElementClasses(e,t){t=t?"-".concat(t):"";const i=this.horizontal?"horizontal":"vertical";e.classList.add("ag-column-drop-cell".concat(t),"ag-column-drop-".concat(i,"-cell").concat(t))}destroy(){super.destroy(),this.dragSourceDropTarget=null}},v=class extends s.wA2{constructor(e){super('<div class="ag-unselectable" role="presentation"></div>'),this.horizontal=e,this.state="notDragging",this.guiDestroyFunctions=[],this.childPillComponents=[],this.resizeEnabled=!1,this.addElementClasses(this.getGui()),this.ePillDropList=document.createElement("div"),this.addElementClasses(this.ePillDropList,"list"),(0,s.Znd)(this.ePillDropList,"listbox")}wireBeans(e){this.focusService=e.focusService,this.dragAndDropService=e.dragAndDropService}isHorizontal(){return this.horizontal}toggleResizable(e){this.positionableFeature.setResizable(!!e&&{bottom:!0}),this.resizeEnabled=e}isSourceEventFromTarget(e){const{dropZoneTarget:t,dragSource:i}=e;return t.contains(i.eElement)}destroy(){this.destroyGui(),super.destroy()}destroyGui(){this.guiDestroyFunctions.forEach((e=>e())),this.guiDestroyFunctions.length=0,this.childPillComponents.length=0,(0,s.wvc)(this.getGui()),(0,s.wvc)(this.ePillDropList)}init(e){this.params=null!==e&&void 0!==e?e:{},this.createManagedBean(new s.D_6(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.onKeyDown.bind(this)})),this.setupDropTarget(),this.positionableFeature=new s.Gxm(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature),this.refreshGui(),(0,s.xER)(this.ePillDropList,this.getAriaLabel())}onTabKeyDown(e){const t=this.focusService.findFocusableElements(this.getFocusableElement(),null,!0),i=t.length;if(0===i)return;const{shiftKey:o}=e,n=this.gos.getActiveDomElement(),r=n===t[0],l=n===(0,s._O9)(t);1===i||r&&o||l&&!o||t[o?0:i-1].focus()}onKeyDown(e){const{key:t}=e,i=!this.horizontal;let o=t===s.VDZ.DOWN,n=t===s.VDZ.UP;if(!i){const e=this.gos.get("enableRtl");o=!e&&t===s.VDZ.RIGHT||e&&t===s.VDZ.LEFT,n=!e&&t===s.VDZ.LEFT||e&&t===s.VDZ.RIGHT}if(!o&&!n)return;const r=this.focusService.findNextFocusableElement(this.getFocusableElement(),!1,n);r&&(e.preventDefault(),r.focus())}addElementClasses(e,t){t=t?"-".concat(t):"";const i=this.horizontal?"horizontal":"vertical";e.classList.add("ag-column-drop".concat(t),"ag-column-drop-".concat(i).concat(t))}setupDropTarget(){this.dropTarget={getContainer:this.getGui.bind(this),getIconName:this.getIconName.bind(this),onDragging:this.onDragging.bind(this),onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this),onDragStop:this.onDragStop.bind(this),isInterestedIn:this.isInterestedIn.bind(this)},this.dragAndDropService.addDropTarget(this.dropTarget)}minimumAllowedNewInsertIndex(){return 0}checkInsertIndex(e){const t=this.getNewInsertIndex(e);if(t<0)return!1;const i=this.minimumAllowedNewInsertIndex(),s=Math.max(i,t),o=s!==this.insertIndex;return o&&(this.insertIndex=s),o}getNewInsertIndex(e){const t=e.event,i=this.horizontal?t.clientX:t.clientY,s=this.childPillComponents.map((e=>e.getGui().getBoundingClientRect())),o=s.findIndex((e=>this.horizontal?e.right>i&&e.left<i:e.top<i&&e.bottom>i));if(-1===o){const e=this.gos.get("enableRtl");if(s.every((e=>i>(this.horizontal?e.right:e.bottom))))return e&&this.horizontal?0:this.childPillComponents.length;return s.every((e=>i<(this.horizontal?e.left:e.top)))?e&&this.horizontal?this.childPillComponents.length:0:this.insertIndex}return this.insertIndex<=o?o+1:o}checkDragStartedBySelf(e){"notDragging"===this.state&&(this.state="rearrangeItems",this.potentialDndItems=this.getItems(e.dragSource.getDragItem()),this.refreshGui(),this.checkInsertIndex(e),this.refreshGui())}onDragging(e){this.checkDragStartedBySelf(e),this.checkInsertIndex(e)&&this.refreshGui()}handleDragEnterEnd(e){}onDragEnter(e){const t=this.getItems(e.dragSource.getDragItem());this.state="newItemsIn";const i=t.filter((t=>this.isItemDroppable(t,e))),s=i.every((e=>-1!==this.childPillComponents.map((e=>e.getItem())).indexOf(e)));0!==i.length&&(this.potentialDndItems=i,s?this.state="notDragging":(this.handleDragEnterEnd(e),this.checkInsertIndex(e),this.refreshGui()))}isPotentialDndItems(){return(0,s.zwR)(this.potentialDndItems)}handleDragLeaveEnd(e){}onDragLeave(e){if("rearrangeItems"===this.state){const t=this.getItems(e.dragSource.getDragItem());this.removeItems(t)}this.isPotentialDndItems()&&(this.handleDragLeaveEnd(e),this.potentialDndItems=[],this.refreshGui()),this.state="notDragging"}onDragStop(){this.isPotentialDndItems()&&("newItemsIn"===this.state?this.addItems(this.potentialDndItems):this.rearrangeItems(this.potentialDndItems),this.potentialDndItems=[],this.refreshGui()),this.state="notDragging"}removeItems(e){const t=this.getExistingItems().filter((t=>!(0,s.W7Q)(e,t)));this.updateItems(t)}addItems(e){if(!e)return;const t=this.getExistingItems().slice(),i=e.filter((e=>t.indexOf(e)<0));(0,s.g02)(t,i,this.insertIndex),this.updateItems(t)}addItem(e){this.insertIndex=this.getExistingItems().length,this.addItems([e]),this.refreshGui()}rearrangeItems(e){const t=this.getNonGhostItems().slice();return(0,s.g02)(t,e,this.insertIndex),!(0,s.Vgs)(t,this.getExistingItems())&&(this.updateItems(t),!0)}refreshGui(){const e=this.ePillDropList.scrollTop,t=this.resizeEnabled,i=this.getFocusedItem();let s=this.focusService.findNextFocusableElement();s||(s=this.focusService.findNextFocusableElement(void 0,!1,!0)),this.toggleResizable(!1),this.destroyGui(),this.addIconAndTitleToGui(),this.addEmptyMessageToGui(),this.addItemsToGui(),this.isHorizontal()||(this.ePillDropList.scrollTop=e),t&&this.toggleResizable(t),this.focusService.isKeyboardMode()&&this.restoreFocus(i,s)}getFocusedItem(){const e=this.getGui(),t=this.gos.getActiveDomElement();if(!e.contains(t))return-1;return Array.from(e.querySelectorAll(".ag-column-drop-cell")).indexOf(t)}restoreFocus(e,t){const i=this.getGui(),s=Array.from(i.querySelectorAll(".ag-column-drop-cell"));if(-1===e)return;0===s.length&&t.focus();const o=s[Math.min(s.length-1,e)];o&&o.focus()}focusList(e){const t=e?this.childPillComponents.length-1:0;this.restoreFocus(t,this.getFocusableElement())}getNonGhostItems(){const e=this.getExistingItems();return this.isPotentialDndItems()?e.filter((e=>!(0,s.W7Q)(this.potentialDndItems,e))):e}addItemsToGui(){const e=this.getNonGhostItems().map((e=>this.createItemComponent(e,!1)));if(this.isPotentialDndItems()){const t=this.potentialDndItems.map((e=>this.createItemComponent(e,!0)));this.insertIndex>=e.length?e.push(...t):e.splice(this.insertIndex,0,...t)}this.appendChild(this.ePillDropList),e.forEach(((e,t)=>{t>0&&this.addArrow(this.ePillDropList),this.ePillDropList.appendChild(e.getGui())})),this.addAriaLabelsToComponents()}addAriaLabelsToComponents(){this.childPillComponents.forEach(((e,t)=>{const i=e.getGui();(0,s.Qnv)(i,t+1),(0,s.VzM)(i,this.childPillComponents.length)}))}createItemComponent(e,t){const i=this.createPillComponent(e,this.dropTarget,t,this.horizontal);return i.addEventListener("columnRemove",this.removeItems.bind(this,[e])),this.createBean(i),this.guiDestroyFunctions.push((()=>this.destroyBean(i))),t||this.childPillComponents.push(i),i}addIconAndTitleToGui(){const{title:e,icon:t}=this.params;if(!e||!t)return;const i=document.createElement("div");if((0,s.OMQ)(i,!0),this.addElementClasses(i,"title-bar"),this.addElementClasses(t,"icon"),this.addOrRemoveCssClass("ag-column-drop-empty",this.isExistingItemsEmpty()),i.appendChild(t),!this.horizontal){const t=document.createElement("span");this.addElementClasses(t,"title"),t.innerHTML=e,i.appendChild(t)}this.appendChild(i)}isExistingItemsEmpty(){return 0===this.getExistingItems().length}addEmptyMessageToGui(){const{emptyMessage:e}=this.params;if(!e||!this.isExistingItemsEmpty()||this.isPotentialDndItems())return;const t=document.createElement("span");t.innerHTML=e,this.addElementClasses(t,"empty-message"),this.ePillDropList.appendChild(t)}addArrow(e){if(this.horizontal){const t=this.gos.get("enableRtl"),i=(0,s.scM)(t?"smallLeft":"smallRight",this.gos);this.addElementClasses(i,"cell-separator"),e.appendChild(i)}}};var f=class e extends s.wA2{constructor(e){super(function(e){const t=e.cssIdentifier||"default";return'<div class="ag-panel ag-'.concat(t,'-panel" tabindex="-1">\n        <div data-ref="eTitleBar" class="ag-panel-title-bar ag-').concat(t,'-panel-title-bar ag-unselectable">\n            <span data-ref="eTitle" class="ag-panel-title-bar-title ag-').concat(t,'-panel-title-bar-title"></span>\n            <div data-ref="eTitleBarButtons" class="ag-panel-title-bar-buttons ag-').concat(t,'-panel-title-bar-buttons"></div>\n        </div>\n        <div data-ref="eContentWrapper" class="ag-panel-content-wrapper ag-').concat(t,'-panel-content-wrapper"></div>\n    </div>')}(e)),this.config=e,this.closable=!0,this.eContentWrapper=s.CUI,this.eTitleBar=s.CUI,this.eTitleBarButtons=s.CUI,this.eTitle=s.CUI}postConstruct(){const{component:e,closable:t,hideTitleBar:i,title:o,minWidth:n=250,width:r,minHeight:l=250,height:a,centered:d,popup:c,x:u,y:h}=this.config;this.positionableFeature=new s.Gxm(this.getGui(),{minWidth:n,width:r,minHeight:l,height:a,centered:d,x:u,y:h,popup:c,calculateTopBuffer:()=>this.positionableFeature.getHeight()-this.getBodyHeight()}),this.createManagedBean(this.positionableFeature);const p=this.getGui();e&&this.setBodyComponent(e),i?(0,s.DIH)(this.eTitleBar,!1):(o&&this.setTitle(o),this.setClosable(null!=t?t:this.closable)),this.addManagedElementListeners(this.eTitleBar,{mousedown:e=>{if(p.contains(e.relatedTarget)||p.contains(this.gos.getActiveDomElement())||this.eTitleBarButtons.contains(e.target))return void e.preventDefault();const t=this.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");t&&t.focus()}}),c&&this.positionableFeature.isPositioned()||(this.renderComponent&&this.renderComponent(),this.positionableFeature.initialisePosition(),this.eContentWrapper.style.height="0")}renderComponent(){const e=this.getGui();e.focus(),this.close=()=>{e.parentElement.removeChild(e),this.destroy()}}getHeight(){return this.positionableFeature.getHeight()}setHeight(e){this.positionableFeature.setHeight(e)}getWidth(){return this.positionableFeature.getWidth()}setWidth(e){this.positionableFeature.setWidth(e)}setClosable(t){if(t!==this.closable&&(this.closable=t),t){const t=this.closeButtonComp=new s.wA2(e.CLOSE_BTN_TEMPLATE);this.createBean(t);const i=t.getGui(),o=(0,s.scM)("close",this.gos);o.classList.add("ag-panel-title-bar-button-icon"),i.appendChild(o),this.addTitleBarButton(t),t.addManagedElementListeners(i,{click:this.onBtClose.bind(this)})}else if(this.closeButtonComp){const e=this.closeButtonComp.getGui();e.parentElement.removeChild(e),this.closeButtonComp=this.destroyBean(this.closeButtonComp)}}setBodyComponent(e){e.setParentComponent(this),this.eContentWrapper.appendChild(e.getGui())}addTitleBarButton(e,t){const i=this.eTitleBarButtons,s=i.children,o=s.length;null==t&&(t=o),t=Math.max(0,Math.min(t,o)),e.addCssClass("ag-panel-title-bar-button");const n=e.getGui();0===t?i.insertAdjacentElement("afterbegin",n):t===o?i.insertAdjacentElement("beforeend",n):s[t-1].insertAdjacentElement("afterend",n),e.setParentComponent(this)}getBodyHeight(){return(0,s.laX)(this.eContentWrapper)}getBodyWidth(){return(0,s.lJf)(this.eContentWrapper)}setTitle(e){this.eTitle.innerText=e}onBtClose(){this.close()}destroy(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));const e=this.getGui();e&&(0,s.Y4l)(e)&&this.close(),super.destroy()}};f.CLOSE_BTN_TEMPLATE='<div class="ag-button"></div>';var C=f,w=class extends C{constructor(e){super({...e,popup:!0}),this.isMaximizable=!1,this.isMaximized=!1,this.maximizeListeners=[],this.resizeListenerDestroy=null,this.lastPosition={x:0,y:0,width:0,height:0}}wireBeans(e){this.popupService=e.popupService,this.focusService=e.focusService}postConstruct(){const e=this.getGui(),{movable:t,resizable:i,maximizable:o,modal:n}=this.config;if(this.addCssClass("ag-dialog"),super.postConstruct(),this.tabGuardFeature=this.createManagedBean(new s.D19(this)),this.tabGuardFeature.initialiseTabGuard({isFocusableContainer:!0,onFocusIn:()=>{const t=this.gos.getDocument(),{activeElement:i}=t;var s;this.popupService.bringPopupToFront(e)&&i!==t.body&&(null===i||void 0===i||null===(s=i.focus)||void 0===s||s.call(i))},onTabKeyDown:t=>{if(n)return;const i=t.shiftKey,s=this.focusService.findNextFocusableElement(e,!1,i);s&&!this.tabGuardFeature.getTabGuardCtrl().isTabGuard(s)||this.focusService.focusNextGridCoreContainer(i)&&t.preventDefault()}}),t&&this.setMovable(t),o&&this.setMaximizable(o),i&&this.setResizable(i),!this.config.modal){const{focusService:e}=this;e.addFocusableContainer(this),this.addDestroyFunc((()=>e.removeFocusableContainer(this)))}}setAllowFocus(e){this.tabGuardFeature.getTabGuardCtrl().setAllowFocus(e)}renderComponent(){const e=this.getGui(),{alwaysOnTop:t,modal:i,title:s,afterGuiAttached:o}=this.config,n=this.localeService.getLocaleTextFunc(),r=this.popupService.addPopup({modal:i,eChild:e,closeOnEsc:!0,closedCallback:this.onClosed.bind(this),alwaysOnTop:t,ariaLabel:s||n("ariaLabelDialog","Dialog"),afterGuiAttached:o});r&&(this.close=r.hideFunc)}onClosed(e){var t,i;this.destroy(),null===(t=(i=this.config).closedCallback)||void 0===t||t.call(i,e)}toggleMaximize(){const e=this.positionableFeature.getPosition();if(this.isMaximized){const{x:e,y:t,width:i,height:s}=this.lastPosition;this.setWidth(i),this.setHeight(s),this.positionableFeature.offsetElement(e,t)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=e.x,this.lastPosition.y=e.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()}refreshMaximizeIcon(){(0,s.DIH)(this.maximizeIcon,!this.isMaximized),(0,s.DIH)(this.minimizeIcon,this.isMaximized)}clearMaximizebleListeners(){this.maximizeListeners.length&&(this.maximizeListeners.forEach((e=>e())),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)}destroy(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),super.destroy()}setResizable(e){this.positionableFeature.setResizable(e)}setMovable(e){this.positionableFeature.setMovable(e,this.eTitleBar)}setMaximizable(e){if(!e)return this.clearMaximizebleListeners(),void(this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0));const t=this.eTitleBar;if(!t||e===this.isMaximizable)return;const i=this.buildMaximizeAndMinimizeElements();this.refreshMaximizeIcon(),i.addManagedElementListeners(i.getGui(),{click:this.toggleMaximize.bind(this)}),this.addTitleBarButton(i,0),this.maximizeListeners.push(...this.addManagedElementListeners(t,{dblclick:this.toggleMaximize.bind(this)})),[this.resizeListenerDestroy]=this.addManagedListeners(this.positionableFeature,{resize:()=>{this.isMaximized=!1,this.refreshMaximizeIcon()}})}buildMaximizeAndMinimizeElements(){const e=this.maximizeButtonComp=this.createBean(new s.wA2('<div class="ag-dialog-button"></span>')),t=e.getGui();return this.maximizeIcon=(0,s.scM)("maximize",this.gos),t.appendChild(this.maximizeIcon),this.maximizeIcon.classList.add("ag-panel-title-bar-button-icon"),this.minimizeIcon=(0,s.scM)("minimize",this.gos),t.appendChild(this.minimizeIcon),this.minimizeIcon.classList.add("ag-panel-title-bar-button-icon"),e}},S=class extends s.BxR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;super('<div class="ag-menu-list" role="tree"></div>'),this.level=e,this.menuItems=[],this.params=null!==t&&void 0!==t?t:{column:null,node:null,value:null}}postConstruct(){this.initialiseTabGuard({onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.handleFocusIn(e),onFocusOut:e=>this.handleFocusOut(e)})}onTabKeyDown(e){const t=this.getParentComponent(),i=t&&t.getGui();i&&i.classList.contains("ag-focus-managed")||e.preventDefault(),e.shiftKey&&this.closeIfIsChild(e)}handleKeyDown(e){switch(e.key){case s.VDZ.UP:case s.VDZ.RIGHT:case s.VDZ.DOWN:case s.VDZ.LEFT:e.preventDefault(),this.handleNavKey(e.key);break;case s.VDZ.ESCAPE:this.closeIfIsChild()&&(0,s.yth)(e)}}handleFocusIn(e){var t;const i=e.relatedTarget;!this.tabGuardFeature.getTabGuardCtrl().isTabGuard(i)&&(this.getGui().contains(i)||null!==(t=this.activeMenuItem)&&void 0!==t&&null!==(t=t.getSubMenuGui())&&void 0!==t&&t.contains(i))||(this.activeMenuItem?this.activeMenuItem.activate():this.activateFirstItem())}handleFocusOut(e){var t;const i=e.relatedTarget;!this.activeMenuItem||this.getGui().contains(i)||null!==(t=this.activeMenuItem.getSubMenuGui())&&void 0!==t&&t.contains(i)||this.activeMenuItem.isSubMenuOpening()||this.activeMenuItem.deactivate()}clearActiveItem(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)}addMenuItems(e){null!=e&&s.j_S.all(e.map((e=>"separator"===e?s.j_S.resolve({eGui:this.createSeparator()}):"string"===typeof e?((0,s.Brh)("unrecognised menu item ".concat(e)),s.j_S.resolve({eGui:null})):this.addItem(e)))).then((e=>{e.forEach((e=>{null!==e&&void 0!==e&&e.eGui&&(this.appendChild(e.eGui),e.comp&&this.menuItems.push(e.comp))}))}))}addItem(e){const t=this.createManagedBean(new b);return t.init({menuItemDef:e,isAnotherSubMenuOpen:()=>this.menuItems.some((e=>e.isSubMenuOpen())),level:this.level,contextParams:this.params}).then((()=>(t.setParentComponent(this),this.addManagedListeners(t,{closeMenu:e=>{this.dispatchLocalEvent(e)},menuItemActivated:e=>{this.activeMenuItem&&this.activeMenuItem!==e.menuItem&&this.activeMenuItem.deactivate(),this.activeMenuItem=e.menuItem}}),{comp:t,eGui:t.getGui()})))}activateFirstItem(){const e=this.menuItems.filter((e=>!e.isDisabled()))[0];e&&e.activate()}createSeparator(){return(0,s.awi)('\n            <div class="ag-menu-separator" aria-hidden="true">\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n            </div>')}handleNavKey(e){switch(e){case s.VDZ.UP:case s.VDZ.DOWN:{const t=this.findNextItem(e===s.VDZ.UP);return void(t&&t!==this.activeMenuItem&&t.activate())}}e===(this.gos.get("enableRtl")?s.VDZ.RIGHT:s.VDZ.LEFT)?this.closeIfIsChild():this.openChild()}closeIfIsChild(e){const t=this.getParentComponent();return!!(t&&t instanceof b)&&(e&&e.preventDefault(),t.closeSubMenu(),t.getGui().focus(),!0)}openChild(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)}findNextItem(e){const t=this.menuItems.filter((e=>!e.isDisabled()));if(!t.length)return;if(!this.activeMenuItem)return e?(0,s._O9)(t):t[0];let i;e&&t.reverse();let o=!1;for(let s=0;s<t.length;s++){const e=t[s];if(o){i=e;break}e===this.activeMenuItem&&(o=!0)}return o&&!i?t[0]:i||this.activeMenuItem}destroy(){this.clearActiveItem(),super.destroy()}},y=class extends s.BxR{constructor(e){super(),this.setTemplateFromElement(e.getGui(),void 0,void 0,!0)}postConstruct(){this.initialiseTabGuard({onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)})}handleKeyDown(e){e.key===s.VDZ.ESCAPE&&this.closePanel()}onTabKeyDown(e){e.defaultPrevented||(this.closePanel(),e.preventDefault())}closePanel(){const e=this.parentComponent;e.closeSubMenu(),setTimeout((()=>e.getGui().focus()),0)}},b=class extends s.AS9{constructor(){super(...arguments),this.ACTIVATION_DELAY=80,this.isActive=!1,this.subMenuIsOpen=!1,this.subMenuIsOpening=!1,this.suppressRootStyles=!0,this.suppressAria=!0,this.suppressFocus=!0}wireBeans(e){this.popupService=e.popupService,this.userComponentFactory=e.userComponentFactory}init(e){var t,i;const{menuItemDef:s,isAnotherSubMenuOpen:o,level:n,childComponent:r,contextParams:l}=e;this.params=e.menuItemDef,this.level=n,this.isAnotherSubMenuOpen=o,this.childComponent=r,this.contextParams=l,this.cssClassPrefix=null!==(t=null===(i=this.params.menuItemParams)||void 0===i?void 0:i.cssClassPrefix)&&void 0!==t?t:"ag-menu-option";return this.userComponentFactory.getMenuItemCompDetails(this.params,{...s,level:n,isAnotherSubMenuOpen:o,openSubMenu:e=>this.openSubMenu(e),closeSubMenu:()=>this.closeSubMenu(),closeMenu:e=>this.closeMenu(e),updateTooltip:(e,t)=>this.refreshTooltip(e,t),onItemActivated:()=>this.onItemActivated()}).newAgStackInstance().then((e=>{var t;this.menuItemComp=e;const i=null===(t=e.configureDefaults)||void 0===t?void 0:t.call(e);i&&this.configureDefaults(!0===i?void 0:i)}))}addListeners(e,t){null!==t&&void 0!==t&&t.suppressClick||this.addManagedElementListeners(e,{click:e=>this.onItemSelected(e)}),null!==t&&void 0!==t&&t.suppressKeyboardSelect||this.addManagedElementListeners(e,{keydown:e=>{e.key!==s.VDZ.ENTER&&e.key!==s.VDZ.SPACE||(e.preventDefault(),this.onItemSelected(e))}}),null!==t&&void 0!==t&&t.suppressMouseDown||this.addManagedElementListeners(e,{mousedown:e=>{e.stopPropagation(),e.preventDefault()}}),null!==t&&void 0!==t&&t.suppressMouseOver||this.addManagedElementListeners(e,{mouseenter:()=>this.onMouseEnter(),mouseleave:()=>this.onMouseLeave()})}isDisabled(){return!!this.params.disabled}openSubMenu(){var e,t;let i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.closeSubMenu(),!this.params.subMenu)return;this.subMenuIsOpening=!0;const o=(0,s.awi)('<div class="ag-menu" role="presentation"></div>');let n;this.eSubMenuGui=o;let r=()=>{this.subMenuIsOpening=!1};if(this.childComponent){const e=this.createBean(new y(this.childComponent));e.setParentComponent(this);const t=e.getGui(),i="mouseenter",s=()=>this.cancelDeactivate();t.addEventListener(i,s),n=()=>t.removeEventListener(i,s),o.appendChild(t),this.childComponent.afterGuiAttached&&(r=()=>{this.childComponent.afterGuiAttached(),this.subMenuIsOpening=!1})}else if(this.params.subMenu){const e=this.createBean(new S(this.level+1,this.contextParams));e.setParentComponent(this),e.addMenuItems(this.params.subMenu),o.appendChild(e.getGui()),this.addManagedListeners(e,{closeMenu:e=>this.dispatchLocalEvent(e)}),e.addGuiEventListener("mouseenter",(()=>this.cancelDeactivate())),n=()=>this.destroyBean(e),i&&(r=()=>{e.activateFirstItem(),this.subMenuIsOpening=!1})}const l=this.popupService.positionPopupForMenu.bind(this.popupService,{eventSource:this.eGui,ePopup:o}),a=this.localeService.getLocaleTextFunc(),d=this.popupService.addPopup({modal:!0,eChild:o,positionCallback:l,anchorToElement:this.eGui,ariaLabel:a("ariaLabelSubMenu","SubMenu"),afterGuiAttached:r});this.subMenuIsOpen=!0,this.setAriaExpanded(!0),this.hideSubMenu=()=>{var e,t;d&&d.hideFunc(),this.subMenuIsOpen=!1,this.setAriaExpanded(!1),n(),null===(e=(t=this.menuItemComp).setExpanded)||void 0===e||e.call(t,!1),this.eSubMenuGui=void 0},null===(e=(t=this.menuItemComp).setExpanded)||void 0===e||e.call(t,!0)}setAriaExpanded(e){this.suppressAria||(0,s.mmg)(this.eGui,e)}closeSubMenu(){this.hideSubMenu&&(this.hideSubMenu(),this.hideSubMenu=null,this.setAriaExpanded(!1))}isSubMenuOpen(){return this.subMenuIsOpen}isSubMenuOpening(){return this.subMenuIsOpening}activate(e){var t,i;this.cancelActivate(),this.params.disabled||(this.isActive=!0,this.suppressRootStyles||this.eGui.classList.add("".concat(this.cssClassPrefix,"-active")),null===(t=(i=this.menuItemComp).setActive)||void 0===t||t.call(i,!0),this.suppressFocus||this.eGui.focus({preventScroll:!0}),e&&this.params.subMenu&&window.setTimeout((()=>{this.isAlive()&&this.isActive&&this.openSubMenu()}),300),this.onItemActivated())}deactivate(){var e,t;this.cancelDeactivate(),this.suppressRootStyles||this.eGui.classList.remove("".concat(this.cssClassPrefix,"-active")),null===(e=(t=this.menuItemComp).setActive)||void 0===e||e.call(t,!1),this.isActive=!1,this.subMenuIsOpen&&this.hideSubMenu()}getGui(){return this.menuItemComp.getGui()}getParentComponent(){return this.parentComponent}setParentComponent(e){this.parentComponent=e}getSubMenuGui(){return this.eSubMenuGui}onItemSelected(e){var t,i;null===(t=(i=this.menuItemComp).select)||void 0===t||t.call(i),this.params.action?this.getFrameworkOverrides().wrapOutgoing((()=>this.params.action(this.gos.addGridCommonParams({...this.contextParams})))):this.openSubMenu(e&&"keydown"===e.type),this.params.subMenu&&!this.params.action||this.params.suppressCloseOnSelect||this.closeMenu(e)}closeMenu(e){const t={type:"closeMenu"};e&&(e instanceof MouseEvent?t.mouseEvent=e:t.keyboardEvent=e),this.dispatchLocalEvent(t)}onItemActivated(){const e={type:"menuItemActivated",menuItem:this};this.dispatchLocalEvent(e)}cancelActivate(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)}cancelDeactivate(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)}onMouseEnter(){this.cancelDeactivate(),this.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout((()=>this.activate(!0)),this.ACTIVATION_DELAY):this.activate(!0)}onMouseLeave(){this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout((()=>this.deactivate()),this.ACTIVATION_DELAY):this.deactivate()}configureDefaults(e){var t,i;if(!this.menuItemComp)return void setTimeout((()=>this.configureDefaults(e)));let o=this.menuItemComp.getGui();const n=null===(t=(i=this.menuItemComp).getRootElement)||void 0===t?void 0:t.call(i);var r;(n&&(null!==e&&void 0!==e&&e.suppressRootStyles||o.classList.add("ag-menu-option-custom"),o=n),this.eGui=o,this.suppressRootStyles=!(null===e||void 0===e||!e.suppressRootStyles),this.suppressRootStyles)||(o.classList.add(this.cssClassPrefix),null===(r=this.params.cssClasses)||void 0===r||r.forEach((e=>o.classList.add(e))),this.params.disabled&&o.classList.add("".concat(this.cssClassPrefix,"-disabled")));null!==e&&void 0!==e&&e.suppressTooltip||this.refreshTooltip(this.params.tooltip),this.suppressAria=!(null===e||void 0===e||!e.suppressAria),this.suppressAria||((0,s.Znd)(o,"treeitem"),(0,s.icB)(o,this.level+1),this.params.disabled&&(0,s.Key)(o,!0)),null!==e&&void 0!==e&&e.suppressTabIndex||o.setAttribute("tabindex","-1"),this.params.disabled||this.addListeners(o,e),this.suppressFocus=!(null===e||void 0===e||!e.suppressFocus)}refreshTooltip(e,t){this.tooltip=e,this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),e&&this.menuItemComp&&(this.tooltipFeature=this.createBean(new s.w4P({getGui:()=>this.getGui(),getTooltipValue:()=>this.tooltip,getLocation:()=>"menu",shouldDisplayTooltip:t})))}destroy(){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),super.destroy()}},R="ag-list-item-hovered",F=class extends s.AS9{constructor(e,t,i){super(),this.comp=e,this.virtualList=t,this.params=i,this.currentDragValue=null,this.lastHoveredListItem=null}wireBeans(e){this.dragAndDropService=e.dragAndDropService}postConstruct(){this.addManagedListeners(this.params.eventSource,{[this.params.listItemDragStartEvent]:this.listItemDragStart.bind(this),[this.params.listItemDragEndEvent]:this.listItemDragEnd.bind(this)}),this.createDropTarget(),this.createAutoScrollService()}listItemDragStart(e){this.currentDragValue=this.params.getCurrentDragValue(e),this.moveBlocked=this.params.isMoveBlocked(this.currentDragValue)}listItemDragEnd(){window.setTimeout((()=>{this.currentDragValue=null,this.moveBlocked=!1}),10)}createDropTarget(){const e={isInterestedIn:e=>e===this.params.dragSourceType,getIconName:()=>this.moveBlocked?"pinned":"move",getContainer:()=>this.comp.getGui(),onDragging:e=>this.onDragging(e),onDragStop:()=>this.onDragStop(),onDragLeave:()=>this.onDragLeave()};this.dragAndDropService.addDropTarget(e)}createAutoScrollService(){const e=this.virtualList.getGui();this.autoScrollService=new s.Cvn({scrollContainer:e,scrollAxis:"y",getVerticalPosition:()=>e.scrollTop,setVerticalPosition:t=>e.scrollTop=t})}onDragging(e){if(!this.currentDragValue||this.moveBlocked)return;const t=this.getListDragItem(e),i=this.virtualList.getComponentAt(t.rowIndex);if(!i)return;const o=i.getGui().parentElement;this.lastHoveredListItem&&this.lastHoveredListItem.rowIndex===t.rowIndex&&this.lastHoveredListItem.position===t.position||(this.autoScrollService.check(e.event),this.clearHoveredItems(),this.lastHoveredListItem=t,(0,s.I1_)(o,R),(0,s.I1_)(o,"ag-item-highlight-".concat(t.position)))}getListDragItem(e){const t=this.virtualList.getGui(),i=parseFloat(window.getComputedStyle(t).paddingTop),s=this.virtualList.getRowHeight(),o=this.virtualList.getScrollTop(),n=Math.max(0,(e.y-i+o)/s),r=this.params.getNumRows(this.comp)-1,l=0|Math.min(r,n);return{rowIndex:l,position:Math.round(n)>n||n>r?"bottom":"top",component:this.virtualList.getComponentAt(l)}}onDragStop(){this.moveBlocked||(this.params.moveItem(this.currentDragValue,this.lastHoveredListItem),this.clearHoveredItems(),this.autoScrollService.ensureCleared())}onDragLeave(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()}clearHoveredItems(){this.virtualList.getGui().querySelectorAll(".".concat(R)).forEach((e=>{[R,"ag-item-highlight-top","ag-item-highlight-bottom"].forEach((t=>{e.classList.remove(t)}))})),this.lastHoveredListItem=null}};var E=class extends s.BxR{constructor(e){var t;super((t=e.cssClass,'<div class="ag-tabs '.concat(t,'">\n        <div data-ref="eHeader"></div>\n        <div data-ref="eBody" role="presentation" class="ag-tabs-body ').concat(t?"".concat(t,"-body"):"",'"></div>\n    </div>'))),this.eHeader=s.CUI,this.eBody=s.CUI,this.items=[],this.tabbedItemScrollMap=new Map,this.params=e}wireBeans(e){this.focusService=e.focusService}postConstruct(){this.setupHeader(),this.params.items&&this.params.items.forEach((e=>this.addItem(e))),this.initialiseTabGuard({onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),focusInnerElement:this.focusInnerElement.bind(this),focusTrapActive:!0}),this.addDestroyFunc((()=>{var e,t;return null===(e=this.activeItem)||void 0===e||null===(e=e.tabbedItem)||void 0===e||null===(t=e.afterDetachedCallback)||void 0===t?void 0:t.call(e)}))}setupHeader(){const{enableCloseButton:e,cssClass:t}=this.params,i=(e,i)=>{e.classList.add("ag-tabs-".concat(i)),t&&e.classList.add("".concat(t,"-").concat(i))};e?(this.setupCloseButton(i),this.eTabHeader=this.gos.getDocument().createElement("div"),i(this.eHeader,"header-wrapper"),(0,s.Znd)(this.eHeader,"presentation"),this.eHeader.appendChild(this.eTabHeader)):this.eTabHeader=this.eHeader,(0,s.Znd)(this.eTabHeader,"tablist"),i(this.eTabHeader,"header")}setupCloseButton(e){const t=this.gos.getDocument(),i=t.createElement("button");e(i,"close-button");const o=(0,s.scM)("close",this.gos,void 0,!0);(0,s.xER)(i,this.params.closeButtonAriaLabel),i.appendChild(o),this.addManagedElementListeners(i,{click:()=>{var e,t;return null===(e=(t=this.params).onCloseClicked)||void 0===e?void 0:e.call(t)}});const n=t.createElement("div");e(n,"close-button-wrapper"),(0,s.Znd)(n,"presentation"),n.appendChild(i),this.eHeader.appendChild(n),this.eCloseButton=i}handleKeyDown(e){switch(e.key){case s.VDZ.RIGHT:case s.VDZ.LEFT:{if(!this.eTabHeader.contains(this.gos.getActiveDomElement()))return;const t=e.key===s.VDZ.RIGHT,i=this.gos.get("enableRtl"),o=this.items.indexOf(this.activeItem),n=t!==i?Math.min(o+1,this.items.length-1):Math.max(o-1,0);if(o===n)return;e.preventDefault();const r=this.items[n];this.showItemWrapper(r),r.eHeaderButton.focus();break}case s.VDZ.UP:case s.VDZ.DOWN:e.stopPropagation()}}onTabKeyDown(e){if(e.defaultPrevented)return;const{focusService:t,eHeader:i,eBody:s,activeItem:o,params:n}=this,{suppressTrapFocus:r,enableCloseButton:l}=n,a=this.gos.getActiveDomElement(),d=e.target,c=e.shiftKey;if(i.contains(a)){var u,h;if(e.preventDefault(),!l||!c||null!==(u=this.eCloseButton)&&void 0!==u&&u.contains(a))if(r&&c){var p;null===(p=this.focusService.findFocusableElementBeforeTabGuard(this.gos.getDocument().body,d))||void 0===p||p.focus()}else this.focusBody(e.shiftKey);else null===(h=this.eCloseButton)||void 0===h||h.focus();return}let g=null;if(t.isTargetUnderManagedComponent(s,d)&&(c&&(g=this.focusService.findFocusableElementBeforeTabGuard(s,d)),g||r||(g=o.eHeaderButton)),g||!s.contains(a)||(g=t.findNextFocusableElement(s,!1,c),g))g&&(e.preventDefault(),g.focus());else if(r&&!c)this.forceFocusOutOfContainer(c);else if(l&&!c){var m;e.preventDefault(),null===(m=this.eCloseButton)||void 0===m||m.focus()}else e.preventDefault(),this.focusHeader()}focusInnerElement(e){e?this.focusBody(!0):this.focusHeader()}focusHeader(e){this.activeItem.eHeaderButton.focus({preventScroll:e})}focusBody(e){this.focusService.focusInto(this.eBody,e)}setAfterAttachedParams(e){this.afterAttachedParams=e}showFirstItem(){this.items.length>0&&this.showItemWrapper(this.items[0])}addItem(e){const t=document.createElement("span");(0,s.Znd)(t,"tab"),t.setAttribute("tabindex","-1"),t.appendChild(e.title),t.classList.add("ag-tab"),this.eTabHeader.appendChild(t),(0,s.xER)(t,e.titleLabel);const i={tabbedItem:e,eHeaderButton:t};this.items.push(i),t.addEventListener("click",this.showItemWrapper.bind(this,i))}showItem(e){const t=this.items.find((t=>t.tabbedItem===e));t&&this.showItemWrapper(t)}showItemWrapper(e){var t,i;const{tabbedItem:o,eHeaderButton:n}=e;if(null===(t=(i=this.params).onItemClicked)||void 0===t||t.call(i,{item:o}),this.activeItem!==e){var r,l;if(this.lastScrollListener&&(this.lastScrollListener=this.lastScrollListener()),(0,s.wvc)(this.eBody),o.bodyPromise.then((e=>{this.eBody.appendChild(e);const t=!this.focusService.isKeyboardMode();if(this.params.suppressFocusBodyOnOpen||this.focusService.focusInto(this.eBody,!1,t),o.afterAttachedCallback&&o.afterAttachedCallback(this.afterAttachedParams),this.params.keepScrollPosition){const t=o.getScrollableContainer&&o.getScrollableContainer()||e;[this.lastScrollListener]=this.addManagedElementListeners(t,{scroll:()=>{this.tabbedItemScrollMap.set(o.name,t.scrollTop)}});const i=this.tabbedItemScrollMap.get(o.name);void 0!==i&&setTimeout((()=>{t.scrollTop=i}),0)}})),this.activeItem)this.activeItem.eHeaderButton.classList.remove("ag-tab-selected"),null===(r=(l=this.activeItem.tabbedItem).afterDetachedCallback)||void 0===r||r.call(l);n.classList.add("ag-tab-selected"),this.activeItem=e}else{var a,d;null===(a=(d=this.params).onActiveItemClicked)||void 0===a||a.call(d)}}},x=class extends s.AS9{wireBeans(e){this.expressionService=e.expressionService,this.valueService=e.valueService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.userComponentFactory=e.userComponentFactory,this.ctrlsService=e.ctrlsService,this.funcColsService=e.funcColsService}init(e,t,i,s,o,n,r){this.params=r,this.eGui=t,this.eCheckbox=i,this.eExpanded=s,this.eContracted=o,this.comp=e,this.compClass=n;const{node:l,colDef:a}=r,d=this.isTopLevelFooter();if(!d){if(this.isEmbeddedRowMismatch())return;if(l.footer&&this.gos.get("groupHideOpenParents")){if((a&&a.showRowGroup)!==(l.rowGroupColumn&&l.rowGroupColumn.getColId()))return}}if(this.setupShowingValueForOpenedParent(),this.findDisplayedGroupNode(),!d){var c,u,h,p;const e=r.node.footer&&r.node.rowGroupIndex===this.funcColsService.getRowGroupColumns().findIndex((e=>{var t;return e.getColId()===(null===(t=r.colDef)||void 0===t?void 0:t.showRowGroup)})),t="multipleColumns"!=this.gos.get("groupDisplayType")||this.gos.get("treeData")||this.gos.get("showOpenedGroup")&&!r.node.footer&&(!r.node.group||null!=r.node.rowGroupIndex&&r.node.rowGroupIndex>this.funcColsService.getRowGroupColumns().findIndex((e=>{var t;return e.getColId()===(null===(t=r.colDef)||void 0===t?void 0:t.showRowGroup)}))),i=!l.group&&((null===(c=this.params.colDef)||void 0===c?void 0:c.field)||(null===(u=this.params.colDef)||void 0===u?void 0:u.valueGetter)),s=this.isExpandable(),o=this.columnModel.isPivotMode()&&l.leafGroup&&(null===(h=l.rowGroupColumn)||void 0===h?void 0:h.getColId())===(null===(p=r.column)||void 0===p?void 0:p.getColDef().showRowGroup);if(!this.showingValueForOpenedParent&&!s&&!i&&!t&&!e&&!o)return}this.addExpandAndContract(),this.addFullWidthRowDraggerIfNeeded(),this.addCheckboxIfNeeded(),this.addValueElement(),this.setupIndent(),this.refreshAriaExpanded()}getCellAriaRole(){var e,t;const i=null===(e=this.params.colDef)||void 0===e?void 0:e.cellAriaRole,s=null===(t=this.params.column)||void 0===t?void 0:t.getColDef().cellAriaRole;return i||s||"gridcell"}destroy(){super.destroy(),this.expandListener=null}refreshAriaExpanded(){const{node:e,eGridCell:t}=this.params;if(this.expandListener&&(this.expandListener=this.expandListener()),!this.isExpandable())return void(0,s.LRm)(t);const i=()=>{(0,s.mmg)(t,!!e.expanded)};[this.expandListener]=this.addManagedListeners(e,{expandedChanged:i})||null,i()}isTopLevelFooter(){if(!this.gos.getGrandTotalRow())return!1;if(null!=this.params.value||-1!=this.params.node.level)return!1;const e=this.params.colDef;if(null==e)return!0;if(!0===e.showRowGroup)return!0;const t=this.funcColsService.getRowGroupColumns();if(!t||0===t.length)return!0;return t[0].getId()===e.showRowGroup}isEmbeddedRowMismatch(){if(!this.params.fullWidth||!this.gos.get("embedFullWidthRows"))return!1;const e="left"===this.params.pinned,t="right"===this.params.pinned,i=!e&&!t;return this.gos.get("enableRtl")?this.visibleColsService.isPinningLeft()?!t:!i:this.visibleColsService.isPinningLeft()?!e:!i}findDisplayedGroupNode(){const e=this.params.column,t=this.params.node;if(this.showingValueForOpenedParent){let i=t.parent;for(;null!=i;){if(i.rowGroupColumn&&e.isRowGroupDisplayed(i.rowGroupColumn.getId())){this.displayedGroupNode=i;break}i=i.parent}}(0,s.n92)(this.displayedGroupNode)&&(this.displayedGroupNode=t)}setupShowingValueForOpenedParent(){const e=this.params.node,t=this.params.column;if(!this.gos.get("groupHideOpenParents"))return void(this.showingValueForOpenedParent=!1);if(!e.groupData)return void(this.showingValueForOpenedParent=!1);if(null!=e.rowGroupColumn){const i=e.rowGroupColumn.getId();if(t.isRowGroupDisplayed(i))return void(this.showingValueForOpenedParent=!1)}const i=null!=e.groupData[t.getId()];this.showingValueForOpenedParent=i}addValueElement(){this.displayedGroupNode.footer?this.addFooterValue():(this.addGroupValue(),this.addChildCount())}addGroupValue(){const e=this.adjustParamsWithDetailsFromRelatedColumn(),t=this.getInnerCompDetails(e),{valueFormatted:i,value:s}=e;let o=i;if(null==o){var n;const e=this.displayedGroupNode.rowGroupColumn&&(null===(n=this.params.column)||void 0===n?void 0:n.isRowGroupDisplayed(this.displayedGroupNode.rowGroupColumn.getId()));if(""===this.displayedGroupNode.key&&this.displayedGroupNode.group&&e){o=this.localeService.getLocaleTextFunc()("blanks","(Blanks)")}else o=null!==s&&void 0!==s?s:null}this.comp.setInnerRenderer(t,o)}adjustParamsWithDetailsFromRelatedColumn(){const e=this.displayedGroupNode.rowGroupColumn,t=this.params.column;if(!e)return this.params;if(null!=t){if(!t.isRowGroupDisplayed(e.getId()))return this.params}const i=this.params,{value:s,node:o}=this.params;return{...i,valueFormatted:this.valueService.formatValue(e,o,s)}}addFooterValue(){let e=this.params.totalValueGetter;if(!e){const t=this.params.footerValueGetter;t&&(e=t,(0,s.Brh)("As of v31.3, footerValueGetter is deprecated. Use `totalValueGetter` instead."))}let t="";if(e){const i=(0,s.n9G)(this.params);i.value=this.params.value,"function"===typeof e?t=e(i):"string"===typeof e?t=this.expressionService.evaluate(e,i):(0,s.Brh)("footerValueGetter should be either a function or a string (expression)")}else{t=this.localeService.getLocaleTextFunc()("footerTotal","Total")+" "+(null!=this.params.value?this.params.value:"")}const i=this.getInnerCompDetails(this.params);this.comp.setInnerRenderer(i,t)}getInnerCompDetails(e){if(e.fullWidth)return this.userComponentFactory.getFullWidthGroupRowInnerCellRenderer(this.gos.get("groupRowRendererParams"),e);const t=this.userComponentFactory.getInnerRendererDetails(e,e),i=e=>e&&e.componentClass==this.compClass;if(t&&!i(t))return t;const s=this.displayedGroupNode.rowGroupColumn,o=s?s.getColDef():void 0;if(!o)return;const n=this.userComponentFactory.getCellRendererDetails(o,e);if(n&&!i(n))return n;if(i(n)&&o.cellRendererParams&&o.cellRendererParams.innerRenderer){return this.userComponentFactory.getInnerRendererDetails(o.cellRendererParams,e)}}addChildCount(){this.params.suppressCount||(this.addManagedListeners(this.displayedGroupNode,{allChildrenCountChanged:this.updateChildCount.bind(this)}),this.updateChildCount())}updateChildCount(){const e=this.displayedGroupNode.allChildrenCount,t=this.isShowRowGroupForThisRow()&&null!=e&&e>=0?"(".concat(e,")"):"";this.comp.setChildCount(t)}isShowRowGroupForThisRow(){if(this.gos.get("treeData"))return!0;const e=this.displayedGroupNode.rowGroupColumn;if(!e)return!1;const t=this.params.column;return null==t||t.isRowGroupDisplayed(e.getId())}addExpandAndContract(){var e;const t=this.params,i=(0,s.scM)("groupExpanded",this.gos,null),o=(0,s.scM)("groupContracted",this.gos,null);i&&this.eExpanded.appendChild(i),o&&this.eContracted.appendChild(o);const n=t.eGridCell;(null===(e=this.params.column)||void 0===e?void 0:e.isCellEditable(t.node))&&this.gos.get("enableGroupEdit")||!this.isExpandable()||t.suppressDoubleClickExpand||this.addManagedListeners(n,{dblclick:this.onCellDblClicked.bind(this)}),this.addManagedListeners(this.eExpanded,{click:this.onExpandClicked.bind(this)}),this.addManagedListeners(this.eContracted,{click:this.onExpandClicked.bind(this)}),this.addManagedListeners(n,{keydown:this.onKeyDown.bind(this)}),this.addManagedListeners(t.node,{expandedChanged:this.showExpandAndContractIcons.bind(this)}),this.showExpandAndContractIcons();const r=this.onRowNodeIsExpandableChanged.bind(this);this.addManagedListeners(this.displayedGroupNode,{allChildrenCountChanged:r,masterChanged:r,groupChanged:r,hasChildrenChanged:r})}onExpandClicked(e){(0,s.p71)(e)||((0,s.yth)(e),this.onExpandOrContract(e))}onExpandOrContract(e){const t=this.displayedGroupNode,i=!t.expanded;!i&&t.sticky&&this.scrollToStickyNode(t),t.setExpanded(i,e)}scrollToStickyNode(e){this.ctrlsService.getGridBodyCtrl().getScrollFeature().setVerticalScrollPosition(e.rowTop-e.stickyRowTop)}isExpandable(){if(this.showingValueForOpenedParent)return!0;const e=this.displayedGroupNode,t=this.columnModel.isPivotMode()&&e.leafGroup;if(!(e.isExpandable()&&!e.footer&&!t))return!1;const i=this.params.column;if(null!=i&&"string"===typeof i.getColDef().showRowGroup){return this.isShowRowGroupForThisRow()}return!0}showExpandAndContractIcons(){const{params:e,displayedGroupNode:t,columnModel:i}=this,{node:s}=e,o=this.isExpandable();if(o){const e=!!this.showingValueForOpenedParent||s.expanded;this.comp.setExpandedDisplayed(e),this.comp.setContractedDisplayed(!e)}else this.comp.setExpandedDisplayed(!1),this.comp.setContractedDisplayed(!1);const n=i.isPivotMode(),r=n&&t.leafGroup,l=o&&!r,a=s.footer&&-1===s.level;this.comp.addOrRemoveCssClass("ag-cell-expandable",l),this.comp.addOrRemoveCssClass("ag-row-group",l),n?this.comp.addOrRemoveCssClass("ag-pivot-leaf-group",!!r):a||this.comp.addOrRemoveCssClass("ag-row-group-leaf-indent",!l)}onRowNodeIsExpandableChanged(){this.showExpandAndContractIcons(),this.setIndent(),this.refreshAriaExpanded()}setupIndent(){const e=this.params.node;this.params.suppressPadding||(this.addManagedListeners(e,{uiLevelChanged:this.setIndent.bind(this)}),this.setIndent())}setIndent(){if(this.gos.get("groupHideOpenParents"))return;const e=this.params,t=e.node,i=!!e.colDef,s=this.gos.get("treeData"),o=!i||s||!0===e.colDef.showRowGroup?t.uiLevel:0;this.indentClass&&this.comp.addOrRemoveCssClass(this.indentClass,!1),this.indentClass="ag-row-group-indent-"+o,this.comp.addOrRemoveCssClass(this.indentClass,!0),this.eGui.style.setProperty("--ag-indentation-level",String(o))}addFullWidthRowDraggerIfNeeded(){if(!this.params.fullWidth||!this.params.rowDrag)return;const e=new s.l1x((()=>this.params.value),this.params.node);this.createManagedBean(e),this.eGui.insertAdjacentElement("afterbegin",e.getGui())}isUserWantsSelected(){const e=this.params.checkbox;return"function"===typeof e||!0===e}addCheckboxIfNeeded(){const e=this.displayedGroupNode,t=this.isUserWantsSelected()&&!e.footer&&!e.rowPinned&&!e.detail;if(t){const e=new s.BSb;this.createBean(e),e.init({rowNode:this.params.node,column:this.params.column,overrides:{isVisible:this.params.checkbox,callbackParams:this.params,removeHidden:!0}}),this.eCheckbox.appendChild(e.getGui()),this.addDestroyFunc((()=>this.destroyBean(e)))}this.comp.setCheckboxVisible(t)}onKeyDown(e){if(!(e.key===s.VDZ.ENTER)||this.params.suppressEnterExpand)return;this.params.column&&this.params.column.isCellEditable(this.params.node)||this.onExpandOrContract(e)}onCellDblClicked(e){if((0,s.p71)(e))return;(0,s.WU1)(this.eExpanded,e)||(0,s.WU1)(this.eContracted,e)||this.onExpandOrContract(e)}},P=class extends s.wA2{constructor(){super('<span class="ag-cell-wrapper">\n        <span class="ag-group-expanded" data-ref="eExpanded"></span>\n        <span class="ag-group-contracted" data-ref="eContracted"></span>\n        <span class="ag-group-checkbox ag-invisible" data-ref="eCheckbox"></span>\n        <span class="ag-group-value" data-ref="eValue"></span>\n        <span class="ag-group-child-count" data-ref="eChildCount"></span>\n    </span>'),this.eExpanded=s.CUI,this.eContracted=s.CUI,this.eCheckbox=s.CUI,this.eValue=s.CUI,this.eChildCount=s.CUI}init(e){const t={setInnerRenderer:(e,t)=>this.setRenderDetails(e,t),setChildCount:e=>this.eChildCount.textContent=e,addOrRemoveCssClass:(e,t)=>this.addOrRemoveCssClass(e,t),setContractedDisplayed:e=>(0,s.DIH)(this.eContracted,e),setExpandedDisplayed:e=>(0,s.DIH)(this.eExpanded,e),setCheckboxVisible:e=>this.eCheckbox.classList.toggle("ag-invisible",!e)},i=this.createManagedBean(new x),o=!e.colDef,n=this.getGui();i.init(t,n,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,e),o&&(0,s.Znd)(n,i.getCellAriaRole())}setRenderDetails(e,t){if(e){const t=e.newAgStackInstance();if(null==t)return;t.then((e=>{if(!e)return;const t=()=>this.destroyBean(e);this.isAlive()?(this.eValue.appendChild(e.getGui()),this.addDestroyFunc(t)):t()}))}else this.eValue.innerText=t}destroy(){this.destroyBean(this.innerCellRenderer),super.destroy()}refresh(){return!1}}},18798:(e,t,i)=>{"use strict";i.d(t,{u7:()=>ot});var s=i(30845),o=i(7154),n=i(8701),r={0:1,"0.00":2,"#,##0":3,"#,##0.00":4,"0%":9,"0.00%":10,"0.00E+00":11,"# ?/?":12,"# ??/??":13,"mm-dd-yy":14,"d-mmm-yy":15,"d-mmm":16,"mmm-yy":17,"h:mm AM/PM":18,"h:mm:ss AM/PM":19,"h:mm":20,"h:mm:ss":21,"m/d/yy h:mm":22,"#,##0 ;(#,##0)":37,"#,##0 ;[Red](#,##0)":38,"#,##0.00;(#,##0.00)":39,"#,##0.00;[Red](#,##0.00)":40,"mm:ss":45,"[h]:mm:ss":46,"mmss.0":47,"##0.0E+0":48,"@":49},l=e=>Math.ceil(9525*e),a=(e,t)=>{if(!t)return;let i;if("number"===typeof t)i=t;else{i=t({rowIndex:e})}return s=i,Math.round(72*s/96);var s},d=(e,t)=>{const i=o.IU.createHeader({encoding:"UTF-8",standalone:"yes"}),s=o.IU.createXml(e);return t?s:"".concat(i).concat(s)},c=e=>{const t=String.fromCharCode,i=Math.floor(e/26),s=e%26;return i&&26!==e?s?i<26?t(65+i-1)+t(65+s-1):c(i)+t(65+s-1):c(i-1)+"Z":t(65+e-1)},u=e=>{if(null==e)return null;let t="";for(let i=0;i<e.length;i++){const s=e.charCodeAt(i);if(s>=0&&s<=31&&10!==s){const e=s.toString(16).toUpperCase().padStart(4,"0");t+="_x".concat(e,"_")}else t+=e[i]}return t},h=e=>{const t=[];for(const i of e.keys()){const e=i.toString(),o={name:"t",textNode:(0,s.BYN)(u(e),!1)};e.trim().length!==e.length&&(o.properties={rawMap:{"xml:space":"preserve"}}),t.push({name:"si",children:[o]})}return t},p={getTemplate(e){const{name:t,ContentType:i,Extension:s,PartName:o}=e;return{name:t,properties:{rawMap:{Extension:s,PartName:o,ContentType:i}}}}},g={getTemplate(e){const t=new Array(e).fill(void 0).map(((e,t)=>({name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",PartName:"/xl/worksheets/sheet".concat(t+1,".xml")}))),i=Ze.worksheetImages.size,s=Ze.worksheetHeaderFooterImages.size,o=Ze.worksheetDataTables.size,n={};Ze.workbookImageIds.forEach((e=>{const t="jpg"===e.type?"jpeg":e.type;n[t]=!0}));const r=new Array(i).fill(void 0).map(((e,t)=>({name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml",PartName:"/xl/drawings/drawing".concat(t+1,".xml")}))),l=new Array(o).fill(void 0).map(((e,t)=>({name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml",PartName:"/xl/tables/".concat(Ze.getTableNameFromIndex(t),".xml")}))),a=Object.keys(n).map((e=>({name:"Default",ContentType:"image/".concat(e),Extension:e})));s&&a.push({name:"Default",Extension:"vml",ContentType:"application/vnd.openxmlformats-officedocument.vmlDrawing"});return{name:"Types",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"}},children:[...a,{name:"Default",Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"},{name:"Default",ContentType:"application/xml",Extension:"xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",PartName:"/xl/workbook.xml"},...t,{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml",PartName:"/xl/theme/theme1.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",PartName:"/xl/styles.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",PartName:"/xl/sharedStrings.xml"},...r,...l,{name:"Override",ContentType:"application/vnd.openxmlformats-package.core-properties+xml",PartName:"/docProps/core.xml"}].map((e=>p.getTemplate(e)))}}},m={getTemplate(e){const t=(new Date).toJSON();return{name:"cp:coreProperties",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance"}}]},children:[{name:"dc:creator",textNode:e},{name:"dc:title",textNode:"Workbook"},{name:"dcterms:created",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:t},{name:"dcterms:modified",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:t}]}}},v=(e,t)=>({name:"xdr:".concat(e),children:[{name:"xdr:col",textNode:t.col.toString()},{name:"xdr:colOff",textNode:t.offsetX.toString()},{name:"xdr:row",textNode:t.row.toString()},{name:"xdr:rowOff",textNode:t.offsetY.toString()}]}),f=e=>{const t=[{name:"a:ext",properties:{rawMap:{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}},children:[{name:"a16:creationId",properties:{rawMap:{id:"{822E6D20-D7BC-2841-A643-D49A6EF008A2}","xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main"}}}]}];switch(e.recolor&&e.recolor.toLowerCase()){case"grayscale":case"sepia":case"washout":t.push({name:"a:ext",properties:{rawMap:{uri:"{C183D7F6-B498-43B3-948B-1728B52AA6E4}"}},children:[{name:"adec:decorative",properties:{rawMap:{val:"0","xmlns:adec":"http://schemas.microsoft.com/office/drawing/2017/decorative"}}}]})}return{name:"a:extLst",children:t}},C=(e,t)=>({name:"xdr:nvPicPr",children:[{name:"xdr:cNvPr",properties:{rawMap:{id:t,name:e.id,descr:null!=e.altText?e.altText:void 0}},children:[f(e)]},{name:"xdr:cNvPicPr",properties:{rawMap:{preferRelativeResize:"0"}},children:[{name:"a:picLocks"}]}]}),w=e=>{if(!e.saturation&&!e.tint)return;const t=[];return e.saturation&&t.push({name:"a:satMod",properties:{rawMap:{val:1e3*e.saturation}}}),e.tint&&t.push({name:"a:tint",properties:{rawMap:{val:1e3*e.tint}}}),t},S=(e,t)=>{let i;if(e.transparency){const t=Math.min(Math.max(e.transparency,0),100);i=[{name:"a:alphaModFix",properties:{rawMap:{amt:1e5-Math.round(1e3*t)}}}]}if(e.recolor)switch(i||(i=[]),e.recolor.toLocaleLowerCase()){case"grayscale":i.push({name:"a:grayscl"});break;case"sepia":i.push((o={color:"D9C3A5",tint:50,saturation:180},{name:"a:duotone",children:[{name:"a:prstClr",properties:{rawMap:{val:(s={color:"black"}).color}},children:w(s)},{name:"a:srgbClr",properties:{rawMap:{val:o.color}},children:w(o)}]}));break;case"washout":i.push({name:"a:lum",properties:{rawMap:{bright:"70000",contrast:"-70000"}}})}var s,o;return{name:"xdr:blipFill",children:[{name:"a:blip",properties:{rawMap:{cstate:"print","r:embed":"rId".concat(t),"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}},children:i},{name:"a:stretch",children:[{name:"a:fillRect"}]}]}},y=(e,t)=>{const i={name:"a:xfrm",children:[{name:"a:off",properties:{rawMap:{x:0,y:0}}},{name:"a:ext",properties:{rawMap:{cx:t.width,cy:t.height}}}]};if(e.rotation){const t=e.rotation;i.properties={rawMap:{rot:6e4*Math.min(Math.max(t,0),360)}}}return{name:"xdr:spPr",children:[i,{name:"a:prstGeom",properties:{rawMap:{prst:"rect"}},children:[{name:"a:avLst"}]}]}},b=(e,t,i,s)=>({name:"xdr:pic",children:[C(e,t+1),S(e,i+1),y(e,s)]}),R={getTemplate(e){const{sheetIndex:t}=e,i=Ze.worksheetImages.get(t),s=Ze.worksheetImageIds.get(t);return{name:"xdr:wsDr",properties:{rawMap:{"xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main","xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing"}},children:i.map(((e,t)=>{const i=(e=>{e.fitCell=!!e.fitCell||!e.width||!e.height;const{position:t={},fitCell:i,width:s=0,height:o=0,totalHeight:n,totalWidth:r}=e,{offsetX:a=0,offsetY:d=0,row:c=1,rowSpan:u=1,column:h=1,colSpan:p=1}=t;return{from:{row:c-1,col:h-1,offsetX:l(a),offsetY:l(d)},to:{row:c-1+(i?1:u-1),col:h-1+(i?1:p-1),offsetX:l(s+a),offsetY:l(o+d)},height:l(n||o),width:l(r||s)}})(e);return{name:"xdr:twoCellAnchor",properties:{rawMap:{editAs:"absolute"}},children:[v("from",i.from),v("to",i.to),b(e,t,s.get(e.id).index,i),{name:"xdr:clientData"}]}}))}}},F={getTemplate(e){const{Id:t,Type:i,Target:s}=e;return{name:"Relationship",properties:{rawMap:{Id:t,Type:i,Target:s}}}}},E={getTemplate:e=>({name:"Relationships",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}},children:e.map((e=>F.getTemplate(e)))})},x={getTemplate:e=>({name:"sst",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:e.size,uniqueCount:e.size}},children:h(e)})},P={None:"None",Dot:"Dotted",Dash:"Dashed",Double:"Double",DashDot:"DashDot",DashDotDot:"DashDotDot",SlantDashDot:"SlantDashDot",Continuous:"Continuous"},M=["Dashed","DashDot","DashDotDot"],D={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinDiagStripe:"lightUp",ThinHorzCross:"lightGrid",ThinDiagCross:"lightTrellis",Gray125:"gray125",Gray0625:"gray0625"},I={Automatic:"general",Left:"left",Center:"center",Right:"right",Fill:"fill",Justify:"justify",CenterAcrossSelection:"centerContinuous",Distributed:"distributed",JustifyDistributed:"justify"},T={Automatic:void 0,Top:"top",Bottom:"bottom",Center:"center",Justify:"justify",Distributed:"distributed",JustifyDistributed:"justify"},A=e=>void 0==e?e:("#"===e.charAt(0)&&(e=e.substring(1)),6===e.length?"FF"+e:e),k=(e,t)=>{if(!e)return"thin";const i=(e=>{switch(e){case 1:return"thin";case 2:return"medium";case 3:return"thick";default:return"hair"}})(t);if("Continuous"===e)return i;const s=P[e];return"medium"===i&&M.some((e=>e===s))?"medium".concat(s):"".concat(s.charAt(0).toLowerCase()).concat(s.substring(1))},L=e=>I[e]||"general",G=e=>T[e]||void 0,N=e=>({name:"color",properties:{rawMap:{rgb:A(e||"#000000")}}}),O={getTemplate(e){const{left:t,right:i,top:s,bottom:o,diagonal:n}=e,r=t?[N(t.color)]:void 0,l=i?[N(i.color)]:void 0,a=s?[N(s.color)]:void 0,d=o?[N(o.color)]:void 0,c=n?[N(n.color)]:void 0;return{name:"border",children:[{name:"left",properties:{rawMap:{style:t&&t.style}},children:r},{name:"right",properties:{rawMap:{style:i&&i.style}},children:l},{name:"top",properties:{rawMap:{style:s&&s.style}},children:a},{name:"bottom",properties:{rawMap:{style:o&&o.style}},children:d},{name:"diagonal",properties:{rawMap:{style:n&&n.style}},children:c}]}}},B={getTemplate:e=>({name:"borders",properties:{rawMap:{count:e.length}},children:e.map((e=>O.getTemplate(e)))})},V=e=>{const t=["Context","LeftToRight","RightToLeft"].indexOf(e);return Math.max(t,0)},H={getTemplate(e){const{horizontal:t,indent:i,readingOrder:s,rotate:o,shrinkToFit:n,vertical:r,wrapText:l}=e;return{name:"alignment",properties:{rawMap:{horizontal:t&&L(t),indent:i,readingOrder:s&&V(s),textRotation:o,shrinkToFit:n,vertical:r&&G(r),wrapText:l}}}}},W={getTemplate(e){const t=!1===e.protected?0:1;return{name:"protection",properties:{rawMap:{hidden:!0===e.hideFormula?1:0,locked:t}}}}},z={getTemplate(e){const{alignment:t,borderId:i,fillId:s,fontId:o,numFmtId:n,protection:r,quotePrefix:l,xfId:a}=e,d=[];return t&&d.push(H.getTemplate(t)),r&&d.push(W.getTemplate(r)),{name:"xf",properties:{rawMap:{applyAlignment:t?1:void 0,applyProtection:r?1:void 0,applyBorder:i?1:void 0,applyFill:s?1:void 0,borderId:i,fillId:s,applyFont:o?1:void 0,fontId:o,applyNumberFormat:n?1:void 0,numFmtId:n,quotePrefix:l?1:void 0,xfId:a}},children:d.length?d:void 0}}},U={getTemplate:e=>({name:"cellStyleXfs",properties:{rawMap:{count:e.length}},children:e.map((e=>z.getTemplate(e)))})},_={getTemplate(e){const{builtinId:t,name:i,xfId:s}=e;return{name:"cellStyle",properties:{rawMap:{builtinId:t,name:i,xfId:s}}}}},K={getTemplate:e=>({name:"cellStyles",properties:{rawMap:{count:e.length}},children:e.map((e=>_.getTemplate(e)))})},Z={getTemplate:e=>({name:"cellXfs",properties:{rawMap:{count:e.length}},children:e.map((e=>z.getTemplate(e)))})},j={getTemplate(e){const{patternType:t,fgTheme:i,fgTint:s,fgRgb:o,bgRgb:n,bgIndexed:r}=e,l={name:"patternFill",properties:{rawMap:{patternType:t}}};return(i||s||o)&&(l.children=[{name:"fgColor",properties:{rawMap:{theme:i,tint:s,rgb:o}}}]),(r||n)&&(l.children||(l.children=[]),l.children.push({name:"bgColor",properties:{rawMap:{indexed:r,rgb:n}}})),{name:"fill",children:[l]}}},Y={getTemplate:e=>({name:"fills",properties:{rawMap:{count:e.length}},children:e.map((e=>j.getTemplate(e)))})},q={getTemplate(e){const{size:t,colorTheme:i,color:s="FF000000",fontName:o="Calibri",family:n,scheme:r,italic:l,bold:a,strikeThrough:d,outline:c,shadow:u,underline:h,verticalAlign:p}=e,g=[{name:"sz",properties:{rawMap:{val:t}}},{name:"color",properties:{rawMap:{theme:i,rgb:s}}},{name:"name",properties:{rawMap:{val:o}}}];return n&&g.push({name:"family",properties:{rawMap:{val:n}}}),r&&g.push({name:"scheme",properties:{rawMap:{val:r}}}),l&&g.push({name:"i"}),a&&g.push({name:"b"}),d&&g.push({name:"strike"}),c&&g.push({name:"outline"}),u&&g.push({name:"shadow"}),h&&g.push({name:"u",properties:{rawMap:{val:h}}}),p&&g.push({name:"vertAlign",properties:{rawMap:{val:p}}}),{name:"font",children:g}}},Q={getTemplate:e=>({name:"fonts",properties:{rawMap:{count:e.length}},children:e.map((e=>q.getTemplate(e)))})};var X,$,J,ee,te,ie,se,oe,ne,re={getTemplate(e){let{formatCode:t,numFmtId:i}=e;return t.length&&(t=function(e){const t=e.split(/(\[[^\]]*\])/);for(let i=0;i<t.length;i++){let e=t[i];e.length&&(e.startsWith("[")||(e=e.replace(/\$/g,'"$"')),t[i]=(0,s.BYN)(e))}return t.join("")}(t)),{name:"numFmt",properties:{rawMap:{formatCode:t,numFmtId:i}}}}},le={getTemplate:e=>({name:"numFmts",properties:{rawMap:{count:e.length}},children:e.map((e=>re.getTemplate(e)))})},ae=(e,t)=>(-1!==e.indexOf("mixedStyle")&&t>1&&(e+="_".concat(t)),e),de=()=>{X={base:0},$=[],J=[{fontName:"Calibri",colorTheme:"1",family:"2",scheme:"minor"}],ee=[{patternType:"none"},{patternType:"gray125"}],te=[{left:void 0,right:void 0,top:void 0,bottom:void 0,diagonal:void 0}],ie=[{borderId:0,fillId:0,fontId:0,numFmtId:0}],se=[{borderId:0,fillId:0,fontId:0,numFmtId:0,xfId:0}],oe=[{builtinId:0,name:"Normal",xfId:0}]},ce=e=>{const t=(i=e.pattern)?D[i]||i:"none";var i;const s=A(e.color),o=A(e.patternColor);let n=ee.findIndex((e=>{const{patternType:i,fgRgb:n,bgRgb:r}=e;return i==t&&n==s&&r==o}));return-1===n&&(n=ee.length,ee.push({patternType:t,fgRgb:s,bgRgb:o})),n},ue=e=>{const{fontName:t="Calibri",color:i,size:s,bold:o,italic:n,outline:r,shadow:l,strikeThrough:a,underline:d,family:c,verticalAlign:u}=e,h=A(i),p=(e=>{if(void 0===e)return;const t=["Automatic","Roman","Swiss","Modern","Script","Decorative"].indexOf(e||"Automatic");return Math.max(t,0)})(c),g=d?d.toLocaleLowerCase():void 0,m=u?u.toLocaleLowerCase():void 0;let v=J.findIndex((e=>e.fontName==t&&e.color==h&&e.size==s&&e.bold==o&&e.italic==n&&e.outline==r&&e.shadow==l&&e.strikeThrough==a&&e.underline==g&&e.verticalAlign==m&&e.family==p));return-1===v&&(v=J.length,J.push({fontName:t,color:h,size:s,bold:o,italic:n,outline:r,shadow:l,strikeThrough:a,underline:g,verticalAlign:m,family:null!=p?p.toString():void 0})),v},he=e=>{const{alignment:t,borders:i,font:s,interior:o,numberFormat:n,protection:l,quotePrefix:a}=e;let{id:d}=e,c=0,u=0,h=0,p=0;d&&(d=ae(d,ne),void 0==X[d]&&(o&&(c=ce(o)),i&&(u=(e=>{const{borderBottom:t,borderTop:i,borderLeft:s,borderRight:o}=e;let n,r,l,a,d,c,u,h;s&&(l=k(s.lineStyle,s.weight),u=A(s.color)),o&&(a=k(o.lineStyle,o.weight),h=A(o.color)),t&&(n=k(t.lineStyle,t.weight),d=A(t.color)),i&&(r=k(i.lineStyle,i.weight),c=A(i.color));let p=te.findIndex((e=>{const{left:t,right:i,top:s,bottom:o}=e;if(!t&&(l||u))return!1;if(!i&&(a||h))return!1;if(!s&&(r||c))return!1;if(!o&&(n||d))return!1;const{style:p,color:g}=t||{},{style:m,color:v}=i||{},{style:f,color:C}=s||{},{style:w,color:S}=o||{};return p==l&&g==u&&m==a&&v==h&&f==r&&C==c&&w==n&&S==d}));return-1===p&&(p=te.length,te.push({left:{style:l,color:u},right:{style:a,color:h},top:{style:r,color:c},bottom:{style:n,color:d},diagonal:{style:void 0,color:void 0}})),p})(i)),s&&(h=ue(s)),n&&(p=(e=>{if(r[e])return r[e];let t=$.findIndex((t=>t.formatCode===e));return-1===t?(t=$.length+164,$.push({formatCode:e,numFmtId:t})):t=$[t].numFmtId,t})(n.format)),X[d]=se.length,se.push({alignment:t,borderId:u||0,fillId:c||0,fontId:h||0,numFmtId:p||0,protection:l,quotePrefix:a,xfId:0})))},pe=(e,t)=>X[ae(e,t)]||0,ge={getTemplate(e){const t=le.getTemplate($),i=Q.getTemplate(J.map((t=>({...t,size:null!=t.size?t.size:e})))),s=Y.getTemplate(ee),o=B.getTemplate(te),n=U.getTemplate(ie),r=Z.getTemplate(se),l=K.getTemplate(oe);return de(),{name:"styleSheet",properties:{rawMap:{"mc:Ignorable":"x14ac x16r2 xr",xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision"}},children:[t,i,s,o,n,r,l,{name:"tableStyles",properties:{rawMap:{count:0,defaultPivotStyle:"PivotStyleLight16",defaultTableStyle:"TableStyleMedium2"}}}]}}},me={getTemplate(e,t){const{name:i,columns:s,rowCount:o,displayName:n,headerRowIndex:r,showRowStripes:l,showColumnStripes:a,showFilterButtons:d,highlightFirstColumn:c,highlightLastColumn:u}=e||{};if(!e||!i||!Array.isArray(s)||!s.length||!o)return{name:"table"};const h=s.map(((e,t)=>({name:"filterColumn",properties:{rawMap:{colId:t.toString(),hiddenButton:d[t]?0:1}}}))),p=r+1,g=(t+1).toString(),m="A".concat(p),v="".concat(String.fromCharCode(64+s.length)).concat(p+o),f="".concat(m,":").concat(v);return{name:"table",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","mc:Ignorable":"xr xr3","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision","xmlns:xr3":"http://schemas.microsoft.com/office/spreadsheetml/2016/revision3",name:i,displayName:t?"".concat(n,"_").concat(t+1):n,ref:f,totalsRowShown:0,id:g}},children:[{name:"autoFilter",properties:{rawMap:{ref:f}},children:h},{name:"tableColumns",properties:{rawMap:{count:s.length}},children:s.map(((e,t)=>({name:"tableColumn",properties:{rawMap:{id:(t+1).toString(),name:e,dataCellStyle:"Normal"}}})))},{name:"tableStyleInfo",properties:{rawMap:{name:"TableStyleLight1",showFirstColumn:c?1:0,showLastColumn:u?1:0,showRowStripes:l?1:0,showColumnStripes:a?1:0}}}]}}},ve=e=>{const[t,i,s,o]=e;return{name:"a:".concat(t),children:[{name:"a:".concat(i),properties:{rawMap:{val:s,lastClr:o}}}]}},fe={getTemplate:()=>({name:"a:clrScheme",properties:{rawMap:{name:"Office"}},children:[ve(["dk1","sysClr","windowText","000000"]),ve(["lt1","sysClr","window","FFFFFF"]),ve(["dk2","srgbClr","44546A"]),ve(["lt2","srgbClr","E7E6E6"]),ve(["accent1","srgbClr","4472C4"]),ve(["accent2","srgbClr","ED7D31"]),ve(["accent3","srgbClr","A5A5A5"]),ve(["accent4","srgbClr","FFC000"]),ve(["accent5","srgbClr","5B9BD5"]),ve(["accent6","srgbClr","70AD47"]),ve(["hlink","srgbClr","0563C1"]),ve(["folHlink","srgbClr","954F72"])]})},Ce=e=>{const[t,i,s,o]=e;return{name:"a:".concat(t),properties:{rawMap:{script:s,typeface:i,panose:o}}}},we={getTemplate:()=>({name:"a:fontScheme",properties:{rawMap:{name:"Office"}},children:[{name:"a:majorFont",children:[Ce(["latin","Calibri Light",void 0,"020F0302020204030204"]),Ce(["ea",""]),Ce(["cs",""]),Ce(["font","\u6e38\u30b4\u30b7\u30c3\u30af Light","Jpan"]),Ce(["font","\ub9d1\uc740 \uace0\ub515","Hang"]),Ce(["font","\u7b49\u7ebf Light","Hans"]),Ce(["font","\u65b0\u7d30\u660e\u9ad4","Hant"]),Ce(["font","Times New Roman","Arab"]),Ce(["font","Times New Roman","Hebr"]),Ce(["font","Tahoma","Thai"]),Ce(["font","Nyala","Ethi"]),Ce(["font","Vrinda","Beng"]),Ce(["font","Shruti","Gujr"]),Ce(["font","MoolBoran","Khmr"]),Ce(["font","Tunga","Knda"]),Ce(["font","Raavi","Guru"]),Ce(["font","Euphemia","Cans"]),Ce(["font","Plantagenet Cherokee","Cher"]),Ce(["font","Microsoft Yi Baiti","Yiii"]),Ce(["font","Microsoft Himalaya","Tibt"]),Ce(["font","MV Boli","Thaa"]),Ce(["font","Mangal","Deva"]),Ce(["font","Gautami","Telu"]),Ce(["font","Latha","Taml"]),Ce(["font","Estrangelo Edessa","Syrc"]),Ce(["font","Kalinga","Orya"]),Ce(["font","Kartika","Mlym"]),Ce(["font","DokChampa","Laoo"]),Ce(["font","Iskoola Pota","Sinh"]),Ce(["font","Mongolian Baiti","Mong"]),Ce(["font","Times New Roman","Viet"]),Ce(["font","Microsoft Uighur","Uigh"]),Ce(["font","Sylfaen","Geor"]),Ce(["font","Arial","Armn"]),Ce(["font","Leelawadee UI","Bugi"]),Ce(["font","Microsoft JhengHei","Bopo"]),Ce(["font","Javanese Text","Java"]),Ce(["font","Segoe UI","Lisu"]),Ce(["font","Myanmar Text","Mymr"]),Ce(["font","Ebrima","Nkoo"]),Ce(["font","Nirmala UI","Olck"]),Ce(["font","Ebrima","Osma"]),Ce(["font","Phagspa","Phag"]),Ce(["font","Estrangelo Edessa","Syrn"]),Ce(["font","Estrangelo Edessa","Syrj"]),Ce(["font","Estrangelo Edessa","Syre"]),Ce(["font","Nirmala UI","Sora"]),Ce(["font","Microsoft Tai Le","Tale"]),Ce(["font","Microsoft New Tai Lue","Talu"]),Ce(["font","Ebrima","Tfng"])]},{name:"a:minorFont",children:[Ce(["latin","Calibri",void 0,"020F0502020204030204"]),Ce(["ea",""]),Ce(["cs",""]),Ce(["font","\u6e38\u30b4\u30b7\u30c3\u30af","Jpan"]),Ce(["font","\ub9d1\uc740 \uace0\ub515","Hang"]),Ce(["font","\u7b49\u7ebf","Hans"]),Ce(["font","\u65b0\u7d30\u660e\u9ad4","Hant"]),Ce(["font","Arial","Arab"]),Ce(["font","Arial","Hebr"]),Ce(["font","Tahoma","Thai"]),Ce(["font","Nyala","Ethi"]),Ce(["font","Vrinda","Beng"]),Ce(["font","Shruti","Gujr"]),Ce(["font","DaunPenh","Khmr"]),Ce(["font","Tunga","Knda"]),Ce(["font","Raavi","Guru"]),Ce(["font","Euphemia","Cans"]),Ce(["font","Plantagenet Cherokee","Cher"]),Ce(["font","Microsoft Yi Baiti","Yiii"]),Ce(["font","Microsoft Himalaya","Tibt"]),Ce(["font","MV Boli","Thaa"]),Ce(["font","Mangal","Deva"]),Ce(["font","Gautami","Telu"]),Ce(["font","Latha","Taml"]),Ce(["font","Estrangelo Edessa","Syrc"]),Ce(["font","Kalinga","Orya"]),Ce(["font","Kartika","Mlym"]),Ce(["font","DokChampa","Laoo"]),Ce(["font","Iskoola Pota","Sinh"]),Ce(["font","Mongolian Baiti","Mong"]),Ce(["font","Arial","Viet"]),Ce(["font","Microsoft Uighur","Uigh"]),Ce(["font","Sylfaen","Geor"]),Ce(["font","Arial","Armn"]),Ce(["font","Leelawadee UI","Bugi"]),Ce(["font","Microsoft JhengHei","Bopo"]),Ce(["font","Javanese Text","Java"]),Ce(["font","Segoe UI","Lisu"]),Ce(["font","Myanmar Text","Mymr"]),Ce(["font","Ebrima","Nkoo"]),Ce(["font","Nirmala UI","Olck"]),Ce(["font","Ebrima","Osma"]),Ce(["font","Phagspa","Phag"]),Ce(["font","Estrangelo Edessa","Syrn"]),Ce(["font","Estrangelo Edessa","Syrj"]),Ce(["font","Estrangelo Edessa","Syre"]),Ce(["font","Nirmala UI","Sora"]),Ce(["font","Microsoft Tai Le","Tale"]),Ce(["font","Microsoft New Tai Lue","Talu"]),Ce(["font","Ebrima","Tfng"])]}]})},Se=(e,t,i)=>({name:"a:".concat(e),properties:{rawMap:{val:t}},children:i}),ye=e=>{const[t,i,s,o,n,r]=e,l=[];return l.push(Se("satMod",s)),o&&l.push(Se("lumMod",o)),n&&l.push(Se("tint",n)),r&&l.push(Se("shade",r)),{name:"a:gs",properties:{rawMap:{pos:t}},children:[{name:"a:schemeClr",properties:{rawMap:{val:i}},children:l}]}},be=(e,t)=>({name:"a:solidFill",children:[Se("schemeClr",e,t)]}),Re=e=>{const[t,i,s,o,n]=e,[r,l]=n;return{name:"a:gradFill",properties:{rawMap:{rotWithShape:t}},children:[{name:"a:gsLst",children:[ye(i),ye(s),ye(o)]},{name:"a:lin",properties:{rawMap:{ang:r,scaled:l}}}]}},Fe=e=>{const[t,i,s,o]=e;return{name:"a:ln",properties:{rawMap:{w:t,cap:i,cmpd:s,algn:o}},children:[be("phClr"),Se("prstDash","solid"),{name:"a:miter",properties:{rawMap:{lim:"800000"}}}]}},Ee=e=>{const t=[];if(e){const[i,s,o,n,r]=e;t.push({name:"a:outerShdw",properties:{rawMap:{blurRad:i,dist:s,dir:o,algn:n,rotWithShape:r}},children:[Se("srgbClr","000000",[Se("alpha","63000")])]})}return{name:"a:effectStyle",children:[Object.assign({},{name:"a:effectLst"},t.length?{children:t}:{})]}},xe={getTemplate:()=>({name:"a:fmtScheme",properties:{rawMap:{name:"Office"}},children:[{name:"a:fillStyleLst",children:[be("phClr"),Re(["1",["0","phClr","105000","110000","67000"],["50000","phClr","103000","105000","73000"],["100000","phClr","109000","105000","81000"],["5400000","0"]]),Re(["1",["0","phClr","103000","102000","94000"],["50000","phClr","110000","100000",void 0,"100000"],["100000","phClr","120000","99000",void 0,"78000"],["5400000","0"]])]},{name:"a:lnStyleLst",children:[Fe(["6350","flat","sng","ctr"]),Fe(["12700","flat","sng","ctr"]),Fe(["19050","flat","sng","ctr"])]},{name:"a:effectStyleLst",children:[Ee(),Ee(),Ee(["57150","19050","5400000","ctr","0"])]},{name:"a:bgFillStyleLst",children:[be("phClr"),be("phClr",[Se("tint","95000"),Se("satMod","170000")]),Re(["1",["0","phClr","150000","102000","93000","98000"],["50000","phClr","130000","103000","98000","90000"],["100000","phClr","120000",void 0,void 0,"63000"],["5400000","0"]])]}]})},Pe={getTemplate:()=>({name:"a:themeElements",children:[fe.getTemplate(),we.getTemplate(),xe.getTemplate()]})},Me={getTemplate:()=>({name:"a:theme",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{a:"http://schemas.openxmlformats.org/drawingml/2006/main"}}],rawMap:{name:"Office Theme"}},children:[Pe.getTemplate(),{name:"a:objectDefaults"},{name:"a:extraClrSchemeLst"}]})},De=e=>{const{aspectratio:t,rotation:i}=e||{},s={};return t&&(s.aspectratio="t"),i&&(s.rotation="t"),{name:"o:lock",properties:{prefixedAttributes:[{prefix:"v:",map:{ext:"edit"}}],rawMap:s}}};var Ie=(e,t)=>{let i;const{recolor:s,brightness:o,contrast:n,id:r}=e;if(s&&(i={},"Washout"!==s&&"Grayscale"!==s||(i.gain="19661f",i.blacklevel="22938f"),"Black & White"!==s&&"Grayscale"!==s||(i.grayscale="t","Black & White"===s&&(i.bilevel="t"))),!s||"Grayscale"===s){if(i||(i={}),null!=n&&50!==n){let e="1";n>=0&&(n<50?e=String(n/50):n<100?e=String(50/(100-n)):100===n&&(e="2147483647f")),i.gain=e}null!=o&&50!==o&&(i.blacklevel=(l=o,a=0,d=100,c=-.5,u=.5,(l-a)/(d-a)*(u-c)+c).toString())}var l,a,d,c,u;return{name:"v:imagedata",properties:{prefixedAttributes:[{prefix:"o:",map:{relid:"rId".concat(t),title:r}}],rawMap:i}}},Te=e=>Math.floor(.74999943307122*(null!==e&&void 0!==e?e:0)),Ae={getTemplate(e){const t=Ze.worksheetHeaderFooterImages.get(e.sheetIndex)||[];var i;return{name:"xml",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{v:"urn:schemas-microsoft-com:vml",o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel"}}]},children:[{name:"o:shapelayout",properties:{prefixedAttributes:[{prefix:"v:",map:{ext:"edit"}}]},children:[{name:"o:idmap",properties:{prefixedAttributes:[{prefix:"v:",map:{ext:"edit"}}],rawMap:{data:"1"}}}]},{name:"v:shapetype",properties:{prefixedAttributes:[{prefix:"o:",map:{spt:"75",preferrelative:"t"}}],rawMap:{coordsize:"21600,21600",filled:"f",id:"_x0000_t75",path:"m@4@5l@4@11@9@11@9@5xe",stroked:"f"}},children:[{name:"v:stroke",properties:{rawMap:{joinstyle:"miter"}}},(i=["if lineDrawn pixelLineWidth 0","sum @0 1 0","sum 0 0 @1","prod @2 1 2","prod @3 21600 pixelWidth","prod @3 21600 pixelHeight","sum @0 0 1","prod @6 1 2","prod @7 21600 pixelWidth","sum @8 21600 0","prod @7 21600 pixelHeight","sum @10 21600 0"],{name:"v:formulas",children:i.map((e=>({name:"v:f",properties:{rawMap:{eqn:e}}})))}),{name:"v:path",properties:{prefixedAttributes:[{prefix:"o:",map:{connecttype:"rect",extrusionok:"f"}}],rawMap:{gradientshapeok:"t"}}},De({aspectratio:!0})]},...t.map(((e,t)=>((e,t)=>{const{width:i=0,height:s=0,altText:o}=e,n=Te(i),r=Te(s);return{name:"v:shape",properties:{rawMap:{id:e.headerFooterPosition,"o:spid":"_x0000_s1025",style:"position: absolute; margin-left: 0; margin-top: 10in; margin-bottom: 0; margin-right: 0; width: ".concat(n,"pt; height: ").concat(r,"pt; z-index: ").concat(t+1),type:"#_x0000_t75",alt:o}},children:[Ie(e,t+1),De({rotation:!0})]}})(e,t)))]}}},ke={getTemplate(e,t){const i=(t+1).toString();return{name:"sheet",properties:{rawMap:{name:e,sheetId:i,"r:id":"rId".concat(i)}}}}},Le={getTemplate:e=>({name:"sheets",children:e.map(((e,t)=>ke.getTemplate(e,t)))})},Ge={getTemplate:e=>({name:"workbook",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:[Le.getTemplate(e)]})},Ne={getTemplate(e){const{min:t,max:i,outlineLevel:s,s:o,width:n,hidden:r,bestFit:l}=e;let a=1,d="0";return n>1&&(a=(e=>Math.ceil((e-12)/7+1))(n),d="1"),{name:"col",properties:{rawMap:{min:t,max:i,outlineLevel:null!=s?s:void 0,width:a,style:o,hidden:r?"1":"0",bestFit:l?"1":"0",customWidth:d}}}}},Oe={getTemplate:e=>({name:"mergeCell",properties:{rawMap:{ref:e}}})},Be={getTemplate(e,t,i){const{ref:o,data:n,styleId:r}=e,{type:l,value:a}=n||{type:"empty",value:null};let d=l;"f"===l?d="str":l.charAt(0)===l.charAt(0).toUpperCase()&&(d=(e=>{const t=e.charAt(0).toLowerCase();return"s"===t?"inlineStr":t})(l));const c={name:"c",properties:{rawMap:{r:o,t:"empty"===d?void 0:d,s:r?pe(r,i):void 0}}};if("empty"===d)return c;let h;return h="str"===d&&"f"===l?[{name:"f",textNode:(0,s.BYN)(u(a),!1)}]:"inlineStr"===d?[{name:"is",children:[{name:"t",textNode:(0,s.BYN)(u(a),!1)}]}]:[{name:"v",textNode:a}],Object.assign({},c,{children:h})}},Ve=e=>{var t;return""!==(null===(t=e.data)||void 0===t?void 0:t.value)||void 0!==e.styleId},He={getTemplate(e,t,i){const{collapsed:s,hidden:o,height:n,outlineLevel:r,cells:l=[]}=e;((e,t)=>{const i=[];let s=0;for(let o=0;o<e.length;o++){const t=e[o];t.mergeAcross&&(i.push({pos:o,excelPos:s}),s+=t.mergeAcross),s++}if(i.length)for(let o=i.length-1;o>=0;o--){const s=[],n=e[i[o].pos];for(let e=1;e<=n.mergeAcross;e++)s.push({ref:"".concat(c(i[o].excelPos+1+e)).concat(t+1),styleId:n.styleId,data:{type:"empty",value:null}});s.length&&e.splice(i[o].pos+1,0,...s)}})(l,t);return{name:"row",properties:{rawMap:{r:t+1,collapsed:s?"1":"0",hidden:o?"1":"0",ht:n,customHeight:null!=n?"1":"0",spans:"1:1",outlineLevel:r||void 0}},children:l.filter(Ve).map(((e,t)=>Be.getTemplate(e,t,i)))}}},We=e=>{if(null==e)return 1;const t=["Letter","Letter Small","Tabloid","Ledger","Legal","Statement","Executive","A3","A4","A4 Small","A5","A6","B4","B5","Folio","Envelope","Envelope DL","Envelope C5","Envelope B5","Envelope C3","Envelope C4","Envelope C6","Envelope Monarch","Japanese Postcard","Japanese Double Postcard"].indexOf(e);return-1===t?1:t+1},ze=(e,t,i)=>e.reduce(((e,o,n)=>{const r="Center"===(l=o.position)?"C":"Right"===l?"R":"L";var l;const a=(d="".concat(e,"&amp;").concat(r),(c=o.font)?(d+="&amp;&quot;",d+=c.fontName||"Calibri",c.bold!==c.italic?d+=c.bold?",Bold":",Italic":c.bold?d+=",Bold Italic":d+=",Regular",d+="&quot;",c.size&&(d+="&amp;".concat(c.size)),c.strikeThrough&&(d+="&amp;S"),c.underline&&(d+="&amp;".concat("Double"===c.underline?"E":"U")),c.color&&(d+="&amp;K".concat(c.color.replace("#","").toUpperCase())),d):d);var d,c;const u=["Left","Center","Right"];o.position||(o.position=u[n]);const{image:h}=o;if("&[Picture]"===o.value&&h){const e="".concat(r).concat(t).concat(i);Ze.addHeaderFooterImageToMap(h,e)}return"".concat(a).concat((0,s.BYN)((p=o.value,(0,s.jXQ)({"&[Page]":"&P","&[Pages]":"&N","&[Date]":"&D","&[Time]":"&T","&[Tab]":"&A","&[Path]":"&Z","&[File]":"&F","&[Picture]":"&G"},((e,t)=>{p=p.replace(e,t)})),p)));var p}),""),Ue=e=>{const t=[];return["all","first","even"].forEach((i=>{const s=e[i],o="all"===i?"odd":i;if(s)for(const[e,n]of Object.entries(s)){const s="".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),r=e[0].toUpperCase();if(n){const e="all"===i?"":i.toUpperCase();t.push({name:"".concat(o).concat(s),properties:{rawMap:{"xml:space":"preserve"}},textNode:ze(n,r,e)})}}})),t},_e={getTemplate(e){const{worksheet:t,currentSheet:i,config:o}=e,{margins:n={},pageSetup:r,headerFooterConfig:l,suppressColumnOutline:a}=o,{table:d}=t,{rows:u,columns:h}=d,p=h&&h.length?((e,t,i)=>{const s=[],o=[];e.forEach(((e,i)=>{const n=e.cells;let r,l=0;n.forEach(((e,n)=>{const a=n+l+1,d=c(a),u=i+1;if(e.mergeAcross){l+=e.mergeAcross;const t=c(n+l+1);s.push("".concat(d).concat(u,":").concat(t).concat(u))}t[a-1]||(t[a-1]={});const{collapsibleRanges:h}=e;h&&h.forEach((e=>{o.push([a+e[0],a+e[1]])})),r=t[a-1],r.min=a,r.max=a,e.ref="".concat(d).concat(u)}))})),o.sort(((e,t)=>e[0]!==t[0]?e[0]-t[0]:t[1]-e[1]));const n=new Map,r=new Map;return o.filter((e=>{const t=e.toString();return!n.get(t)&&(n.set(t,!0),!0)})).forEach((e=>{const s=t.find((t=>t.min==e[0]&&t.max==e[1])),o=r.get(e[0]);t.push({min:e[0],max:e[1],outlineLevel:i?void 0:o||1,width:(s||{width:100}).width}),r.set(e[0],(o||0)+1)})),s})(u,h,!!a):[],{worksheetDataTables:g}=Ze,m=g.get(i),v=(0,s.yE0)((e=>(e.children.push({name:"sheetPr",children:[{name:"outlinePr",properties:{rawMap:{summaryBelow:0}}}]}),e)),(e=>t=>{const i=e.reduce(((e,t)=>t.outlineLevel&&t.outlineLevel>e?t.outlineLevel:e),0);return t.children.push({name:"sheetFormatPr",properties:{rawMap:{baseColWidth:10,defaultRowHeight:16,outlineLevelRow:i||void 0}}}),t})(u),(e=>t=>(e.length&&t.children.push({name:"cols",children:e.map((e=>Ne.getTemplate(e)))}),t))(h),((e,t)=>i=>(e.length&&i.children.push({name:"sheetData",children:e.map(((e,i)=>He.getTemplate(e,i,t)))}),i))(u,i+1),(C=p,e=>(C.length&&e.children.push({name:"mergeCells",properties:{rawMap:{count:C.length}},children:C.map((e=>Oe.getTemplate(e)))}),e)),(e=>t=>{const{top:i=.75,right:s=.7,bottom:o=.75,left:n=.7,header:r=.3,footer:l=.3}=e;return t.children.push({name:"pageMargins",properties:{rawMap:{bottom:o,footer:l,header:r,left:n,right:s,top:i}}}),t})(n),(e=>t=>{var i;return e&&t.children.push({name:"pageSetup",properties:{rawMap:{horizontalDpi:0,verticalDpi:0,orientation:(i=e.orientation,!i||"Portrait"!==i&&"Landscape"!==i?"portrait":i.toLocaleLowerCase()),paperSize:We(e.pageSize)}}}),t})(r),(e=>t=>{if(!e)return t;const i=null!=e.first?1:0,s=null!=e.even?1:0;return t.children.push({name:"headerFooter",properties:{rawMap:{differentFirst:i,differentOddEven:s}},children:Ue(e)}),t})(l),(e=>t=>{const i=Ze.worksheetImages.get(e);return null!==i&&void 0!==i&&i.length&&t.children.push({name:"drawing",properties:{rawMap:{"r:id":"rId".concat(++t.rIdCounter)}}}),t})(i),(e=>t=>(Ze.worksheetHeaderFooterImages.get(e)&&t.children.push({name:"legacyDrawingHF",properties:{rawMap:{"r:id":"rId".concat(++t.rIdCounter)}}}),t))(i),(f=m,e=>(f&&e.children.push({name:"tableParts",properties:{rawMap:{count:"1"}},children:[{name:"tablePart",properties:{rawMap:{"r:id":"rId".concat(++e.rIdCounter)}}}]}),e)));var f,C;const{children:w}=v({children:[],rIdCounter:0});return{name:"worksheet",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:w}}},Ke=class e{static createExcel(e,t,i){this.addSheetName(t),((e,t)=>{1===(ne=t)&&de(),e.forEach(he)})(e,this.sheetNames.length);const s=Object.assign({},i);return i.exportAsExcelTable&&(i.columnModel.isPivotActive()&&(this.showExcelTableNonCompatibleFeaturesWarning("pivot mode"),s.exportAsExcelTable=!1),i.gos.get("masterDetail")&&(this.showExcelTableNonCompatibleFeaturesWarning("master/detail"),s.exportAsExcelTable=!1)),this.processTableConfig(t,s),this.createWorksheet(t,s)}static showExcelTableNonCompatibleFeaturesWarning(e){(0,s.Brh)("Excel table export does not work with ".concat(e,". The exported Excel file will not contain any Excel tables.\nPlease turn off ").concat(e," to enable Excel table exports."))}static getTableNameFromIndex(e){return"table".concat(e+1)}static getSanitizedTableName(e){return e.replace(/^[^a-zA-Z_]+/,"_").replace(/\s/g,"_").replace(/[^a-zA-Z0-9_]/g,"_")}static addTableToSheet(e,t){this.worksheetDataTables.has(e)?(0,s.Brh)("Unable to add data table to Excel sheet: A table already exists."):this.worksheetDataTables.set(e,t)}static processTableConfig(t,i){if(!i.exportAsExcelTable)return;const o="boolean"===typeof i.exportAsExcelTable?{}:i.exportAsExcelTable,{name:n,showColumnStripes:r,showRowStripes:l,showFilterButton:a,highlightFirstColumn:d,highlightLastColumn:c}=o,u=this.getSanitizedTableName(n||e.defaultTableDisplayName),h=this.sheetNames.length-1,{table:p}=t,{rows:g,columns:m}=p,v=i.columnModel.getHeaderRowCount(),f=v-1,C=g.length,w=m.length,S=[],y=[];for(let e=0;e<w;e++){var b;const t=m[e];S.push(t.displayName||""),y.push("match"===a||void 0===a?null!==(b=t.filterAllowed)&&void 0!==b&&b:a)}S&&S.length&&C&&u?this.addTableToSheet(h,{name:this.getTableNameFromIndex(h),displayName:u,columns:S,showFilterButtons:y,headerRowIndex:f,rowCount:C-v,showRowStripes:null===l||void 0===l||l,showColumnStripes:null!==r&&void 0!==r&&r,highlightFirstColumn:null!==d&&void 0!==d&&d,highlightLastColumn:null!==c&&void 0!==c&&c}):(0,s.Brh)("Unable to add data table to Excel sheet: Missing required parameters.")}static addHeaderFooterImageToMap(e,t){const i=this.sheetNames.length-1,s=e;s.headerFooterPosition=t,this.buildImageMap({imageToAdd:s,idx:i});let o=this.worksheetHeaderFooterImages.get(i);o||(o=[],this.worksheetHeaderFooterImages.set(i,o)),o.find((t=>t.id===e.id))||o.push(e)}static addBodyImageToMap(e,t,i,s,o){const n=this.sheetNames.length,{row:r,column:l}=e.position||{},d=e;s&&(null==t||null==i||r&&l||(e.position||(e.position={}),e.position=Object.assign({},e.position,{row:t,column:s.indexOf(i)+1})),((e,t)=>{const{colSpan:i,column:s}=e.position;if(e.width)if(i){const o=t.slice(s-1,s+i-1);let n=0;for(let t=0;t<o.length;t++){const i=o[t].getActualWidth();if(e.width<n+i){e.position.colSpan=t+1,e.totalWidth=e.width,e.width=e.totalWidth-n;break}n+=i}}else e.totalWidth=e.width})(d,s),((e,t)=>{const{rowSpan:i,row:s}=e.position;var o;if(e.height)if(i){let n=0,r=0;for(let l=s;l<s+i;l++){const i=(o=a(l,t)||20,Math.round(96*o/72));if(e.height<n+i){e.position.rowSpan=r+1,e.totalHeight=e.height,e.height=e.totalHeight-n;break}n+=i,r++}}else e.totalHeight=e.height})(d,o)),this.buildImageMap({imageToAdd:d,idx:n});let c=this.worksheetImageIds.get(n);c||(c=new Map,this.worksheetImageIds.set(n,c));const u=this.worksheetImages.get(n);u?u.push(d):this.worksheetImages.set(n,[d]),c.get(e.id)||c.set(e.id,{index:c.size,type:e.imageType})}static buildImageMap(e){const{imageToAdd:t,idx:i}=e,s=this.images.get(t.id);if(s){const e=s.find((e=>e.sheetId===i));e?e.image.push(t):s.push({sheetId:i,image:[t]})}else this.images.set(t.id,[{sheetId:i,image:[t]}]),this.workbookImageIds.set(t.id,{type:t.imageType,index:this.workbookImageIds.size})}static addSheetName(e){const t=(0,s.BYN)(e.name)||"";let i="";for(;-1!==this.sheetNames.indexOf("".concat(t).concat(i));)if(""===i)i="_1";else{const e=parseInt(i.slice(1),10);i="_".concat(e+1)}e.name="".concat(t).concat(i),this.sheetNames.push(e.name)}static getStringPosition(e){return this.sharedStrings.has(e)?this.sharedStrings.get(e):(this.sharedStrings.set(e,this.sharedStrings.size),this.sharedStrings.size-1)}static resetFactory(){this.sharedStrings=new Map,this.images=new Map,this.worksheetImages=new Map,this.worksheetHeaderFooterImages=new Map,this.workbookImageIds=new Map,this.worksheetImageIds=new Map,this.worksheetDataTables=new Map,this.sheetNames=[],this.factoryMode=s.nPL.SINGLE_SHEET}static createWorkbook(){return d(Ge.getTemplate(this.sheetNames))}static createStylesheet(e){return d(ge.getTemplate(e))}static createSharedStrings(){return d(x.getTemplate(this.sharedStrings))}static createCore(e){return d(m.getTemplate(e))}static createContentTypes(e){return d(g.getTemplate(e))}static createRels(){const e=E.getTemplate([{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Target:"xl/workbook.xml"},{Id:"rId2",Type:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",Target:"docProps/core.xml"}]);return d(e)}static createTheme(){return d(Me.getTemplate())}static createTable(e,t){return d(me.getTemplate(e,t))}static createWorkbookRels(e){const t=new Array(e).fill(void 0).map(((e,t)=>({Id:"rId".concat(t+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",Target:"worksheets/sheet".concat(t+1,".xml")}))),i=E.getTemplate([...t,{Id:"rId".concat(e+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Target:"theme/theme1.xml"},{Id:"rId".concat(e+2),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Target:"styles.xml"},{Id:"rId".concat(e+3),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Target:"sharedStrings.xml"}]);return d(i)}static createDrawing(e){return d(R.getTemplate({sheetIndex:e}))}static createDrawingRel(e){const t=this.worksheetImageIds.get(e)||[],i=[];for(const[s,o]of t)i.push({Id:"rId".concat(o.index+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:"../media/image".concat(this.workbookImageIds.get(s).index+1,".").concat(o.type)});return d(E.getTemplate(i))}static createVmlDrawing(e){return d(Ae.getTemplate({sheetIndex:e}),!0)}static createVmlDrawingRel(e){const t=this.worksheetHeaderFooterImages.get(e)||[],i=[];for(let s=0;s<t.length;s++){const e=t[s],o=this.workbookImageIds.get(e.id);if(!o)continue;const{index:n,type:r}=o,l="jpg"===r?"jpeg":r;i.push({Id:"rId".concat(s+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:"../media/image".concat(n+1,".").concat(l)})}return d(E.getTemplate(i))}static createRelationships(){let{drawingIndex:e,vmlDrawingIndex:t,tableIndex:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(void 0===e&&void 0===t&&void 0===i)return"";const s=[];null!=e&&s.push({Id:"rId".concat(s.length+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:"../drawings/drawing".concat(e+1,".xml")}),null!=t&&s.push({Id:"rId".concat(s.length+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",Target:"../drawings/vmlDrawing".concat(t+1,".vml")}),null!=i&&s.push({Id:"rId".concat(s.length+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table",Target:"../tables/".concat(this.getTableNameFromIndex(i),".xml")});const o=E.getTemplate(s);return d(o)}static createWorksheet(e,t){return d(_e.getTemplate({worksheet:e,currentSheet:this.sheetNames.length-1,config:t}))}};Ke.sharedStrings=new Map,Ke.sheetNames=[],Ke.images=new Map,Ke.worksheetImages=new Map,Ke.worksheetHeaderFooterImages=new Map,Ke.workbookImageIds=new Map,Ke.worksheetImageIds=new Map,Ke.worksheetDataTables=new Map,Ke.defaultTableDisplayName="AG-GRID-TABLE",Ke.factoryMode=s.nPL.SINGLE_SHEET;var Ze=Ke,je=class extends o.WK{constructor(e){super(e),this.mixedStyles={},this.mixedStyleCounter=0,this.rows=[],this.config=Object.assign({},e),this.stylesByIds={},this.config.baseExcelStyles.forEach((e=>{this.stylesByIds[e.id]=e})),this.excelStyles=[...this.config.baseExcelStyles,{id:"_quotePrefix",quotePrefix:1}]}addCustomContent(e){e.forEach((e=>{const t=this.rows.length+1;let i;this.config.suppressRowOutline||null==e.outlineLevel||(i=e.outlineLevel);const s={height:a(t,e.height||this.config.rowHeight),cells:(e.cells||[]).map(((e,i)=>{var s,o,n;const r=this.addImage(t,this.columnsToExport[i],null===(s=e.data)||void 0===s?void 0:s.value);let l=null;e.styleId&&(l="string"===typeof e.styleId?[e.styleId]:e.styleId);const a=this.getStyleId(l);if(r)return this.createCell(a,this.getDataTypeForValue(r.value),null==r.value?"":r.value);const d=null!==(o=null===(n=e.data)||void 0===n?void 0:n.value)&&void 0!==o?o:"",c=this.getDataTypeForValue(d);return e.mergeAcross?this.createMergedCell(a,c,d,e.mergeAcross):this.createCell(a,c,d)})),outlineLevel:i};null!=e.collapsed&&(s.collapsed=e.collapsed),null!=e.hidden&&(s.hidden=e.hidden),this.rows.push(s)}))}onNewHeaderGroupingRow(){const e=[];return this.rows.push({cells:e,height:a(this.rows.length+1,this.config.headerRowHeight)}),{onColumn:(t,i,s,n,r)=>{const l=this.config.styleLinker({rowType:o.aC.HEADER_GROUPING,rowIndex:1,value:"grouping-".concat(i),columnGroup:t});e.push({...this.createMergedCell(this.getStyleId(l),this.getDataTypeForValue("string"),i,n),collapsibleRanges:r})}}}onNewHeaderRow(){return this.onNewRow(this.onNewHeaderColumn,this.config.headerRowHeight)}onNewBodyRow(e){const t=this.onNewRow(this.onNewBodyColumn,this.config.rowHeight);return e&&this.addRowOutlineIfNecessary(e),t}prepare(e){super.prepare(e),this.columnsToExport=[...e],this.cols=e.map(((e,t)=>this.convertColumnToExcel(e,t)))}parse(){const e=this.rows.reduce(((e,t)=>Math.max(e,t.cells.length)),0);for(;this.cols.length<e;)this.cols.push(this.convertColumnToExcel(null,this.cols.length+1));const t={name:this.config.sheetName,table:{columns:this.cols,rows:this.rows}};return this.createExcel(t)}addRowOutlineIfNecessary(e){const{gos:t,suppressRowOutline:i,rowGroupExpandState:o="expanded"}=this.config;if(t.get("groupHideOpenParents")||i||null==e.level)return;const n=e.footer?1:0,r=(0,s._O9)(this.rows);if(r.outlineLevel=e.level+n,"expanded"===o)return;const l="collapsed"===o;if(e.isExpandable()){const t=!l&&e.expanded;r.collapsed=!t}r.hidden=!!e.parent&&-1!==e.parent.level&&(l||this.isAnyParentCollapsed(e.parent))}isAnyParentCollapsed(e){for(;e&&-1!==e.level;){if(!e.expanded)return!0;e=e.parent}return!1}convertColumnToExcel(e,t){const i=this.config.columnWidth,s=e?this.extractHeaderValue(e):void 0,o=null!==s&&void 0!==s?s:"",n=!!e&&e.isFilterAllowed();if(i)return"number"===typeof i?{width:i,displayName:o,filterAllowed:n}:{width:i({column:e,index:t}),displayName:o,filterAllowed:n};if(e){const t=75;return{width:Math.max(e.getActualWidth(),t),displayName:o,filterAllowed:n}}return{displayName:o,filterAllowed:n}}onNewHeaderColumn(e,t){return i=>{const s=this.extractHeaderValue(i),n=this.config.styleLinker({rowType:o.aC.HEADER,rowIndex:e,value:s,column:i});t.push(this.createCell(this.getStyleId(n),this.getDataTypeForValue("string"),s))}}onNewBodyColumn(e,t){let i=0;return(s,n,r)=>{if(i>0)return void(i-=1);const{value:l,valueFormatted:a}=this.extractRowCellValue(s,n,e,"excel",r),d=this.config.styleLinker({rowType:o.aC.BODY,rowIndex:e,value:l,column:s,node:r}),c=this.getStyleId(d),u=s.getColSpan(r),h=this.addImage(e,s,l);h?t.push(this.createCell(c,this.getDataTypeForValue(h.value),null==h.value?"":h.value)):u>1?(i=u-1,t.push(this.createMergedCell(c,this.getDataTypeForValue(l),l,u-1))):t.push(this.createCell(c,this.getDataTypeForValue(l),l,a))}}onNewRow(e,t){const i=[];return this.rows.push({cells:i,height:a(this.rows.length+1,t)}),{onColumn:e.bind(this,this.rows.length,i)()}}createExcel(e){const{excelStyles:t,config:i}=this;return Ze.createExcel(t,e,i)}getDataTypeForValue(e){return void 0===e?"empty":this.isNumerical(e)?"n":"s"}getTypeFromStyle(e,t){if(this.isFormula(t))return"f";if(e&&e.dataType)switch(e.dataType.toLocaleLowerCase()){case"formula":return"f";case"string":return"s";case"number":return"n";case"datetime":return"d";case"error":return"e";case"boolean":return"b";default:(0,s.Brh)("Unrecognized data type for excel export [".concat(e.id,".dataType=").concat(e.dataType,"]"))}return null}addImage(e,t,i){if(!this.config.addImageToCell)return;const s=this.config.addImageToCell(e,t,i);return s?(Ze.addBodyImageToMap(s.image,e,t,this.columnsToExport,this.config.rowHeight),s):void 0}createCell(e,t,i,s){const o=this.getStyleById(e);null!==o&&void 0!==o&&o.dataType||"s"!==t||!s||(i=s);const n=this.getTypeFromStyle(o,i)||t,{value:r,escaped:l}=this.getCellValue(n,i),a=[];return o&&a.push(e),l&&a.push("_quotePrefix"),{styleId:e=this.getStyleId(a)||void 0,data:{type:n,value:r}}}createMergedCell(e,t,i,s){const o=null==i?"":i;return{styleId:this.getStyleById(e)?e:void 0,data:{type:t,value:"s"===t?Ze.getStringPosition(o).toString():i},mergeAcross:s}}getCellValue(e,t){let i=!1;if(null==t||"s"===e&&""===t)return{value:"",escaped:!1};if("s"===e)t&&"'"===t[0]&&(i=!0,t=t.slice(1)),t=Ze.getStringPosition(t).toString();else if("f"===e)t=t.slice(1);else if("n"===e){const e=Number(t);isNaN(e)?t="":""!==t&&(t=e.toString())}return{value:t,escaped:i}}getStyleId(e){if(!e||!e.length)return null;if(1===e.length)return e[0];const t=e.join("-");return this.mixedStyles[t]||this.addNewMixedStyle(e),this.mixedStyles[t].excelID}deepCloneObject(e){return JSON.parse(JSON.stringify(e))}addNewMixedStyle(e){this.mixedStyleCounter+=1;const t="mixedStyle".concat(this.mixedStyleCounter),i={};for(const n of e)for(const e of this.excelStyles)e.id===n&&(0,s.zev)(i,this.deepCloneObject(e));i.id=t,i.name=t;const o=e.join("-");this.mixedStyles[o]={excelID:t,key:o,result:i},this.excelStyles.push(i),this.stylesByIds[t]=i}isFormula(e){return null!=e&&(this.config.autoConvertFormulas&&e.toString().startsWith("="))}isNumerical(e){return"bigint"===typeof e||isFinite(e)&&""!==e&&!isNaN(parseFloat(e))}getStyleById(e){return null==e?null:this.stylesByIds[e]||null}},Ye=(e,t)=>{const i="xl/drawings",s="".concat(i,"/drawing").concat(t+1,".xml"),n="".concat(i,"/_rels/drawing").concat(t+1,".xml.rels");o.EH.addFile(n,Ze.createDrawingRel(e)),o.EH.addFile(s,Ze.createDrawing(e))},qe=(e,t)=>{const i="xl/drawings",s="".concat(i,"/vmlDrawing").concat(t+1,".vml"),n="".concat(i,"/_rels/vmlDrawing").concat(t+1,".vml.rels");o.EH.addFile(s,Ze.createVmlDrawing(e)),o.EH.addFile(n,Ze.createVmlDrawingRel(e))},Qe=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||0===e.length)return(0,s.Brh)("Invalid params supplied to createExcelFileForExcel() - `ExcelExportParams.data` is empty."),Ze.resetFactory(),!1;const{fontSize:i=11,author:n="AG Grid"}=t;return(()=>{o.EH.addFolders(["_rels/","docProps/","xl/","xl/theme/","xl/_rels/","xl/worksheets/"]);const{images:e}=Ze;if(!e.size)return;o.EH.addFolders(["xl/worksheets/_rels","xl/drawings/","xl/drawings/_rels","xl/media/"]);let t=0;e.forEach((e=>{const i=e[0].image[0],{base64:s,imageType:n}=i,r="jpg"===n?"jpeg":n;o.EH.addFile("xl/media/image".concat(++t,".").concat(r),s,!0)}))})(),(()=>{const{worksheetDataTables:e}=Ze,t=e,i=Array.from(t.keys());for(let s=0;s<i.length;s++){const e=i[s],n=t.get(e);n&&o.EH.addFile("xl/tables/".concat(n.name,".xml"),Ze.createTable(n,s))}})(),(e=>{let t=0,i=0,s=0;const{images:n,worksheetDataTables:r,worksheetImages:l,worksheetHeaderFooterImages:a}=Ze;for(let d=0;d<e.length;d++){const c=e[d];o.EH.addFile("xl/worksheets/sheet".concat(d+1,".xml"),c,!1);const u=n.size>0&&l.has(d),h=r.size>0&&r.has(d),p=n.size&&a.has(d);if(!u&&!h&&!p)continue;let g,m,v;u&&(Ye(d,t),m=t,t++),p&&(qe(d,i),v=i,i++),h&&(g=s++);const f="xl/worksheets/_rels/sheet".concat(d+1,".xml.rels");o.EH.addFile(f,Ze.createRelationships({tableIndex:g,drawingIndex:m,vmlDrawingIndex:v}))}})(e),((e,t,i)=>{o.EH.addFile("xl/workbook.xml",Ze.createWorkbook()),o.EH.addFile("xl/styles.xml",Ze.createStylesheet(e)),o.EH.addFile("xl/sharedStrings.xml",Ze.createSharedStrings()),o.EH.addFile("xl/theme/theme1.xml",Ze.createTheme()),o.EH.addFile("xl/_rels/workbook.xml.rels",Ze.createWorkbookRels(i)),o.EH.addFile("docProps/core.xml",Ze.createCore(t)),o.EH.addFile("[Content_Types].xml",Ze.createContentTypes(i)),o.EH.addFile("_rels/.rels",Ze.createRels())})(i,n,e.length),Ze.resetFactory(),!0},Xe=e=>{const{data:t,fontSize:i,author:s}=e,n=e.mimeType||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";return Qe(t,{author:s,fontSize:i})?o.EH.getZipFile(n):Promise.resolve(void 0)},$e=e=>{const{data:t,fontSize:i,author:s}=e,n=e.mimeType||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";if(Qe(t,{author:s,fontSize:i}))return o.EH.getUncompressedZipFile(n)},Je=class extends o.z0{constructor(){super(...arguments),this.beanName="excelCreator"}wireBeans(e){this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.stylingService=e.stylingService,this.gridSerializer=e.gridSerializer,this.gos=e.gos}postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gos:this.gos})}getMergedParams(e){const t=this.gos.get("defaultExcelExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed())return void(0,s.Brh)("Export cancelled. Export is not allowed as per your configuration.");const t=this.getMergedParams(e),i={data:[this.getData(t)],fontSize:t.fontSize,author:t.author,mimeType:t.mimeType};this.packageCompressedFile(i).then((e=>{if(e){const{fileName:i}=t,s="function"===typeof i?i(this.gos.getGridCommonParams()):i;o.aV.download(this.getFileName(s),e)}}))}exportDataAsExcel(e){this.export(e)}getDataAsExcel(e){const t=this.getMergedParams(e),i={data:[this.getData(t)],fontSize:t.fontSize,author:t.author,mimeType:t.mimeType};return this.packageFile(i)}setFactoryMode(e){Ze.factoryMode=e}getFactoryMode(){return Ze.factoryMode}getSheetDataForExcel(e){const t=this.getMergedParams(e);return this.getData(t)}getMultipleSheetsAsExcel(e){return $e(e)}exportMultipleSheetsAsExcel(e){(e=>{const{fileName:t="export.xlsx"}=e;Xe(e).then((e=>{if(e){const i="function"===typeof t?t():t;o.aV.download(i,e)}}))})(e)}getDefaultFileExtension(){return"xlsx"}createSerializingSession(e){const{columnModel:t,columnNameService:i,funcColsService:s,valueService:o,gos:n}=this;let r;if(null!=e.sheetName){const{sheetName:t}=e,i="function"===typeof t?t(this.gos.getGridCommonParams()):t;r=String(i).substring(0,31)}else r="ag-grid";const l={...e,sheetName:r,columnModel:t,columnNameService:i,funcColsService:s,valueService:o,gos:n,suppressRowOutline:e.suppressRowOutline||e.skipRowGroups,headerRowHeight:e.headerRowHeight||e.rowHeight,baseExcelStyles:this.gos.get("excelStyles")||[],styleLinker:this.styleLinker.bind(this)};return new je(l)}styleLinker(e){const{rowType:t,rowIndex:i,value:n,column:r,columnGroup:l,node:a}=e,d=t===o.aC.HEADER,c=t===o.aC.HEADER_GROUPING,u=d?r:l;let h=[];if(d||c)return h.push("header"),c&&h.push("headerGroup"),u&&(h=h.concat((0,s.rYP)(u.getDefinition(),this.gos,r||null,l||null))),h;const p=this.gos.get("excelStyles"),g=["cell"];if(!p||!p.length)return g;const m=p.map((e=>e.id)),v=r.getDefinition();return this.stylingService.processAllCellClasses(v,this.gos.addGridCommonParams({value:n,data:a.data,node:a,colDef:v,column:r,rowIndex:i}),(e=>{m.indexOf(e)>-1&&g.push(e)})),g.sort(((e,t)=>m.indexOf(e)<m.indexOf(t)?-1:1))}isExportSuppressed(){return this.gos.get("suppressExcelExport")}packageCompressedFile(e){return Xe(e)}packageFile(e){return $e(e)}};function et(e){var t;return(null===(t=e.excelCreator)||void 0===t?void 0:t.getFactoryMode())!==s.nPL.MULTI_SHEET||((0,s.Brh)("The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'"),!1)}var tt="32.0.1",it={version:tt,moduleName:"".concat(s.GXE.ExcelExportModule,"-core"),beans:[Je],dependantModules:[o.Lc,n.f$]},st={version:tt,moduleName:"".concat(s.GXE.ExcelExportModule,"-api"),apiFunctions:{getDataAsExcel:function(e,t){var i;if(et(e))return null===(i=e.excelCreator)||void 0===i?void 0:i.getDataAsExcel(t)},exportDataAsExcel:function(e,t){var i;et(e)&&(null===(i=e.excelCreator)||void 0===i||i.exportDataAsExcel(t))},getSheetDataForExcel:function(e,t){var i,o;return null===(i=e.excelCreator)||void 0===i||i.setFactoryMode(s.nPL.MULTI_SHEET),null===(o=e.excelCreator)||void 0===o?void 0:o.getSheetDataForExcel(t)},getMultipleSheetsAsExcel:function(e,t){var i;return null===(i=e.excelCreator)||void 0===i?void 0:i.getMultipleSheetsAsExcel(t)},exportMultipleSheetsAsExcel:function(e,t){var i;null===(i=e.excelCreator)||void 0===i||i.exportMultipleSheetsAsExcel(t)}},dependantModules:[it]},ot={version:tt,moduleName:s.GXE.ExcelExportModule,dependantModules:[it,st]}},88679:(e,t,i)=>{"use strict";i.d(t,{$:()=>te});var s=i(30845),o=i(8701),n=i(33417),r=class extends s.AS9{constructor(){super(...arguments),this.beanName="toolPanelColDefService",this.isColGroupDef=e=>e&&"undefined"!==typeof e.children,this.getId=e=>this.isColGroupDef(e)?e.groupId:e.colId}wireBeans(e){this.columnModel=e.columnModel}createColumnTree(e){const t=[],i=(e,o)=>{if(this.isColGroupDef(e)){const t=e,n="undefined"!==typeof t.groupId?t.groupId:t.headerName,r=new s.gr4(t,n,!1,o),l=[];return t.children.forEach((e=>{const t=i(e,o+1);t&&l.push(t)})),r.setChildren(l),r}{const i=e,s=i.colId?i.colId:i.field,o=this.columnModel.getColDefCol(s);return o||t.push(i),o}},o=[];return e.forEach((e=>{const t=i(e,0);t&&o.push(t)})),t.length>0&&(0,s.Brh)("unable to find grid columns for the supplied colDef(s):",t),o}syncLayoutWithGrid(e){const t=this.getLeafPathTrees();e(this.mergeLeafPathTrees(t))}getLeafPathTrees(){const e=(t,i)=>{let o;if((0,s.pAL)(t))if(t.isPadding())o=i;else{const e=Object.assign({},t.getColGroupDef());e.groupId=t.getGroupId(),e.children=[i],o=e}else{const e=Object.assign({},t.getColDef());e.colId=t.getColId(),o=e}const n=t.getOriginalParent();return n?e(n,o):o};return this.columnModel.getCols().filter((e=>{const t=e.getColDef();return e.isPrimary()&&!t.showRowGroup})).map((t=>e(t,t.getColDef())))}mergeLeafPathTrees(e){const t=(e,t)=>this.isColGroupDef(e)&&this.isColGroupDef(t)&&this.getId(e)===this.getId(t),i=(e,t)=>{if(!this.isColGroupDef(t))return e;const s=e,o=t;if(o.children&&o.groupId){if(this.addChildrenToGroup(s,o.groupId,o.children[0]))return s}return o.children.forEach((e=>i(s,e))),s},s=[];for(let o=1;o<=e.length;o++){const n=e[o-1],r=e[o];t(n,r)?e[o]=i(n,r):s.push(n)}return s}addChildrenToGroup(e,t,i){if(!this.isColGroupDef(e))return!0;const o=e,n=i;if(((e,t)=>{const i=e.children.map(this.getId),o=(0,s.W7Q)(i,this.getId(t)),n=(0,s._O9)(e.children),r=n&&this.getId(n)!==this.getId(t);return o&&r})(o,n))return o.children.push(n),!0;if(o.groupId===t){const e=o.children.map(this.getId);if(!(0,s.W7Q)(e,this.getId(n)))return o.children.push(n),!0}return o.children.forEach((e=>this.addChildrenToGroup(e,t,i))),!1}};var l=class extends s.wA2{constructor(e){super(),this.eToggleButton=s.CUI,this.eIconWrapper=s.CUI,this.eLabel=s.CUI,this.toolPanelDef=e}getToolPanelId(){return this.toolPanelDef.id}postConstruct(){const e=this.createTemplate();this.setTemplate(e,[]),this.setLabel(),this.setIcon(),this.addManagedElementListeners(this.eToggleButton,{click:this.onButtonPressed.bind(this)}),this.eToggleButton.setAttribute("id","ag-".concat(this.getCompId(),"-button"))}createTemplate(){return'<div class="ag-side-button" role="presentation">\n                <button type="button" data-ref="eToggleButton" tabindex="-1" role="tab" aria-expanded="false" class="ag-button ag-side-button-button">\n                    <div data-ref="eIconWrapper" class="ag-side-button-icon-wrapper" aria-hidden="true"></div>\n                    <span data-ref="eLabel" class="ag-side-button-label"></span>\n                </button>\n            </div>'}setLabel(){const e=this.localeService.getLocaleTextFunc(),t=this.toolPanelDef,i=e(t.labelKey,t.labelDefault);this.eLabel.innerText=i}setIcon(){this.eIconWrapper.insertAdjacentElement("afterbegin",(0,s.scM)(this.toolPanelDef.iconKey,this.gos))}onButtonPressed(){this.dispatchLocalEvent({type:"toggleButtonClicked"})}setSelected(e){this.addOrRemoveCssClass("ag-selected",e),(0,s.mmg)(this.eToggleButton,e)}getButtonElement(){return this.eToggleButton}},a={selector:"AG-SIDE-BAR-BUTTONS",component:class extends s.wA2{constructor(){super('<div class="ag-side-buttons" role="tablist"></div>'),this.buttonComps=[]}wireBeans(e){this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}postConstruct(){this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){if(e.key!==s.VDZ.TAB||!e.shiftKey)return;const t=(0,s._O9)(this.visibleColsService.getAllCols());this.focusService.focusGridView(t,!0)&&e.preventDefault()}setActiveButton(e){this.buttonComps.forEach((t=>{t.setSelected(e===t.getToolPanelId())}))}addButtonComp(e){const t=this.createBean(new l(e));return this.buttonComps.push(t),this.appendChild(t),t.addEventListener("toggleButtonClicked",(()=>{this.dispatchLocalEvent({type:"sideBarButtonClicked",toolPanelId:e.id})})),t}clearButtons(){this.buttonComps=this.destroyBeans(this.buttonComps),(0,s.wvc)(this.getGui()),super.destroy()}destroy(){this.clearButtons(),super.destroy()}}},d={id:"columns",labelDefault:"Columns",labelKey:"columns",iconKey:"columns",toolPanel:"agColumnsToolPanel"},c={id:"filters",labelDefault:"Filters",labelKey:"filters",iconKey:"filter",toolPanel:"agFiltersToolPanel"},u={columns:d,filters:c};function h(e){if(!e)return;if(!0===e)return{toolPanels:[d,c],defaultToolPanel:"columns"};if("string"===typeof e)return h([e]);if(Array.isArray(e)){const t=[];if(e.forEach((e=>{const i=u[e];i?t.push(i):p(e)})),0===t.length)return;return{toolPanels:t,defaultToolPanel:t[0].id}}return{toolPanels:g(e.toolPanels),defaultToolPanel:e.defaultToolPanel,hiddenByDefault:e.hiddenByDefault,position:e.position}}function p(e){(0,s.Brh)("the key ".concat(e," is not a valid key for specifying a tool panel, valid keys are: ").concat(Object.keys(u).join(",")))}function g(e){const t=[];return e?(e.forEach((e=>{let i=null;if("string"===typeof e){const t=u[e];if(!t)return void p(e);i=t}else i=e;t.push(i)})),t):t}var m=class extends s.wA2{constructor(){super('<div class="ag-tool-panel-horizontal-resize"></div>'),this.minWidth=100,this.maxWidth=null}wireBeans(e){this.horizontalResizeService=e.horizontalResizeService}setElementToResize(e){this.elementToResize=e}postConstruct(){const e=this.horizontalResizeService.addResizeBar({eResizeBar:this.getGui(),dragStartPixels:1,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this),onResizeEnd:this.onResizeEnd.bind(this)});this.addDestroyFunc(e),this.setInverted(this.gos.get("enableRtl"))}dispatchResizeEvent(e,t,i){const s={type:"toolPanelSizeChanged",width:i,started:e,ended:t};this.eventService.dispatchEvent(s)}onResizeStart(){this.startingWidth=this.elementToResize.offsetWidth,this.dispatchResizeEvent(!0,!1,this.startingWidth)}onResizeEnd(e){return this.onResizing(e,!0)}onResizing(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.inverted?-1:1;let s=Math.max(this.minWidth,Math.floor(this.startingWidth-e*i));null!=this.maxWidth&&(s=Math.min(this.maxWidth,s)),this.elementToResize.style.width="".concat(s,"px"),this.dispatchResizeEvent(!1,t,s)}setInverted(e){this.inverted=e}setMaxWidth(e){this.maxWidth=e}setMinWidth(e){this.minWidth=null!=e?e:100}},v=class extends s.wA2{wireBeans(e){this.userComponentFactory=e.userComponentFactory}constructor(){super('<div class="ag-tool-panel-wrapper" role="tabpanel"/>')}postConstruct(){const e=this.getGui(),t=this.resizeBar=this.createManagedBean(new m);e.setAttribute("id","ag-".concat(this.getCompId())),t.setElementToResize(e),this.appendChild(t)}getToolPanelId(){return this.toolPanelId}setToolPanelDef(e,t){const{id:i,minWidth:o,maxWidth:n,width:r}=e;this.toolPanelId=i,this.width=r;const l=this.userComponentFactory.getToolPanelCompDetails(e,t),a=l.newAgStackInstance();this.params=l.params,null!=a?(a.then(this.setToolPanelComponent.bind(this)),null!=o&&this.resizeBar.setMinWidth(o),null!=n&&this.resizeBar.setMaxWidth(n)):(0,s.Brh)("error processing tool panel component ".concat(i,". You need to specify 'toolPanel'"))}setToolPanelComponent(e){this.toolPanelCompInstance=e,this.appendChild(e.getGui()),this.addDestroyFunc((()=>{this.destroyBean(e)})),this.width&&(this.getGui().style.width="".concat(this.width,"px"))}getToolPanelInstance(){return this.toolPanelCompInstance}setResizerSizerSide(e){const t="left"===e,i=this.gos.get("enableRtl")?t:!t;this.resizeBar.setInverted(i)}refresh(){var e;null===(e=this.toolPanelCompInstance)||void 0===e||e.refresh(this.params)}},f={selector:"AG-SIDE-BAR",component:class extends s.wA2{constructor(){super('<div class="ag-side-bar ag-unselectable">\n            <ag-side-bar-buttons data-ref="sideBarButtons"></ag-side-bar-buttons>\n        </div>',[a]),this.sideBarButtons=s.CUI,this.toolPanelWrappers=[]}wireBeans(e){this.focusService=e.focusService,this.filterManager=e.filterManager,this.sideBarService=e.sideBarService}postConstruct(){var e;this.sideBarButtons.addEventListener("sideBarButtonClicked",this.onToolPanelButtonClicked.bind(this));const{sideBar:t}=null!==(e=this.gos.get("initialState"))&&void 0!==e?e:{};this.setSideBarDef({sideBarDef:h(this.gos.get("sideBar")),sideBarState:t}),this.addManagedPropertyListener("sideBar",this.onSideBarUpdated.bind(this)),this.sideBarService.registerSideBarComp(this);const i=this.getFocusableElement();this.createManagedBean(new s.D_6(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)})),(0,s.yeK)(this,i,this.focusService)}onTabKeyDown(e){if(e.defaultPrevented)return;const{focusService:t,sideBarButtons:i}=this,s=this.getGui(),o=i.getGui(),n=this.gos.getActiveDomElement(),r=s.querySelector(".ag-tool-panel-wrapper:not(.ag-hidden)"),l=e.target;if(!r)return;if(o.contains(n))return void(t.focusInto(r,e.shiftKey)&&e.preventDefault());if(!e.shiftKey)return;let a=null;r.contains(n)?a=this.focusService.findNextFocusableElement(r,void 0,!0):t.isTargetUnderManagedComponent(r,l)&&e.shiftKey&&(a=this.focusService.findFocusableElementBeforeTabGuard(r,l)),a||(a=o.querySelector(".ag-selected button")),a&&a!==e.target&&(e.preventDefault(),a.focus())}handleKeyDown(e){const t=this.gos.getActiveDomElement();if(!this.sideBarButtons.getGui().contains(t))return;const i=this.sideBarButtons.getGui(),o=Array.prototype.slice.call(i.querySelectorAll(".ag-side-button")),n=o.findIndex((e=>e.contains(t)));let r=null;switch(e.key){case s.VDZ.LEFT:case s.VDZ.UP:r=Math.max(0,n-1);break;case s.VDZ.RIGHT:case s.VDZ.DOWN:r=Math.min(n+1,o.length-1)}if(null===r)return;const l=o[r].querySelector("button");l&&(l.focus(),e.preventDefault())}onToolPanelButtonClicked(e){const t=e.toolPanelId;this.openedItem()===t?this.openToolPanel(void 0,"sideBarButtonClicked"):this.openToolPanel(t,"sideBarButtonClicked")}clearDownUi(){this.sideBarButtons.clearButtons(),this.destroyToolPanelWrappers()}setSideBarDef(e){let{sideBarDef:t,sideBarState:i,existingToolPanelWrappers:s}=e;if(this.setDisplayed(!1),this.sideBar=t,this.sideBar&&this.sideBar.toolPanels){const e=this.sideBar.toolPanels;if(this.createToolPanelsAndSideButtons(e,i,s),!this.toolPanelWrappers.length)return;const t=i?i.visible:!this.sideBar.hiddenByDefault;if(this.setDisplayed(t),this.setSideBarPosition(i?i.position:this.sideBar.position),t)if(i){const{openToolPanel:e}=i;e&&this.openToolPanel(e,"sideBarInitializing")}else this.openToolPanel(this.sideBar.defaultToolPanel,"sideBarInitializing")}}getDef(){return this.sideBar}setSideBarPosition(e){e||(e="right"),this.position=e;const t="left"===e,i=t?"right":"left";return this.addOrRemoveCssClass("ag-side-bar-left",t),this.addOrRemoveCssClass("ag-side-bar-right",!t),this.toolPanelWrappers.forEach((e=>{e.setResizerSizerSide(i)})),this.eventService.dispatchEvent({type:"sideBarUpdated"}),this}setDisplayed(e,t){super.setDisplayed(e,t),this.eventService.dispatchEvent({type:"sideBarUpdated"})}getState(){const e={};return this.toolPanelWrappers.forEach((t=>{var i,s;e[t.getToolPanelId()]=null===(i=t.getToolPanelInstance())||void 0===i||null===(s=i.getState)||void 0===s?void 0:s.call(i)})),{visible:this.isDisplayed(),position:this.position,openToolPanel:this.openedItem(),toolPanels:e}}createToolPanelsAndSideButtons(e,t,i){for(const o of e){var s;this.createToolPanelAndSideButton(o,null===t||void 0===t||null===(s=t.toolPanels)||void 0===s?void 0:s[o.id],null===i||void 0===i?void 0:i[o.id])}}validateDef(e){if(null==e.id)return(0,s.Brh)("please review all your toolPanel components, it seems like at least one of them doesn't have an id"),!1;if("agColumnsToolPanel"===e.toolPanel){if(!s.O3h.__assertRegistered(s.GXE.ColumnsToolPanelModule,"Column Tool Panel",this.gridId))return!1}if("agFiltersToolPanel"===e.toolPanel){var t;if(!s.O3h.__assertRegistered(s.GXE.FiltersToolPanelModule,"Filters Tool Panel",this.gridId))return!1;if(null!==(t=this.filterManager)&&void 0!==t&&t.isAdvancedFilterEnabled())return(0,s.Brh)("Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled."),!1}return!0}createToolPanelAndSideButton(e,t,i){if(!this.validateDef(e))return;const o=this.sideBarButtons.addButtonComp(e);let n;i?n=i:(n=this.createBean(new v),n.setToolPanelDef(e,{initialState:t,onStateUpdated:()=>this.eventService.dispatchEvent({type:"sideBarUpdated"})})),n.setDisplayed(!1);const r=n.getGui();this.appendChild(r),this.toolPanelWrappers.push(n),(0,s.RXA)(o.getButtonElement(),r)}refresh(){this.toolPanelWrappers.forEach((e=>e.refresh()))}openToolPanel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";const i=this.openedItem();if(i===e)return;this.toolPanelWrappers.forEach((t=>{const i=e===t.getToolPanelId();t.setDisplayed(i)}));i!==this.openedItem()&&(this.sideBarButtons.setActiveButton(e),this.raiseToolPanelVisibleEvent(e,null!==i&&void 0!==i?i:void 0,t))}getToolPanelInstance(e){const t=this.toolPanelWrappers.filter((t=>t.getToolPanelId()===e))[0];if(t)return t.getToolPanelInstance();(0,s.Brh)("unable to lookup Tool Panel as invalid key supplied: ".concat(e))}raiseToolPanelVisibleEvent(e,t,i){const s=!!e&&!!t;if(t){const e={type:"toolPanelVisibleChanged",source:i,key:t,visible:!1,switchingToolPanel:s};this.eventService.dispatchEvent(e)}if(e){const t={type:"toolPanelVisibleChanged",source:i,key:e,visible:!0,switchingToolPanel:s};this.eventService.dispatchEvent(t)}}close(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"api";this.openToolPanel(void 0,e)}isToolPanelShowing(){return!!this.openedItem()}openedItem(){let e=null;return this.toolPanelWrappers.forEach((t=>{t.isDisplayed()&&(e=t.getToolPanelId())})),e}onSideBarUpdated(){const e=h(this.gos.get("sideBar")),t={};var i;e&&this.sideBar&&(null===(i=e.toolPanels)||void 0===i||i.forEach((e=>{var i,o,n;const{id:r}=e;if(!r)return;const l=null===(i=this.sideBar.toolPanels)||void 0===i?void 0:i.find((e=>e.id===r));if(!l||e.toolPanel!==l.toolPanel)return;const a=this.toolPanelWrappers.find((e=>e.getToolPanelId()===r));if(!a)return;const d=this.gos.addGridCommonParams({...null!==(o=e.toolPanelParams)&&void 0!==o?o:{},onStateUpdated:()=>this.eventService.dispatchEvent({type:"sideBarUpdated"})});!0===(null===(n=a.getToolPanelInstance())||void 0===n?void 0:n.refresh(d))&&(this.toolPanelWrappers=this.toolPanelWrappers.filter((e=>e!==a)),(0,s.taW)(a.getGui()),t[r]=a)})));this.clearDownUi(),this.setSideBarDef({sideBarDef:e,existingToolPanelWrappers:t})}destroyToolPanelWrappers(){this.toolPanelWrappers.forEach((e=>{(0,s.taW)(e.getGui()),this.destroyBean(e)})),this.toolPanelWrappers.length=0}destroy(){this.destroyToolPanelWrappers(),super.destroy()}}},C=class extends s.AS9{constructor(){super(...arguments),this.beanName="sideBarService"}registerSideBarComp(e){this.sideBarComp=e}getSideBarComp(){return this.sideBarComp}getSideBarSelector(){return f}},w="32.0.1",S={version:w,moduleName:"".concat(s.GXE.SideBarModule,"-core"),beans:[r,C],dependantModules:[o.f$]},y={version:w,moduleName:"".concat(s.GXE.SideBarModule,"-api"),apiFunctions:{isSideBarVisible:function(e){var t,i;return null!==(t=null===(i=e.sideBarService)||void 0===i?void 0:i.getSideBarComp().isDisplayed())&&void 0!==t&&t},setSideBarVisible:function(e,t){var i;null===(i=e.sideBarService)||void 0===i||i.getSideBarComp().setDisplayed(t)},setSideBarPosition:function(e,t){var i;null===(i=e.sideBarService)||void 0===i||i.getSideBarComp().setSideBarPosition(t)},openToolPanel:function(e,t){var i;null===(i=e.sideBarService)||void 0===i||i.getSideBarComp().openToolPanel(t,"api")},closeToolPanel:function(e){var t;null===(t=e.sideBarService)||void 0===t||t.getSideBarComp().close("api")},getOpenedToolPanel:function(e){var t,i;return null!==(t=null===(i=e.sideBarService)||void 0===i?void 0:i.getSideBarComp().openedItem())&&void 0!==t?t:null},refreshToolPanel:function(e){var t;null===(t=e.sideBarService)||void 0===t||t.getSideBarComp().refresh()},isToolPanelShowing:function(e){var t,i;return null!==(t=null===(i=e.sideBarService)||void 0===i?void 0:i.getSideBarComp().isToolPanelShowing())&&void 0!==t&&t},getToolPanelInstance:function(e,t){var i;const o=null===(i=e.sideBarService)||void 0===i?void 0:i.getSideBarComp().getToolPanelInstance(t);return(0,s.fKg)(o)},getSideBar:function(e){var t;return null===(t=e.sideBarService)||void 0===t?void 0:t.getSideBarComp().getDef()}},dependantModules:[S]},b={version:w,moduleName:s.GXE.SideBarModule,dependantModules:[S,y]},R={selector:"AG-PRIMARY-COLS-HEADER",component:class extends s.wA2{constructor(){super('<div class="ag-column-select-header" role="presentation">\n            <div data-ref="eExpand" class="ag-column-select-header-icon"></div>\n            <ag-checkbox data-ref="eSelect" class="ag-column-select-header-checkbox"></ag-checkbox>\n            <ag-input-text-field class="ag-column-select-header-filter-wrapper" data-ref="eFilterTextField"></ag-input-text-field>\n        </div>',[s.I$4,s.jvp]),this.eExpand=s.CUI,this.eSelect=s.CUI,this.eFilterTextField=s.CUI}wireBeans(e){this.columnModel=e.columnModel}postConstruct(){this.createExpandIcons(),this.addManagedListeners(this.eExpand,{click:this.onExpandClicked.bind(this),keydown:e=>{e.key===s.VDZ.SPACE&&(e.preventDefault(),this.onExpandClicked())}}),this.addManagedElementListeners(this.eSelect.getInputElement(),{click:this.onSelectClicked.bind(this)}),this.addManagedPropertyListener("functionsReadOnly",(()=>this.onFunctionsReadOnlyPropChanged())),this.eFilterTextField.setAutoComplete(!1).onValueChange((()=>this.onFilterTextChanged())),this.addManagedElementListeners(this.eFilterTextField.getInputElement(),{keydown:this.onMiniFilterKeyDown.bind(this)}),this.addManagedEventListeners({newColumnsLoaded:this.showOrHideOptions.bind(this)});const e=this.localeService.getLocaleTextFunc();this.eSelect.setInputAriaLabel(e("ariaColumnSelectAll","Toggle Select All Columns")),this.eFilterTextField.setInputAriaLabel(e("ariaFilterColumnsInput","Filter Columns Input")),this.activateTabIndex([this.eExpand])}onFunctionsReadOnlyPropChanged(){const e=this.gos.get("functionsReadOnly");this.eSelect.setReadOnly(e),this.eSelect.addOrRemoveCssClass("ag-column-select-column-readonly",e)}init(e){this.params=e;const t=this.gos.get("functionsReadOnly");this.eSelect.setReadOnly(t),this.eSelect.addOrRemoveCssClass("ag-column-select-column-readonly",t),this.columnModel.isReady()&&this.showOrHideOptions()}createExpandIcons(){this.eExpand.appendChild(this.eExpandChecked=(0,s.scM)("columnSelectOpen",this.gos)),this.eExpand.appendChild(this.eExpandUnchecked=(0,s.scM)("columnSelectClosed",this.gos)),this.eExpand.appendChild(this.eExpandIndeterminate=(0,s.scM)("columnSelectIndeterminate",this.gos)),this.setExpandState(0)}showOrHideOptions(){const e=!this.params.suppressColumnFilter,t=!this.params.suppressColumnSelectAll,i=!this.params.suppressColumnExpandAll,o=this.columnModel.isProvidedColGroupsPresent(),n=this.localeService.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(n("searchOoo","Search...")),(0,s.DIH)(this.eFilterTextField.getGui(),e),(0,s.DIH)(this.eSelect.getGui(),t),(0,s.DIH)(this.eExpand,i&&o)}onFilterTextChanged(){this.onFilterTextChangedDebounced||(this.onFilterTextChangedDebounced=(0,s.eTz)((()=>{const e=this.eFilterTextField.getValue();this.dispatchLocalEvent({type:"filterChanged",filterText:e})}),300)),this.onFilterTextChangedDebounced()}onMiniFilterKeyDown(e){e.key===s.VDZ.ENTER&&setTimeout((()=>this.onSelectClicked()),300)}onSelectClicked(){this.dispatchLocalEvent({type:this.selectState?"unselectAll":"selectAll"})}onExpandClicked(){this.dispatchLocalEvent({type:0===this.expandState?"collapseAll":"expandAll"})}setExpandState(e){this.expandState=e,(0,s.DIH)(this.eExpandChecked,0===this.expandState),(0,s.DIH)(this.eExpandUnchecked,1===this.expandState),(0,s.DIH)(this.eExpandIndeterminate,2===this.expandState)}setSelectionState(e){this.selectState=e,this.eSelect.setValue(this.selectState)}}},F=class{constructor(e,t,i){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4?arguments[4]:void 0;this.localEventService=new s.MSU,this.displayName=e,this.dept=i,this.group=o,o?(this.columnGroup=t,this.expanded=n,this.children=[]):this.column=t}isGroup(){return this.group}getDisplayName(){return this.displayName}getColumnGroup(){return this.columnGroup}getColumn(){return this.column}getDept(){return this.dept}isExpanded(){return!!this.expanded}getChildren(){return this.children}isPassesFilter(){return this.passesFilter}setExpanded(e){e!==this.expanded&&(this.expanded=e,this.localEventService.dispatchEvent({type:"expandedChanged"}))}setPassesFilter(e){this.passesFilter=e}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}},E=class extends s.wA2{constructor(e,t,i){super('<div class="ag-menu"></div>'),this.column=e,this.mouseEvent=t,this.parentEl=i,this.displayName=null}wireBeans(e){this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.funcColsService=e.funcColsService,this.popupService=e.popupService,this.focusService=e.focusService}postConstruct(){if(this.initializeProperties(this.column),this.buildMenuItemMap(),(0,s.t3s)(this.column)?this.displayName=this.columnNameService.getDisplayNameForColumn(this.column,"columnToolPanel"):this.displayName=this.columnNameService.getDisplayNameForProvidedColumnGroup(null,this.column,"columnToolPanel"),this.isActive()){this.mouseEvent.preventDefault();const e=this.getMappedMenuItems();if(0===e.length)return;this.displayContextMenu(e)}}initializeProperties(e){(0,s.pAL)(e)?this.columns=e.getLeafColumns():this.columns=[e],this.allowGrouping=this.columns.some((e=>e.isPrimary()&&e.isAllowRowGroup())),this.allowValues=this.columns.some((e=>e.isPrimary()&&e.isAllowValue())),this.allowPivoting=this.columnModel.isPivotMode()&&this.columns.some((e=>e.isPrimary()&&e.isAllowPivot()))}buildMenuItemMap(){const e=this.localeService.getLocaleTextFunc();this.menuItemMap=new Map,this.menuItemMap.set("rowGroup",{allowedFunction:e=>e.isPrimary()&&e.isAllowRowGroup()&&!this.columnModel.isColGroupLocked(e),activeFunction:e=>e.isRowGroupActive(),activateLabel:()=>"".concat(e("groupBy","Group by")," ").concat(this.displayName),deactivateLabel:()=>"".concat(e("ungroupBy","Un-Group by")," ").concat(this.displayName),activateFunction:()=>{const e=this.funcColsService.getRowGroupColumns();this.funcColsService.setRowGroupColumns(this.addColumnsToList(e),"toolPanelUi")},deActivateFunction:()=>{const e=this.funcColsService.getRowGroupColumns();this.funcColsService.setRowGroupColumns(this.removeColumnsFromList(e),"toolPanelUi")},addIcon:"menuAddRowGroup",removeIcon:"menuRemoveRowGroup"}),this.menuItemMap.set("value",{allowedFunction:e=>e.isPrimary()&&e.isAllowValue(),activeFunction:e=>e.isValueActive(),activateLabel:()=>e("addToValues","Add ".concat(this.displayName," to values"),[this.displayName]),deactivateLabel:()=>e("removeFromValues","Remove ".concat(this.displayName," from values"),[this.displayName]),activateFunction:()=>{const e=this.funcColsService.getValueColumns();this.funcColsService.setValueColumns(this.addColumnsToList(e),"toolPanelUi")},deActivateFunction:()=>{const e=this.funcColsService.getValueColumns();this.funcColsService.setValueColumns(this.removeColumnsFromList(e),"toolPanelUi")},addIcon:"valuePanel",removeIcon:"valuePanel"}),this.menuItemMap.set("pivot",{allowedFunction:e=>this.columnModel.isPivotMode()&&e.isPrimary()&&e.isAllowPivot(),activeFunction:e=>e.isPivotActive(),activateLabel:()=>e("addToLabels","Add ".concat(this.displayName," to labels"),[this.displayName]),deactivateLabel:()=>e("removeFromLabels","Remove ".concat(this.displayName," from labels"),[this.displayName]),activateFunction:()=>{const e=this.funcColsService.getPivotColumns();this.funcColsService.setPivotColumns(this.addColumnsToList(e),"toolPanelUi")},deActivateFunction:()=>{const e=this.funcColsService.getPivotColumns();this.funcColsService.setPivotColumns(this.removeColumnsFromList(e),"toolPanelUi")},addIcon:"pivotPanel",removeIcon:"pivotPanel"})}addColumnsToList(e){return[...e].concat(this.columns.filter((t=>-1===e.indexOf(t))))}removeColumnsFromList(e){return e.filter((e=>-1===this.columns.indexOf(e)))}displayContextMenu(e){const t=this.getGui(),i=this.createBean(new o.O_),s=this.localeService.getLocaleTextFunc();let n=()=>{};t.appendChild(i.getGui()),i.addMenuItems(e),i.addManagedListeners(i,{closeMenu:()=>{this.parentEl.focus(),n()}});const r=this.popupService.addPopup({modal:!0,eChild:t,closeOnEsc:!0,afterGuiAttached:()=>this.focusService.focusInto(i.getGui()),ariaLabel:s("ariaLabelContextMenu","Context Menu"),closedCallback:e=>{e instanceof KeyboardEvent&&this.parentEl.focus(),this.destroyBean(i)}});r&&(n=r.hideFunc),this.popupService.positionPopupUnderMouseEvent({type:"columnContextMenu",mouseEvent:this.mouseEvent,ePopup:t})}isActive(){return this.allowGrouping||this.allowValues||this.allowPivoting}getMappedMenuItems(){const e=[];for(const t of this.menuItemMap.values()){const i=this.columns.some((e=>t.allowedFunction(e)&&!t.activeFunction(e))),o=this.columns.some((e=>t.allowedFunction(e)&&t.activeFunction(e)));i&&e.push({name:t.activateLabel(this.displayName),icon:(0,s.scM)(t.addIcon,this.gos,null),action:()=>t.activateFunction()}),o&&e.push({name:t.deactivateLabel(this.displayName),icon:(0,s.scM)(t.removeIcon,this.gos,null),action:()=>t.deActivateFunction()})}return e}},x=class extends s.wA2{constructor(e,t,i,o){super(),this.modelItem=e,this.allowDragging=t,this.eventType=i,this.focusWrapper=o,this.cbSelect=s.CUI,this.eLabel=s.CUI,this.eGroupOpenedIcon=s.CUI,this.eGroupClosedIcon=s.CUI,this.eColumnGroupIcons=s.CUI,this.processingColumnStateChange=!1,this.modelItem=e,this.columnGroup=e.getColumnGroup(),this.columnDept=e.getDept(),this.displayName=e.getDisplayName(),this.allowDragging=t}wireBeans(e){this.columnModel=e.columnModel,this.dragAndDropService=e.dragAndDropService,this.modelItemUtils=e.modelItemUtils}postConstruct(){this.setTemplate('<div class="ag-column-select-column-group" aria-hidden="true">\n            <span class="ag-column-group-icons" data-ref="eColumnGroupIcons" >\n                <span class="ag-column-group-closed-icon" data-ref="eGroupClosedIcon"></span>\n                <span class="ag-column-group-opened-icon" data-ref="eGroupOpenedIcon"></span>\n            </span>\n            <ag-checkbox data-ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>\n            <span class="ag-column-select-column-label" data-ref="eLabel"></span>\n        </div>',[s.I$4]),this.eDragHandle=(0,s.scM)("columnDrag",this.gos),this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-group-drag-handle");const e=this.cbSelect.getGui(),t=this.cbSelect.getInputElement();e.insertAdjacentElement("afterend",this.eDragHandle),t.setAttribute("tabindex","-1"),this.eLabel.innerHTML=this.displayName?this.displayName:"",this.setupExpandContract(),this.addCssClass("ag-column-select-indent-"+this.columnDept),this.getGui().style.setProperty("--ag-indentation-level",String(this.columnDept)),this.addManagedEventListeners({columnPivotModeChanged:this.onColumnStateChanged.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.onLabelClicked.bind(this)}),this.addManagedListeners(this.cbSelect,{fieldValueChanged:this.onCheckboxChanged.bind(this)}),this.addManagedListeners(this.modelItem,{expandedChanged:this.onExpandChanged.bind(this)}),this.addManagedListeners(this.focusWrapper,{keydown:this.handleKeyDown.bind(this),contextmenu:this.onContextMenu.bind(this)}),this.setOpenClosedIcons(),this.setupDragging(),this.onColumnStateChanged(),this.addVisibilityListenersToAllChildren(),this.refreshAriaExpanded(),this.refreshAriaLabel(),this.setupTooltip();(0,s.NuV)(this.columnGroup.getColGroupDef(),this.gos,null,this.columnGroup).forEach((e=>this.addOrRemoveCssClass(e,!0)))}getColumns(){return this.columnGroup.getLeafColumns()}setupTooltip(){const e=this.columnGroup.getColGroupDef();if(!e)return;let t;"whenTruncated"===this.gos.get("tooltipShowMode")&&(t=()=>this.eLabel.scrollWidth>this.eLabel.clientWidth);const i=()=>{const i=e.headerTooltip;this.setTooltip({newTooltipText:i,location:"columnToolPanelColumnGroup",shouldDisplayTooltip:t})};i(),this.addManagedEventListeners({newColumnsLoaded:i})}getTooltipParams(){const e=super.getTooltipParams();return e.location="columnToolPanelColumnGroup",e}handleKeyDown(e){switch(e.key){case s.VDZ.LEFT:e.preventDefault(),this.modelItem.setExpanded(!1);break;case s.VDZ.RIGHT:e.preventDefault(),this.modelItem.setExpanded(!0);break;case s.VDZ.SPACE:e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected())}}onContextMenu(e){const{columnGroup:t,gos:i}=this;if(i.get("functionsReadOnly"))return;const s=this.createBean(new E(t,e,this.focusWrapper));this.addDestroyFunc((()=>{s.isAlive()&&this.destroyBean(s)}))}addVisibilityListenersToAllChildren(){const e=this.onColumnStateChanged.bind(this);this.columnGroup.getLeafColumns().forEach((t=>{this.addManagedListeners(t,{visibleChanged:e,columnValueChanged:e,columnPivotChanged:e,columnRowGroupChanged:e})}))}setupDragging(){if(!this.allowDragging)return void(0,s.DIH)(this.eDragHandle,!1);let e=!this.gos.get("suppressDragLeaveHidesColumns");const t={type:s.rvo.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDefaultIconName:()=>e?"hide":"notAllowed",getDragItem:()=>this.createDragItem(),onDragStarted:()=>{e=!this.gos.get("suppressDragLeaveHidesColumns");const t={type:"columnPanelItemDragStart",column:this.columnGroup};this.eventService.dispatchEvent(t)},onDragStopped:()=>{this.eventService.dispatchEvent({type:"columnPanelItemDragEnd"})},onGridEnter:t=>{e&&this.modelItemUtils.updateColumns({columns:this.columnGroup.getLeafColumns(),visibleState:null===t||void 0===t?void 0:t.visibleState,pivotState:null===t||void 0===t?void 0:t.pivotState,eventType:this.eventType})},onGridExit:()=>{e&&this.onChangeCommon(!1)}};this.dragAndDropService.addDragSource(t,!0),this.addDestroyFunc((()=>this.dragAndDropService.removeDragSource(t)))}createDragItem(){const e=this.columnGroup.getLeafColumns(),t={},i={};return e.forEach((e=>{const s=e.getId();t[s]=e.isVisible(),i[s]=this.modelItemUtils.createPivotState(e)})),{columns:e,visibleState:t,pivotState:i}}setupExpandContract(){this.eGroupClosedIcon.appendChild((0,s.ucQ)("columnSelectClosed",this.gos,null)),this.eGroupOpenedIcon.appendChild((0,s.ucQ)("columnSelectOpen",this.gos,null));const e=this.onExpandOrContractClicked.bind(this);this.addManagedElementListeners(this.eGroupClosedIcon,{click:e}),this.addManagedElementListeners(this.eGroupOpenedIcon,{click:e});const t=new s.rwP(this.eColumnGroupIcons,!0);this.addManagedListeners(t,{tap:e}),this.addDestroyFunc(t.destroy.bind(t))}onLabelClicked(){const e=!this.cbSelect.getValue();this.onChangeCommon(e)}onCheckboxChanged(e){this.onChangeCommon(e.selected)}getVisibleLeafColumns(){const e=[],t=i=>{i.forEach((i=>{i.isPassesFilter()&&(i.isGroup()?t(i.getChildren()):e.push(i.getColumn()))}))};return t(this.modelItem.getChildren()),e}onChangeCommon(e){this.refreshAriaLabel(),this.processingColumnStateChange||this.modelItemUtils.selectAllChildren(this.modelItem.getChildren(),e,this.eventType)}refreshAriaLabel(){const e=this.localeService.getLocaleTextFunc(),t=e("ariaColumnGroup","Column Group"),i=this.cbSelect.getValue(),o=void 0===i?e("ariaIndeterminate","indeterminate"):i?e("ariaVisible","visible"):e("ariaHidden","hidden"),n=e("ariaToggleVisibility","Press SPACE to toggle visibility");(0,s.xER)(this.focusWrapper,"".concat(this.displayName," ").concat(t)),this.cbSelect.setInputAriaLabel("".concat(n," (").concat(o,")")),(0,s.ucE)(this.focusWrapper,this.cbSelect.getInputElement().id)}onColumnStateChanged(){const e=this.workOutSelectedValue(),t=this.workOutReadOnlyValue();this.processingColumnStateChange=!0,this.cbSelect.setValue(e),this.cbSelect.setReadOnly(t),this.addOrRemoveCssClass("ag-column-select-column-group-readonly",t),this.processingColumnStateChange=!1}workOutSelectedValue(){const e=this.columnModel.isPivotMode(),t=this.getVisibleLeafColumns();let i=0,s=0;if(t.forEach((t=>{!e&&t.getColDef().lockVisible||(this.isColumnChecked(t,e)?i++:s++)})),!(i>0&&s>0))return i>0}workOutReadOnlyValue(){const e=this.columnModel.isPivotMode();let t=0;return this.columnGroup.getLeafColumns().forEach((i=>{e?i.isAnyFunctionAllowed()&&t++:i.getColDef().lockVisible||t++})),0===t}isColumnChecked(e,t){if(t){const t=e.isPivotActive(),i=e.isRowGroupActive(),s=e.isValueActive();return t||i||s}return e.isVisible()}onExpandOrContractClicked(){const e=this.modelItem.isExpanded();this.modelItem.setExpanded(!e)}onExpandChanged(){this.setOpenClosedIcons(),this.refreshAriaExpanded()}setOpenClosedIcons(){const e=this.modelItem.isExpanded();(0,s.DIH)(this.eGroupClosedIcon,!e),(0,s.DIH)(this.eGroupOpenedIcon,e)}refreshAriaExpanded(){(0,s.mmg)(this.focusWrapper,this.modelItem.isExpanded())}getDisplayName(){return this.displayName}onSelectAllChanged(e){const t=this.cbSelect.getValue();!this.cbSelect.isReadOnly()&&(e&&!t||!e&&t)&&this.cbSelect.toggle()}isSelected(){return this.cbSelect.getValue()}isSelectable(){return!this.cbSelect.isReadOnly()}setSelected(e){this.cbSelect.setValue(e,!0)}},P=class extends s.AS9{constructor(e,t){super(),this.comp=e,this.virtualList=t}wireBeans(e){this.columnModel=e.columnModel,this.columnMoveService=e.columnMoveService}postConstruct(){this.createManagedBean(new o.x$(this.comp,this.virtualList,{dragSourceType:s.rvo.ToolPanel,listItemDragStartEvent:"columnPanelItemDragStart",listItemDragEndEvent:"columnPanelItemDragEnd",eventSource:this.eventService,getCurrentDragValue:e=>this.getCurrentDragValue(e),isMoveBlocked:e=>this.isMoveBlocked(e),getNumRows:e=>e.getDisplayedColsList().length,moveItem:(e,t)=>this.moveItem(e,t)}))}getCurrentDragValue(e){return e.column}isMoveBlocked(e){if(this.gos.get("suppressMovableColumns"))return!0;return!!this.getCurrentColumns(e).find((e=>{const t=e.getColDef();return!!t.suppressMovable||!!t.lockPosition}))}moveItem(e,t){const i=this.getTargetIndex(e,t),s=this.getCurrentColumns(e);null!=i&&this.columnMoveService.moveColumns(s,i,"toolPanelUi")}getMoveDiff(e,t){const i=this.columnModel.getCols(),s=this.getCurrentColumns(e),o=s[0],n=s.length;return i.indexOf(o)<t?n:0}getCurrentColumns(e){return(0,s.pAL)(e)?e.getLeafColumns():[e]}getTargetIndex(e,t){if(!t)return null;const i=t.component;let s,o="top"===t.position;if(i instanceof x){s=i.getColumns()[0],o=!0}else s=i.getColumn();if(-1!==this.getCurrentColumns(e).indexOf(s))return null;const n=this.columnModel.getCols().indexOf(s),r=o?n:n+1;return r-this.getMoveDiff(e,r)}},M=class extends s.wA2{constructor(e,t,i,o){super(),this.allowDragging=t,this.groupsExist=i,this.focusWrapper=o,this.eLabel=s.CUI,this.cbSelect=s.CUI,this.processingColumnStateChange=!1,this.column=e.getColumn(),this.columnDept=e.getDept(),this.displayName=e.getDisplayName()}wireBeans(e){this.columnModel=e.columnModel,this.dragAndDropService=e.dragAndDropService,this.modelItemUtils=e.modelItemUtils}postConstruct(){this.setTemplate('<div class="ag-column-select-column" aria-hidden="true">\n            <ag-checkbox data-ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>\n            <span class="ag-column-select-column-label" data-ref="eLabel"></span>\n        </div>',[s.I$4]),this.eDragHandle=(0,s.scM)("columnDrag",this.gos),this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-drag-handle");const e=this.cbSelect.getGui(),t=this.cbSelect.getInputElement();e.insertAdjacentElement("afterend",this.eDragHandle),t.setAttribute("tabindex","-1");const i=(0,s.BYN)(this.displayName);this.eLabel.innerHTML=i;const o=this.columnDept;this.groupsExist&&this.addCssClass("ag-column-select-add-group-indent"),this.addCssClass("ag-column-select-indent-".concat(o)),this.getGui().style.setProperty("--ag-indentation-level",String(o)),this.setupDragging();const n=this.onColumnStateChanged.bind(this);this.addManagedEventListeners({columnPivotModeChanged:n}),this.addManagedListeners(this.column,{columnValueChanged:n,columnPivotChanged:n,columnRowGroupChanged:n,visibleChanged:n}),this.addManagedListeners(this.focusWrapper,{keydown:this.handleKeyDown.bind(this),contextmenu:this.onContextMenu.bind(this)}),this.addManagedPropertyListener("functionsReadOnly",this.onColumnStateChanged.bind(this)),this.addManagedListeners(this.cbSelect,{fieldValueChanged:this.onCheckboxChanged.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.onLabelClicked.bind(this)}),this.onColumnStateChanged(),this.refreshAriaLabel(),this.setupTooltip();(0,s.NuV)(this.column.getColDef(),this.gos,this.column,null).forEach((e=>this.addOrRemoveCssClass(e,!0)))}getColumn(){return this.column}setupTooltip(){let e;"whenTruncated"===this.gos.get("tooltipShowMode")&&(e=()=>this.eLabel.scrollWidth>this.eLabel.clientWidth);const t=()=>{const t=this.column.getColDef().headerTooltip;this.setTooltip({newTooltipText:t,location:"columnToolPanelColumn",shouldDisplayTooltip:e})};t(),this.addManagedEventListeners({newColumnsLoaded:t})}getTooltipParams(){const e=super.getTooltipParams();return e.location="columnToolPanelColumn",e.colDef=this.column.getColDef(),e}onContextMenu(e){const{column:t,gos:i}=this;if(i.get("functionsReadOnly"))return;const s=this.createBean(new E(t,e,this.focusWrapper));this.addDestroyFunc((()=>{s.isAlive()&&this.destroyBean(s)}))}handleKeyDown(e){e.key===s.VDZ.SPACE&&(e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected()))}onLabelClicked(){if(this.gos.get("functionsReadOnly"))return;const e=!this.cbSelect.getValue();this.onChangeCommon(e)}onCheckboxChanged(e){this.onChangeCommon(e.selected)}onChangeCommon(e){this.cbSelect.isReadOnly()||(this.refreshAriaLabel(),this.processingColumnStateChange||this.modelItemUtils.setColumn(this.column,e,"toolPanelUi"))}refreshAriaLabel(){const e=this.localeService.getLocaleTextFunc(),t=e("ariaColumn","Column"),i=this.cbSelect.getValue()?e("ariaVisible","visible"):e("ariaHidden","hidden"),o=e("ariaToggleVisibility","Press SPACE to toggle visibility");(0,s.xER)(this.focusWrapper,"".concat(this.displayName," ").concat(t)),this.cbSelect.setInputAriaLabel("".concat(o," (").concat(i,")")),(0,s.ucE)(this.focusWrapper,this.cbSelect.getInputElement().id)}setupDragging(){if(!this.allowDragging)return void(0,s.DIH)(this.eDragHandle,!1);let e=!this.gos.get("suppressDragLeaveHidesColumns");const t={type:s.rvo.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDefaultIconName:()=>e?"hide":"notAllowed",getDragItem:()=>this.createDragItem(),onDragStarted:()=>{e=!this.gos.get("suppressDragLeaveHidesColumns");const t={type:"columnPanelItemDragStart",column:this.column};this.eventService.dispatchEvent(t)},onDragStopped:()=>{this.eventService.dispatchEvent({type:"columnPanelItemDragEnd"})},onGridEnter:t=>{e&&this.modelItemUtils.updateColumns({columns:[this.column],visibleState:null===t||void 0===t?void 0:t.visibleState,pivotState:null===t||void 0===t?void 0:t.pivotState,eventType:"toolPanelUi"})},onGridExit:()=>{e&&this.onChangeCommon(!1)}};this.dragAndDropService.addDragSource(t,!0),this.addDestroyFunc((()=>this.dragAndDropService.removeDragSource(t)))}createDragItem(){const e=this.column.getColId(),t={[e]:this.column.isVisible()},i={[e]:this.modelItemUtils.createPivotState(this.column)};return{columns:[this.column],visibleState:t,pivotState:i}}onColumnStateChanged(){this.processingColumnStateChange=!0;const e=this.columnModel.isPivotMode();if(e){const e=this.column.isAnyFunctionActive();this.cbSelect.setValue(e)}else this.cbSelect.setValue(this.column.isVisible());let t=!0,i=!0;if(e){const e=this.gos.get("functionsReadOnly"),s=!this.column.isAnyFunctionAllowed();t=!e&&!s,i=t}else{const{enableRowGroup:e,enableValue:s,lockPosition:o,suppressMovable:n,lockVisible:r}=this.column.getColDef();t=!r,i=!!e||!!s||!(!!o||!!n)}this.cbSelect.setReadOnly(!t),this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!i),this.addOrRemoveCssClass("ag-column-select-column-readonly",!i&&!t),this.cbSelect.setPassive(!1),this.processingColumnStateChange=!1}getDisplayName(){return this.displayName}onSelectAllChanged(e){e!==this.cbSelect.getValue()&&(this.cbSelect.isReadOnly()||this.cbSelect.toggle())}isSelected(){return this.cbSelect.getValue()}isSelectable(){return!this.cbSelect.isReadOnly()}isExpandable(){return!1}setExpanded(e){(0,s.Brh)("can not expand a column item that does not represent a column group header")}},D=class{constructor(e){this.items=e}getRowCount(){return this.items.length}getRow(e){return this.items[e]}},I={selector:"AG-PRIMARY-COLS-LIST",component:class extends s.wA2{constructor(){super('<div class="'.concat("ag-column-select-list",'" role="presentation"></div>')),this.destroyColumnItemFuncs=[],this.hasLoadedInitialState=!1,this.isInitialState=!1}wireBeans(e){this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.colDefService=e.toolPanelColDefService,this.modelItemUtils=e.modelItemUtils}destroy(){this.destroyColumnTree(),super.destroy()}destroyColumnTree(){this.allColsTree=[],this.destroyColumnItemFuncs.forEach((e=>e())),this.destroyColumnItemFuncs=[]}init(e,t,i){this.params=e,this.allowDragging=t,this.eventType=i,this.params.suppressSyncLayoutWithGrid||this.addManagedEventListeners({columnMoved:this.onColumnsChanged.bind(this)}),this.addManagedEventListeners({newColumnsLoaded:this.onColumnsChanged.bind(this)});const n=this.fireSelectionChangedEvent.bind(this);this.addManagedEventListeners({columnPivotChanged:n,columnPivotModeChanged:n,columnRowGroupChanged:n,columnValueChanged:n,columnVisible:n,newColumnsLoaded:n}),this.expandGroupsByDefault=!this.params.contractColumnSelection,this.virtualList=this.createManagedBean(new o.CP({cssIdentifier:"column-select",ariaRole:"tree"})),this.appendChild(this.virtualList.getGui()),this.virtualList.setComponentCreator(((e,t)=>((0,s.icB)(t,e.getDept()+1),this.createComponentFromItem(e,t)))),this.columnModel.isReady()&&this.onColumnsChanged(),this.params.suppressColumnMove||this.createManagedBean(new P(this,this.virtualList))}createComponentFromItem(e,t){if(e.isGroup()){const i=new x(e,this.allowDragging,this.eventType,t);return this.createBean(i),i}const i=new M(e,this.allowDragging,this.groupsExist,t);return this.createBean(i),i}onColumnsChanged(){this.hasLoadedInitialState||(this.hasLoadedInitialState=!0,this.isInitialState=!!this.params.initialState);const e=this.getExpandedStates(),t=this.columnModel.isPivotMode();!this.params.suppressSyncLayoutWithGrid&&!t?this.buildTreeFromWhatGridIsDisplaying():this.buildTreeFromProvidedColumnDefs(),this.setExpandedStates(e),this.markFilteredColumns(),this.flattenAndFilterModel(),this.isInitialState=!1}getDisplayedColsList(){return this.displayedColsList}getExpandedStates(){const e={};if(this.isInitialState){const{expandedGroupIds:t}=this.params.initialState;return t.forEach((t=>{e[t]=!0})),e}return this.allColsTree?(this.forEachItem((t=>{if(!t.isGroup())return;const i=t.getColumnGroup();i&&(e[i.getId()]=t.isExpanded())})),e):{}}setExpandedStates(e){if(!this.allColsTree)return;const{isInitialState:t}=this;this.forEachItem((i=>{if(!i.isGroup())return;const s=i.getColumnGroup();if(s){const o=e[s.getId()];(null!=o||t)&&i.setExpanded(!!o)}}))}buildTreeFromWhatGridIsDisplaying(){this.colDefService.syncLayoutWithGrid(this.setColumnLayout.bind(this))}setColumnLayout(e){const t=this.colDefService.createColumnTree(e);this.buildListModel(t),this.groupsExist=e.some((e=>e&&"undefined"!==typeof e.children)),this.markFilteredColumns(),this.flattenAndFilterModel()}buildTreeFromProvidedColumnDefs(){this.buildListModel(this.columnModel.getColDefColTree()),this.groupsExist=this.columnModel.isProvidedColGroupsPresent()}buildListModel(e){const t=this.onColumnExpanded.bind(this),i=e=>{e.addEventListener("expandedChanged",t);const i=e.removeEventListener.bind(e,"expandedChanged",t);this.destroyColumnItemFuncs.push(i)},o=(e,t,i)=>{e.forEach((e=>{(0,s.pAL)(e)?n(e,t,i):r(e,t,i)}))},n=(e,t,s)=>{const n=e.getColGroupDef();if(n&&n.suppressColumnsToolPanel)return;if(e.isPadding())return void o(e.getChildren(),t,s);const r=this.columnNameService.getDisplayNameForProvidedColumnGroup(null,e,"columnToolPanel"),l=new F(r,e,t,!0,this.expandGroupsByDefault);s.push(l),i(l),o(e.getChildren(),t+1,l.getChildren())},r=(e,t,i)=>{if(e.getColDef()&&e.getColDef().suppressColumnsToolPanel)return;const s=this.columnNameService.getDisplayNameForColumn(e,"columnToolPanel");i.push(new F(s,e,t))};this.destroyColumnTree(),o(e,0,this.allColsTree)}onColumnExpanded(){this.flattenAndFilterModel()}flattenAndFilterModel(){this.displayedColsList=[];const e=t=>{t.isPassesFilter()&&(this.displayedColsList.push(t),t.isGroup()&&t.isExpanded()&&t.getChildren().forEach(e))};this.allColsTree.forEach(e),this.virtualList.setModel(new D(this.displayedColsList));const t=this.virtualList.getLastFocusedRow();this.virtualList.refresh(),null!=t&&this.focusRowIfAlive(t),this.notifyListeners(),this.refreshAriaLabel()}refreshAriaLabel(){const e=this.localeService.getLocaleTextFunc(),t=e("ariaColumnPanelList","Column List"),i=e("columns","Columns"),o=this.displayedColsList.length;(0,s.xER)(this.virtualList.getAriaElement(),"".concat(t," ").concat(o," ").concat(i))}focusRowIfAlive(e){window.setTimeout((()=>{this.isAlive()&&this.virtualList.focusRow(e)}),0)}forEachItem(e){const t=i=>{i.forEach((i=>{e(i),i.isGroup()&&t(i.getChildren())}))};this.allColsTree&&t(this.allColsTree)}doSetExpandedAll(e){this.forEachItem((t=>{t.isGroup()&&t.setExpanded(e)}))}setGroupsExpanded(e,t){if(!t)return void this.doSetExpandedAll(e);const i=[];this.forEachItem((s=>{if(!s.isGroup())return;const o=s.getColumnGroup().getId();t.indexOf(o)>=0&&(s.setExpanded(e),i.push(o))}));const o=t.filter((e=>!(0,s.W7Q)(i,e)));o.length>0&&(0,s.Brh)("unable to find group(s) for supplied groupIds:",o)}getExpandState(){let e=0,t=0;return this.forEachItem((i=>{i.isGroup()&&(i.isExpanded()?e++:t++)})),e>0&&t>0?2:t>0?1:0}doSetSelectedAll(e){this.modelItemUtils.selectAllChildren(this.allColsTree,e,this.eventType)}getSelectionState(){let e=0,t=0;const i=this.columnModel.isPivotMode();if(this.forEachItem((s=>{if(s.isGroup())return;if(!s.isPassesFilter())return;const o=s.getColumn(),n=o.getColDef();let r;if(i){if(!o.isAllowPivot()&&!o.isAllowRowGroup()&&!o.isAllowValue())return;r=o.isValueActive()||o.isPivotActive()||o.isRowGroupActive()}else{if(n.lockVisible)return;r=o.isVisible()}r?e++:t++})),!(e>0&&t>0))return!(0===e||t>0)}setFilterText(e){this.filterText=(0,s.fTC)(e)?e.toLowerCase():null,this.markFilteredColumns(),this.flattenAndFilterModel()}markFilteredColumns(){const e=e=>{if(!(0,s.fTC)(this.filterText))return!0;const t=e.getDisplayName();return null==t||-1!==t.toLowerCase().indexOf(this.filterText)},t=(i,s)=>{let o=!1;if(i.isGroup()){const n=e(i);i.getChildren().forEach((e=>{const i=t(e,n||s);i&&(o=i)}))}const n=!(!s&&!o)||e(i);return i.setPassesFilter(n),n};this.allColsTree.forEach((e=>t(e,!1)))}notifyListeners(){this.fireGroupExpandedEvent(),this.fireSelectionChangedEvent()}fireGroupExpandedEvent(){const e=this.getExpandState();this.dispatchLocalEvent({type:"groupExpanded",state:e})}fireSelectionChangedEvent(){if(!this.allColsTree)return;const e=this.getSelectionState();this.dispatchLocalEvent({type:"selectionChanged",state:e})}getExpandedGroups(){const e=[];return this.allColsTree?(this.forEachItem((t=>{t.isGroup()&&t.isExpanded()&&e.push(t.getColumnGroup().getId())})),e):e}}},T=class extends s.wA2{constructor(){super('<div class="ag-column-select">\n            <ag-primary-cols-header data-ref="primaryColsHeaderPanel"></ag-primary-cols-header>\n            <ag-primary-cols-list data-ref="primaryColsListPanel"></ag-primary-cols-list>\n        </div>',[R,I]),this.primaryColsHeaderPanel=s.CUI,this.primaryColsListPanel=s.CUI}init(e,t,i){this.allowDragging=e,this.params=t,this.eventType=i,this.primaryColsHeaderPanel.init(this.params);const o=this.params.suppressColumnFilter,n=this.params.suppressColumnSelectAll;this.params.suppressColumnExpandAll&&o&&n&&this.primaryColsHeaderPanel.setDisplayed(!1),this.addManagedListeners(this.primaryColsListPanel,{groupExpanded:this.onGroupExpanded.bind(this),selectionChanged:this.onSelectionChange.bind(this)}),this.primaryColsListPanel.init(this.params,this.allowDragging,this.eventType),this.addManagedListeners(this.primaryColsHeaderPanel,{expandAll:this.onExpandAll.bind(this),collapseAll:this.onCollapseAll.bind(this),selectAll:this.onSelectAll.bind(this),unselectAll:this.onUnselectAll.bind(this),filterChanged:this.onFilterChanged.bind(this)}),this.positionableFeature=new s.Gxm(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature)}toggleResizable(e){this.positionableFeature.setResizable(!!e&&{bottom:!0})}onExpandAll(){this.primaryColsListPanel.doSetExpandedAll(!0)}onCollapseAll(){this.primaryColsListPanel.doSetExpandedAll(!1)}expandGroups(e){this.primaryColsListPanel.setGroupsExpanded(!0,e)}collapseGroups(e){this.primaryColsListPanel.setGroupsExpanded(!1,e)}setColumnLayout(e){this.primaryColsListPanel.setColumnLayout(e)}onFilterChanged(e){this.primaryColsListPanel.setFilterText(e.filterText)}syncLayoutWithGrid(){this.primaryColsListPanel.onColumnsChanged()}onSelectAll(){this.primaryColsListPanel.doSetSelectedAll(!0)}onUnselectAll(){this.primaryColsListPanel.doSetSelectedAll(!1)}onGroupExpanded(e){this.primaryColsHeaderPanel.setExpandState(e.state),this.params.onStateUpdated()}onSelectionChange(e){this.primaryColsHeaderPanel.setSelectionState(e.state)}getExpandedGroups(){return this.primaryColsListPanel.getExpandedGroups()}},A=class extends s.wA2{constructor(){super(...arguments),this.cbPivotMode=s.CUI}wireBeans(e){this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}createTemplate(){return'<div class="ag-pivot-mode-panel">\n                <ag-toggle-button data-ref="cbPivotMode" class="ag-pivot-mode-select"></ag-toggle-button>\n            </div>'}postConstruct(){this.setTemplate(this.createTemplate(),[s.nTy]),this.cbPivotMode.setValue(this.columnModel.isPivotMode());const e=this.localeService.getLocaleTextFunc();this.cbPivotMode.setLabel(e("pivotMode","Pivot Mode")),this.addManagedListeners(this.cbPivotMode,{fieldValueChanged:this.onBtPivotMode.bind(this)});const t=this.onPivotModeChanged.bind(this);this.addManagedEventListeners({newColumnsLoaded:t,columnPivotModeChanged:t})}onBtPivotMode(){const e=!!this.cbPivotMode.getValue();e!==this.columnModel.isPivotMode()&&(this.gos.updateGridOptions({options:{pivotMode:e},source:"toolPanelUi"}),this.ctrlsService.getHeaderRowContainerCtrls().forEach((e=>e.refresh())))}onPivotModeChanged(){const e=this.columnModel.isPivotMode();this.cbPivotMode.setValue(e)}},k=class extends s.wA2{constructor(){super('<div class="ag-column-panel"></div>'),this.initialised=!1,this.childDestroyFuncs=[]}setVisible(e){super.setDisplayed(e),e&&!this.initialised&&this.init(this.params)}init(e){const t=this.gos.addGridCommonParams({suppressColumnMove:!1,suppressColumnSelectAll:!1,suppressColumnFilter:!1,suppressColumnExpandAll:!1,contractColumnSelection:!1,suppressPivotMode:!1,suppressRowGroups:!1,suppressValues:!1,suppressPivots:!1,suppressSyncLayoutWithGrid:!1});if(this.params={...t,...e},this.isRowGroupingModuleLoaded()&&!this.params.suppressPivotMode&&(this.pivotModePanel=this.createBean(new A),this.childDestroyFuncs.push((()=>this.destroyBean(this.pivotModePanel))),this.appendChild(this.pivotModePanel)),this.primaryColsPanel=this.createBean(new T),this.childDestroyFuncs.push((()=>this.destroyBean(this.primaryColsPanel))),this.primaryColsPanel.init(!0,this.params,"toolPanelUi"),this.primaryColsPanel.addCssClass("ag-column-panel-column-select"),this.appendChild(this.primaryColsPanel),this.isRowGroupingModuleLoaded()){this.params.suppressRowGroups||(this.rowGroupDropZonePanel=this.createBean(new n.N(!1)),this.childDestroyFuncs.push((()=>this.destroyBean(this.rowGroupDropZonePanel))),this.appendChild(this.rowGroupDropZonePanel)),this.params.suppressValues||(this.valuesDropZonePanel=this.createBean(new n.wY(!1)),this.childDestroyFuncs.push((()=>this.destroyBean(this.valuesDropZonePanel))),this.appendChild(this.valuesDropZonePanel)),this.params.suppressPivots||(this.pivotDropZonePanel=this.createBean(new n.kv(!1)),this.childDestroyFuncs.push((()=>this.destroyBean(this.pivotDropZonePanel))),this.appendChild(this.pivotDropZonePanel)),this.setLastVisible();const[e]=this.addManagedEventListeners({columnPivotModeChanged:()=>{this.resetChildrenHeight(),this.setLastVisible()}});this.childDestroyFuncs.push((()=>e()))}this.initialised=!0}setPivotModeSectionVisible(e){this.isRowGroupingModuleLoaded()&&(this.pivotModePanel?this.pivotModePanel.setDisplayed(e):e&&(this.pivotModePanel=this.createBean(new A),this.getGui().insertBefore(this.pivotModePanel.getGui(),this.getGui().firstChild),this.childDestroyFuncs.push((()=>this.destroyBean(this.pivotModePanel)))),this.setLastVisible())}setRowGroupsSectionVisible(e){this.isRowGroupingModuleLoaded()&&(this.rowGroupDropZonePanel?this.rowGroupDropZonePanel.setDisplayed(e):e&&(this.rowGroupDropZonePanel=this.createManagedBean(new n.N(!1)),this.appendChild(this.rowGroupDropZonePanel)),this.setLastVisible())}setValuesSectionVisible(e){this.isRowGroupingModuleLoaded()&&(this.valuesDropZonePanel?this.valuesDropZonePanel.setDisplayed(e):e&&(this.valuesDropZonePanel=this.createManagedBean(new n.wY(!1)),this.appendChild(this.valuesDropZonePanel)),this.setLastVisible())}setPivotSectionVisible(e){this.isRowGroupingModuleLoaded()&&(this.pivotDropZonePanel?this.pivotDropZonePanel.setDisplayed(e):e&&(this.pivotDropZonePanel=this.createManagedBean(new n.kv(!1)),this.appendChild(this.pivotDropZonePanel),this.pivotDropZonePanel.setDisplayed(e)),this.setLastVisible())}setResizers(){[this.primaryColsPanel,this.rowGroupDropZonePanel,this.valuesDropZonePanel,this.pivotDropZonePanel].forEach((e=>{if(!e)return;const t=e.getGui();e.toggleResizable(!t.classList.contains("ag-last-column-drop")&&!t.classList.contains("ag-hidden"))}))}setLastVisible(){const e=this.getGui();Array.prototype.slice.call(e.querySelectorAll(".ag-column-drop")).forEach((e=>e.classList.remove("ag-last-column-drop")));const t=e.querySelectorAll(".ag-column-drop:not(.ag-hidden)"),i=(0,s._O9)(t);i&&i.classList.add("ag-last-column-drop"),this.setResizers()}resetChildrenHeight(){const e=this.getGui().children;for(let t=0;t<e.length;t++){const i=e[t];i.style.removeProperty("height"),i.style.removeProperty("flex")}}isRowGroupingModuleLoaded(){return s.O3h.__assertRegistered(s.GXE.RowGroupingModule,"Row Grouping",this.gridId)}expandColumnGroups(e){this.primaryColsPanel.expandGroups(e)}collapseColumnGroups(e){this.primaryColsPanel.collapseGroups(e)}setColumnLayout(e){this.primaryColsPanel.setColumnLayout(e)}syncLayoutWithGrid(){this.primaryColsPanel.syncLayoutWithGrid()}destroyChildren(){this.childDestroyFuncs.forEach((e=>e())),this.childDestroyFuncs.length=0,(0,s.wvc)(this.getGui())}refresh(e){return this.destroyChildren(),this.init(e),!0}getState(){return{expandedGroupIds:this.primaryColsPanel.getExpandedGroups()}}destroy(){this.destroyChildren(),super.destroy()}},L=(s.AS9,s.GXE.ColumnsToolPanelModule,o.js,o.f$,n.qZ,class e extends s.AS9{constructor(){super(...arguments),this.beanName="chartMenuItemMapper"}wireBeans(e){this.chartService=e.chartService}getChartItems(t){var i;if(!this.chartService)return void s.O3h.__assertRegistered(s.GXE.GridChartsModule,'the Context Menu key "'.concat(t,'"'),this.gridId);const o="pivotChart"===t?new G(this.gos,this.chartService,this.localeService):new N(this.gos,this.chartService,this.localeService),n=this.chartService.isEnterprise();let r=o.getMenuItem();if(r&&r.subMenu&&!n){const e=t=>{var i;return{...t,subMenu:null===(i=t.subMenu)||void 0===i?void 0:i.filter((e=>!e._enterprise)).map((t=>e(t)))}};r=e(r)}const l=null===(i=this.gos.get("chartToolPanelsDef"))||void 0===i||null===(i=i.settingsPanel)||void 0===i?void 0:i.chartGroupsDef;return l&&(r=e.filterAndOrderChartMenu(r,l,o.getConfigLookup())),this.cleanInternals(r)}cleanInternals(e){if(!e)return e;const t=e=>{var i;return null===e||void 0===e||delete e._key,null===e||void 0===e||delete e._enterprise,null===e||void 0===e||null===(i=e.subMenu)||void 0===i||i.forEach((e=>t(e))),e};return t(e)}static buildLookup(e){const t={},i=e=>{t[e._key]=e,e.subMenu&&e.subMenu.forEach((e=>i(e)))};return i(e),t}static filterAndOrderChartMenu(e,t,i){var o;const n=this.buildLookup(e),r={...e,subMenu:[]};if(Object.entries(t).forEach((e=>{let[t,o]=e;const l=i[t];if(null===l)return;if(void 0==l)return void(0,s.Brh)("invalid chartGroupsDef config '".concat(t,"'"));const a=n[l._key];if(a)if(a.subMenu){const e=o.map((e=>{const i=l[e];if(void 0!=i)return n[i];(0,s.Brh)("invalid chartGroupsDef config '".concat(t,".").concat(e,"'"))})).filter((e=>void 0!==e));var d;if(e.length>0)a.subMenu=e,null===(d=r.subMenu)||void 0===d||d.push(a)}else{var c;null===(c=r.subMenu)||void 0===c||c.push(a)}})),0!=(null===(o=r.subMenu)||void 0===o?void 0:o.length))return r}}),G=class{constructor(e,t,i){this.gos=e,this.chartService=t,this.localeService=i}getMenuItem(){var e=this;const t=this.localeService.getLocaleTextFunc(),i=function(i,s,o,n){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return{name:t(i,s),action:()=>e.chartService.createPivotChart({chartType:o}),_key:n,_enterprise:r}};return{name:t("pivotChart","Pivot Chart"),_key:"pivotChart",subMenu:[{_key:"pivotColumnChart",name:t("columnChart","Column"),subMenu:[i("groupedColumn","Grouped&lrm;","groupedColumn","pivotGroupedColumn"),i("stackedColumn","Stacked&lrm;","stackedColumn","pivotStackedColumn"),i("normalizedColumn","100% Stacked&lrm;","normalizedColumn","pivotNormalizedColumn")]},{_key:"pivotBarChart",name:t("barChart","Bar"),subMenu:[i("groupedBar","Grouped&lrm;","groupedBar","pivotGroupedBar"),i("stackedBar","Stacked&lrm;","stackedBar","pivotStackedBar"),i("normalizedBar","100% Stacked&lrm;","normalizedBar","pivotNormalizedBar")]},{_key:"pivotPieChart",name:t("pieChart","Pie"),subMenu:[i("pie","Pie&lrm;","pie","pivotPie"),i("donut","Donut&lrm;","donut","pivotDonut")]},i("line","Line&lrm;","line","pivotLineChart"),{_key:"pivotXYChart",name:t("xyChart","X Y (Scatter)"),subMenu:[i("scatter","Scatter&lrm;","scatter","pivotScatter"),i("bubble","Bubble&lrm;","bubble","pivotBubble")]},{_key:"pivotAreaChart",name:t("areaChart","Area"),subMenu:[i("area","Area&lrm;","area","pivotArea"),i("stackedArea","Stacked&lrm;","stackedArea","pivotStackedArea"),i("normalizedArea","100% Stacked&lrm;","normalizedArea","pivotNormalizedArea")]},{_key:"pivotStatisticalChart",_enterprise:!1,name:t("statisticalChart","Statistical"),subMenu:[i("histogramChart","Histogram&lrm;","histogram","pivotHistogram",!1)]},{_key:"pivotHierarchicalChart",_enterprise:!0,name:t("hierarchicalChart","Hierarchical"),subMenu:[i("treemapChart","Treemap&lrm;","treemap","pivotTreemap",!0),i("sunburstChart","Sunburst&lrm;","sunburst","pivotSunburst",!0)]},{_key:"pivotCombinationChart",name:t("combinationChart","Combination"),subMenu:[i("columnLineCombo","Column & Line&lrm;","columnLineCombo","pivotColumnLineCombo"),i("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","pivotAreaColumnCombo")]}],icon:(0,s.scM)("chart",this.gos,void 0)}}getConfigLookup(){return{columnGroup:{_key:"pivotColumnChart",column:"pivotGroupedColumn",stackedColumn:"pivotStackedColumn",normalizedColumn:"pivotNormalizedColumn"},barGroup:{_key:"pivotBarChart",bar:"pivotGroupedBar",stackedBar:"pivotStackedBar",normalizedBar:"pivotNormalizedBar"},pieGroup:{_key:"pivotPieChart",pie:"pivotPie",donut:"pivotDonut",doughnut:"pivotDonut"},lineGroup:{_key:"pivotLineChart",line:"pivotLineChart"},scatterGroup:{_key:"pivotXYChart",bubble:"pivotBubble",scatter:"pivotScatter"},areaGroup:{_key:"pivotAreaChart",area:"pivotArea",stackedArea:"pivotStackedArea",normalizedArea:"pivotNormalizedArea"},combinationGroup:{_key:"pivotCombinationChart",columnLineCombo:"pivotColumnLineCombo",areaColumnCombo:"pivotAreaColumnCombo",customCombo:null},hierarchicalGroup:{_key:"pivotHierarchicalChart",treemap:"pivotTreemap",sunburst:"pivotSunburst"},statisticalGroup:{_key:"pivotStatisticalChart",histogram:"pivotHistogram",rangeBar:null,rangeArea:null,boxPlot:null},polarGroup:null,specializedGroup:null}}},N=class{constructor(e,t,i){this.gos=e,this.chartService=t,this.localeService=i}getMenuItem(){var e=this;const t=this.localeService.getLocaleTextFunc(),i=function(i,s,o,n){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return{name:t(i,s),action:()=>e.chartService.createChartFromCurrentRange(o),_key:n,_enterprise:r}};return{name:t("chartRange","Chart Range"),_key:"chartRange",subMenu:[{name:t("columnChart","Column"),subMenu:[i("groupedColumn","Grouped&lrm;","groupedColumn","rangeGroupedColumn"),i("stackedColumn","Stacked&lrm;","stackedColumn","rangeStackedColumn"),i("normalizedColumn","100% Stacked&lrm;","normalizedColumn","rangeNormalizedColumn")],_key:"rangeColumnChart"},{name:t("barChart","Bar"),subMenu:[i("groupedBar","Grouped&lrm;","groupedBar","rangeGroupedBar"),i("stackedBar","Stacked&lrm;","stackedBar","rangeStackedBar"),i("normalizedBar","100% Stacked&lrm;","normalizedBar","rangeNormalizedBar")],_key:"rangeBarChart"},{name:t("pieChart","Pie"),subMenu:[i("pie","Pie&lrm;","pie","rangePie"),i("donut","Donut&lrm;","donut","rangeDonut")],_key:"rangePieChart"},i("line","Line&lrm;","line","rangeLineChart"),{name:t("xyChart","X Y (Scatter)"),subMenu:[i("scatter","Scatter&lrm;","scatter","rangeScatter"),i("bubble","Bubble&lrm;","bubble","rangeBubble")],_key:"rangeXYChart"},{name:t("areaChart","Area"),subMenu:[i("area","Area&lrm;","area","rangeArea"),i("stackedArea","Stacked&lrm;","stackedArea","rangeStackedArea"),i("normalizedArea","100% Stacked&lrm;","normalizedArea","rangeNormalizedArea")],_key:"rangeAreaChart"},{name:t("polarChart","Polar"),subMenu:[i("radarLine","Radar Line&lrm;","radarLine","rangeRadarLine"),i("radarArea","Radar Area&lrm;","radarArea","rangeRadarArea"),i("nightingale","Nightingale&lrm;","nightingale","rangeNightingale"),i("radialColumn","Radial Column&lrm;","radialColumn","rangeRadialColumn"),i("radialBar","Radial Bar&lrm;","radialBar","rangeRadialBar")],_key:"rangePolarChart",_enterprise:!0},{name:t("statisticalChart","Statistical"),subMenu:[i("boxPlot","Box Plot&lrm;","boxPlot","rangeBoxPlot",!0),i("histogramChart","Histogram&lrm;","histogram","rangeHistogram",!1),i("rangeBar","Range Bar&lrm;","rangeBar","rangeRangeBar",!0),i("rangeArea","Range Area&lrm;","rangeArea","rangeRangeArea",!0)],_key:"rangeStatisticalChart",_enterprise:!1},{name:t("hierarchicalChart","Hierarchical"),subMenu:[i("treemap","Treemap&lrm;","treemap","rangeTreemap"),i("sunburst","Sunburst&lrm;","sunburst","rangeSunburst")],_key:"rangeHierarchicalChart",_enterprise:!0},{name:t("specializedChart","Specialized"),subMenu:[i("heatmap","Heatmap&lrm;","heatmap","rangeHeatmap"),i("waterfall","Waterfall&lrm;","waterfall","rangeWaterfall")],_key:"rangeSpecializedChart",_enterprise:!0},{name:t("combinationChart","Combination"),subMenu:[i("columnLineCombo","Column & Line&lrm;","columnLineCombo","rangeColumnLineCombo"),i("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","rangeAreaColumnCombo")],_key:"rangeCombinationChart"}],icon:(0,s.scM)("chart",this.gos,void 0)}}getConfigLookup(){return{columnGroup:{_key:"rangeColumnChart",column:"rangeGroupedColumn",stackedColumn:"rangeStackedColumn",normalizedColumn:"rangeNormalizedColumn"},barGroup:{_key:"rangeBarChart",bar:"rangeGroupedBar",stackedBar:"rangeStackedBar",normalizedBar:"rangeNormalizedBar"},pieGroup:{_key:"rangePieChart",pie:"rangePie",donut:"rangeDonut",doughnut:"rangeDonut"},lineGroup:{_key:"rangeLineChart",line:"rangeLineChart"},scatterGroup:{_key:"rangeXYChart",bubble:"rangeBubble",scatter:"rangeScatter"},areaGroup:{_key:"rangeAreaChart",area:"rangeArea",stackedArea:"rangeStackedArea",normalizedArea:"rangeNormalizedArea"},polarGroup:{_key:"rangePolarChart",radarLine:"rangeRadarLine",radarArea:"rangeRadarArea",nightingale:"rangeNightingale",radialColumn:"rangeRadialColumn",radialBar:"rangeRadialBar"},statisticalGroup:{_key:"rangeStatisticalChart",boxPlot:"rangeBoxPlot",histogram:"rangeHistogram",rangeBar:"rangeRangeBar",rangeArea:"rangeRangeArea"},hierarchicalGroup:{_key:"rangeHierarchicalChart",treemap:"rangeTreemap",sunburst:"rangeSunburst"},specializedGroup:{_key:"rangeSpecializedChart",heatmap:"rangeHeatmap",waterfall:"rangeWaterfall"},combinationGroup:{_key:"rangeCombinationChart",columnLineCombo:"rangeColumnLineCombo",areaColumnCombo:"rangeAreaColumnCombo",customCombo:null}}}},O=class extends s.AS9{constructor(){super(...arguments),this.beanName="columnChooserFactory"}wireBeans(e){this.focusService=e.focusService,this.menuUtils=e.menuUtils,this.visibleColsService=e.visibleColsService}createColumnSelectPanel(e,t,i,s){var o,n;const r=e.createManagedBean(new T),l=null!==(o=null!==(n=null!==s&&void 0!==s?s:null===t||void 0===t?void 0:t.getColDef().columnChooserParams)&&void 0!==n?n:null===t||void 0===t?void 0:t.getColDef().columnsMenuParams)&&void 0!==o?o:{},{contractColumnSelection:a,suppressColumnExpandAll:d,suppressColumnFilter:c,suppressColumnSelectAll:u,suppressSyncLayoutWithGrid:h,columnLayout:p}=l;return r.init(!!i,this.gos.addGridCommonParams({suppressColumnMove:!1,suppressValues:!1,suppressPivots:!1,suppressRowGroups:!1,suppressPivotMode:!1,contractColumnSelection:!!a,suppressColumnExpandAll:!!d,suppressColumnFilter:!!c,suppressColumnSelectAll:!!u,suppressSyncLayoutWithGrid:!!p||!!h,onStateUpdated:()=>{}}),"columnMenu"),p&&r.setColumnLayout(p),r}showColumnChooser(e){let{column:t,chooserParams:i,eventSource:s}=e;this.hideActiveColumnChooser();const n=this.createColumnSelectPanel(this,t,!0,i),r=this.localeService.getLocaleTextFunc(),l=this.visibleColsService.getAllCols().indexOf(t),a=t?this.focusService.getFocusedHeader():null;this.activeColumnChooserDialog=this.createBean(new o.$z({title:r("chooseColumns","Choose Columns"),component:n,width:300,height:300,resizable:!0,movable:!0,centered:!0,closable:!0,afterGuiAttached:()=>{var e;null===(e=this.focusService.findNextFocusableElement(n.getGui()))||void 0===e||e.focus(),this.dispatchVisibleChangedEvent(!0,t)},closedCallback:e=>{const i=this.activeColumnChooser.getGui();this.destroyBean(this.activeColumnChooser),this.activeColumnChooser=void 0,this.activeColumnChooserDialog=void 0,this.dispatchVisibleChangedEvent(!1,t),t&&this.menuUtils.restoreFocusOnClose({column:t,headerPosition:a,columnIndex:l,eventSource:s},i,e,!0)}})),this.activeColumnChooser=n}hideActiveColumnChooser(){this.activeColumnChooserDialog&&this.destroyBean(this.activeColumnChooserDialog)}dispatchVisibleChangedEvent(e,t){const i={type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:"columnChooser",column:null!==t&&void 0!==t?t:null};this.eventService.dispatchEvent(i)}},B="separator",V=class extends s.AS9{constructor(){super(...arguments),this.beanName="columnMenuFactory"}wireBeans(e){this.menuItemMapper=e.menuItemMapper,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.rowModel=e.rowModel,this.menuService=e.menuService}createMenu(e,t,i){const s=e.createManagedBean(new o.O_(0,{column:null!==t&&void 0!==t?t:null,node:null,value:null})),n=this.getMenuItems(t),r=this.menuItemMapper.mapWithStockItems(n,null!==t&&void 0!==t?t:null,i,"columnMenu");return s.addMenuItems(r),s}getMenuItems(e){const t=this.getDefaultMenuOptions(e);let i;const o=null===e||void 0===e?void 0:e.getColDef().mainMenuItems;if(Array.isArray(o))i=o;else if("function"===typeof o)i=o(this.gos.addGridCommonParams({column:e,defaultItems:t}));else{const s=this.gos.getCallback("getMainMenuItems");i=s&&e?s({column:e,defaultItems:t}):t}return(0,s.hbE)(i,B),i}getDefaultMenuOptions(e){const t=[],i=this.menuService.isLegacyMenuEnabled();if(!e)return i||t.push("columnChooser"),t.push("resetColumns"),t;const s=!e.getColDef().lockPinned,o=this.funcColsService.getRowGroupColumns().length,n=o>0,r=e.isAllowValue(),l=e.isAllowRowGroup(),a=e.isPrimary(),d=this.columnModel.isPivotMode(),c="clientSide"===this.rowModel.getType(),u=this.gos.get("treeData"),h=a&&n&&r||!a;if(!i&&e.isSortable()){const i=e.getSort();"asc"!==i&&t.push("sortAscending"),"desc"!==i&&t.push("sortDescending"),i&&t.push("sortUnSort"),t.push(B)}this.menuService.isFilterMenuItemEnabled(e)&&(t.push("columnFilter"),t.push(B)),s&&t.push("pinSubMenu"),h&&t.push("valueAggSubMenu"),(s||h)&&t.push(B),t.push("autoSizeThis"),t.push("autoSizeAll"),t.push(B);if(e.getColDef().showRowGroup)t.push("rowUnGroup");else if(l&&e.isPrimary())if(e.isRowGroupActive()){this.columnModel.isColGroupLocked(e)||t.push("rowUnGroup")}else t.push("rowGroup");t.push(B),i||t.push("columnChooser"),t.push("resetColumns");return c&&(u||o>(d?1:0))&&(t.push("expandAll"),t.push("contractAll")),t}},H="ag-context-menu-open",W=class extends s.AS9{constructor(){super(...arguments),this.beanName="contextMenuFactory"}wireBeans(e){this.popupService=e.popupService,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.menuUtils=e.menuUtils,this.rangeService=e.rangeService}hideActiveMenu(){this.destroyBean(this.activeMenu)}getMenuItems(e,t,i){const o=[];if((0,s.fTC)(e)&&s.O3h.__isRegistered(s.GXE.ClipboardModule,this.gridId)&&t&&(this.gos.get("suppressCutToClipboard")||o.push("cut"),o.push("copy","copyWithHeaders","copyWithGroupHeaders","paste","separator")),this.gos.get("enableCharts")&&s.O3h.__isRegistered(s.GXE.GridChartsModule,this.gridId)&&(this.columnModel.isPivotMode()&&o.push("pivotChart"),this.rangeService&&!this.rangeService.isEmpty()&&o.push("chartRange")),(0,s.fTC)(e)){const e=!s.O3h.__isRegistered(s.GXE.CsvExportModule,this.gridId),t=!s.O3h.__isRegistered(s.GXE.ExcelExportModule,this.gridId),i=this.gos.get("suppressExcelExport")||t,n=this.gos.get("suppressCsvExport")||e;!(0,s.PmN)()&&(!i||!n)&&o.push("export")}const n=o.length?o:void 0,r=null===t||void 0===t?void 0:t.getColDef().contextMenuItems;if(Array.isArray(r))return r;if("function"===typeof r)return r(this.gos.addGridCommonParams({column:t,node:e,value:i,defaultItems:n}));const l=this.gos.getCallback("getContextMenuItems");return l?l({column:t,node:e,value:i,defaultItems:n}):o}onContextMenu(e,t,i,s,o,n){this.menuUtils.onContextMenu(e,t,(e=>this.showMenu(i,s,o,e,n)))}showMenu(e,t,i,o,n){const r=this.getMenuItems(e,t,i),l=this.ctrlsService.getGridBodyCtrl().getGui();if(void 0===r||(0,s.vfG)(r))return!1;const a=new z(r,t,e,i);this.createBean(a);const d=a.getGui(),c={column:t,rowNode:e,type:"contextMenu",mouseEvent:o,ePopup:d,nudgeY:1},u=this.localeService.getLocaleTextFunc(),h=this.popupService.addPopup({modal:!0,eChild:d,closeOnEsc:!0,closedCallback:e=>{l.classList.remove(H),this.destroyBean(a),this.dispatchVisibleChangedEvent(!1,void 0===e?"api":"ui")},click:o,positionCallback:()=>{const e=this.gos.get("enableRtl");this.popupService.positionPopupUnderMouseEvent({...c,nudgeX:e?-1*(d.offsetWidth+1):1})},anchorToElement:n,ariaLabel:u("ariaLabelContextMenu","Context Menu")});h&&(l.classList.add(H),a.afterGuiAttached({container:"contextMenu",hidePopup:h.hideFunc})),this.activeMenu&&this.hideActiveMenu(),this.activeMenu=a,a.addEventListener("destroyed",(()=>{this.activeMenu===a&&(this.activeMenu=null)})),h&&a.addEventListener("closeMenu",(e=>{var t,i;return h.hideFunc({mouseEvent:null!==(t=e.mouseEvent)&&void 0!==t?t:void 0,keyboardEvent:null!==(i=e.keyboardEvent)&&void 0!==i?i:void 0,forceHide:!0})}));const p=o&&o instanceof MouseEvent&&"mousedown"===o.type;return this.dispatchVisibleChangedEvent(!0,p?"api":"ui"),!0}dispatchVisibleChangedEvent(e){const t={type:"contextMenuVisibleChanged",visible:e,source:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ui"};this.eventService.dispatchEvent(t)}},z=class extends s.wA2{constructor(e,t,i,s){super('<div class="'.concat("ag-menu",'" role="presentation"></div>')),this.menuItems=e,this.column=t,this.node=i,this.value=s,this.menuList=null,this.focusedCell=null}wireBeans(e){this.focusService=e.focusService,this.menuItemMapper=e.menuItemMapper,this.cellPositionUtils=e.cellPositionUtils}postConstruct(){const e=this.createManagedBean(new o.O_(0,{column:this.column,node:this.node,value:this.value})),t=this.menuItemMapper.mapWithStockItems(this.menuItems,null,(()=>this.getGui()),"contextMenu");e.addMenuItems(t),this.appendChild(e),this.menuList=e,e.addEventListener("closeMenu",(e=>this.dispatchLocalEvent(e)))}afterGuiAttached(e){e.hidePopup&&this.addDestroyFunc(e.hidePopup),this.focusedCell=this.focusService.getFocusedCell(),this.menuList&&this.focusService.focusInto(this.menuList.getGui())}restoreFocusedCell(){const e=this.focusService.getFocusedCell();if(e&&this.focusedCell&&this.cellPositionUtils.equals(e,this.focusedCell)){const{rowIndex:e,rowPinned:t,column:i}=this.focusedCell,s=this.gos.getDocument(),o=this.gos.getActiveDomElement();o&&o!==s.body||this.focusService.setFocusedCell({rowIndex:e,column:i,rowPinned:t,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!this.focusService.isKeyboardMode()})}}destroy(){this.restoreFocusedCell(),super.destroy()}},U="filterMenuTab",_="generalMenuTab",K="columnsMenuTab",Z=[_,U,K],j=class extends s.AS9{constructor(){super(...arguments),this.beanName="enterpriseMenuFactory"}wireBeans(e){this.popupService=e.popupService,this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.visibleColsService=e.visibleColsService,this.filterManager=e.filterManager,this.menuUtils=e.menuUtils,this.menuService=e.menuService}hideActiveMenu(){this.destroyBean(this.activeMenu)}showMenuAfterMouseEvent(e,t,i,s){const o=s?"filterMenuTab":void 0;this.showMenu(e,(s=>{const n=s.getGui();var r;(this.popupService.positionPopupUnderMouseEvent({type:i,column:e,mouseEvent:t,ePopup:n}),o)&&(null===(r=s.showTab)||void 0===r||r.call(s,o));this.dispatchVisibleChangedEvent(!0,!1,e,o)}),i,o,void 0,t.target)}showMenuAfterButtonClick(e,t,i,s){let o=-1,n="left";this.gos.get("enableRtl")&&(o=1,n="right");const r=s?"filterMenuTab":void 0,l=r?[r]:void 0,a=this.menuService.isLegacyMenuEnabled(),d=(a?9:4)*o,c=a?-23:4;this.showMenu(e,(s=>{const o=s.getGui();var l;(this.popupService.positionPopupByComponent({type:i,column:e,eventSource:t,ePopup:o,alignSide:n,nudgeX:d,nudgeY:c,position:"under",keepWithinBounds:!0}),r)&&(null===(l=s.showTab)||void 0===l||l.call(s,r));this.dispatchVisibleChangedEvent(!0,!1,e,r)}),i,r,l,t)}showMenu(e,t,i,s,o,n){const{menu:r,eMenuGui:l,anchorToElement:a,restoreFocusParams:d}=this.getMenuParams(e,o,n),c=[];c.push((t=>{const i=r.getGui();this.destroyBean(r),e&&(e.setMenuVisible(!1,"contextMenu"),this.menuUtils.restoreFocusOnClose(d,i,t))}));const u=this.localeService.getLocaleTextFunc();var h;(this.popupService.addPopup({modal:!0,eChild:l,closeOnEsc:!0,closedCallback:t=>{c.forEach((e=>e(t))),this.dispatchVisibleChangedEvent(!1,!1,e,s)},afterGuiAttached:e=>r.afterGuiAttached(Object.assign({},{container:i},e)),positionCallback:s?()=>t(r):void 0,ariaLabel:u("ariaLabelColumnMenu","Column Menu")}),s)||(null===(h=r.showTabBasedOnPreviousSelection)||void 0===h||h.call(r),t(r));if(this.menuService.isColumnMenuAnchoringEnabled()){const t=this.popupService.setPopupPositionRelatedToElement(l,a);t&&e&&this.addStopAnchoring(t,e,c)}r.addEventListener("tabSelected",(t=>{this.dispatchVisibleChangedEvent(!1,!0,e),this.lastSelectedTab=t.key,this.dispatchVisibleChangedEvent(!0,!0,e)})),null===e||void 0===e||e.setMenuVisible(!0,"contextMenu"),this.activeMenu=r,r.addEventListener("destroyed",(()=>{this.activeMenu===r&&(this.activeMenu=null)}))}addStopAnchoring(e,t,i){e.then((e=>{t.addEventListener("leftChanged",e),t.addEventListener("visibleChanged",e),i.push((()=>{t.removeEventListener("leftChanged",e),t.removeEventListener("visibleChanged",e)}))}))}getMenuParams(e,t,i){const s={column:e,headerPosition:this.focusService.getFocusedHeader(),columnIndex:this.visibleColsService.getAllCols().indexOf(e),eventSource:i},o=this.createMenu(e,s,t,i);return{menu:o,eMenuGui:o.getGui(),anchorToElement:i||this.ctrlsService.getGridBodyCtrl().getGui(),restoreFocusParams:s}}createMenu(e,t,i,s){return this.menuService.isLegacyMenuEnabled()?this.createBean(new Y(e,t,this.lastSelectedTab,i,s)):this.createBean(new q(e,t,s))}dispatchVisibleChangedEvent(e,t,i,s){var o,n;const r={type:"columnMenuVisibleChanged",visible:e,switchingTab:t,key:null!==(o=null!==(n=this.lastSelectedTab)&&void 0!==n?n:s)&&void 0!==o?o:this.menuService.isLegacyMenuEnabled()?_:"columnMenu",column:null!==i&&void 0!==i?i:null};this.eventService.dispatchEvent(r)}isMenuEnabled(e){var t,i;if(!this.menuService.isLegacyMenuEnabled())return!0;const s=!(null!==(t=this.filterManager)&&void 0!==t&&t.isFilterAllowed(e)),o=null!==(i=e.getColDef().menuTabs)&&void 0!==i?i:Z;return(s&&o.includes(U)?o.length-1:o.length)>0}showMenuAfterContextMenuEvent(e,t,i){this.menuUtils.onContextMenu(t,i,(t=>(this.showMenuAfterMouseEvent(e,t,"columnMenu"),!0)))}},Y=class extends s.AS9{constructor(e,t,i,s,o){super(),this.column=e,this.restoreFocusParams=t,this.initialSelection=i,this.restrictTo=s,this.sourceElement=o,this.tabFactories={},this.includeChecks={},this.tabFactories[_]=this.createMainPanel.bind(this),this.tabFactories[U]=this.createFilterPanel.bind(this),this.tabFactories[K]=this.createColumnsPanel.bind(this),this.includeChecks[_]=()=>!0,this.includeChecks[U]=()=>{var t;return!!e&&!(null===(t=this.filterManager)||void 0===t||!t.isFilterAllowed(e))},this.includeChecks[K]=()=>!0}wireBeans(e){this.filterManager=e.filterManager,this.columnChooserFactory=e.columnChooserFactory,this.columnMenuFactory=e.columnMenuFactory,this.menuUtils=e.menuUtils}postConstruct(){const e=this.getTabsToCreate().map((e=>this.createTab(e)));this.tabbedLayout=new o.WD({items:e,cssClass:"ag-menu",onActiveItemClicked:this.onHidePopup.bind(this),onItemClicked:this.onTabItemClicked.bind(this)}),this.createBean(this.tabbedLayout),this.mainMenuList&&this.mainMenuList.setParentComponent(this.tabbedLayout),this.addDestroyFunc((()=>this.destroyBean(this.tabbedLayout)))}getTabsToCreate(){var e,t;return this.restrictTo?this.restrictTo:(null!==(e=null===(t=this.column)||void 0===t?void 0:t.getColDef().menuTabs)&&void 0!==e?e:Z).filter((e=>this.isValidMenuTabItem(e))).filter((e=>this.isNotSuppressed(e))).filter((e=>this.isModuleLoaded(e)))}isModuleLoaded(e){return e!==K||s.O3h.__isRegistered(s.GXE.ColumnsToolPanelModule,this.gridId)}isValidMenuTabItem(e){let t=!0,i=Z;return null!=this.restrictTo&&(t=this.restrictTo.indexOf(e)>-1,i=this.restrictTo),t=t&&Z.indexOf(e)>-1,t||(0,s.Brh)("Trying to render an invalid menu item '".concat(e,"'. Check that your 'menuTabs' contains one of [").concat(i,"]")),t}isNotSuppressed(e){return this.includeChecks[e]()}createTab(e){return this.tabFactories[e]()}showTabBasedOnPreviousSelection(){this.showTab(this.initialSelection)}showTab(e){this.tabItemColumns&&e===K?this.tabbedLayout.showItem(this.tabItemColumns):this.tabItemFilter&&e===U?this.tabbedLayout.showItem(this.tabItemFilter):this.tabItemGeneral&&e===_?this.tabbedLayout.showItem(this.tabItemGeneral):this.tabbedLayout.showFirstItem()}onTabItemClicked(e){let t=null;switch(e.item){case this.tabItemColumns:t=K;break;case this.tabItemFilter:t=U;break;case this.tabItemGeneral:t=_}t&&this.activateTab(t)}activateTab(e){const t={type:"tabSelected",key:e};this.dispatchLocalEvent(t)}createMainPanel(){return this.mainMenuList=this.columnMenuFactory.createMenu(this,this.column,(()=>{var e;return null!==(e=this.sourceElement)&&void 0!==e?e:this.getGui()})),this.mainMenuList.addEventListener("closeMenu",this.onHidePopup.bind(this)),this.tabItemGeneral={title:(0,s.scM)("menu",this.gos,this.column),titleLabel:_.replace("MenuTab",""),bodyPromise:s.j_S.resolve(this.mainMenuList.getGui()),name:_},this.tabItemGeneral}onHidePopup(e){this.menuUtils.closePopupAndRestoreFocusOnSelect(this.hidePopupFunc,this.restoreFocusParams,e)}createFilterPanel(){const e=this.column?this.createBean(new s.yQX(this.column,"COLUMN_MENU")):null;if(this.filterComp=e,null===e||void 0===e||!e.hasFilter())throw new Error("AG Grid - Unable to instantiate filter");return this.tabItemFilter={title:(0,s.scM)("filter",this.gos,this.column),titleLabel:U.replace("MenuTab",""),bodyPromise:s.j_S.resolve(null===e||void 0===e?void 0:e.getGui()),afterAttachedCallback:t=>e.afterGuiAttached(t),afterDetachedCallback:()=>e.afterGuiDetached(),name:U},this.tabItemFilter}createColumnsPanel(){const e=document.createElement("div");e.classList.add("ag-menu-column-select-wrapper");const t=this.columnChooserFactory.createColumnSelectPanel(this,this.column).getGui();return t.classList.add("ag-menu-column-select"),e.appendChild(t),this.tabItemColumns={title:(0,s.scM)("columns",this.gos,this.column),titleLabel:K.replace("MenuTab",""),bodyPromise:s.j_S.resolve(e),name:K},this.tabItemColumns}afterGuiAttached(e){const{container:t,hidePopup:i}=e;this.tabbedLayout.setAfterAttachedParams({container:t,hidePopup:i}),i&&(this.hidePopupFunc=i,this.addDestroyFunc(i))}getGui(){return this.tabbedLayout.getGui()}destroy(){super.destroy(),this.destroyBean(this.filterComp)}},q=class extends s.wA2{constructor(e,t,i){super('\n            <div data-ref="eColumnMenu" role="presentation" class="ag-menu ag-column-menu"></div>\n        '),this.column=e,this.restoreFocusParams=t,this.sourceElement=i,this.eColumnMenu=s.CUI}wireBeans(e){this.columnMenuFactory=e.columnMenuFactory,this.menuUtils=e.menuUtils,this.focusService=e.focusService}postConstruct(){this.mainMenuList=this.columnMenuFactory.createMenu(this,this.column,(()=>{var e;return null!==(e=this.sourceElement)&&void 0!==e?e:this.getGui()})),this.mainMenuList.addEventListener("closeMenu",this.onHidePopup.bind(this)),this.eColumnMenu.appendChild(this.mainMenuList.getGui())}onHidePopup(e){this.menuUtils.closePopupAndRestoreFocusOnSelect(this.hidePopupFunc,this.restoreFocusParams,e)}afterGuiAttached(e){let{hidePopup:t}=e;t&&(this.hidePopupFunc=t,this.addDestroyFunc(t)),this.focusService.focusInto(this.mainMenuList.getGui())}};var Q=class extends s.AS9{constructor(){super(...arguments),this.beanName="menuItemMapper"}wireBeans(e){this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.columnApplyStateService=e.columnApplyStateService,this.funcColsService=e.funcColsService,this.focusService=e.focusService,this.rowPositionUtils=e.rowPositionUtils,this.chartMenuItemMapper=e.chartMenuItemMapper,this.menuService=e.menuService,this.sortController=e.sortController,this.columnAutosizeService=e.columnAutosizeService,this.expansionService=e.expansionService,this.clipboardService=e.clipboardService,this.aggFuncService=e.aggFuncService,this.csvCreator=e.csvCreator,this.excelCreator=e.excelCreator}mapWithStockItems(e,t,i,s){if(!e)return[];const o=[];return e.forEach((e=>{let n;if(n="string"===typeof e?this.getStockMenuItem(e,t,i,s):{...e},!n)return;const r=n,{subMenu:l}=r;l&&l instanceof Array&&(r.subMenu=this.mapWithStockItems(l,t,i,s)),null!=n&&o.push(n)})),o}getStockMenuItem(e,t,i,o){var n;const r=this.localeService.getLocaleTextFunc(),l=this.gos.get("skipHeaderOnAutoSize");switch(e){case"pinSubMenu":return{name:r("pinColumn","Pin Column"),icon:(0,s.scM)("menuPin",this.gos,null),subMenu:["clearPinned","pinLeft","pinRight"]};case"pinLeft":return{name:r("pinLeft","Pin Left"),action:()=>this.columnModel.setColsPinned([t],"left",o),checked:!!t&&t.isPinnedLeft()};case"pinRight":return{name:r("pinRight","Pin Right"),action:()=>this.columnModel.setColsPinned([t],"right",o),checked:!!t&&t.isPinnedRight()};case"clearPinned":return{name:r("noPin","No Pin"),action:()=>this.columnModel.setColsPinned([t],null,o),checked:!!t&&!t.isPinned()};case"valueAggSubMenu":return s.O3h.__assertRegistered(s.GXE.RowGroupingModule,"Aggregation from Menu",this.gridId)&&(null!==t&&void 0!==t&&t.isPrimary()||null!==t&&void 0!==t&&t.getColDef().pivotValueColumn)?{name:r("valueAggregation","Value Aggregation"),icon:(0,s.scM)("menuValue",this.gos,null),subMenu:this.createAggregationSubMenu(t,this.aggFuncService)}:null;case"autoSizeThis":return{name:r("autosizeThisColumn","Autosize This Column"),action:()=>this.columnAutosizeService.autoSizeColumn(t,o,l)};case"autoSizeAll":return{name:r("autosizeAllColumns","Autosize All Columns"),action:()=>this.columnAutosizeService.autoSizeAllColumns(o,l)};case"rowGroup":return{name:r("groupBy","Group by")+" "+(0,s.BYN)(this.columnNameService.getDisplayNameForColumn(t,"header")),disabled:this.gos.get("functionsReadOnly")||(null===t||void 0===t?void 0:t.isRowGroupActive())||!(null!==t&&void 0!==t&&t.getColDef().enableRowGroup),action:()=>this.funcColsService.addRowGroupColumns([t],o),icon:(0,s.scM)("menuAddRowGroup",this.gos,null)};case"rowUnGroup":{const e=(0,s.scM)("menuRemoveRowGroup",this.gos,null),i=null===t||void 0===t?void 0:t.getColDef().showRowGroup,n=this.gos.get("groupLockGroupColumns");if(!0===i)return{name:r("ungroupAll","Un-Group All"),disabled:this.gos.get("functionsReadOnly")||-1===n||n>=this.funcColsService.getRowGroupColumns().length,action:()=>this.funcColsService.setRowGroupColumns(this.funcColsService.getRowGroupColumns().slice(0,n),o),icon:e};if("string"===typeof i){const t=this.columnModel.getColDefCol(i),n=null!=t?(0,s.BYN)(this.columnNameService.getDisplayNameForColumn(t,"header")):i;return{name:r("ungroupBy","Un-Group by")+" "+n,disabled:this.gos.get("functionsReadOnly")||null!=t&&this.columnModel.isColGroupLocked(t),action:()=>this.funcColsService.removeRowGroupColumns([i],o),icon:e}}return{name:r("ungroupBy","Un-Group by")+" "+(0,s.BYN)(this.columnNameService.getDisplayNameForColumn(t,"header")),disabled:this.gos.get("functionsReadOnly")||!(null!==t&&void 0!==t&&t.isRowGroupActive())||!(null!==t&&void 0!==t&&t.getColDef().enableRowGroup)||this.columnModel.isColGroupLocked(t),action:()=>this.funcColsService.removeRowGroupColumns([t],o),icon:e}}case"resetColumns":return{name:r("resetColumns","Reset Columns"),action:()=>this.columnApplyStateService.resetColumnState(o)};case"expandAll":return{name:r("expandAll","Expand All Row Groups"),action:()=>this.expansionService.expandAll(!0)};case"contractAll":return{name:r("collapseAll","Collapse All Row Groups"),action:()=>this.expansionService.expandAll(!1)};case"copy":return s.O3h.__assertRegistered(s.GXE.ClipboardModule,"Copy from Menu",this.gridId)?{name:r("copy","Copy"),shortcut:r("ctrlC","Ctrl+C"),icon:(0,s.scM)("clipboardCopy",this.gos,null),action:()=>this.clipboardService.copyToClipboard()}:null;case"copyWithHeaders":return s.O3h.__assertRegistered(s.GXE.ClipboardModule,"Copy with Headers from Menu",this.gridId)?{name:r("copyWithHeaders","Copy with Headers"),icon:(0,s.scM)("clipboardCopy",this.gos,null),action:()=>this.clipboardService.copyToClipboard({includeHeaders:!0})}:null;case"copyWithGroupHeaders":return s.O3h.__assertRegistered(s.GXE.ClipboardModule,"Copy with Group Headers from Menu",this.gridId)?{name:r("copyWithGroupHeaders","Copy with Group Headers"),icon:(0,s.scM)("clipboardCopy",this.gos,null),action:()=>this.clipboardService.copyToClipboard({includeHeaders:!0,includeGroupHeaders:!0})}:null;case"cut":if(s.O3h.__assertRegistered(s.GXE.ClipboardModule,"Cut from Menu",this.gridId)){const e=this.focusService.getFocusedCell(),t=e?this.rowPositionUtils.getRowNode(e):null,i=!!t&&(null===e||void 0===e?void 0:e.column.isCellEditable(t));return{name:r("cut","Cut"),shortcut:r("ctrlX","Ctrl+X"),icon:(0,s.scM)("clipboardCut",this.gos,null),disabled:!i||this.gos.get("suppressCutToClipboard"),action:()=>this.clipboardService.cutToClipboard(void 0,"contextMenu")}}return null;case"paste":return s.O3h.__assertRegistered(s.GXE.ClipboardModule,"Paste from Clipboard",this.gridId)?{name:r("paste","Paste"),shortcut:r("ctrlV","Ctrl+V"),disabled:!0,icon:(0,s.scM)("clipboardPaste",this.gos,null),action:()=>this.clipboardService.pasteFromClipboard()}:null;case"export":{const e=[],t=s.O3h.__isRegistered(s.GXE.CsvExportModule,this.gridId),i=s.O3h.__isRegistered(s.GXE.ExcelExportModule,this.gridId);return!this.gos.get("suppressCsvExport")&&t&&e.push("csvExport"),!this.gos.get("suppressExcelExport")&&i&&e.push("excelExport"),{name:r("export","Export"),subMenu:e,icon:(0,s.scM)("save",this.gos,null)}}case"csvExport":return{name:r("csvExport","CSV Export"),icon:(0,s.scM)("csvExport",this.gos,null),action:()=>{var e;return null===(e=this.csvCreator)||void 0===e?void 0:e.exportDataAsCsv()}};case"excelExport":return{name:r("excelExport","Excel Export"),icon:(0,s.scM)("excelExport",this.gos,null),action:()=>{var e;return null===(e=this.excelCreator)||void 0===e?void 0:e.exportDataAsExcel()}};case"separator":return"separator";case"pivotChart":case"chartRange":return null!==(n=this.chartMenuItemMapper.getChartItems(e))&&void 0!==n?n:null;case"columnFilter":return t?{name:r("columnFilter","Column Filter"),icon:(0,s.scM)("filter",this.gos,null),action:()=>this.menuService.showFilterMenu({column:t,buttonElement:i(),containerType:"columnFilter",positionBy:"button"})}:null;case"columnChooser":return s.O3h.__isRegistered(s.GXE.ColumnsToolPanelModule,this.gridId)?{name:r("columnChooser","Choose Columns"),icon:(0,s.scM)("columns",this.gos,null),action:()=>this.menuService.showColumnChooser({column:t,eventSource:i()})}:null;case"sortAscending":return{name:r("sortAscending","Sort Ascending"),icon:(0,s.scM)("sortAscending",this.gos,null),action:()=>this.sortController.setSortForColumn(t,"asc",!1,o)};case"sortDescending":return{name:r("sortDescending","Sort Descending"),icon:(0,s.scM)("sortDescending",this.gos,null),action:()=>this.sortController.setSortForColumn(t,"desc",!1,o)};case"sortUnSort":return{name:r("sortUnSort","Clear Sort"),icon:(0,s.scM)("sortUnSort",this.gos,null),action:()=>this.sortController.setSortForColumn(t,null,!1,o)};default:return(0,s.Brh)("unknown menu item type ".concat(e)),null}}createAggregationSubMenu(e,t){const i=this.localeService.getLocaleTextFunc();let o;if(e.isPrimary())o=e;else{const t=e.getColDef().pivotValueColumn;o=(0,s.fTC)(t)?t:void 0}const n=[];if(o){const e=o.isValueActive(),s=t.getFuncNames(o);n.push({name:i("noAggregation","None"),action:()=>{this.funcColsService.removeValueColumns([o],"contextMenu"),this.funcColsService.setColumnAggFunc(o,void 0,"contextMenu")},checked:!e}),s.forEach((s=>{n.push({name:i(s,t.getDefaultFuncLabel(s)),action:()=>{this.funcColsService.setColumnAggFunc(o,s,"contextMenu"),this.funcColsService.addValueColumns([o],"contextMenu")},checked:e&&o.getAggFunc()===s})}))}return n}},X=class extends s.AS9{constructor(){super(...arguments),this.beanName="menuUtils"}wireBeans(e){this.focusService=e.focusService,this.headerNavigationService=e.headerNavigationService,this.visibleColsService=e.visibleColsService}restoreFocusOnClose(e,t,i,s){const{eventSource:o}=e,n=i instanceof KeyboardEvent;if(!s&&!n||!o)return;const r=this.gos.getDocument(),l=this.gos.getActiveDomElement();(t.contains(l)||l===r.body)&&this.focusHeaderCell(e)}closePopupAndRestoreFocusOnSelect(e,t,i){let s;i&&i.keyboardEvent&&(s=i.keyboardEvent),e(s&&{keyboardEvent:s});const o=this.focusService.getFocusedCell(),n=this.gos.getDocument(),r=this.gos.getActiveDomElement();if(!r||r===n.body)if(o){const{rowIndex:e,rowPinned:t,column:i}=o;this.focusService.setFocusedCell({rowIndex:e,column:i,rowPinned:t,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}else this.focusHeaderCell(t)}onContextMenu(e,t,i){if(!this.gos.get("allowContextMenuWithControlKey")&&e&&(e.ctrlKey||e.metaKey))return;if(e&&this.blockMiddleClickScrollsIfNeeded(e),this.gos.get("suppressContextMenu"))return;if(i(null!==e&&void 0!==e?e:t.touches[0])){const i=null!==e&&void 0!==e?e:t;i&&i.cancelable&&i.preventDefault()}}focusHeaderCell(e){const{column:t,columnIndex:i,headerPosition:o,eventSource:n}=e;if(this.visibleColsService.getAllCols().some((e=>e===t))&&n&&(0,s.Y4l)(n)){const e=this.focusService.findTabbableParent(n);e&&(t&&this.headerNavigationService.scrollToColumn(t),e.focus())}else if(o&&-1!==i){const e=this.visibleColsService.getAllCols(),t=e[i]||(0,s._O9)(e);t&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:o.headerRowIndex,column:t}})}}blockMiddleClickScrollsIfNeeded(e){this.gos.get("suppressMiddleClickScrolls")&&2===e.which&&e.preventDefault()}},$="32.0.1",J={version:$,moduleName:"".concat(s.GXE.MenuModule,"-core"),beans:[j,W,Q,L,O,V,X],dependantModules:[o.f$],userComponents:[{name:"agMenuItem",classImp:o.js}]},ee={version:$,moduleName:"".concat(s.GXE.MenuModule,"-api"),apiFunctions:{showContextMenu:function(e,t){const{rowNode:i,column:s,value:o,x:n,y:r}=t||{};let{x:l,y:a}=e.menuService.getContextMenuPosition(i,s);null!=n&&(l=n),null!=r&&(a=r),e.menuService.showContextMenu({mouseEvent:new MouseEvent("mousedown",{clientX:l,clientY:a}),rowNode:i,column:s,value:o})},showColumnChooser:function(e,t){e.menuService.showColumnChooser({chooserParams:t})},hideColumnChooser:function(e){e.menuService.hideColumnChooser()}},dependantModules:[J,s.LAH]},te={version:$,moduleName:s.GXE.MenuModule,dependantModules:[J,ee]}},21917:(e,t,i)=>{"use strict";i.d(t,{V:()=>g});var s=i(30845),o=i(8701);var n=class extends s.AS9{constructor(){super(...arguments),this.beanName="rangeService",this.cellRanges=[],this.bodyScrollListener=this.onBodyScroll.bind(this),this.dragging=!1,this.intersectionRange=!1}wireBeans(e){this.rowModel=e.rowModel,this.dragService=e.dragService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.cellNavigationService=e.cellNavigationService,this.pinnedRowModel=e.pinnedRowModel,this.rowPositionUtils=e.rowPositionUtils,this.cellPositionUtils=e.cellPositionUtils,this.ctrlsService=e.ctrlsService,this.valueService=e.valueService}postConstruct(){const e=this.onColumnsChanged.bind(this),t=()=>this.removeAllCellRanges(),i=this.refreshLastRangeStart.bind(this);this.addManagedEventListeners({newColumnsLoaded:e,columnVisible:e,columnValueChanged:e,columnPivotModeChanged:t,columnRowGroupChanged:t,columnPivotChanged:t,columnGroupOpened:i,columnMoved:i,columnPinned:i}),this.ctrlsService.whenReady((e=>{const t=e.gridBodyCtrl;this.autoScrollService=new s.Cvn({scrollContainer:t.getBodyViewportElement(),scrollAxis:"xy",getVerticalPosition:()=>t.getScrollFeature().getVScrollPosition().top,setVerticalPosition:e=>t.getScrollFeature().setVerticalScrollPosition(e),getHorizontalPosition:()=>t.getScrollFeature().getHScrollPosition().left,setHorizontalPosition:e=>t.getScrollFeature().setHorizontalScrollPosition(e),shouldSkipVerticalScroll:()=>!this.gos.isDomLayout("normal"),shouldSkipHorizontalScroll:()=>!t.getScrollFeature().isHorizontalScrollShowing()})}))}onColumnsChanged(){this.refreshLastRangeStart();const e=this.visibleColsService.getAllCols();this.cellRanges.forEach((t=>{const i=t.columns;t.columns=t.columns.filter((t=>t.isVisible()&&-1!==e.indexOf(t)));!(0,s.Vgs)(i,t.columns)&&this.dispatchChangedEvent(!1,!0,t.id)}));const t=this.cellRanges.length;this.cellRanges=this.cellRanges.filter((e=>e.columns.length>0)),t>this.cellRanges.length&&this.dispatchChangedEvent(!1,!0)}refreshLastRangeStart(){const e=(0,s._O9)(this.cellRanges);e&&this.refreshRangeStart(e)}isContiguousRange(e){const t=e.columns;if(!t.length)return!1;const i=this.visibleColsService.getAllCols(),o=t.map((e=>i.indexOf(e))).sort(((e,t)=>e-t));return(0,s._O9)(o)-o[0]+1===t.length}getRangeStartRow(e){if(e.startRow&&e.endRow)return this.rowPositionUtils.before(e.startRow,e.endRow)?e.startRow:e.endRow;return{rowIndex:0,rowPinned:this.pinnedRowModel.getPinnedTopRowCount()>0?"top":null}}getRangeEndRow(e){if(e.startRow&&e.endRow)return this.rowPositionUtils.before(e.startRow,e.endRow)?e.endRow:e.startRow;const t=this.pinnedRowModel.getPinnedBottomRowCount();return t>0?{rowIndex:t-1,rowPinned:"bottom"}:{rowIndex:this.rowModel.getRowCount()-1,rowPinned:null}}setRangeToCell(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.gos.get("enableRangeSelection"))return;const i=this.calculateColumnsBetween(e.column,e.column);if(!i)return;(this.gos.get("suppressMultiRangeSelection")||!t||(0,s.n92)(this.cellRanges))&&this.removeAllCellRanges(!0);const o={rowIndex:e.rowIndex,rowPinned:e.rowPinned},n={startRow:o,endRow:o,columns:i,startColumn:e.column};this.cellRanges.push(n),this.setNewestRangeStartCell(e),this.onDragStop(),this.dispatchChangedEvent(!0,!0)}extendLatestRangeToCell(e){if(this.isEmpty()||!this.newestRangeStartCell)return;const t=(0,s._O9)(this.cellRanges);this.updateRangeEnd(t,e)}updateRangeEnd(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=t.column,o=this.calculateColumnsBetween(e.startColumn,s);o&&!this.isLastCellOfRange(e,t)&&(e.columns=o,e.endRow={rowIndex:t.rowIndex,rowPinned:t.rowPinned},i||this.dispatchChangedEvent(!0,!0,e.id))}refreshRangeStart(e){const{startColumn:t,columns:i}=e,o=(t,i)=>{const s=e.columns.filter((e=>e!==t));t?(e.startColumn=t,e.columns=i?[t,...s]:[...s,t]):e.columns=s},{left:n,right:r}=this.getRangeEdgeColumns(e);if(t===i[0]&&t!==n)return void o(n,!0);t===(0,s._O9)(i)&&t===r&&o(r,!1)}getRangeEdgeColumns(e){const t=this.visibleColsService.getAllCols(),i=e.columns.map((e=>t.indexOf(e))).filter((e=>e>-1)).sort(((e,t)=>e-t));return{left:t[i[0]],right:t[(0,s._O9)(i)]}}extendLatestRangeInDirection(e){if(this.isEmpty()||!this.newestRangeStartCell)return;const t=e.key,i=e.ctrlKey||e.metaKey,o=(0,s._O9)(this.cellRanges),n=this.newestRangeStartCell,r=o.columns[0],l=(0,s._O9)(o.columns),a=o.endRow.rowIndex,d=o.endRow.rowPinned,c={column:n.column===r?l:r,rowIndex:a,rowPinned:d},u=this.cellNavigationService.getNextCellToFocus(t,c,i);return u?(this.setCellRange({rowStartIndex:n.rowIndex,rowStartPinned:n.rowPinned,rowEndIndex:u.rowIndex,rowEndPinned:u.rowPinned,columnStart:n.column,columnEnd:u.column}),u):void 0}setCellRange(e){this.gos.get("enableRangeSelection")&&(this.removeAllCellRanges(!0),this.addCellRange(e))}setCellRanges(e){(0,s.nQv)(this.cellRanges,e)||(this.removeAllCellRanges(!0),e.forEach((e=>{e.columns&&e.startRow&&this.setNewestRangeStartCell({rowIndex:e.startRow.rowIndex,rowPinned:e.startRow.rowPinned,column:e.columns[0]}),this.cellRanges.push(e)})),this.dispatchChangedEvent(!1,!0))}setNewestRangeStartCell(e){this.newestRangeStartCell=e}clearCellRangeCellValues(e){let{cellRanges:t}=e;const{cellEventSource:i="rangeService",dispatchWrapperEvents:s,wrapperEventSource:o="deleteKey"}=e;if(s){const e={type:"rangeDeleteStart",source:o};this.eventService.dispatchEvent(e)}if(t||(t=this.cellRanges),t.forEach((e=>{this.forEachRowInRange(e,(t=>{const s=this.rowPositionUtils.getRowNode(t);if(s)for(let n=0;n<e.columns.length;n++){var o;const t=this.columnModel.getCol(e.columns[n]);if(!t||!t.isCellEditable(s))continue;const r=null!==(o=this.valueService.parseValue(t,s,"",s.getValueFromValueService(t)))&&void 0!==o?o:null;s.setDataValue(t,r,i)}}))})),s){const e={type:"rangeDeleteEnd",source:o};this.eventService.dispatchEvent(e)}}createCellRangeFromCellRangeParams(e){return this.createPartialCellRangeFromRangeParams(e,!1)}createPartialCellRangeFromRangeParams(e,t){let i,o=!1;if(e.columns)i=e.columns.map((e=>this.columnModel.getCol(e))).filter((e=>e));else{const t=this.columnModel.getCol(e.columnStart),s=this.columnModel.getCol(e.columnEnd);if(!t||!s)return;i=this.calculateColumnsBetween(t,s),i&&i.length&&(o=i[0]!==t)}if(!i||!t&&0===i.length)return;return{startRow:null!=e.rowStartIndex?{rowIndex:e.rowStartIndex,rowPinned:e.rowStartPinned||null}:void 0,endRow:null!=e.rowEndIndex?{rowIndex:e.rowEndIndex,rowPinned:e.rowEndPinned||null}:void 0,columns:i,startColumn:o?(0,s._O9)(i):i[0]}}addCellRange(e){if(!this.gos.get("enableRangeSelection"))return;const t=this.createCellRangeFromCellRangeParams(e);t&&(t.startRow&&this.setNewestRangeStartCell({rowIndex:t.startRow.rowIndex,rowPinned:t.startRow.rowPinned,column:t.startColumn}),this.cellRanges.push(t),this.dispatchChangedEvent(!1,!0,t.id))}getCellRanges(){return this.cellRanges}isEmpty(){return 0===this.cellRanges.length}isMoreThanOneCell(){const e=this.cellRanges.length;if(0===e)return!1;if(e>1)return!0;const t=this.cellRanges[0],i=this.getRangeStartRow(t),s=this.getRangeEndRow(t);return i.rowPinned!==s.rowPinned||i.rowIndex!==s.rowIndex||1!==t.columns.length}areAllRangesAbleToMerge(){const e=new Map;if(this.cellRanges.length<=1)return!0;let t;this.cellRanges.forEach((t=>{this.forEachRowInRange(t,(i=>{const s="".concat(i.rowPinned||"normal","_").concat(i.rowIndex),o=e.get(s),n=t.columns.map((e=>e.getId()));if(o){const e=n.filter((e=>-1===o.indexOf(e)));o.push(...e)}else e.set(s,n)}))}));for(const i of e.values()){const e=i.sort().join();if(void 0!==t){if(t!==e)return!1}else t=e}return!0}forEachRowInRange(e,t){const i=this.getRangeStartRow(e),s=this.getRangeEndRow(e);let o=i;for(;o&&(t(o),!this.rowPositionUtils.sameRow(o,s));)o=this.cellNavigationService.getRowBelow(o)}removeAllCellRanges(e){this.isEmpty()||(this.onDragStop(),this.cellRanges.length=0,e||this.dispatchChangedEvent(!1,!0))}onBodyScroll(){this.dragging&&this.lastMouseEvent&&this.onDragging(this.lastMouseEvent)}isCellInAnyRange(e){return this.getCellRangeCount(e)>0}isCellInSpecificRange(e,t){const i=null!==t.columns&&(0,s.W7Q)(t.columns,e.column),o=this.isRowInRange(e.rowIndex,e.rowPinned,t);return i&&o}isLastCellOfRange(e,t){const{startRow:i,endRow:o}=e,n=this.rowPositionUtils.before(i,o)?o:i,r=t.rowIndex===n.rowIndex&&t.rowPinned===n.rowPinned,l=e.columns[0],a=(0,s._O9)(e.columns),d=e.startColumn===l?a:l;return t.column===d&&r}isBottomRightCell(e,t){const i=this.visibleColsService.getAllCols(),o=e.columns.map((e=>i.indexOf(e))).sort(((e,t)=>e-t)),{startRow:n,endRow:r}=e,l=this.rowPositionUtils.before(n,r)?r:n,a=i.indexOf(t.column)===(0,s._O9)(o),d=t.rowIndex===l.rowIndex&&(0,s.wa4)(t.rowPinned)===(0,s.wa4)(l.rowPinned);return a&&d}getCellRangeCount(e){return this.isEmpty()?0:this.cellRanges.filter((t=>this.isCellInSpecificRange(e,t))).length}isRowInRange(e,t,i){const s=this.getRangeStartRow(i),o=this.getRangeEndRow(i),n={rowIndex:e,rowPinned:t||null},r=n.rowIndex===s.rowIndex&&n.rowPinned==s.rowPinned,l=n.rowIndex===o.rowIndex&&n.rowPinned==o.rowPinned;if(r||l)return!0;const a=!this.rowPositionUtils.before(n,s),d=this.rowPositionUtils.before(n,o);return a&&d}getDraggingRange(){return this.draggingRange}onDragStart(e){if(!this.gos.get("enableRangeSelection"))return;const{ctrlKey:t,metaKey:i,shiftKey:o}=e,n=t||i,r=!!!this.gos.get("suppressMultiRangeSelection")&&n,l=o&&(0,s.zwR)(this.cellRanges);r||l&&!(0,s.fTC)((0,s._O9)(this.cellRanges).type)||this.removeAllCellRanges(!0);const a=this.dragService.getStartTarget();if(a&&this.updateValuesOnMove(a),this.lastCellHovered){if(this.dragging=!0,this.lastMouseEvent=e,this.intersectionRange=r&&this.getCellRangeCount(this.lastCellHovered)>1,l||this.setNewestRangeStartCell(this.lastCellHovered),this.cellRanges.length>0)this.draggingRange=(0,s._O9)(this.cellRanges);else{const e={rowIndex:this.lastCellHovered.rowIndex,rowPinned:this.lastCellHovered.rowPinned};this.draggingRange={startRow:e,endRow:e,columns:[this.lastCellHovered.column],startColumn:this.newestRangeStartCell.column},this.cellRanges.push(this.draggingRange)}this.ctrlsService.getGridBodyCtrl().addScrollEventListener(this.bodyScrollListener),this.dispatchChangedEvent(!0,!1,this.draggingRange.id)}}intersectLastRange(e){if(e&&this.dragging)return;if(this.gos.get("suppressMultiRangeSelection"))return;if(this.isEmpty())return;const t=this.rowPositionUtils,i=(0,s._O9)(this.cellRanges),o=this.getRangeStartRow(i),n=this.getRangeEndRow(i),r=[];this.cellRanges.slice(0,-1).forEach((e=>{const l=this.getRangeStartRow(e),a=this.getRangeEndRow(e),d=e.columns,c=d.filter((e=>-1===i.columns.indexOf(e)));if(c.length===d.length)return void r.push(e);if(t.before(n,l)||t.before(a,o))return void r.push(e);const u=r.length;if(t.before(l,o)){const e={columns:[...d],startColumn:i.startColumn,startRow:{...l},endRow:this.cellNavigationService.getRowAbove(o)};r.push(e)}if(c.length>0){const e={columns:c,startColumn:(0,s.W7Q)(c,i.startColumn)?i.startColumn:c[0],startRow:this.rowMax([{...o},{...l}]),endRow:this.rowMin([{...n},{...a}])};r.push(e)}t.before(n,a)&&r.push({columns:[...d],startColumn:i.startColumn,startRow:this.cellNavigationService.getRowBelow(n),endRow:{...a}}),r.length-u===1&&(r[r.length-1].id=e.id)})),this.cellRanges=r,e&&this.dispatchChangedEvent(!1,!0)}rowMax(e){let t;return e.forEach((e=>{(void 0===t||this.rowPositionUtils.before(t,e))&&(t=e)})),t}rowMin(e){let t;return e.forEach((e=>{(void 0===t||this.rowPositionUtils.before(e,t))&&(t=e)})),t}updateValuesOnMove(e){const t=(0,s.fAI)(this.gos,e,s.Ekq.DOM_DATA_KEY_CELL_CTRL),i=null===t||void 0===t?void 0:t.getCellPosition();this.cellHasChanged=!1,!i||this.lastCellHovered&&this.cellPositionUtils.equals(i,this.lastCellHovered)||(this.lastCellHovered&&(this.cellHasChanged=!0),this.lastCellHovered=i)}onDragging(e){if(!this.dragging||!e)return;this.updateValuesOnMove(e.target),this.lastMouseEvent=e;const t=this.lastCellHovered,i=e=>t&&t.rowPinned===e&&this.newestRangeStartCell.rowPinned===e,s=i("top")||i("bottom");if(this.autoScrollService.check(e,s),!this.cellHasChanged)return;const o=this.calculateColumnsBetween(this.newestRangeStartCell.column,t.column);o&&(this.draggingRange.endRow={rowIndex:t.rowIndex,rowPinned:t.rowPinned},this.draggingRange.columns=o,this.dispatchChangedEvent(!1,!1,this.draggingRange.id))}onDragStop(){if(!this.dragging)return;const{id:e}=this.draggingRange;this.autoScrollService.ensureCleared(),this.ctrlsService.getGridBodyCtrl().removeScrollEventListener(this.bodyScrollListener),this.lastMouseEvent=null,this.dragging=!1,this.draggingRange=void 0,this.lastCellHovered=void 0,this.intersectionRange&&(this.intersectionRange=!1,this.intersectLastRange()),this.dispatchChangedEvent(!1,!0,e)}dispatchChangedEvent(e,t,i){const s={type:"rangeSelectionChanged",started:e,finished:t,id:i};this.eventService.dispatchEvent(s)}calculateColumnsBetween(e,t){const i=this.visibleColsService.getAllCols(),o=e===t,n=i.indexOf(e),r=e=>(0,s.Brh)("column ".concat(e.getId()," is not visible"));if(n<0)return void r(e);const l=o?n:i.indexOf(t);if(l<0)return void r(t);if(o)return[e];const a=Math.min(n,l),d=a===n?l:n,c=[];for(let s=a;s<=d;s++)c.push(i[s]);return c}},r=class extends s.wA2{constructor(){super(...arguments),this.changedCalculatedValues=!1,this.dragging=!1,this.shouldDestroyOnEndDragging=!1}wireBeans(e){this.dragService=e.dragService,this.rangeService=e.rangeService,this.mouseEventService=e.mouseEventService,this.rowPositionUtils=e.rowPositionUtils,this.cellPositionUtils=e.cellPositionUtils,this.ctrlsService=e.ctrlsService}postConstruct(){this.dragService.addDragSource({dragStartPixels:0,eElement:this.getGui(),onDragStart:this.onDragStart.bind(this),onDragging:e=>{this.dragging=!0,this.rangeService.autoScrollService.check(e),this.changedCalculatedValues&&(this.onDrag(e),this.changedCalculatedValues=!1)},onDragStop:e=>{this.dragging=!1,this.onDragEnd(e),this.clearValues(),this.rangeService.autoScrollService.ensureCleared(),document.body.classList.remove(this.getDraggingCssClass()),this.shouldDestroyOnEndDragging&&this.destroy()}}),this.addManagedElementListeners(this.getGui(),{mousedown:this.preventRangeExtension.bind(this)})}isDragging(){return this.dragging}getCellCtrl(){return this.cellCtrl}setCellCtrl(e){this.cellCtrl=e}getCellRange(){return this.cellRange}setCellRange(e){this.cellRange=e}getRangeStartRow(){return this.rangeStartRow}setRangeStartRow(e){this.rangeStartRow=e}getRangeEndRow(){return this.rangeEndRow}setRangeEndRow(e){this.rangeEndRow=e}getLastCellHovered(){return this.lastCellHovered}preventRangeExtension(e){e.stopPropagation()}onDragStart(e){[this.cellHoverListener]=this.addManagedElementListeners(this.ctrlsService.get("gridCtrl").getGui(),{mousemove:this.updateValuesOnMove.bind(this)}),document.body.classList.add(this.getDraggingCssClass())}getDraggingCssClass(){return"ag-dragging-".concat(this.type===s.Lm6.FILL?"fill":"range","-handle")}updateValuesOnMove(e){const t=this.mouseEventService.getCellPositionForEvent(e);!t||this.lastCellHovered&&this.cellPositionUtils.equals(t,this.lastCellHovered)||(this.lastCellHovered=t,this.changedCalculatedValues=!0)}getType(){return this.type}refresh(e){const t=this.getCellCtrl(),i=this.getGui(),o=(0,s._O9)(this.rangeService.getCellRanges()),n=o.startRow,r=o.endRow;if(n&&r){this.rowPositionUtils.before(r,n)?(this.setRangeStartRow(r),this.setRangeEndRow(n)):(this.setRangeStartRow(n),this.setRangeEndRow(r))}if(t!==e||!(0,s.Y4l)(i)){this.setCellCtrl(e);const t=e.getComp().getParentOfValue();t&&t.appendChild(i)}this.setCellRange(o)}clearValues(){this.lastCellHovered=void 0,this.removeListeners()}removeListeners(){this.cellHoverListener&&(this.cellHoverListener(),this.cellHoverListener=void 0)}destroy(){if(!this.shouldDestroyOnEndDragging&&this.isDragging())return(0,s.DIH)(this.getGui(),!1),void(this.shouldDestroyOnEndDragging=!0);this.shouldDestroyOnEndDragging=!1,super.destroy(),this.removeListeners();const e=this.getGui();e.parentElement&&e.parentElement.removeChild(e)}};function l(e){const t=e.length;let i=0;if(t<=1)return e;for(let u=0;u<e.length;u++){const t=e[u],s=t.toString().split("e-");s.length>1?i=Math.max(i,parseInt(s[1],10)):Math.floor(t)!==t&&(i=Math.max(i,t.toString().split(".")[1].length))}let s=0,o=0,n=0,r=0,l=0;for(let u=0;u<t;u++)l=e[u],s+=u,o+=l,r+=u*u,n+=u*l;const a=(t*n-s*o)/(t*r-s*s),d=o/t-a*s/t,c=[];for(let u=0;u<=t;u++)c.push(parseFloat((u*a+d).toFixed(i)));return c}var a=class extends r{constructor(){super('<div class="ag-fill-handle"></div>'),this.markedCells=[],this.cellValues=[],this.isUp=!1,this.isLeft=!1,this.isReduce=!1,this.type=s.Lm6.FILL}wireBeans(e){super.wireBeans(e),this.valueService=e.valueService,this.navigationService=e.navigationService,this.cellNavigationService=e.cellNavigationService,this.visibleColsService=e.visibleColsService}updateValuesOnMove(e){super.updateValuesOnMove(e),this.initialXY||(this.initialXY=this.mouseEventService.getNormalisedPosition(e));const{x:t,y:i}=this.initialXY,{x:s,y:o}=this.mouseEventService.getNormalisedPosition(e),n=Math.abs(t-s),r=Math.abs(i-o),l=this.getFillHandleDirection();let a;a="xy"===l?n>r?"x":"y":l,a!==this.dragAxis&&(this.dragAxis=a,this.changedCalculatedValues=!0)}onDrag(e){if(!this.initialPosition){const e=this.getCellCtrl();if(!e)return;this.initialPosition=e.getCellPosition()}const t=this.getLastCellHovered();t&&this.markPathFrom(this.initialPosition,t)}onDragEnd(e){if(this.initialXY=null,!this.markedCells.length)return;const t="x"===this.dragAxis,i=this.getCellRange(),s=i.columns.length,o=this.getRangeStartRow(),n=this.getRangeEndRow();let r;if(this.isUp||this.isLeft){const e=t?o:this.lastCellMarked;r=this.rangeService.createCellRangeFromCellRangeParams({rowStartIndex:e.rowIndex,rowStartPinned:e.rowPinned,columnStart:t?this.lastCellMarked.column:i.columns[0],rowEndIndex:n.rowIndex,rowEndPinned:n.rowPinned,columnEnd:i.columns[s-1]})}else r=this.rangeService.createCellRangeFromCellRangeParams({rowStartIndex:o.rowIndex,rowStartPinned:o.rowPinned,columnStart:i.columns[0],rowEndIndex:t?n.rowIndex:this.lastCellMarked.rowIndex,rowEndPinned:t?n.rowPinned:this.lastCellMarked.rowPinned,columnEnd:t?this.lastCellMarked.column:i.columns[s-1]});r&&(this.raiseFillStartEvent(),this.handleValueChanged(i,r,e),this.rangeService.setCellRanges([r]),this.raiseFillEndEvent(i,r))}getFillHandleDirection(){const e=this.gos.get("fillHandleDirection");return e?"x"!==e&&"y"!==e&&"xy"!==e?((0,s.Brh)("valid values for fillHandleDirection are 'x', 'y' and 'xy'. Default to 'xy'."),"xy"):e:"xy"}raiseFillStartEvent(){this.eventService.dispatchEvent({type:"fillStart"})}raiseFillEndEvent(e,t){const i={type:"fillEnd",initialRange:e,finalRange:t};this.eventService.dispatchEvent(i)}handleValueChanged(e,t,i){const o=this.rangeService.getRangeEndRow(e),n=this.rangeService.getRangeStartRow(e),r=this.rangeService.getRangeEndRow(t),l=this.rangeService.getRangeStartRow(t),a="y"===this.dragAxis;if(this.isReduce&&!this.gos.get("suppressClearOnFillReduction")){const i=a?e.columns:e.columns.filter((e=>t.columns.indexOf(e)<0)),s=a?this.cellNavigationService.getRowBelow(r):l;return void(s&&this.clearCellsInRange(s,o,i))}const d=[],c=[],u=[],h=[];let p=!0,g=0;const m=()=>{d.length=0,c.length=0,u.length=0,h.length=0,g=0},v=(t,i)=>{let c=this.isUp?o:n,u=!1;for(a&&(p=!0,m());!u&&c;){const h=this.rowPositionUtils.getRowNode(c);if(!h)break;a&&t?f(d,t,h,(()=>!this.rowPositionUtils.sameRow(c,this.isUp?n:o))):i&&(p=!0,m(),i.forEach((t=>f(d,t,h,(()=>t!==(this.isLeft?e.columns[0]:(0,s._O9)(e.columns))))))),u=this.rowPositionUtils.sameRow(c,this.isUp?l:r),c=this.isUp?this.cellNavigationService.getRowAbove(c):this.cellNavigationService.getRowBelow(c)}},f=(e,t,o,n)=>{let r,l=!1;if(p)r=this.valueService.getValue(t,o),c.push(r),u.push(this.valueService.getValue(t,o,void 0,!0)),h.push(this.valueService.formatValue(t,o,r)),p=n();else{const{value:n,fromUserFunction:p,sourceCol:m,sourceRowNode:v}=this.processValues({event:i,values:e,initialValues:c,initialNonAggregatedValues:u,initialFormattedValues:h,col:t,rowNode:o,idx:g++});if(r=n,t.isCellEditable(o)){const e=this.valueService.getValue(t,o);if(!p){var a,d;if(m&&!1!==(null===(a=m.getColDef())||void 0===a?void 0:a.useValueFormatterForExport))r=null!==(d=this.valueService.formatValue(m,v,r))&&void 0!==d?d:r;!1!==t.getColDef().useValueParserForImport&&(r=this.valueService.parseValue(t,o,m?r:(0,s.fGY)(r),e))}p&&e===r?l=!0:o.setDataValue(t,r,"rangeService")}}l||e.push({value:r,column:t,rowNode:o})};if(a)e.columns.forEach((e=>{v(e)}));else{const e=this.isLeft?[...t.columns].reverse():t.columns;v(void 0,e)}}clearCellsInRange(e,t,i){const s={startRow:e,endRow:t,columns:i,startColumn:i[0]};this.rangeService.clearCellRangeCellValues({cellRanges:[s]})}processValues(e){const{event:t,values:i,initialValues:o,initialNonAggregatedValues:n,initialFormattedValues:r,col:a,rowNode:d,idx:c}=e,u=this.gos.getCallback("fillOperation");let h;if(h="y"===this.dragAxis?this.isUp?"up":"down":this.isLeft?"left":"right",u){const e=u({event:t,values:i.map((e=>{let{value:t}=e;return t})),initialValues:o,initialNonAggregatedValues:n,initialFormattedValues:r,currentIndex:c,currentCellValue:this.valueService.getValue(a,d),direction:h,column:a,rowNode:d});if(!1!==e)return{value:e,fromUserFunction:!0}}const p=!i.some((e=>{let{value:t}=e;const i=parseFloat(t);return isNaN(i)||i.toString()!==t.toString()}));if(t.altKey||!p){if(p&&1===o.length){const e=this.isUp||this.isLeft?-1:1;return{value:parseFloat((0,s._O9)(i).value)+1*e,fromUserFunction:!1}}const{value:e,column:t,rowNode:n}=i[c%i.length];return{value:e,fromUserFunction:!1,sourceCol:t,sourceRowNode:n}}return{value:(0,s._O9)(l(i.map((e=>{let{value:t}=e;return Number(t)})))),fromUserFunction:!1}}clearValues(){this.clearMarkedPath(),this.clearCellValues(),this.lastCellMarked=void 0,super.clearValues()}clearMarkedPath(){this.markedCells.forEach((e=>{if(!e.isAlive())return;const t=e.getComp();t.addOrRemoveCssClass("ag-selection-fill-top",!1),t.addOrRemoveCssClass("ag-selection-fill-right",!1),t.addOrRemoveCssClass("ag-selection-fill-bottom",!1),t.addOrRemoveCssClass("ag-selection-fill-left",!1)})),this.markedCells.length=0,this.isUp=!1,this.isLeft=!1,this.isReduce=!1}clearCellValues(){this.cellValues.length=0}markPathFrom(e,t){if(this.clearMarkedPath(),this.clearCellValues(),"y"===this.dragAxis){if(this.rowPositionUtils.sameRow(t,e))return;const i=this.rowPositionUtils.before(t,e),s=this.getRangeStartRow(),o=this.getRangeEndRow();i&&(t.rowPinned==s.rowPinned&&t.rowIndex>=s.rowIndex||s.rowPinned!=o.rowPinned&&t.rowPinned==o.rowPinned&&t.rowIndex<=o.rowIndex)?(this.reduceVertical(e,t),this.isReduce=!0):(this.extendVertical(e,t,i),this.isReduce=!1)}else{const i=e.column,s=t.column;if(i===s)return;const o=this.visibleColsService.getAllCols(),n=o.indexOf(i),r=o.indexOf(s);r<=n&&r>=o.indexOf(this.getCellRange().columns[0])?(this.reduceHorizontal(e,t),this.isReduce=!0):(this.extendHorizontal(e,t,r<n),this.isReduce=!1)}this.lastCellMarked=t}extendVertical(e,t,i){const{navigationService:s,rangeService:o}=this;let n=e;do{const r=this.getCellRange(),l=r.columns.length;for(let a=0;a<l;a++){const d=r.columns[a],c={...{rowIndex:n.rowIndex,rowPinned:n.rowPinned},column:d},u=o.isCellInSpecificRange(c,r),h=this.rowPositionUtils.sameRow(n,e);if(i&&(this.isUp=!0),!h){const e=s.getCellByPosition(c);if(e){this.markedCells.push(e);const s=e.getComp();u||(s.addOrRemoveCssClass("ag-selection-fill-left",0===a),s.addOrRemoveCssClass("ag-selection-fill-right",a===l-1)),s.addOrRemoveCssClass(i?"ag-selection-fill-top":"ag-selection-fill-bottom",this.rowPositionUtils.sameRow(n,t))}}}if(this.rowPositionUtils.sameRow(n,t))break}while(n=i?this.cellNavigationService.getRowAbove(n):this.cellNavigationService.getRowBelow(n))}reduceVertical(e,t){let i=e;do{const e=this.getCellRange(),s=e.columns.length,o=this.rowPositionUtils.sameRow(i,t);for(let n=0;n<s;n++){const s={...{rowIndex:i.rowIndex,rowPinned:i.rowPinned},column:e.columns[n]},o=this.navigationService.getCellByPosition(s);if(o){this.markedCells.push(o);o.getComp().addOrRemoveCssClass("ag-selection-fill-bottom",this.rowPositionUtils.sameRow(i,t))}}if(o)break}while(i=this.cellNavigationService.getRowAbove(i))}extendHorizontal(e,t,i){const o=this.visibleColsService.getAllCols(),n=o.indexOf(i?t.column:e.column),r=o.indexOf(i?this.getCellRange().columns[0]:t.column),l=i?0:1,a=o.slice(n+l,r+l),d=this.getRangeStartRow(),c=this.getRangeEndRow();a.forEach((e=>{let t=d,o=!1;do{o=this.rowPositionUtils.sameRow(t,c);const n=this.navigationService.getCellByPosition({rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:e});if(n){this.markedCells.push(n);const o=n.getComp();o.addOrRemoveCssClass("ag-selection-fill-top",this.rowPositionUtils.sameRow(t,d)),o.addOrRemoveCssClass("ag-selection-fill-bottom",this.rowPositionUtils.sameRow(t,c)),i?(this.isLeft=!0,o.addOrRemoveCssClass("ag-selection-fill-left",e===a[0])):o.addOrRemoveCssClass("ag-selection-fill-right",e===(0,s._O9)(a))}t=this.cellNavigationService.getRowBelow(t)}while(!o)}))}reduceHorizontal(e,t){const i=this.visibleColsService.getAllCols(),s=i.indexOf(t.column),o=i.indexOf(e.column),n=i.slice(s,o),r=this.getRangeStartRow(),l=this.getRangeEndRow();n.forEach((e=>{let t=r,i=!1;do{i=this.rowPositionUtils.sameRow(t,l);const s=this.navigationService.getCellByPosition({rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:e});if(s){this.markedCells.push(s);s.getComp().addOrRemoveCssClass("ag-selection-fill-right",e===n[0])}t=this.cellNavigationService.getRowBelow(t)}while(!i)}))}refresh(e){const t=this.rangeService.getCellRanges()[0];t.startRow&&t.endRow?super.refresh(e):this.destroy()}},d=class extends r{constructor(){super('<div class="ag-range-handle"></div>'),this.type=s.Lm6.RANGE,this.rangeFixed=!1}onDrag(e){const t=this.getLastCellHovered();if(!t)return;const i=this.rangeService.getCellRanges(),o=(0,s._O9)(i);if(this.rangeFixed||(this.fixRangeStartEnd(o),this.rangeFixed=!0),this.endPosition={rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:t.column},2===i.length&&i[0].type===s.StC.DIMENSION&&o.type===s.StC.VALUE){!this.rowPositionUtils.sameRow(this.endPosition,this.rangeService.getRangeEndRow(o))&&this.rangeService.updateRangeEnd(i[0],{...this.endPosition,column:i[0].columns[0]},!0)}this.rangeService.extendLatestRangeToCell(this.endPosition)}onDragEnd(e){const t=(0,s._O9)(this.rangeService.getCellRanges());this.fixRangeStartEnd(t),this.rangeFixed=!1}fixRangeStartEnd(e){const t=this.rangeService.getRangeStartRow(e),i=this.rangeService.getRangeEndRow(e),s=e.columns[0];e.startRow=t,e.endRow=i,e.startColumn=s}},c=class extends s.AS9{constructor(){super(...arguments),this.beanName="selectionHandleFactory"}createSelectionHandle(e){return this.createBean(e===s.Lm6.RANGE?new d:new a)}},u="32.0.1",h={version:u,moduleName:"".concat(s.GXE.RangeSelectionModule,"-core"),beans:[n,c],dependantModules:[o.f$]},p={version:u,moduleName:"".concat(s.GXE.RangeSelectionModule,"-api"),apiFunctions:{getCellRanges:function(e){var t,i;return null!==(t=null===(i=e.rangeService)||void 0===i?void 0:i.getCellRanges())&&void 0!==t?t:null},addCellRange:function(e,t){var i;null===(i=e.rangeService)||void 0===i||i.addCellRange(t)},clearRangeSelection:function(e){var t;null===(t=e.rangeService)||void 0===t||t.removeAllCellRanges()}},dependantModules:[h]},g={version:u,moduleName:s.GXE.RangeSelectionModule,dependantModules:[h,p]}},33417:(e,t,i)=>{"use strict";i.d(t,{N:()=>S,kv:()=>w,qZ:()=>V,wY:()=>H});var s=i(30845),o=i(8701),n={sum:"Sum",first:"First",last:"Last",min:"Min",max:"Max",count:"Count",avg:"Average"},r=class extends s.AS9{constructor(){super(...arguments),this.beanName="aggFuncService",this.aggFuncsMap={},this.initialised=!1}postConstruct(){this.init()}init(){this.initialised||(this.initialiseWithDefaultAggregations(),this.addAggFuncs(this.gos.get("aggFuncs")))}initialiseWithDefaultAggregations(){const e=this.aggFuncsMap;e.sum=l,e.first=a,e.last=d,e.min=c,e.max=u,e.count=h,e.avg=p,this.initialised=!0}isAggFuncPossible(e,t){const i=this.getFuncNames(e),o=(0,s.W7Q)(i,t),n=(0,s.fTC)(this.aggFuncsMap[t]);return o&&n}getDefaultFuncLabel(e){var t;return null!==(t=n[e])&&void 0!==t?t:e}getDefaultAggFunc(e){const t=e.getColDef().defaultAggFunc;if((0,s.fTC)(t)&&this.isAggFuncPossible(e,t))return t;if(this.isAggFuncPossible(e,"sum"))return"sum";const i=this.getFuncNames(e);return(0,s.zwR)(i)?i[0]:null}addAggFuncs(e){this.init(),(0,s.jXQ)(e,((e,t)=>{this.aggFuncsMap[e]=t}))}getAggFunc(e){return this.init(),this.aggFuncsMap[e]}getFuncNames(e){const t=e.getColDef().allowedAggFuncs;return null==t?Object.keys(this.aggFuncsMap).sort():t}clear(){this.aggFuncsMap={}}};function l(e){const{values:t}=e;let i=null;for(let s=0;s<t.length;s++){const e=t[s];"number"===typeof e?null===i?i=e:i+="number"===typeof i?e:BigInt(e):"bigint"===typeof e&&(i=null===i?e:("bigint"===typeof i?i:BigInt(i))+e)}return i}function a(e){return e.values.length>0?e.values[0]:null}function d(e){return e.values.length>0?(0,s._O9)(e.values):null}function c(e){const{values:t}=e;let i=null;for(let s=0;s<t.length;s++){const e=t[s];"number"!==typeof e&&"bigint"!==typeof e||!(null===i||i>e)||(i=e)}return i}function u(e){const{values:t}=e;let i=null;for(let s=0;s<t.length;s++){const e=t[s];"number"!==typeof e&&"bigint"!==typeof e||!(null===i||i<e)||(i=e)}return i}function h(e){var t;const{values:i}=e;let s=0;for(let n=0;n<i.length;n++){const e=i[n];s+=null!=e&&"number"===typeof e.value?e.value:1}const o=null===(t=e.rowNode)||void 0===t||null===(t=t.aggData)||void 0===t?void 0:t[e.column.getColId()];return o&&o.value===s?o:{value:s,toString:function(){return this.value.toString()},toNumber:function(){return this.value}}}function p(e){var t,i;const{values:s}=e;let o=0,n=0;for(let a=0;a<s.length;a++){const e=s[a];let t=null;"number"===typeof e||"bigint"===typeof e?(t=e,n++):null==e||"number"!==typeof e.value&&"bigint"!==typeof e.value||"number"!==typeof e.count||(t=e.value*("number"===typeof e.value?e.count:BigInt(e.count)),n+=e.count),"number"===typeof t?o+="number"===typeof o?t:BigInt(t):"bigint"===typeof t&&(o=("bigint"===typeof o?o:BigInt(o))+t)}let r=null;n>0&&(r=o/("number"===typeof o?n:BigInt(n)));const l=null===(t=e.rowNode)||void 0===t||null===(t=t.aggData)||void 0===t?void 0:t[null===(i=e.column)||void 0===i?void 0:i.getColId()];return l&&l.count===n&&l.value===r?l:{count:n,value:r,toString:function(){return"number"===typeof this.value||"bigint"===typeof this.value?this.value.toString():""},toNumber:function(){return this.value}}}var g=class extends s.AS9{constructor(){super(...arguments),this.beanName="aggregationStage"}wireBeans(e){this.columnModel=e.columnModel,this.aggFuncService=e.aggFuncService,this.funcColsService=e.funcColsService,this.pivotResultColsService=e.pivotResultColsService,this.valueService=e.valueService}execute(e){const t=(0,s.vfG)(this.funcColsService.getValueColumns()),i=!this.gos.getCallback("getGroupRowAgg"),o=e.changedPath&&e.changedPath.isActive();if(t&&i&&o)return;const n=this.createAggDetails(e);this.recursivelyCreateAggData(n)}createAggDetails(e){const t=this.columnModel.isPivotActive(),i=this.funcColsService.getValueColumns(),s=t?this.funcColsService.getPivotColumns():[];return{alwaysAggregateAtRootLevel:this.gos.get("alwaysAggregateAtRootLevel"),groupIncludeTotalFooter:!!this.gos.getGrandTotalRow(),changedPath:e.changedPath,valueColumns:i,pivotColumns:s,filteredOnly:!this.isSuppressAggFilteredOnly(),userAggFunc:this.gos.getCallback("getGroupRowAgg")}}isSuppressAggFilteredOnly(){return void 0!==this.gos.getGroupAggFiltering()||this.gos.get("suppressAggFilteredOnly")}recursivelyCreateAggData(e){e.changedPath.forEachChangedNodeDepthFirst((t=>{if(!t.hasChildren())return void(t.aggData&&t.setAggData(null));if(-1===t.level&&!e.groupIncludeTotalFooter){const i=!this.columnModel.isPivotMode();if(!e.alwaysAggregateAtRootLevel&&i)return void t.setAggData(null)}this.aggregateRowNode(t,e)}),!0)}aggregateRowNode(e,t){const i=0===t.valueColumns.length,s=0===t.pivotColumns.length;let o;o=t.userAggFunc?t.userAggFunc({nodes:e.childrenAfterFilter}):i?null:s?this.aggregateRowNodeUsingValuesOnly(e,t):this.aggregateRowNodeUsingValuesAndPivot(e),e.setAggData(o),e.sibling&&e.sibling.setAggData(o)}aggregateRowNodeUsingValuesAndPivot(e){var t,i;const s={},o=null!==(t=null===(i=this.pivotResultColsService.getPivotResultCols())||void 0===i?void 0:i.list)&&void 0!==t?t:[];let n=!0;for(let l=0;l<o.length;l++){var r;const t=o[l],i=t.getColDef();if(null!=i.pivotTotalColumnIds){n=!1;continue}const a=null!==(r=i.pivotKeys)&&void 0!==r?r:[];let d;d=e.leafGroup?this.getValuesFromMappedSet(e.childrenMapped,a,i.pivotValueColumn):this.getValuesPivotNonLeaf(e,i.colId),s[i.colId]=this.aggregateValues(d,i.pivotValueColumn.getAggFunc(),i.pivotValueColumn,e,t)}if(!n)for(let l=0;l<o.length;l++){const t=o[l],i=t.getColDef();if(null==i.pivotTotalColumnIds||!i.pivotTotalColumnIds.length)continue;const n=i.pivotTotalColumnIds.map((e=>s[e]));s[i.colId]=this.aggregateValues(n,i.pivotValueColumn.getAggFunc(),i.pivotValueColumn,e,t)}return s}aggregateRowNodeUsingValuesOnly(e,t){const i={},s=t.changedPath.isActive()?t.changedPath.getValueColumnsForNode(e,t.valueColumns):t.valueColumns,o=t.changedPath.isActive()?t.changedPath.getNotValueColumnsForNode(e,t.valueColumns):null,n=this.getValuesNormal(e,s,t.filteredOnly),r=e.aggData;return s.forEach(((t,s)=>{i[t.getId()]=this.aggregateValues(n[s],t.getAggFunc(),t,e)})),o&&r&&o.forEach((e=>{i[e.getId()]=r[e.getId()]})),i}getValuesPivotNonLeaf(e,t){return e.childrenAfterFilter.map((e=>e.aggData[t]))}getValuesFromMappedSet(e,t,i){let s=e;for(let o=0;o<t.length;o++){const e=t[o];s=s?s[e]:null}return s?s.map((e=>this.valueService.getValue(i,e))):[]}getValuesNormal(e,t,i){const s=[];t.forEach((()=>s.push([])));const o=t.length,n=i?e.childrenAfterFilter:e.childrenAfterGroup,r=n.length;for(let l=0;l<r;l++){const e=n[l];for(let i=0;i<o;i++){const o=t[i],n=this.valueService.getValue(o,e);s[i].push(n)}}return s}aggregateValues(e,t,i,o,n){const r="string"===typeof t?this.aggFuncService.getAggFunc(t):t;if("function"!==typeof r)return(0,s.AHw)("unrecognised aggregation function ".concat(t)),null;return r(this.gos.addGridCommonParams({values:e,column:i,colDef:i?i.getColDef():void 0,pivotResultColumn:n,rowNode:o,data:o?o.data:void 0}))}},m=class extends s.AS9{constructor(){super(...arguments),this.beanName="autoColService"}wireBeans(e){this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.columnFactory=e.columnFactory}createAutoCols(e){const t=[],i=this.gos.get("treeData");let o=this.gos.isGroupMultiAutoColumn();return i&&o&&((0,s.Brh)('you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data'),o=!1),o?e.forEach(((e,i)=>{t.push(this.createOneAutoCol(e,i))})):t.push(this.createOneAutoCol()),t}updateAutoCols(e,t){e.forEach(((e,i)=>this.updateOneAutoCol(e,i,t)))}createOneAutoCol(e,t){let i;i=e?"".concat(s.eHy,"-").concat(e.getId()):s.eHy;const o=this.createAutoColDef(i,e,t);o.colId=i;const n=new s.x1i(o,null,i,!0);return this.createBean(n),n}updateOneAutoCol(e,t,i){const s=e.getColDef(),o="string"==typeof s.showRowGroup?s.showRowGroup:void 0,n=null!=o?this.columnModel.getColDefCol(o):void 0,r=this.createAutoColDef(e.getId(),null!==n&&void 0!==n?n:void 0,t);e.setColDef(r,null,i),this.columnFactory.applyColumnState(e,r,i)}createAutoColDef(e,t,i){let o=this.createBaseColDef(t);const n=this.gos.get("autoGroupColumnDef");if((0,s.zev)(o,n),o=this.columnFactory.addColumnDefaultAndTypes(o,e),!this.gos.get("treeData")){(0,s.n92)(o.field)&&(0,s.n92)(o.valueGetter)&&(0,s.n92)(o.filterValueGetter)&&"agGroupColumnFilter"!==o.filter&&(o.filter=!1)}i&&i>0&&(o.headerCheckboxSelection=!1);const r=this.gos.isColumnsSortingCoupledToGroup(),l=o.valueGetter||null!=o.field;return r&&!l&&(o.sortIndex=void 0,o.initialSort=void 0),o}createBaseColDef(e){const t=this.gos.get("autoGroupColumnDef"),i={headerName:this.localeService.getLocaleTextFunc()("group","Group")};if(t&&(t.cellRenderer||t.cellRendererSelector)||(i.cellRenderer="agGroupCellRenderer"),e){const t=e.getColDef();Object.assign(i,{headerName:this.columnNameService.getDisplayNameForColumn(e,"header"),headerValueGetter:t.headerValueGetter}),t.cellRenderer&&Object.assign(i,{cellRendererParams:{innerRenderer:t.cellRenderer,innerRendererParams:t.cellRendererParams}}),i.showRowGroup=e.getColId()}else i.showRowGroup=!0;return i}},v=class extends o._3{constructor(e,t,i,o,n){super(t,i,n,'\n                <span role="option">\n                    <span data-ref="eDragHandle" class="ag-drag-handle ag-column-drop-cell-drag-handle" role="presentation"></span>\n                    <span data-ref="eText" class="ag-column-drop-cell-text" aria-hidden="true"></span>\n                    <ag-sort-indicator data-ref="eSortIndicator"></ag-sort-indicator>\n                    <span data-ref="eButton" class="ag-column-drop-cell-button" role="presentation"></span>\n                </span>\n            ',[s.ZJj]),this.column=e,this.dropZonePurpose=o,this.eSortIndicator=s.CUI,this.popupShowing=!1}wireBeans(e){super.wireBeans(e),this.popupService=e.popupService,this.sortController=e.sortController,this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.funcColsService=e.funcColsService,this.aggFuncService=e.aggFuncService}postConstruct(){this.displayName=this.columnNameService.getDisplayNameForColumn(this.column,"columnDrop"),super.postConstruct(),this.setupSort(),this.addManagedEventListeners({sortChanged:()=>{this.setupAria()}}),this.isGroupingZone()&&this.addManagedPropertyListener("groupLockGroupColumns",(()=>{this.refreshRemove(),this.refreshDraggable(),this.setupAria()}))}getItem(){return this.column}getDisplayName(){return this.displayName}getTooltip(){return this.column.getColDef().headerTooltip}addAdditionalAriaInstructions(e,t){const i=this.gos.get("rowGroupPanelSuppressSort"),s=this.gos.get("functionsReadOnly");if(this.isAggregationZone()&&!s){const i=t("ariaDropZoneColumnValueItemDescription","Press ENTER to change the aggregation type");e.push(i)}if(this.isGroupingZone()&&this.column.isSortable()&&!i){const i=t("ariaDropZoneColumnGroupItemDescription","Press ENTER to sort");e.push(i)}super.addAdditionalAriaInstructions(e,t)}isDraggable(){return this.isReadOnly()}isRemovable(){return this.isReadOnly()}isReadOnly(){return!this.isGroupingAndLocked()&&!this.gos.get("functionsReadOnly")}getAriaDisplayName(){const e=this.localeService.getLocaleTextFunc(),{name:t,aggFuncName:i}=this.getColumnAndAggFuncName(),s=e("ariaDropZoneColumnComponentAggFuncSeparator"," of "),o={asc:e("ariaDropZoneColumnComponentSortAscending","ascending"),desc:e("ariaDropZoneColumnComponentSortDescending","descending")},n=this.column.getSort(),r=this.gos.get("rowGroupPanelSuppressSort");return[i&&"".concat(i).concat(s),t,this.isGroupingZone()&&!r&&n&&", ".concat(o[n])].filter((e=>!!e)).join("")}getColumnAndAggFuncName(){const e=this.displayName;let t="";if(this.isAggregationZone()){const e=this.column.getAggFunc(),i="string"===typeof e?e:"agg";t=this.localeService.getLocaleTextFunc()(i,i)}return{name:e,aggFuncName:t}}setupSort(){const e=this.column.isSortable(),t=this.isGroupingZone();if(e&&t&&!this.gos.get("rowGroupPanelSuppressSort")){this.eSortIndicator.setupSort(this.column,!0);const e=e=>{e.preventDefault();const t="ctrl"===this.gos.get("multiSortKey")?e.ctrlKey||e.metaKey:e.shiftKey;this.sortController.progressSort(this.column,t,"uiColumnSorted")};this.addGuiEventListener("click",e),this.addGuiEventListener("keydown",(t=>{t.key===s.VDZ.ENTER&&this.isGroupingZone()&&e(t)}))}}getDefaultIconName(){return"hide"}createGetDragItem(){const{column:e}=this;return()=>{const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}}setupComponents(){super.setupComponents(),this.isAggregationZone()&&!this.gos.get("functionsReadOnly")&&this.addGuiEventListener("click",this.onShowAggFuncSelection.bind(this))}onKeyDown(e){super.onKeyDown(e);e.key===s.VDZ.ENTER&&this.isAggregationZone()&&!this.gos.get("functionsReadOnly")&&(e.preventDefault(),this.onShowAggFuncSelection())}getDisplayValue(){const{name:e,aggFuncName:t}=this.getColumnAndAggFuncName();return this.isAggregationZone()?"".concat(t,"(").concat(e,")"):e}onShowAggFuncSelection(){if(this.popupShowing)return;this.popupShowing=!0;const e=new o.CP({cssIdentifier:"select-agg-func"}),t=this.aggFuncService.getFuncNames(this.column),i=this.getGui(),n=e.getGui();e.setModel({getRow:function(e){return t[e]},getRowCount:function(){return t.length}}),this.createBean(e);const r=(0,s.awi)('<div class="ag-select-agg-func-popup"></div>');r.style.top="0px",r.style.left="0px",r.appendChild(n),r.style.width="".concat(i.clientWidth,"px");const[l]=this.addManagedElementListeners(r,{focusout:e=>{!r.contains(e.relatedTarget)&&d&&d.hideFunc()}}),a=this.localeService.getLocaleTextFunc(),d=this.popupService.addPopup({modal:!0,eChild:r,closeOnEsc:!0,closedCallback:t=>{this.destroyBean(e),this.popupShowing=!1,"Escape"===(null===t||void 0===t?void 0:t.key)&&i.focus(),l&&l()},ariaLabel:a("ariaLabelAggregationFunction","Aggregation Function")});d&&e.setComponentCreator(this.createAggSelect.bind(this,d.hideFunc)),e.addGuiEventListener("keydown",(t=>{if(t.key===s.VDZ.ENTER||t.key===s.VDZ.SPACE){const t=e.getLastFocusedRow();if(null==t)return;const i=e.getComponentAt(t);i&&i.selectItem()}})),this.popupService.positionPopupByComponent({type:"aggFuncSelect",eventSource:i,ePopup:r,keepWithinBounds:!0,column:this.column,position:"under"}),e.refresh();let c=t.findIndex((e=>e===this.column.getAggFunc()));-1===c&&(c=0),e.focusRow(c)}createAggSelect(e,t){const i=this.localeService.getLocaleTextFunc(),s=t.toString(),o=i(s,s);return new f((()=>{e(),this.funcColsService.setColumnAggFunc(this.column,t,"toolPanelDragAndDrop")}),o)}isGroupingAndLocked(){return this.isGroupingZone()&&this.columnModel.isColGroupLocked(this.column)}isAggregationZone(){return"aggregation"===this.dropZonePurpose}isGroupingZone(){return"rowGroup"===this.dropZonePurpose}getDragSourceType(){return s.rvo.ToolPanel}destroy(){super.destroy(),this.column=null}},f=class extends s.wA2{constructor(e,t){super('<div class="ag-select-agg-func-item"/>'),this.selectItem=e,this.getGui().innerText=t,this.addGuiEventListener("click",this.selectItem)}},C=class extends o.xu{constructor(e,t){super(e),this.dropZonePurpose=t}wireBeans(e){super.wireBeans(e),this.columnModel=e.columnModel,this.funcColsService=e.funcColsService}init(e){super.init(e),this.addManagedEventListeners({newColumnsLoaded:this.refreshGui.bind(this)}),this.addManagedPropertyListeners(["functionsReadOnly","rowGroupPanelSuppressSort","groupLockGroupColumns"],this.refreshGui.bind(this))}getItems(e){var t;return null!==(t=e.columns)&&void 0!==t?t:[]}isInterestedIn(e){return e===s.rvo.HeaderCell||e===s.rvo.ToolPanel}minimumAllowedNewInsertIndex(){const e=this.gos.get("groupLockGroupColumns"),t=this.funcColsService.getRowGroupColumns().length;return-1===e?t:Math.min(e,t)}showOrHideColumnOnExit(e){return this.isRowGroupPanel()&&!this.gos.get("suppressRowGroupHidesColumns")&&!e.fromNudge}handleDragEnterEnd(e){if(this.showOrHideColumnOnExit(e)){const t=e.dragSource.getDragItem().columns;this.setColumnsVisible(t,!1,"uiColumnDragged")}}handleDragLeaveEnd(e){if(this.showOrHideColumnOnExit(e)){const t=e.dragSource.getDragItem();this.setColumnsVisible(t.columns,!0,"uiColumnDragged")}}setColumnsVisible(e,t,i){if(e){const s=e.filter((e=>!e.getColDef().lockVisible));this.columnModel.setColsVisible(s,t,i)}}isRowGroupPanel(){return"rowGroup"===this.dropZonePurpose}createPillComponent(e,t,i,s){return new v(e,t,i,this.dropZonePurpose,s)}},w=class extends C{constructor(e){super(e,"pivot")}postConstruct(){const e=this.localeService.getLocaleTextFunc(),t=e("pivotColumnsEmptyMessage","Drag here to set column labels"),i=e("pivots","Column Labels");super.init({icon:(0,s.scM)("pivotPanel",this.gos,null),emptyMessage:t,title:i}),this.addManagedEventListeners({newColumnsLoaded:this.refresh.bind(this),columnPivotChanged:this.refresh.bind(this),columnPivotModeChanged:this.checkVisibility.bind(this)}),this.refresh()}getAriaLabel(){return this.localeService.getLocaleTextFunc()("ariaPivotDropZonePanelLabel","Column Labels")}getTooltipParams(){const e=super.getTooltipParams();return e.location="pivotColumnsList",e}refresh(){this.checkVisibility(),this.refreshGui()}checkVisibility(){const e=this.columnModel.isPivotMode();if(this.isHorizontal())switch(this.gos.get("pivotPanelShow")){case"always":this.setDisplayed(e);break;case"onlyWhenPivoting":{const t=this.columnModel.isPivotActive();this.setDisplayed(e&&t);break}default:this.setDisplayed(!1)}else this.setDisplayed(e)}isItemDroppable(e,t){return!(this.gos.get("functionsReadOnly")||!e.isPrimary())&&(e.isAllowPivot()&&(!e.isPivotActive()||this.isSourceEventFromTarget(t)))}updateItems(e){this.funcColsService.setPivotColumns(e,"toolPanelUi")}getIconName(){return this.isPotentialDndItems()?"pivot":"notAllowed"}getExistingItems(){return this.funcColsService.getPivotColumns()}},S=class extends C{constructor(e){super(e,"rowGroup")}postConstruct(){const e=this.localeService.getLocaleTextFunc(),t=e("rowGroupColumnsEmptyMessage","Drag here to set row groups"),i=e("groups","Row Groups");super.init({icon:(0,s.scM)("rowGroupPanel",this.gos,null),emptyMessage:t,title:i}),this.addManagedEventListeners({columnRowGroupChanged:this.refreshGui.bind(this)})}getAriaLabel(){return this.localeService.getLocaleTextFunc()("ariaRowGroupDropZonePanelLabel","Row Groups")}getTooltipParams(){const e=super.getTooltipParams();return e.location="rowGroupColumnsList",e}isItemDroppable(e,t){return!(this.gos.get("functionsReadOnly")||!e.isPrimary())&&(e.isAllowRowGroup()&&(!e.isRowGroupActive()||this.isSourceEventFromTarget(t)))}updateItems(e){this.funcColsService.setRowGroupColumns(e,"toolPanelUi")}getIconName(){return this.isPotentialDndItems()?"group":"notAllowed"}getExistingItems(){return this.funcColsService.getRowGroupColumns()}},y={selector:"AG-GRID-HEADER-DROP-ZONES",component:class extends s.wA2{wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService}constructor(){super()}postConstruct(){this.setGui(this.createNorthPanel());const e=this.onRowGroupChanged.bind(this);this.addManagedEventListeners({columnRowGroupChanged:e,newColumnsLoaded:e}),this.addManagedPropertyListener("rowGroupPanelShow",e),this.addManagedPropertyListener("pivotPanelShow",(()=>this.onPivotPanelShow())),this.onRowGroupChanged()}createNorthPanel(){const e=document.createElement("div");e.classList.add("ag-column-drop-wrapper"),(0,s.Znd)(e,"presentation"),this.rowGroupComp=new S(!0),this.createManagedBean(this.rowGroupComp),this.pivotComp=new w(!0),this.createManagedBean(this.pivotComp),e.appendChild(this.rowGroupComp.getGui()),e.appendChild(this.pivotComp.getGui());const t=this.onDropPanelVisible.bind(this);return this.addManagedListeners(this.rowGroupComp,{displayChanged:t}),this.addManagedListeners(this.pivotComp,{displayChanged:t}),this.onDropPanelVisible(),e}onDropPanelVisible(){const e=this.rowGroupComp.isDisplayed()&&this.pivotComp.isDisplayed(),t="ag-column-drop-horizontal-half-width";this.rowGroupComp.addOrRemoveCssClass(t,e),this.pivotComp.addOrRemoveCssClass(t,e)}onRowGroupChanged(){if(!this.rowGroupComp)return;const e=this.gos.get("rowGroupPanelShow");if("always"===e)this.rowGroupComp.setDisplayed(!0);else if("onlyWhenGrouping"===e){const e=!this.funcColsService.isRowGroupEmpty();this.rowGroupComp.setDisplayed(e)}else this.rowGroupComp.setDisplayed(!1)}onPivotPanelShow(){if(!this.pivotComp)return;const e=this.gos.get("pivotPanelShow");if("always"===e)this.pivotComp.setDisplayed(!0);else if("onlyWhenPivoting"===e){const e=this.columnModel.isPivotActive();this.pivotComp.setDisplayed(e)}else this.pivotComp.setDisplayed(!1)}}},b=class extends s.AS9{constructor(){super(...arguments),this.beanName="columnDropZonesService"}getDropZoneSelector(){return y}},R=class extends s.AS9{constructor(){super(...arguments),this.beanName="filterAggregatesStage"}wireBeans(e){this.filterManager=e.filterManager,this.columnModel=e.columnModel}execute(e){var t,i,s=this;const o=this.columnModel.isPivotMode(),n=(null===(t=this.filterManager)||void 0===t?void 0:t.isAggregateFilterPresent())||(null===(i=this.filterManager)||void 0===i?void 0:i.isAggregateQuickFilterPresent()),r=this.gos.getGroupAggFiltering()||(o?e=>e.node.leafGroup:e=>!e.node.group),{changedPath:l}=e,a=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.childrenAfterFilter&&(e.childrenAfterAggFilter=e.childrenAfterFilter,t&&e.childrenAfterAggFilter.forEach((e=>a(e,t))),s.setAllChildrenCount(e)),e.sibling&&(e.sibling.childrenAfterAggFilter=e.childrenAfterAggFilter)};l.forEachChangedNodeDepthFirst(n?e=>{var t;e.childrenAfterAggFilter=(null===(t=e.childrenAfterFilter)||void 0===t?void 0:t.filter((e=>{var t;if(r({node:e})){if(this.filterManager.doesRowPassAggregateFilters({rowNode:e}))return a(e,!0),!0}return null===(t=e.childrenAfterAggFilter)||void 0===t?void 0:t.length})))||null,this.setAllChildrenCount(e),e.sibling&&(e.sibling.childrenAfterAggFilter=e.childrenAfterAggFilter)}:a,!0)}setAllChildrenCountTreeData(e){let t=0;e.childrenAfterAggFilter.forEach((e=>{t++,t+=e.allChildrenCount})),e.setAllChildrenCount(t)}setAllChildrenCountGridGrouping(e){let t=0;e.childrenAfterAggFilter.forEach((e=>{e.group?t+=e.allChildrenCount:t++})),e.setAllChildrenCount(t)}setAllChildrenCount(e){e.hasChildren()?this.gos.get("treeData")?this.setAllChildrenCountTreeData(e):this.setAllChildrenCountGridGrouping(e):e.setAllChildrenCount(null)}},F=class extends s.BxR{constructor(){super('\n            <div class="ag-group-filter">\n                <div data-ref="eGroupField"></div>\n                <div data-ref="eUnderlyingFilter"></div>\n            </div>\n        '),this.eGroupField=s.CUI,this.eUnderlyingFilter=s.CUI}wireBeans(e){this.filterManager=e.filterManager,this.columnNameService=e.columnNameService,this.funcColsService=e.funcColsService}postConstruct(){this.initialiseTabGuard({})}init(e){return this.params=e,this.validateParams(),this.updateGroups().then((()=>{this.addManagedEventListeners({columnRowGroupChanged:()=>this.onColumnRowGroupChanged()})}))}validateParams(){const{colDef:e}=this.params;e.field&&(0,s.Brh)('Group Column Filter does not work with the colDef property "field". This property will be ignored.'),e.filterValueGetter&&(0,s.Brh)('Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.'),e.filterParams&&(0,s.Brh)('Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.')}updateGroups(){const e=this.updateGroupField();return this.getUnderlyingFilters(e)}getSourceColumns(){if(this.groupColumn=this.params.column,this.gos.get("treeData"))return(0,s.Brh)("Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter."),[];const e=this.funcColsService.getSourceColumnsForGroupColumn(this.groupColumn);return e||((0,s.Brh)("Group Column Filter only works on group columns. Please use a different filter."),[])}updateGroupField(){(0,s.wvc)(this.eGroupField),this.eGroupFieldSelect&&this.destroyBean(this.eGroupFieldSelect);const e=this.getSourceColumns(),t=e.filter((e=>e.isFilterAllowed()));return t.length?(1===e.length?(this.selectedColumn=t[0],(0,s.DIH)(this.eGroupField,!1)):(this.selectedColumn&&t.some((e=>e.getId()===this.selectedColumn.getId()))||(this.selectedColumn=t[0]),this.createGroupFieldSelectElement(t),this.eGroupField.appendChild(this.eGroupFieldSelect.getGui()),this.eGroupField.appendChild((0,s.awi)('<div class="ag-filter-separator"></div>')),(0,s.DIH)(this.eGroupField,!0)),t):(this.selectedColumn=void 0,(0,s.DIH)(this.eGroupField,!1),null)}createGroupFieldSelectElement(e){this.eGroupFieldSelect=this.createManagedBean(new s.wGv);const t=this.localeService.getLocaleTextFunc();this.eGroupFieldSelect.setLabel(t("groupFilterSelect","Select field:")),this.eGroupFieldSelect.setLabelAlignment("top"),this.eGroupFieldSelect.addOptions(e.map((e=>{var t;return{value:e.getId(),text:null!==(t=this.columnNameService.getDisplayNameForColumn(e,"groupFilter",!1))&&void 0!==t?t:void 0}}))),this.eGroupFieldSelect.setValue(this.selectedColumn.getId()),this.eGroupFieldSelect.onValueChange((e=>this.updateSelectedColumn(e))),this.eGroupFieldSelect.addCssClass("ag-group-filter-field-select-wrapper"),1===e.length&&this.eGroupFieldSelect.setDisabled(!0)}getUnderlyingFilters(e){if(!e)return this.filterColumnPairs=void 0,this.selectedFilter=void 0,this.groupColumn.setFilterActive(!1,"columnRowGroupChanged"),s.j_S.resolve();const t=[],i=[];return e.forEach((e=>{const s=this.filterManager.getOrCreateFilterWrapper(e);null!==s&&void 0!==s&&s.filterPromise&&t.push(s.filterPromise.then((t=>(t&&i.push({filter:t,column:e}),e.getId()===this.selectedColumn.getId()&&(this.selectedFilter=null!==t&&void 0!==t?t:void 0),t))))})),s.j_S.all(t).then((()=>{this.filterColumnPairs=i,this.groupColumn.setFilterActive(this.isFilterActive(),"columnRowGroupChanged")}))}addUnderlyingFilterElement(){var e,t;if((0,s.wvc)(this.eUnderlyingFilter),!this.selectedColumn)return s.j_S.resolve();const i=this.createManagedBean(new s.yQX(this.selectedColumn,"COLUMN_MENU"));return this.filterWrapperComp=i,i.hasFilter()?(this.eUnderlyingFilter.appendChild(i.getGui()),null!==(e=null===(t=i.getFilter())||void 0===t?void 0:t.then((()=>{var e,t;null===(e=i.afterGuiAttached)||void 0===e||e.call(i,this.afterGuiAttachedParams),null!==(t=this.afterGuiAttachedParams)&&void 0!==t&&t.suppressFocus||!this.eGroupFieldSelect||this.eGroupFieldSelect.isDisabled()||this.eGroupFieldSelect.getFocusableElement().focus()})))&&void 0!==e?e:s.j_S.resolve()):s.j_S.resolve()}updateSelectedColumn(e){var t;if(!e)return;null===(t=this.filterWrapperComp)||void 0===t||t.afterGuiDetached(),this.destroyBean(this.filterWrapperComp);const i=this.getFilterColumnPair(e);this.selectedColumn=null===i||void 0===i?void 0:i.column,this.selectedFilter=null===i||void 0===i?void 0:i.filter,this.dispatchLocalEvent({type:"selectedColumnChanged"}),this.addUnderlyingFilterElement()}isFilterActive(){var e;return!(null===(e=this.filterColumnPairs)||void 0===e||!e.some((e=>{let{filter:t}=e;return t.isFilterActive()})))}doesFilterPass(){return!0}getModel(){return null}setModel(){return s.j_S.resolve()}afterGuiAttached(e){this.afterGuiAttachedParams=e,this.addUnderlyingFilterElement()}afterGuiDetached(){var e,t;(0,s.wvc)(this.eUnderlyingFilter),null===(e=this.selectedFilter)||void 0===e||null===(t=e.afterGuiDetached)||void 0===t||t.call(e)}onColumnRowGroupChanged(){this.updateGroups().then((()=>{this.dispatchLocalEvent({type:"columnRowGroupChanged"})}))}getFilterColumnPair(e){var t;if(e)return null===(t=this.filterColumnPairs)||void 0===t?void 0:t.find((t=>{let{column:i}=t;return i.getId()===e}))}getSelectedFilter(){return this.selectedFilter}getSelectedColumn(){return this.selectedColumn}isFilterAllowed(){return!!this.selectedColumn}destroy(){super.destroy()}},E=class extends s.wA2{constructor(){super('\n            <div data-ref="eFloatingFilter" class="ag-group-floating-filter ag-floating-filter-input" role="presentation"></div>\n        '),this.eFloatingFilter=s.CUI,this.haveAddedColumnListeners=!1}wireBeans(e){this.columnNameService=e.columnNameService,this.filterManager=e.filterManager}init(e){this.params=e;const t="multipleColumns"===this.gos.get("groupDisplayType");return new s.j_S((e=>{this.params.parentFilterInstance((i=>{this.parentFilterInstance=i,t?this.setupUnderlyingFloatingFilterElement().then((()=>e())):(this.setupReadOnlyFloatingFilterElement(),e())}))})).then((()=>{this.addManagedListeners(this.parentFilterInstance,{selectedColumnChanged:this.onSelectedColumnChanged.bind(this),columnRowGroupChanged:this.onColumnRowGroupChanged.bind(this)})}))}onParamsUpdated(e){this.refresh(e)}refresh(e){this.params=e,this.setParams()}setParams(){var e;const t=this.columnNameService.getDisplayNameForColumn(this.params.column,"header",!0),i=this.localeService.getLocaleTextFunc();null===(e=this.eFloatingFilterText)||void 0===e||e.setInputAriaLabel("".concat(t," ").concat(i("ariaFilterInput","Filter Input")))}setupReadOnlyFloatingFilterElement(){this.eFloatingFilterText||(this.eFloatingFilterText=this.createManagedBean(new s.INo),this.eFloatingFilterText.setDisabled(!0).addGuiEventListener("click",(()=>this.params.showParentFilter())),this.setParams()),this.updateDisplayedValue(),this.eFloatingFilter.appendChild(this.eFloatingFilterText.getGui())}setupUnderlyingFloatingFilterElement(){this.showingUnderlyingFloatingFilter=!1,this.underlyingFloatingFilter=void 0,(0,s.wvc)(this.eFloatingFilter);const e=this.parentFilterInstance.getSelectedColumn();if(e&&!e.isVisible()){const t=this.filterManager.getFloatingFilterCompDetails(e,this.params.showParentFilter);if(t)return this.haveAddedColumnListeners||(this.haveAddedColumnListeners=!0,this.addManagedListeners(e,{visibleChanged:this.onColumnVisibleChanged.bind(this),colDefChanged:this.onColDefChanged.bind(this)})),t.newAgStackInstance().then((e=>{var t,i;this.underlyingFloatingFilter=e,null===(t=this.underlyingFloatingFilter)||void 0===t||t.onParentModelChanged(null===(i=this.parentFilterInstance.getSelectedFilter())||void 0===i?void 0:i.getModel()),this.appendChild(e.getGui()),this.showingUnderlyingFloatingFilter=!0}))}return this.setupReadOnlyFloatingFilterElement(),s.j_S.resolve()}onColumnVisibleChanged(){this.setupUnderlyingFloatingFilterElement()}onColDefChanged(e){if(!e.column)return;const t=this.filterManager.getFloatingFilterCompDetails(e.column,this.params.showParentFilter);var i,s,o;t&&(null!==(i=this.underlyingFloatingFilter)&&void 0!==i&&i.refresh?this.underlyingFloatingFilter.refresh(t.params):null===(s=this.underlyingFloatingFilter)||void 0===s||null===(o=s.onParamsUpdated)||void 0===o||o.call(s,t.params))}onParentModelChanged(e,t){var i,s;this.showingUnderlyingFloatingFilter?null===(i=this.underlyingFloatingFilter)||void 0===i||i.onParentModelChanged(null===(s=this.parentFilterInstance.getSelectedFilter())||void 0===s?void 0:s.getModel(),t):this.updateDisplayedValue()}updateDisplayedValue(){if(!this.parentFilterInstance||!this.eFloatingFilterText)return;const e=this.parentFilterInstance.getSelectedFilter();if(!e)return this.eFloatingFilterText.setValue(""),void this.eFloatingFilterText.setDisplayed(!1);if(this.eFloatingFilterText.setDisplayed(!0),e.getModelAsString){const t=e.getModel();this.eFloatingFilterText.setValue(null==t?"":e.getModelAsString(t))}else this.eFloatingFilterText.setValue("")}onSelectedColumnChanged(){this.showingUnderlyingFloatingFilter||this.updateDisplayedValue()}onColumnRowGroupChanged(){this.showingUnderlyingFloatingFilter||this.updateDisplayedValue()}destroy(){super.destroy()}},x=class{constructor(){this.allSets={},this.allParents=[]}removeFromChildrenAfterGroup(e,t){this.getSet(e).removeFromChildrenAfterGroup[t.id]=!0}isRemoveFromAllLeafChildren(e,t){return!!this.getSet(e).removeFromAllLeafChildren[t.id]}preventRemoveFromAllLeafChildren(e,t){delete this.getSet(e).removeFromAllLeafChildren[t.id]}removeFromAllLeafChildren(e,t){this.getSet(e).removeFromAllLeafChildren[t.id]=!0}getSet(e){return this.allSets[e.id]||(this.allSets[e.id]={removeFromAllLeafChildren:{},removeFromChildrenAfterGroup:{}},this.allParents.push(e)),this.allSets[e.id]}getAllParents(){return this.allParents}flush(){this.allParents.forEach((e=>{var t,i;const s=this.allSets[e.id];e.childrenAfterGroup=e.childrenAfterGroup.filter((e=>!s.removeFromChildrenAfterGroup[e.id])),e.allLeafChildren=null!==(t=null===(i=e.allLeafChildren)||void 0===i?void 0:i.filter((e=>!s.removeFromAllLeafChildren[e.id])))&&void 0!==t?t:null,e.updateHasChildren(),e.sibling&&(e.sibling.childrenAfterGroup=e.childrenAfterGroup,e.sibling.allLeafChildren=e.allLeafChildren)})),this.allSets={},this.allParents.length=0}},P=class extends s.AS9{constructor(){super(...arguments),this.beanName="groupStage",this.treeNodeCache=new M}wireBeans(e){this.beans=e,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.selectableService=e.selectableService,this.valueService=e.valueService,this.selectionService=e.selectionService,this.showRowGroupColsService=e.showRowGroupColsService}execute(e){const t=this.createGroupingDetails(e);if(t.transactions)this.handleTransaction(t);else{const i=!0===e.afterColumnsChanged;this.shotgunResetEverything(t,i)}t.usingTreeData||(this.positionLeafsAndGroups(e.changedPath),this.orderGroups(t)),this.selectableService.updateSelectableAfterGrouping()}positionLeafsAndGroups(e){e.forEachChangedNodeDepthFirst((e=>{if(e.childrenAfterGroup){const t=[],i=[];let s;e.childrenAfterGroup.forEach((e=>{var o;null!==(o=e.childrenAfterGroup)&&void 0!==o&&o.length?""!==e.key||s?i.push(e):s=e:t.push(e)})),s&&i.push(s),e.childrenAfterGroup=[...t,...i]}}),!1)}createGroupingDetails(e){var t;const{rowNode:i,changedPath:s,rowNodeTransactions:o,rowNodeOrder:n}=e,r=this.gos.get("treeData"),l=r?null:this.funcColsService.getRowGroupColumns();return{expandByDefault:this.gos.get("groupDefaultExpanded"),groupedCols:l,rootNode:i,pivotMode:this.columnModel.isPivotMode(),groupedColCount:r||!l?0:l.length,rowNodeOrder:n,transactions:o,changedPath:s,groupAllowUnbalanced:this.gos.get("groupAllowUnbalanced"),isGroupOpenByDefault:this.gos.getCallback("isGroupOpenByDefault"),initialGroupOrderComparator:this.gos.getCallback("initialGroupOrderComparator"),usingTreeData:r,suppressGroupMaintainValueType:this.gos.get("suppressGroupMaintainValueType"),getDataPath:r?this.gos.get("getDataPath"):void 0,keyCreators:null!==(t=null===l||void 0===l?void 0:l.map((e=>e.getColDef().keyCreator)))&&void 0!==t?t:[]}}handleTransaction(e){e.transactions.forEach((t=>{const i=e.usingTreeData?void 0:new x;if((0,s.zwR)(t.remove)&&this.removeNodes(t.remove,e,i),(0,s.zwR)(t.update)&&this.moveNodesInWrongPath(t.update,e,i),(0,s.zwR)(t.add)&&this.insertNodes(t.add,e,!1),i){const t=i.getAllParents().slice();i.flush(),this.removeEmptyGroups(t,e)}})),e.rowNodeOrder&&this.sortChildren(e)}sortChildren(e){e.changedPath.forEachChangedNodeDepthFirst((t=>{(0,s.LIW)(t.childrenAfterGroup,e.rowNodeOrder)&&e.changedPath.addParentNode(t)}),!1,!0)}orderGroups(e){const t=e.initialGroupOrderComparator;(0,s.fTC)(t)&&function e(i){(0,s.fTC)(i.childrenAfterGroup)&&!i.leafGroup&&(i.childrenAfterGroup.sort(((e,i)=>t({nodeA:e,nodeB:i}))),i.childrenAfterGroup.forEach((t=>e(t))))}(e.rootNode)}getExistingPathForNode(e,t){const i=[];let s=t.usingTreeData?e:e.parent;for(;s&&s!==t.rootNode;)i.push({key:s.key,rowGroupColumn:s.rowGroupColumn,field:s.field}),s=s.parent;return i.reverse(),i}topoSort(e,t){const i=[],s=Object.fromEntries(e.map(((e,t)=>[e.id,t]))),o=new Set(Object.keys(s)),n=[t.rootNode];let r=0;for(;r<n.length;){var l;const t=n[r];if(r++,void 0===t)continue;if(t.id&&t.id in s&&(i.push(e[s[t.id]]),o.delete(t.id)),0===o.size)return i;const a=null!==(l=t.childrenAfterGroup)&&void 0!==l?l:[];for(let e=0;e<a.length;e++)n.push(a[e])}return i}moveNodesInWrongPath(e,t,i){(t.usingTreeData?this.topoSort(e,t):e).forEach((e=>{t.changedPath.isActive()&&t.changedPath.addParentNode(e.parent);const o=e=>e.key,n=this.getExistingPathForNode(e,t).map(o),r=this.getGroupInfo(e,t).map(o);(0,s.Vgs)(n,r)||this.moveNode(e,t,i)}))}moveNode(e,t,i){if(this.removeNodesInStages([e],t,i),this.insertOneNode(e,t,!0,i),e.setData(e.data),t.changedPath.isActive()){const i=e.parent;t.changedPath.addParentNode(i)}}removeNodes(e,t,i){this.removeNodesInStages(e,t,i),t.changedPath.isActive()&&e.forEach((e=>t.changedPath.addParentNode(e.parent)))}removeNodesInStages(e,t,i){if(this.removeNodesFromParents(e,t,i),t.usingTreeData){const i=e.map((e=>e.parent));this.removeEmptyGroups(i,t)}}forEachParentGroup(e,t,i){let s=t;for(;s&&s!==e.rootNode;)i(s),s=s.parent}removeNodesFromParents(e,t,i){const s=null==i,o=i||new x;e.forEach((e=>{this.removeFromParent(e,o),this.forEachParentGroup(t,e.parent,(t=>{o.removeFromAllLeafChildren(t,e)}))})),s&&o.flush()}removeEmptyGroups(e,t){let i=!0;const s=e=>{const t=this.getChildrenMappedKey(e.key,e.rowGroupColumn),i=e.parent;return!(null===i||void 0===i||!i.childrenMapped||!i.childrenMapped[t])&&e.isEmptyRowGroupNode()};for(;i;){i=!1;const o=new x;e.forEach((e=>{this.forEachParentGroup(t,e,(e=>{var n;const r=s(e);var l;r&&t.usingTreeData&&e.data&&null!==(n=t.getDataPath)&&void 0!==n&&n.call(t,e.data)?e.setGroup(null!==(l=e.childrenAfterGroup&&e.childrenAfterGroup.length>0)&&void 0!==l&&l):r&&(i=!0,this.removeFromParent(e,o),e.setSelectedParams({newValue:!1,source:"rowGroupChanged"}))}))})),o.flush()}}removeFromParent(e,t){var i;e.parent&&(t?t.removeFromChildrenAfterGroup(e.parent,e):((0,s.Pi9)(e.parent.childrenAfterGroup,e),e.parent.updateHasChildren()));const o=this.getChildrenMappedKey(e.key,e.rowGroupColumn);void 0!=(null===(i=e.parent)||void 0===i?void 0:i.childrenMapped)&&delete e.parent.childrenMapped[o],e.setRowTop(null),e.setRowIndex(null)}addToParent(e,t){const i=this.getChildrenMappedKey(e.key,e.rowGroupColumn);var s;null!=(null===t||void 0===t?void 0:t.childrenMapped)&&((null===t||void 0===t||null===(s=t.childrenMapped)||void 0===s?void 0:s[i])!==e&&(t.childrenMapped[i]=e,t.childrenAfterGroup.push(e),t.setGroup(!0)))}areGroupColsEqual(e,t){return null!=e&&null!=t&&e.pivotMode===t.pivotMode&&((0,s.Vgs)(e.groupedCols,t.groupedCols)&&(0,s.Vgs)(e.keyCreators,t.keyCreators))}checkAllGroupDataAfterColsChanged(e){const t=i=>{i&&i.forEach((i=>{var s;if(!e.usingTreeData&&!i.group)return;const o={field:i.field,key:i.key,rowGroupColumn:i.rowGroupColumn,leafNode:null===(s=i.allLeafChildren)||void 0===s?void 0:s[0]};this.setGroupData(i,o,e),t(i.childrenAfterGroup)}))};t(e.rootNode.childrenAfterGroup)}shotgunResetEverything(e,t){if(this.noChangeInGroupingColumns(e,t))return;this.selectionService.filterFromSelection((e=>e&&!e.group));const{rootNode:i,groupedCols:s}=e;i.leafGroup=!e.usingTreeData&&0===s.length,i.childrenAfterGroup=[],i.childrenMapped={},i.updateHasChildren();const o=i.sibling;o&&(o.childrenAfterGroup=i.childrenAfterGroup,o.childrenMapped=i.childrenMapped),this.insertNodes(i.allLeafChildren,e,!1)}noChangeInGroupingColumns(e,t){let i=!1;const s=this.showRowGroupColsService.getShowRowGroupCols(),o=s?s.map((e=>e.getId())).join("-"):"";return t&&(i=e.usingTreeData||this.areGroupColsEqual(e,this.oldGroupingDetails),this.oldGroupDisplayColIds!==o&&this.checkAllGroupDataAfterColsChanged(e)),this.oldGroupingDetails=e,this.oldGroupDisplayColIds=o,i}insertNodes(e,t,i){t.usingTreeData?this.buildNodeCacheFromRows(e,t):this.treeNodeCache.clear(),e.forEach((e=>{this.insertOneNode(e,t,i),t.changedPath.isActive()&&t.changedPath.addParentNode(e.parent)}))}insertOneNode(e,t,i,o){const n=this.getGroupInfo(e,t),r=t.usingTreeData?n.length-1:void 0,l=this.findParentForNode(e,n,t,o,r);if(t.usingTreeData){var a;const o=null===(a=l.childrenAfterGroup)||void 0===a?void 0:a.find((t=>t.key===e.key));if(o)return void(0,s.Brh)("duplicate group keys for row data, keys should be unique",[o.data,e.data]);const r=(0,s._O9)(n);e.parent=l,e.level=n.length,this.ensureRowNodeFields(e,this.getChildrenMappedKey(r.key,r.rowGroupColumn)),this.setGroupData(e,r,t),i||this.setExpandedInitialValue(t,e),this.addToParent(e,l)}else l.group||(0,s.Brh)("duplicate group keys for row data, keys should be unique",[l.data,e.data]),e.parent=l,e.level=n.length,l.childrenAfterGroup.push(e),l.updateHasChildren()}findParentForNode(e,t,i,s,o){let n=i.rootNode;return t.forEach(((r,l)=>{void 0!==o&&l>=o||(n=this.getOrCreateNextNode(n,t,r,l,i),null!==s&&void 0!==s&&s.isRemoveFromAllLeafChildren(n,e)?null===s||void 0===s||s.preventRemoveFromAllLeafChildren(n,e):n.allLeafChildren.push(e))})),n}getOrCreateNextNode(e,t,i,s,o){var n;const r=this.getChildrenMappedKey(i.key,i.rowGroupColumn);let l=null===e||void 0===e||null===(n=e.childrenMapped)||void 0===n?void 0:n[r];return l||(o.usingTreeData&&this.treeNodeCache.has(t,s,r)?(l=this.treeNodeCache.get(t,s,r),l.parent=e):l=this.createGroup(i,e,s,o),this.addToParent(l,e)),l}buildNodeCacheFromRows(e,t){let i=0;const s=e.map((e=>{const s=this.getGroupInfo(e,t);return i=Math.max(i,s.length),s}));this.treeNodeCache.clear();for(let o=0;o<i;o++)for(const[t,i]of s.entries()){const s=void 0!==i[o],n=void 0===i[o+1];if(!s)continue;const r=i[o];null==this.treeNodeCache.get(i,o,r.key)&&this.treeNodeCache.set(i,o,r.key,n?this.ensureRowNodeFields(e[t],r.key):null)}this.backfillGroups(this.treeNodeCache.inner(),t.rootNode,0,t)}ensureRowNodeFields(e,t){var i,s,o;return void 0!==t&&(e.key=t),null!==(i=e.childrenMapped)&&void 0!==i||(e.childrenMapped={}),null!==(s=e.allLeafChildren)&&void 0!==s||(e.allLeafChildren=[]),null!==(o=e.childrenAfterGroup)&&void 0!==o||(e.childrenAfterGroup=[]),e}backfillGroups(e,t,i,s){for(const[o,n]of Object.entries(e))null===n.node&&(n.node=this.createGroup({key:o,rowGroupColumn:null,field:null},t,i,s)),this.backfillGroups(n.subtree,n.node,i+1,s)}createGroup(e,t,i,o){const n=new s.Fxk(this.beans);return n.group=!0,n.field=e.field,n.rowGroupColumn=e.rowGroupColumn,this.setGroupData(n,e,o),n.key=e.key,n.id=this.createGroupId(n,t,o.usingTreeData,i),n.level=i,n.leafGroup=!o.usingTreeData&&i===o.groupedColCount-1,n.allLeafChildren=[],n.setAllChildrenCount(0),n.rowGroupIndex=o.usingTreeData?null:i,n.childrenAfterGroup=[],n.childrenMapped={},n.updateHasChildren(),n.parent=t,this.setExpandedInitialValue(o,n),n}createGroupId(e,t,i,o){let n;return n=i?(e,t,i)=>{if(i<0)return null;const s=t?n(t,t.parent,i-1):null;return"".concat(null==s?"":s+"-").concat(i,"-").concat(e.key)}:(e,t)=>{if(!e.rowGroupColumn)return null;const i=t?n(t,t.parent,0):null;return"".concat(null==i?"":i+"-").concat(e.rowGroupColumn.getColId(),"-").concat(e.key)},s.Fxk.ID_PREFIX_ROW_GROUP+n(e,t,o)}setGroupData(e,t,i){e.groupData={};this.showRowGroupColsService.getShowRowGroupCols().forEach((s=>{if(i.usingTreeData)return void(e.groupData[s.getColId()]=t.key);const o=e.rowGroupColumn;null!==o&&s.isRowGroupDisplayed(o.getId())&&(i.suppressGroupMaintainValueType?e.groupData[s.getColId()]=t.key:e.groupData[s.getColId()]=this.valueService.getValue(o,t.leafNode))}))}getChildrenMappedKey(e,t){return t?t.getId()+"-"+e:e}setExpandedInitialValue(e,t){if(e.pivotMode&&t.leafGroup)return void(t.expanded=!1);const i=e.isGroupOpenByDefault;if(i){const e={rowNode:t,field:t.field,key:t.key,level:t.level,rowGroupColumn:t.rowGroupColumn};t.expanded=1==i(e)}else-1!==e.expandByDefault?t.expanded=t.level<e.expandByDefault:t.expanded=!0}getGroupInfo(e,t){return t.usingTreeData?this.getGroupInfoFromCallback(e,t):this.getGroupInfoFromGroupColumns(e,t)}getGroupInfoFromCallback(e,t){var i,o;const n=null===(i=t.getDataPath)||void 0===i?void 0:i.call(t,e.data);return void 0!==n&&0!==n.length||(0,s.Brh)("getDataPath() should not return an empty path for data ".concat(e.data)),null!==(o=null===n||void 0===n?void 0:n.map((e=>({key:e,field:null,rowGroupColumn:null}))))&&void 0!==o?o:[]}getGroupInfoFromGroupColumns(e,t){const i=[];return t.groupedCols.forEach((s=>{let o=this.valueService.getKeyForNode(s,e),n=null!==o&&void 0!==o&&""!==o;if((t.pivotMode||!t.groupAllowUnbalanced)&&!n&&(o="",n=!0),n){const t={key:o,field:s.getColDef().field,rowGroupColumn:s,leafNode:e};i.push(t)}})),i}},M=class{constructor(){this.cache={}}traverse(e,t){let i=this.cache,s=0;for(;s<=t;){const t=e[s].key;t in i||(i[t]={node:null,subtree:{}}),i=i[t].subtree,s++}return i}set(e,t,i,s){this.traverse(e,t-1)[i]={node:s,subtree:{}}}has(e,t,i){return i in this.traverse(e,t-1)}get(e,t,i){var s;return null===(s=this.traverse(e,t-1)[i])||void 0===s?void 0:s.node}clear(){this.cache={}}inner(){return this.cache}},D="PivotRowTotal_",I=class extends s.AS9{constructor(){super(...arguments),this.beanName="pivotColDefService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.columnNameService=e.columnNameService}postConstruct(){const e=()=>{var e;return null!==(e=this.gos.get("serverSidePivotResultFieldSeparator"))&&void 0!==e?e:"_"};this.fieldSeparator=e(),this.addManagedPropertyListener("serverSidePivotResultFieldSeparator",(()=>{this.fieldSeparator=e()}));const t=()=>this.gos.get("pivotDefaultExpanded");this.pivotDefaultExpanded=t(),this.addManagedPropertyListener("pivotDefaultExpanded",(()=>{this.pivotDefaultExpanded=t()}))}createPivotColumnDefs(e){const t=this.createPivotColumnsFromUniqueValues(e);const i=function e(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.forEach((t=>{void 0!==t.children?e(t.children,i):i.push(t)})),i}(t);this.addRowGroupTotals(t,i),this.addExpandablePivotGroups(t,i),this.addPivotTotalsToGroups(t,i);return{pivotColumnGroupDefs:t,pivotColumnDefs:i.map((e=>(0,s.n9G)(e)))}}createPivotColumnsFromUniqueValues(e){const t=this.funcColsService.getPivotColumns(),i=t.length;return this.recursivelyBuildGroup(0,e,[],i,t)}recursivelyBuildGroup(e,t,i,o,n){const r=this.funcColsService.getValueColumns();if(e>=o)return this.buildMeasureCols(i);const l=n[e].getColDef(),a=this.headerNameComparator.bind(this,l.pivotComparator);if(1===r.length&&this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&e===o-1){const e=[];return(0,s.jXQ)(t,(t=>{const s=[...i,t],o=this.createColDef(r[0],t,s);o.columnGroupShow="open",e.push(o)})),e.sort(a),e}const d=[];return(0,s.jXQ)(t,((t,s)=>{const r=-1===this.pivotDefaultExpanded||e<this.pivotDefaultExpanded,l=[...i,t];d.push({children:this.recursivelyBuildGroup(e+1,s,l,o,n),headerName:t,pivotKeys:l,columnGroupShow:"open",openByDefault:r,groupId:this.generateColumnGroupId(l)})})),d.sort(a),d}buildMeasureCols(e){const t=this.funcColsService.getValueColumns();return 0===t.length?[this.createColDef(null,"-",e)]:t.map((t=>{const i=this.columnNameService.getDisplayNameForColumn(t,"header");return{...this.createColDef(t,i,e),columnGroupShow:"open"}}))}addExpandablePivotGroups(e,t){if(this.gos.get("suppressExpandablePivotGroups")||this.gos.get("pivotColumnGroupTotals"))return;const i=(e,t,s)=>{const o=e;if(o.children){const n=new Map;o.children.forEach((e=>{i(e,t,n)}));const r=!o.children.some((e=>e.children));this.funcColsService.getValueColumns().forEach((i=>{const s=this.columnNameService.getDisplayNameForColumn(i,"header"),o=this.createColDef(i,s,e.pivotKeys);if(o.pivotTotalColumnIds=n.get(i.getColId()),o.columnGroupShow="closed",o.aggFunc=i.getAggFunc(),!r){e.children.push(o),t.push(o)}})),this.merge(s,n)}else{const t=e;if(!t.pivotValueColumn)return;const i=t.pivotValueColumn.getColId(),o=s.has(i)?s.get(i):[];o.push(t.colId),s.set(i,o)}};e.forEach((e=>{i(e,t,new Map)}))}addPivotTotalsToGroups(e,t){if(!this.gos.get("pivotColumnGroupTotals"))return;const i="after"===this.gos.get("pivotColumnGroupTotals"),s=this.funcColsService.getValueColumns(),o=s.map((e=>e.getAggFunc()));if(!o||o.length<1||!this.sameAggFuncs(o))return;const n=s[0];e.forEach((e=>{this.recursivelyAddPivotTotal(e,t,n,i)}))}recursivelyAddPivotTotal(e,t,i,s){const o=e;if(!o.children){const t=e;return t.colId?[t.colId]:null}let n=[];if(o.children.forEach((e=>{const o=this.recursivelyAddPivotTotal(e,t,i,s);o&&(n=n.concat(o))})),o.children.length>1){const o=this.localeService.getLocaleTextFunc()("pivotColumnGroupTotals","Total"),r=this.createColDef(i,o,e.pivotKeys,!0);r.pivotTotalColumnIds=n,r.aggFunc=i.getAggFunc();const l=e.children;s?l.push(r):l.unshift(r),t.push(r)}return n}addRowGroupTotals(e,t){if(!this.gos.get("pivotRowTotals"))return;const i="after"===this.gos.get("pivotRowTotals"),s=this.funcColsService.getValueColumns(),o=i?s.slice():s.slice().reverse();for(let n=0;n<o.length;n++){const s=o[n];let r=[];e.forEach((e=>{r=r.concat(this.extractColIdsForValueColumn(e,s))}));const l=o.length>1||!this.gos.get("removePivotHeaderRowWhenSingleValueColumn");this.createRowGroupTotal(e,t,s,r,i,l)}}extractColIdsForValueColumn(e,t){const i=e;if(!i.children){const e=i;return e.pivotValueColumn===t&&e.colId?[e.colId]:[]}let s=[];return i.children.forEach((e=>{this.extractColIdsForValueColumn(e,t);const i=this.extractColIdsForValueColumn(e,t);s=s.concat(i)})),s}createRowGroupTotal(e,t,i,s,o,n){let r;if(0===this.funcColsService.getValueColumns().length)r=this.createColDef(null,"-",[]);else{const e=this.columnNameService.getDisplayNameForColumn(i,"header");r=this.createColDef(i,e,[]),r.pivotTotalColumnIds=s}r.colId=D+r.colId,t.push(r);const l=n?{children:[r],pivotKeys:[],groupId:"".concat(D,"_pivotGroup_").concat(i.getColId())}:r;o?e.push(l):e.unshift(l)}createColDef(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const o={};if(e){const t=e.getColDef();Object.assign(o,t),o.hide=!1}return o.headerName=t,o.colId=this.generateColumnId(i||[],e&&!s?e.getColId():""),o.field=o.colId,o.valueGetter=e=>{var t;return null===(t=e.data)||void 0===t?void 0:t[e.colDef.field]},o.pivotKeys=i,o.pivotValueColumn=e,!0===o.filter&&(o.filter="agNumberColumnFilter"),o}sameAggFuncs(e){if(1==e.length)return!0;for(let t=1;t<e.length;t++)if(e[t]!==e[0])return!1;return!0}headerNameComparator(e,t,i){return e?e(t.headerName,i.headerName):t.headerName&&!i.headerName?1:!t.headerName&&i.headerName?-1:t.headerName&&i.headerName?t.headerName<i.headerName?-1:t.headerName>i.headerName?1:0:0}merge(e,t){t.forEach(((t,i)=>{const s=[...e.has(i)?e.get(i):[],...t];e.set(i,s)}))}generateColumnGroupId(e){const t=this.funcColsService.getPivotColumns().map((e=>e.getColId()));return"pivotGroup_".concat(t.join("-"),"_").concat(e.join("-"))}generateColumnId(e,t){const i=this.funcColsService.getPivotColumns().map((e=>e.getColId()));return"pivot_".concat(i.join("-"),"_").concat(e.join("-"),"_").concat(t)}createColDefsFromFields(e){const t={};for(let o=0;o<e.length;o++){const i=e[o].split(this.fieldSeparator);let s=t;for(let e=0;e<i.length;e++){const t=i[e];null==s[t]&&(s[t]={}),s=s[t]}}const i=(e,t,s,o)=>{const n=[];for(const l in s){const t=s[l],r=i("".concat(e).concat(this.fieldSeparator).concat(l),l,t,o+1);n.push(r)}if(0===n.length){const i=this.columnModel.getColDefCol(t);if(i){var r;const s=null!==(r=this.columnNameService.getDisplayNameForColumn(i,"header"))&&void 0!==r?r:t,o=this.createColDef(i,s,void 0,!1);return o.colId=e,o.aggFunc=i.getAggFunc(),o.valueGetter=t=>{var i;return null===(i=t.data)||void 0===i?void 0:i[e]},o}return{colId:e,headerName:t,valueGetter:t=>{var i;return null===(i=t.data)||void 0===i?void 0:i[e]}}}if(this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&1===n.length&&"colId"in n[0])return n[0].headerName=t,n[0];return{openByDefault:-1===this.pivotDefaultExpanded||o<this.pivotDefaultExpanded,groupId:e,headerName:t,children:n}},s=[];for(const o in t){const e=i(o,o,t[o],0);s.push(e)}return s}},T="Exceeded maximum allowed pivot column count.",A=class extends s.AS9{constructor(){super(...arguments),this.beanName="pivotStage",this.uniqueValues={},this.lastTimeFailed=!1,this.maxUniqueValues=-1,this.currentUniqueCount=0}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.pivotResultColsService=e.pivotResultColsService,this.funcColsService=e.funcColsService,this.pivotColDefService=e.pivotColDefService}execute(e){const t=e.changedPath;this.columnModel.isPivotActive()?this.executePivotOn(t):this.executePivotOff(t)}executePivotOff(e){this.aggregationColumnsHashLastTime=null,this.uniqueValues={},this.pivotResultColsService.isPivotResultColsPresent()&&(this.pivotResultColsService.setPivotResultCols(null,"rowModelUpdated"),e&&e.setInactive())}executePivotOn(e){var t;const i=null!==(t=this.funcColsService.getValueColumns().length)&&void 0!==t?t:1,s=this.gos.get("pivotMaxGeneratedColumns");let o;this.maxUniqueValues=-1===s?-1:s/i;try{o=this.bucketUpRowNodes(e)}catch(C){if(C.message===T){this.pivotResultColsService.setPivotResultCols([],"rowModelUpdated");const e={type:"pivotMaxColumnsExceeded",message:C.message};return this.eventService.dispatchEvent(e),void(this.lastTimeFailed=!0)}throw C}const n=this.setUniqueValues(o),r=this.funcColsService.getValueColumns(),l=r.map((e=>"".concat(e.getId(),"-").concat(e.getColDef().headerName))).join("#"),a=r.map((e=>e.getAggFunc().toString())).join("#"),d=this.aggregationColumnsHashLastTime!==l,c=this.aggregationFuncsHashLastTime!==a;this.aggregationColumnsHashLastTime=l,this.aggregationFuncsHashLastTime=a;const u=this.funcColsService.getRowGroupColumns().map((e=>e.getId())).join("#"),h=u!==this.groupColumnsHashLastTime;this.groupColumnsHashLastTime=u;const p=this.gos.get("pivotRowTotals"),g=this.gos.get("pivotColumnGroupTotals"),m=this.gos.get("suppressExpandablePivotGroups"),v=this.gos.get("removePivotHeaderRowWhenSingleValueColumn"),f=p!==this.pivotRowTotalsLastTime||g!==this.pivotColumnGroupTotalsLastTime||m!==this.suppressExpandablePivotGroupsLastTime||v!==this.removePivotHeaderRowWhenSingleValueColumnLastTime;if(this.pivotRowTotalsLastTime=p,this.pivotColumnGroupTotalsLastTime=g,this.suppressExpandablePivotGroupsLastTime=m,this.removePivotHeaderRowWhenSingleValueColumnLastTime=v,this.lastTimeFailed||n||d||h||c||f){const{pivotColumnGroupDefs:t,pivotColumnDefs:i}=this.pivotColDefService.createPivotColumnDefs(this.uniqueValues);this.pivotColumnDefs=i,this.pivotResultColsService.setPivotResultCols(t,"rowModelUpdated"),e&&e.setInactive()}this.lastTimeFailed=!1}setUniqueValues(e){return!!(JSON.stringify(e)!==JSON.stringify(this.uniqueValues))&&(this.uniqueValues=e,!0)}bucketUpRowNodes(e){this.currentUniqueCount=0;const t={};e.forEachChangedNodeDepthFirst((e=>{e.leafGroup&&(e.childrenMapped=null)}));const i=e=>{var s;e.leafGroup?this.bucketRowNode(e,t):null===(s=e.childrenAfterFilter)||void 0===s||s.forEach(i)};return e.executeFromRootNode(i),t}bucketRowNode(e,t){const i=this.funcColsService.getPivotColumns();0===i.length?e.childrenMapped=null:e.childrenMapped=this.bucketChildren(e.childrenAfterFilter,i,0,t),e.sibling&&(e.sibling.childrenMapped=e.childrenMapped)}bucketChildren(e,t,i,o){const n={},r=t[i];if(e.forEach((e=>{let t=this.valueService.getKeyForNode(r,e);if((0,s.n92)(t)&&(t=""),!o[t]){this.currentUniqueCount+=1,o[t]={};const e=-1!==this.maxUniqueValues,i=this.currentUniqueCount>this.maxUniqueValues;if(e&&i)throw Error(T)}n[t]||(n[t]=[]),n[t].push(e)})),i===t.length-1)return n;{const e={};return(0,s.jXQ)(n,((s,n)=>{e[s]=this.bucketChildren(n,t,i+1,o[s])})),e}}getPivotColumnDefs(){return this.pivotColumnDefs}};var k=class extends s.AS9{constructor(){super(...arguments),this.beanName="showRowGroupColsService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService}refresh(){this.showRowGroupCols=[],this.showRowGroupColsMap={},this.columnModel.getCols().forEach((e=>{const t=e.getColDef().showRowGroup,i="string"===typeof t;if(i||!0===t)if(this.showRowGroupCols.push(e),i)this.showRowGroupColsMap[t]=e;else{this.funcColsService.getRowGroupColumns().forEach((t=>{this.showRowGroupColsMap[t.getId()]=e}))}}))}getShowRowGroupCols(){return this.showRowGroupCols}getShowRowGroupCol(e){return this.showRowGroupColsMap[e]}},L="32.0.1",G={version:L,moduleName:"".concat(s.GXE.RowGroupingModule,"-core"),beans:[g,R,P,I,A,r,m,k,b],userComponents:[{name:"agGroupRowRenderer",classImp:o.nA},{name:"agGroupCellRenderer",classImp:o.nA}],controllers:[{name:"groupCellRendererCtrl",classImp:o.QE}],dependantModules:[o.f$]},N={version:L,moduleName:"".concat(s.GXE.RowGroupingModule,"-api"),apiFunctions:{addAggFunc:function(e,t,i){e.aggFuncService&&e.aggFuncService.addAggFuncs({key:i})},addAggFuncs:function(e,t){e.aggFuncService&&e.aggFuncService.addAggFuncs(t)},clearAggFuncs:function(e){e.aggFuncService&&e.aggFuncService.clear()},setColumnAggFunc:function(e,t,i){e.funcColsService.setColumnAggFunc(t,i,"api")},isPivotMode:function(e){return e.columnModel.isPivotMode()},getPivotResultColumn:function(e,t,i){return e.pivotResultColsService.lookupPivotResultCol(t,i)},setValueColumns:function(e,t){e.funcColsService.setValueColumns(t,"api")},getValueColumns:function(e){return e.funcColsService.getValueColumns()},removeValueColumn:function(e,t){e.funcColsService.removeValueColumns([t],"api")},removeValueColumns:function(e,t){e.funcColsService.removeValueColumns(t,"api")},addValueColumn:function(e,t){e.funcColsService.addValueColumns([t],"api")},addValueColumns:function(e,t){e.funcColsService.addValueColumns(t,"api")},setRowGroupColumns:function(e,t){e.funcColsService.setRowGroupColumns(t,"api")},removeRowGroupColumn:function(e,t){e.funcColsService.removeRowGroupColumns([t],"api")},removeRowGroupColumns:function(e,t){e.funcColsService.removeRowGroupColumns(t,"api")},addRowGroupColumn:function(e,t){e.funcColsService.addRowGroupColumns([t],"api")},addRowGroupColumns:function(e,t){e.funcColsService.addRowGroupColumns(t,"api")},getRowGroupColumns:function(e){return e.funcColsService.getRowGroupColumns()},moveRowGroupColumn:function(e,t,i){e.funcColsService.moveRowGroupColumn(t,i,"api")},setPivotColumns:function(e,t){e.funcColsService.setPivotColumns(t,"api")},removePivotColumn:function(e,t){e.funcColsService.removePivotColumns([t],"api")},removePivotColumns:function(e,t){e.funcColsService.removePivotColumns(t,"api")},addPivotColumn:function(e,t){e.funcColsService.addPivotColumns([t],"api")},addPivotColumns:function(e,t){e.funcColsService.addPivotColumns(t,"api")},getPivotColumns:function(e){return e.funcColsService.getPivotColumns()},setPivotResultColumns:function(e,t){e.pivotResultColsService.setPivotResultCols(t,"api")},getPivotResultColumns:function(e){const t=e.pivotResultColsService.getPivotResultCols();return t?t.list:null}},dependantModules:[G]},O={version:L,moduleName:"@ag-grid-enterprise/group-filter",userComponents:[{name:"agGroupColumnFilter",classImp:F}],dependantModules:[G,s.Tpu]},B={version:L,moduleName:"@ag-grid-enterprise/group-floating-filter",userComponents:[{name:"agGroupColumnFloatingFilter",classImp:E}],dependantModules:[O,s.LwM]},V={version:L,moduleName:s.GXE.RowGroupingModule,dependantModules:[G,N,O,B]},H=class extends C{constructor(e){super(e,"aggregation")}postConstruct(){const e=this.localeService.getLocaleTextFunc(),t=e("valueColumnsEmptyMessage","Drag here to aggregate"),i=e("values","Values");super.init({icon:(0,s.scM)("valuePanel",this.gos,null),emptyMessage:t,title:i}),this.addManagedEventListeners({columnValueChanged:this.refreshGui.bind(this)})}getAriaLabel(){return this.localeService.getLocaleTextFunc()("ariaValuesDropZonePanelLabel","Values")}getTooltipParams(){const e=super.getTooltipParams();return e.location="valueColumnsList",e}getIconName(){return this.isPotentialDndItems()?"aggregate":"notAllowed"}isItemDroppable(e,t){return!(this.gos.get("functionsReadOnly")||!e.isPrimary())&&(e.isAllowValue()&&(!e.isValueActive()||this.isSourceEventFromTarget(t)))}updateItems(e){this.funcColsService.setValueColumns(e,"toolPanelUi")}getExistingItems(){return this.funcColsService.getValueColumns()}}},8136:(e,t,i)=>{"use strict";i.d(t,{b:()=>D});var s=i(30845),o=i(8701),n=class extends s.AS9{constructor(){super(...arguments),this.beanName="ssrmBlockUtils"}wireBeans(e){this.valueService=e.valueService,this.showRowGroupColsService=e.showRowGroupColsService,this.nodeManager=e.ssrmNodeManager,this.beans=e,this.expansionService=e.expansionService}createRowNode(e){const t=new s.Fxk(this.beans),i=null!=e.rowHeight?e.rowHeight:this.gos.getRowHeightAsNumber();return t.setRowHeight(i),t.group=e.group,t.leafGroup=e.leafGroup,t.level=e.level,t.uiLevel=e.level,t.parent=e.parent,t.stub=!0,t.__needsRefreshWhenVisible=!1,t.group&&(t.expanded=!1,t.field=e.field,t.rowGroupColumn=e.rowGroupColumn),t}destroyRowNodes(e){e&&e.forEach((e=>this.destroyRowNode(e)))}destroyRowNode(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.childStore&&!t&&(this.destroyBean(e.childStore),e.childStore=null),e.sibling&&!e.footer&&this.destroyRowNode(e.sibling,!1),e.clearRowTopAndRowIndex(),null!=e.id&&this.nodeManager.removeNode(e)}setTreeGroupInfo(e){e.updateHasChildren();const t=this.gos.get("getServerSideGroupKey");e.hasChildren()&&null!=t&&(e.key=t(e.data)),e.hasChildren()||null==e.childStore||(this.destroyBean(e.childStore),e.childStore=null,e.expanded=!1)}setRowGroupInfo(e){e.key=this.valueService.getValue(e.rowGroupColumn,e),null!==e.key&&void 0!==e.key||(0,s.qX8)((()=>{(0,s.Brh)("null and undefined values are not allowed for server side row model keys"),e.rowGroupColumn&&(0,s.Brh)("column = ".concat(e.rowGroupColumn.getId())),(0,s.Brh)("data is "+e.data)}),"ServerSideBlock-CannotHaveNullOrUndefinedForKey");this.beans.gos.getGroupTotalRowCallback()({node:e})&&(e.createFooter(),e.sibling&&(e.sibling.uiLevel=e.uiLevel+1))}setMasterDetailInfo(e){const t=this.gos.get("isRowMaster");e.master=null==t||t(e.data)}updateDataIntoRowNode(e,t){if(e.updateData(t),this.gos.get("treeData"))this.setTreeGroupInfo(e),this.setChildCountIntoRowNode(e);else if(e.group){if(this.setChildCountIntoRowNode(e),!e.footer){this.beans.gos.getGroupTotalRowCallback()({node:e})?e.sibling?e.sibling.updateData(t):e.createFooter():e.sibling&&e.destroyFooter()}}else this.gos.get("masterDetail")}setDataIntoRowNode(e,t,i,o){e.stub=!1;const n=this.gos.get("treeData");var r;((0,s.fTC)(t)?(e.setDataAndId(t,i),n?this.setTreeGroupInfo(e):e.group?this.setRowGroupInfo(e):this.gos.get("masterDetail")&&this.setMasterDetailInfo(e)):(e.setDataAndId(void 0,void 0),e.key=null),(n||e.group)&&(this.setGroupDataIntoRowNode(e),this.setChildCountIntoRowNode(e)),(0,s.fTC)(t))&&(e.setRowHeight(this.gos.getRowHeightForNode(e,!1,o).height),null===(r=e.sibling)||void 0===r||r.setRowHeight(this.gos.getRowHeightForNode(e.sibling,!1,o).height))}setChildCountIntoRowNode(e){const t=this.gos.get("getChildCount");t&&e.setAllChildrenCount(t(e.data))}setGroupDataIntoRowNode(e){var t,i;const s=null!==(t=null===(i=this.showRowGroupColsService)||void 0===i?void 0:i.getShowRowGroupCols())&&void 0!==t?t:[],o=this.gos.get("treeData");s.forEach((t=>{if(null==e.groupData&&(e.groupData={}),o)e.groupData[t.getColId()]=e.key;else if(t.isRowGroupDisplayed(e.rowGroupColumn.getId())){const i=this.valueService.getValue(e.rowGroupColumn,e);e.groupData[t.getColId()]=i}}))}clearDisplayIndex(e){e.clearRowTopAndRowIndex();if(e.hasChildren()&&(0,s.fTC)(e.childStore)){e.childStore.clearDisplayIndexes()}e.master&&e.detailNode&&e.detailNode.clearRowTopAndRowIndex()}setDisplayIndex(e,t,i){if(e.setRowIndex(t.next()),e.setRowTop(i.value),i.value+=e.rowHeight,e.footer)return;e.master&&(e.expanded&&e.detailNode?(e.detailNode.setRowIndex(t.next()),e.detailNode.setRowTop(i.value),i.value+=e.detailNode.rowHeight):e.detailNode&&e.detailNode.clearRowTopAndRowIndex());if(e.hasChildren()&&(0,s.fTC)(e.childStore)){const s=e.childStore;e.expanded?s.setDisplayIndexes(t,i):s.clearDisplayIndexes()}}binarySearchForDisplayIndex(e,t){let i=0,o=t.length-1;if((0,s.n92)(o)||(0,s.n92)(i))(0,s.Brh)("error: topPointer = ".concat(o,", bottomPointer = ").concat(i));else for(;;){const n=Math.floor((i+o)/2),r=t[n];if(r.rowIndex===e)return r;const l=r.master&&r.expanded,a=r.detailNode;if(l&&a&&a.rowIndex===e)return r.detailNode;const d=r.childStore;if(r.expanded&&d&&d.isDisplayIndexInStore(e))return d.getRowUsingDisplayIndex(e);if(r.rowIndex<e)i=n+1;else{if(!(r.rowIndex>e))return void(0,s.Brh)("error: unable to locate rowIndex = ".concat(e," in cache"));o=n-1}}}extractRowBounds(e,t){const i=e=>({rowHeight:e.rowHeight,rowTop:e.rowTop});if(e.rowIndex===t)return i(e);if(e.hasChildren()&&e.expanded&&(0,s.fTC)(e.childStore)){const i=e.childStore;if(i.isDisplayIndexInStore(t))return i.getRowBounds(t)}else if(e.master&&e.expanded&&(0,s.fTC)(e.detailNode)&&e.detailNode.rowIndex===t)return i(e.detailNode)}getIndexAtPixel(e,t){if(e.isPixelInRange(t))return e.rowIndex;const i=e.master&&e.expanded,o=e.detailNode;if(i&&o&&o.isPixelInRange(t))return e.detailNode.rowIndex;if(e.hasChildren()&&e.expanded&&(0,s.fTC)(e.childStore)){const i=e.childStore;if(i.isPixelInRange(t))return i.getRowIndexAtPixel(t)}return null}createNodeIdPrefix(e){const t=[];let i=e;for(;i&&i.level>=0;)""===i.key?t.push("ag-Grid-MissingKey"):t.push(i.key),i=i.parent;if(t.length>0)return t.reverse().join("-")}checkOpenByDefault(e){return this.expansionService.checkOpenByDefault(e)}},r=class extends s.AS9{constructor(){super(...arguments),this.beanName="ssrmExpandListener"}wireBeans(e){this.serverSideRowModel=e.rowModel,this.storeFactory=e.ssrmStoreFactory,this.beans=e}postConstruct(){this.gos.isRowModelType("serverSide")&&this.addManagedEventListeners({rowGroupOpened:this.onRowGroupOpened.bind(this)})}onRowGroupOpened(e){const t=e.node;if(t.expanded){if(t.master)this.createDetailNode(t);else if((0,s.n92)(t.childStore)){const e=this.serverSideRowModel.getParams();t.childStore=this.createBean(this.storeFactory.createStore(e,t))}}else this.gos.get("purgeClosedRowNodes")&&(0,s.fTC)(t.childStore)&&(t.childStore=this.destroyBean(t.childStore));this.eventService.dispatchEvent({type:"storeUpdated"})}createDetailNode(e){if((0,s.fTC)(e.detailNode))return e.detailNode;const t=new s.Fxk(this.beans);t.detail=!0,t.selectable=!1,t.parent=e,(0,s.fTC)(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1;const i=this.gos.getRowHeightForNode(t).height;return t.rowHeight=i||200,e.detailNode=t,t}},l=class extends s.AS9{constructor(){super(...arguments),this.beanName="ssrmFilterListener"}wireBeans(e){this.serverSideRowModel=e.rowModel,this.filterManager=e.filterManager,this.listenerUtils=e.ssrmListenerUtils}postConstruct(){this.gos.isRowModelType("serverSide")&&this.addManagedEventListeners({advancedFilterEnabledChanged:()=>this.onFilterChanged(!0),filterChanged:()=>this.onFilterChanged()})}onFilterChanged(e){var t;const i=this.serverSideRowModel.getParams();if(!i)return;const s=i.filterModel;let o,n;if(null!==(t=this.filterManager)&&void 0!==t&&t.isAdvancedFilterEnabled()){o=this.filterManager.getAdvancedFilterModel();const t=e?Object.keys(null!==s&&void 0!==s?s:{}):this.getAdvancedFilterColumns(s),i=this.getAdvancedFilterColumns(o);t.forEach((e=>i.add(e))),n=Array.from(i)}else{var r,l;if(o=null!==(r=null===(l=this.filterManager)||void 0===l?void 0:l.getFilterModel())&&void 0!==r?r:{},e){const e=this.getAdvancedFilterColumns(s);Object.keys(o).forEach((t=>e.add(t))),n=Array.from(e)}else n=this.findChangedColumns(s,o)}const a={valueColChanged:this.listenerUtils.isSortingWithValueColumn(n),secondaryColChanged:this.listenerUtils.isSortingWithSecondaryColumn(n),changedColumns:n};this.serverSideRowModel.refreshAfterFilter(o,a)}findChangedColumns(e,t){const i={};Object.keys(e).forEach((e=>i[e]=!0)),Object.keys(t).forEach((e=>i[e]=!0));const s=[];return Object.keys(i).forEach((i=>{JSON.stringify(e[i])!=JSON.stringify(t[i])&&s.push(i)})),s}getAdvancedFilterColumns(e){const t=new Set;if(!e)return t;const i=e=>{"join"===e.filterType?e.conditions.forEach((e=>i(e))):t.add(e.colId)};return i(e),t}},a=class extends s.AS9{constructor(){super(...arguments),this.beanName="ssrmListenerUtils"}wireBeans(e){this.pivotResultColsService=e.pivotResultColsService,this.funcColsService=e.funcColsService}isSortingWithValueColumn(e){const t=this.funcColsService.getValueColumns().map((e=>e.getColId()));for(let i=0;i<e.length;i++)if(t.indexOf(e[i])>-1)return!0;return!1}isSortingWithSecondaryColumn(e){const t=this.pivotResultColsService.getPivotResultCols();if(!t)return!1;const i=t.list.map((e=>e.getColId()));for(let s=0;s<e.length;s++)if(i.indexOf(e[s])>-1)return!0;return!1}},d=class extends s.AS9{constructor(){super(...arguments),this.beanName="ssrmSortService"}wireBeans(e){this.sortController=e.sortController,this.serverSideRowModel=e.rowModel,this.listenerUtils=e.ssrmListenerUtils}postConstruct(){this.gos.isRowModelType("serverSide")&&this.addManagedEventListeners({sortChanged:this.onSortChanged.bind(this)})}onSortChanged(){const e=this.serverSideRowModel.getParams();if(!e)return;const t=this.sortController.getSortModel(),i=e.sortModel,s=this.findChangedColumnsInSort(t,i),o={valueColChanged:this.listenerUtils.isSortingWithValueColumn(s),secondaryColChanged:this.listenerUtils.isSortingWithSecondaryColumn(s),changedColumns:s};this.serverSideRowModel.refreshAfterSort(t,o)}findChangedColumnsInSort(e,t){let i=[];[e,t].forEach((e=>{if(e){const t=e.map((e=>e.colId));i=i.concat(t)}}));return i.filter((i=>{const s=t.find((e=>e.colId===i)),o=e.find((e=>e.colId===i));return((e,t)=>(e?e.sort:null)!==(t?t.sort:null))(s,o)||((i,s)=>(i?t.indexOf(i):-1)!==(s?e.indexOf(s):-1))(s,o)}))}},c=class extends s.AS9{constructor(){super(...arguments),this.beanName="ssrmNodeManager",this.rowNodes={}}addRowNode(e){const t=e.id;this.rowNodes[t]&&((0,s.Brh)("Duplicate node id ".concat(e.id,". Row ID's are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values.")),(0,s.Brh)("first instance",this.rowNodes[t].data),(0,s.Brh)("second instance",e.data)),this.rowNodes[t]=e}removeNode(e){const t=e.id;this.rowNodes[t]&&(this.rowNodes[t]=void 0)}destroy(){this.clear(),super.destroy()}clear(){this.rowNodes={},super.destroy()}},u=class extends s.NlK{constructor(e,t,i){super(0),this.nodeIdSequence=new s.at1,this.info={},this.ssrmParams=e,this.parentRowNode=i,this.level=i.level+1,this.groupLevel=e.rowGroupCols?this.level<e.rowGroupCols.length:void 0,this.leafGroup=!!e.rowGroupCols&&this.level===e.rowGroupCols.length-1}wireBeans(e){this.storeUtils=e.ssrmStoreUtils,this.blockUtils=e.ssrmBlockUtils,this.funcColsService=e.funcColsService,this.rowNodeBlockLoader=e.rowNodeBlockLoader,this.rowNodeSorter=e.rowNodeSorter,this.sortController=e.sortController,this.selectionService=e.selectionService,this.nodeManager=e.ssrmNodeManager,this.filterManager=e.filterManager,this.transactionManager=e.ssrmTransactionManager,this.serverSideRowModel=e.rowModel}postConstruct(){if(this.usingTreeData=this.gos.get("treeData"),this.nodeIdPrefix=this.blockUtils.createNodeIdPrefix(this.parentRowNode),!this.usingTreeData&&this.groupLevel){const e=this.ssrmParams.rowGroupCols[this.level];this.groupField=e.field,this.rowGroupColumn=this.funcColsService.getRowGroupColumns()[this.level]}let e=1;const t=-1===this.parentRowNode.level,i=this.storeUtils.getServerSideInitialRowCount();t&&null!=i&&(e=i),this.initialiseRowNodes(e),this.rowNodeBlockLoader.addBlock(this),this.addDestroyFunc((()=>this.rowNodeBlockLoader.removeBlock(this))),this.postSortFunc=this.gos.getCallback("postSortRows"),null!=i&&this.eventService.dispatchEventOnce({type:"rowCountReady"})}destroy(){this.destroyRowNodes(),super.destroy()}destroyRowNodes(){this.blockUtils.destroyRowNodes(this.allRowNodes),this.allRowNodes=[],this.nodesAfterSort=[],this.nodesAfterFilter=[],this.allNodesMap={}}initialiseRowNodes(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.destroyRowNodes();for(let i=0;i<e;i++){const e=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});t&&(e.failedLoad=!0),this.allRowNodes.push(e),this.nodesAfterFilter.push(e),this.nodesAfterSort.push(e)}}getBlockStateJson(){return{id:this.nodeIdPrefix?this.nodeIdPrefix:"",state:this.getState()}}loadFromDatasource(){this.storeUtils.loadFromDatasource({startRow:void 0,endRow:void 0,parentBlock:this,parentNode:this.parentRowNode,storeParams:this.ssrmParams,success:this.success.bind(this,this.getVersion()),fail:this.pageLoadFailed.bind(this,this.getVersion())})}getStartRow(){return 0}getEndRow(){return this.nodesAfterSort.length}createDataNode(e,t){const i=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});null!=t?(0,s.E_0)(this.allRowNodes,i,t):this.allRowNodes.push(i);const o=this.prefixId(this.nodeIdSequence.next());return this.blockUtils.setDataIntoRowNode(i,e,o,void 0),this.nodeManager.addRowNode(i),this.blockUtils.checkOpenByDefault(i),this.allNodesMap[i.id]=i,i}prefixId(e){return this.nodeIdPrefix?this.nodeIdPrefix+"-"+e:e.toString()}processServerFail(){this.initialiseRowNodes(1,!0),this.fireStoreUpdatedEvent(),this.flushAsyncTransactions()}processServerResult(e){if(!this.isAlive())return;const t=e.groupLevelInfo;t&&Object.assign(this.info,t),e.pivotResultFields&&this.serverSideRowModel.generateSecondaryColumns(e.pivotResultFields);const i=this.allRowNodes.length>0?this.allNodesMap:void 0;this.allRowNodes=[],this.nodesAfterSort=[],this.nodesAfterFilter=[],this.allNodesMap={},e.rowData||(0,s.Brh)('"params.data" is missing from Server-Side Row Model success() callback. Please use the "data" attribute. If no data is returned, set an empty list.'),this.createOrRecycleNodes(i,e.rowData),i&&this.blockUtils.destroyRowNodes((0,s.QgP)(i)),0===this.level&&this.eventService.dispatchEventOnce({type:"rowCountReady"}),this.filterAndSortNodes(),this.fireStoreUpdatedEvent(),this.flushAsyncTransactions()}createOrRecycleNodes(e,t){if(!t)return;const i=t=>{if(!e)return;const i=this.gos.getRowIdCallback();if(!i)return;const s=this.parentRowNode.getGroupKeys(),o=this.level,n=i({data:t,parentKeys:s.length>0?s:void 0,level:o}),r=e[n];return r?(delete e[n],r):void 0},s=(e,t)=>{this.allNodesMap[e.id]=e,this.blockUtils.updateDataIntoRowNode(e,t),this.allRowNodes.push(e)};t.forEach((e=>{const t=i(e);t?s(t,e):this.createDataNode(e)}))}flushAsyncTransactions(){window.setTimeout((()=>this.transactionManager.flushAsyncTransactions()),0)}filterAndSortNodes(){this.filterRowNodes(),this.sortRowNodes()}sortRowNodes(){const e=this.storeUtils.isServerSideSortAllLevels()||this.storeUtils.isServerSideSortOnServer(),t=this.sortController.getSortOptions(),i=!t||0==t.length;if(e||i)this.nodesAfterSort=this.nodesAfterFilter;else if(this.nodesAfterSort=this.rowNodeSorter.doFullSort(this.nodesAfterFilter,t),this.postSortFunc){const e={nodes:this.nodesAfterSort};this.postSortFunc(e)}}filterRowNodes(){const e=!this.storeUtils.isServerSideOnlyRefreshFilteredGroups()||this.storeUtils.isServerSideFilterOnServer(),t=this.groupLevel;this.nodesAfterFilter=e||t?this.allRowNodes:this.filterManager?this.allRowNodes.filter((e=>this.filterManager.doesRowPassFilter({rowNode:e}))):this.allRowNodes}clearDisplayIndexes(){this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.allRowNodes.forEach((e=>this.blockUtils.clearDisplayIndex(e)))}getDisplayIndexEnd(){return this.displayIndexEnd}isDisplayIndexInStore(e){return 0!==this.getRowCount()&&(e>=this.displayIndexStart&&e<this.displayIndexEnd)}setDisplayIndexes(e,t){this.displayIndexStart=e.peek(),this.topPx=t.value;const i={};this.nodesAfterSort.forEach((s=>{this.blockUtils.setDisplayIndex(s,e,t),i[s.id]=!0})),this.allRowNodes.forEach((e=>{i[e.id]||this.blockUtils.clearDisplayIndex(e)})),this.displayIndexEnd=e.peek(),this.heightPx=t.value-this.topPx}forEachStoreDeep(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new s.at1;e(this,t.next()),this.allRowNodes.forEach((i=>{const s=i.childStore;s&&s.forEachStoreDeep(e,t)}))}forEachNodeDeep(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new s.at1;this.allRowNodes.forEach((i=>{e(i,t.next());const s=i.childStore;s&&s.forEachNodeDeep(e,t)}))}forEachNodeDeepAfterFilterAndSort(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new s.at1,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.nodesAfterSort.forEach((s=>{e(s,t.next());const o=s.childStore;o&&o.forEachNodeDeepAfterFilterAndSort(e,t,i)})),i&&this.parentRowNode.sibling&&e(this.parentRowNode.sibling,t.next())}getRowUsingDisplayIndex(e){if(!this.isDisplayIndexInStore(e))return;return this.blockUtils.binarySearchForDisplayIndex(e,this.nodesAfterSort)}getRowBounds(e){for(let t=0;t<this.nodesAfterSort.length;t++){const i=this.nodesAfterSort[t],s=this.blockUtils.extractRowBounds(i,e);if(s)return s}return null}isPixelInRange(e){return e>=this.topPx&&e<this.topPx+this.heightPx}getRowIndexAtPixel(e){if(e<=this.topPx){return this.nodesAfterSort[0].rowIndex}if(e>=this.topPx+this.heightPx){const t=this.nodesAfterSort[this.nodesAfterSort.length-1],i=t.rowTop+t.rowHeight;if(e>=i&&t.expanded){if(t.childStore&&t.childStore.getRowCount()>0)return t.childStore.getRowIndexAtPixel(e);if(t.detailNode)return t.detailNode.rowIndex}return t.rowIndex}let t=null;this.nodesAfterSort.forEach((i=>{const s=this.blockUtils.getIndexAtPixel(i,e);null!=s&&(t=s)}));return null==t?this.displayIndexEnd-1:t}getChildStore(e){return this.storeUtils.getChildStore(e,this,(e=>this.allRowNodes.find((t=>t.key==e))))}forEachChildStoreShallow(e){this.allRowNodes.forEach((t=>{const i=t.childStore;i&&e(i)}))}refreshAfterFilter(e){const t=this.storeUtils.isServerSideFilterOnServer(),i=this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e);if(!this.storeUtils.isServerSideOnlyRefreshFilteredGroups()||t&&i)return this.refreshStore(!0),void this.sortRowNodes();this.filterRowNodes(),this.sortRowNodes(),this.forEachChildStoreShallow((t=>t.refreshAfterFilter(e)))}refreshAfterSort(e){const t=this.storeUtils.isServerSideSortOnServer(),i=this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e);if(this.storeUtils.isServerSideSortAllLevels()||t&&i)return this.refreshStore(!0),void this.filterRowNodes();this.filterRowNodes(),this.sortRowNodes(),this.forEachChildStoreShallow((t=>t.refreshAfterSort(e)))}applyTransaction(e){switch(this.getState()){case"failed":return{status:s.Qk6.StoreLoadingFailed};case"loading":return{status:s.Qk6.StoreLoading};case"needsLoading":return{status:s.Qk6.StoreWaitingToLoad}}const t=this.gos.getCallback("isApplyServerSideTransaction");if(t){if(!t({transaction:e,parentNode:this.parentRowNode,groupLevelInfo:this.info}))return{status:s.Qk6.Cancelled}}const i={status:s.Qk6.Applied,remove:[],update:[],add:[]},o=[];return this.executeAdd(e,i),this.executeRemove(e,i,o),this.executeUpdate(e,i,o),this.filterAndSortNodes(),this.updateSelection(o),i}updateSelection(e){if(e.length>0){this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,clearSelection:!1,source:"rowDataChanged"});const t={type:"selectionChanged",source:"rowDataChanged"};this.eventService.dispatchEvent(t)}}executeAdd(e,t){const{add:i,addIndex:o}=e;if((0,s.vfG)(i))return;"number"===typeof o&&o>=0?i.reverse().forEach((e=>{const i=this.createDataNode(e,o);t.add.push(i)})):i.forEach((e=>{const i=this.createDataNode(e);t.add.push(i)}))}executeRemove(e,t,i){const{remove:s}=e;if(null==s)return;const o={};s.forEach((e=>{const s=this.lookupRowNode(e);s&&(s.isSelected()&&i.push(s),s.clearRowTopAndRowIndex(),o[s.id]=!0,delete this.allNodesMap[s.id],t.remove.push(s),this.nodeManager.removeNode(s))})),this.allRowNodes=this.allRowNodes.filter((e=>!o[e.id]))}executeUpdate(e,t,i){const{update:s}=e;null!=s&&s.forEach((e=>{const s=this.lookupRowNode(e);s&&(this.blockUtils.updateDataIntoRowNode(s,e),!s.selectable&&s.isSelected()&&i.push(s),t.update.push(s))}))}lookupRowNode(e){const t=this.gos.getRowIdCallback();if(null!=t){const i=this.parentRowNode.getGroupKeys(),o=t({data:e,parentKeys:i.length>0?i:void 0,level:this.level}),n=this.allNodesMap[o];return n||((0,s.AHw)("could not find row id=".concat(o,", data item was not found for this id")),null)}{const t=this.allRowNodes.find((t=>t.data===e));return t||((0,s.AHw)("could not find data item as object was not found",e),null)}}addStoreStates(e){e.push({suppressInfiniteScroll:!0,route:this.parentRowNode.getGroupKeys(),rowCount:this.allRowNodes.length,info:this.info}),this.forEachChildStoreShallow((t=>t.addStoreStates(e)))}refreshStore(e){if(e){const e=this.nodesAfterSort?this.nodesAfterSort.length:1;this.initialiseRowNodes(e)}this.scheduleLoad(),this.fireStoreUpdatedEvent()}retryLoads(){"failed"===this.getState()&&(this.initialiseRowNodes(1),this.scheduleLoad()),this.forEachChildStoreShallow((e=>e.retryLoads()))}scheduleLoad(){this.setStateWaitingToLoad(),this.rowNodeBlockLoader.checkBlockToLoad()}fireStoreUpdatedEvent(){this.eventService.dispatchEvent({type:"storeUpdated"})}getRowCount(){return this.nodesAfterSort.length}getTopLevelRowDisplayedIndex(e){return this.nodesAfterSort[e].rowIndex}isLastRowIndexKnown(){return"loaded"==this.getState()}getRowNodesInRange(e,t){const i=[];let o=!1;(0,s.n92)(e)&&(o=!0),this.nodesAfterSort.forEach((s=>{const n=s===e||s===t;(o||n)&&i.push(s),n&&(o=!o)}));return o?[]:i}getStoreBounds(){return{topPx:this.topPx,heightPx:this.heightPx}}},h=class extends s.AS9{constructor(){super(...arguments),this.beanName="lazyBlockLoadingService",this.cacheLoadingNodesMap=new Map,this.isCheckQueued=!1,this.nextBlockToLoad=void 0}wireBeans(e){this.rowNodeBlockLoader=e.rowNodeBlockLoader,this.rowRenderer=e.rowRenderer,this.rowModel=e.rowModel}postConstruct(){this.addManagedListeners(this.rowNodeBlockLoader,{blockLoaded:()=>this.queueLoadCheck()})}subscribe(e){this.cacheLoadingNodesMap.set(e,new Set)}unsubscribe(e){this.cacheLoadingNodesMap.delete(e)}queueLoadCheck(){this.isCheckQueued||(this.isCheckQueued=!0,window.queueMicrotask((()=>{this.queueLoadAction(),this.isCheckQueued=!1})))}queueLoadAction(){const e=this.getBlockToLoad();if(!e)return;const t=this.nextBlockToLoad&&this.nextBlockToLoad.cache===e.cache&&this.nextBlockToLoad.index===e.index;if(!t&&(!this.nextBlockToLoad||!t)){this.nextBlockToLoad=e,window.clearTimeout(this.loaderTimeout);const t=Number(this.nextBlockToLoad.index),i=this.nextBlockToLoad.cache,s=e.index+e.cache.getBlockSize();this.loaderTimeout=window.setTimeout((()=>{i.isAlive()&&(this.loaderTimeout=void 0,this.attemptLoad(i,t,s),this.nextBlockToLoad=void 0)}),this.gos.get("blockLoadDebounceMillis"))}}attemptLoad(e,t,i){const s=this.rowNodeBlockLoader.getAvailableLoadingCount();null!=s&&0===s||(this.rowNodeBlockLoader.registerLoads(1),this.executeLoad(e,t,i),this.queueLoadCheck())}executeLoad(e,t,i){var s;const o=e.getSsrmParams(),n={startRow:t,endRow:i,rowGroupCols:o.rowGroupCols,valueCols:o.valueCols,pivotCols:o.pivotCols,pivotMode:o.pivotMode,groupKeys:e.store.getParentNode().getGroupKeys(),filterModel:o.filterModel,sortModel:o.sortModel},r=this.cacheLoadingNodesMap.get(e),l=()=>{for(let e=0;e<i-t;e++)r.delete(t+e)},a=this.gos.addGridCommonParams({request:n,success:s=>{this.rowNodeBlockLoader.loadComplete(),e.onLoadSuccess(t,i-t,s),l()},fail:()=>{this.rowNodeBlockLoader.loadComplete(),e.onLoadFailed(t,i-t),l()},parentNode:e.store.getParentNode()});(()=>{for(let e=0;e<i-t;e++)r.add(t+e)})(),null===(s=e.getSsrmParams().datasource)||void 0===s||s.getRows(a)}getBlockToLoad(){var e;const t=this.rowRenderer.getFirstVirtualRenderedRow(),i=this.rowRenderer.getLastVirtualRenderedRow();for(let a=t;a<=i;a++){const e=this.rowModel.getRow(a);if(!e)continue;const t=e.parent&&e.parent.childStore;if(!t||!(t instanceof m))continue;const i=t.getCache(),s=i.getNodes().getBy("node",e);if(!s)continue;const o=this.cacheLoadingNodesMap.get(i);if((null===o||void 0===o||!o.has(s.index))&&(e.__needsRefreshWhenVisible||e.stub&&!e.failedLoad))return{cache:i,index:i.getBlockStartIndex(s.index)}}let s=null,o=null,n=Number.MAX_SAFE_INTEGER;for(const a of this.cacheLoadingNodesMap.keys()){a.getNodesToRefresh().forEach((e=>{if(null==e.rowIndex)return o=e,void(s=a);const r=a.getNodes().getBy("node",e);if(!r)return;const l=this.cacheLoadingNodesMap.get(a);if(null!==l&&void 0!==l&&l.has(r.index))return;const d=Math.abs(t-e.rowIndex),c=Math.abs(e.rowIndex-i);d<n&&(o=e,n=d,s=a),c<n&&(o=e,n=c,s=a)}))}if(!s)return;const r=s,l=null===(e=r.getNodes().getBy("node",o))||void 0===e?void 0:e.index;return null==l?void 0:{cache:r,index:r.getBlockStartIndex(l)}}isRowLoading(e,t){var i,s;return null!==(i=null===(s=this.cacheLoadingNodesMap.get(e))||void 0===s?void 0:s.has(t))&&void 0!==i&&i}};h.DEFAULT_BLOCK_SIZE=100;var p=class{constructor(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(t.length<1)throw new Error("AG Grid: At least one index must be provided.");this.indexes=t,this.maps=new Map(this.indexes.map((e=>[e,new Map])))}getSize(){return this.maps.get(this.indexes[0]).size}getBy(e,t){const i=this.maps.get(e);if(!i)throw new Error("AG Grid: ".concat(String(e)," not found"));return i.get(t)}set(e){this.indexes.forEach((t=>{const i=this.maps.get(t);if(!i)throw new Error("AG Grid: ".concat(String(t)," not found"));i.set(e[t],e)}))}delete(e){this.indexes.forEach((t=>{const i=this.maps.get(t);if(!i)throw new Error("AG Grid: ".concat(String(t)," not found"));i.delete(e[t])}))}clear(){this.maps.forEach((e=>e.clear()))}getIterator(e){const t=this.maps.get(e);if(!t)throw new Error("AG Grid: ".concat(String(e)," not found"));return t.values()}forEach(e){const t=this.getIterator(this.indexes[0]);let i;for(;(i=t.next())&&!i.done;)e(i.value)}find(e){const t=this.getIterator(this.indexes[0]);let i;for(;(i=t.next())&&!i.done;)if(e(i.value))return i.value}filter(e){const t=this.getIterator(this.indexes[0]);let i;const s=[];for(;(i=t.next())&&!i.done;)e(i.value)&&s.push(i.value);return s}},g=class extends s.AS9{constructor(e,t,i){super(),this.live=!0,this.removedNodeCache=new Map,this.store=e,this.numberOfRows=t,this.isLastRowKnown=!1,this.storeParams=i}wireBeans(e){this.rowRenderer=e.rowRenderer,this.blockUtils=e.ssrmBlockUtils,this.focusService=e.focusService,this.nodeManager=e.ssrmNodeManager,this.serverSideRowModel=e.rowModel,this.rowNodeSorter=e.rowNodeSorter,this.sortController=e.sortController,this.lazyBlockLoadingService=e.lazyBlockLoadingService}postConstruct(){this.lazyBlockLoadingService.subscribe(this),this.nodeMap=new p("index","id","node"),this.nodeDisplayIndexMap=new Map,this.nodesToRefresh=new Set,this.defaultNodeIdPrefix=this.blockUtils.createNodeIdPrefix(this.store.getParentNode()),this.getRowIdFunc=this.gos.getRowIdCallback(),this.isMasterDetail=this.gos.get("masterDetail")}destroy(){this.lazyBlockLoadingService.unsubscribe(this),this.numberOfRows=0,this.nodeMap.forEach((e=>this.blockUtils.destroyRowNode(e.node))),this.nodeMap.clear(),this.nodeDisplayIndexMap.clear(),this.nodesToRefresh.clear(),this.live=!1,super.destroy()}getRowByDisplayIndex(e){var t;if(!this.store.isDisplayIndexInStore(e))return;const i=this.nodeDisplayIndexMap.get(e);if(i)return(i.stub||i.__needsRefreshWhenVisible)&&this.lazyBlockLoadingService.queueLoadCheck(),i;if(e===this.store.getDisplayIndexStart())return this.createStubNode(0,e);const s=this.nodeDisplayIndexMap.get(e-1);if(s){var o,n;if(this.isMasterDetail&&s.master&&s.expanded)return s.detailNode;if(s.expanded&&null!==(o=s.childStore)&&void 0!==o&&o.isDisplayIndexInStore(e))return null===(n=s.childStore)||void 0===n?void 0:n.getRowUsingDisplayIndex(e);const t=this.nodeMap.getBy("node",s);return this.createStubNode(t.index+1,e)}const r=this.getSurroundingNodesByDisplayIndex(e);if(null==r){const t=this.store.getRowCount()-(this.store.getDisplayIndexEnd()-e);return this.createStubNode(t,e)}const{previousNode:l,nextNode:a}=r;var d;if(l&&l.node.expanded&&null!==(t=l.node.childStore)&&void 0!==t&&t.isDisplayIndexInStore(e))return null===(d=l.node.childStore)||void 0===d?void 0:d.getRowUsingDisplayIndex(e);if(a){const t=a.node.rowIndex-e,i=a.index-t;return this.createStubNode(i,e)}const c=this.store.getRowCount()-(this.store.getDisplayIndexEnd()-e);return this.createStubNode(c,e)}createStubNode(e,t){const i=this.store.getRowBounds(t),s=this.createRowAtIndex(e,null,(e=>{e.setRowIndex(t),e.setRowTop(i.rowTop),this.nodeDisplayIndexMap.set(t,e)}));return this.lazyBlockLoadingService.queueLoadCheck(),s}getRowByStoreIndex(e){var t;return null===(t=this.nodeMap.getBy("index",e))||void 0===t?void 0:t.node}skipDisplayIndexes(e,t,i){if(0===e)return;const s=this.gos.getRowHeightAsNumber();t.skip(e),i.value+=e*s}setDisplayIndexes(e,t){this.nodeDisplayIndexMap.clear();const i={};this.nodeMap.forEach((e=>{i[e.index]=e.node}));let s=-1;for(const n in i){const o=i[n],r=Number(n),l=r-1-s;this.skipDisplayIndexes(l,e,t),this.blockUtils.setDisplayIndex(o,e,t),this.nodeDisplayIndexMap.set(o.rowIndex,o),s=r}const o=this.numberOfRows-1-s;this.skipDisplayIndexes(o,e,t),this.purgeExcessRows()}getRowCount(){return this.numberOfRows}setRowCount(e,t){if(e<0)throw new Error("AG Grid: setRowCount can only accept a positive row count.");this.numberOfRows=e,null!=t&&(this.isLastRowKnown=t,!1===t&&(this.numberOfRows+=1)),this.fireStoreUpdatedEvent()}getNodes(){return this.nodeMap}getNodeCachedByDisplayIndex(e){var t;return null!==(t=this.nodeDisplayIndexMap.get(e))&&void 0!==t?t:null}getNodesToRefresh(){return this.nodesToRefresh}getSurroundingNodesByDisplayIndex(e){let t,i;return this.nodeMap.forEach((s=>{e>s.node.rowIndex?(null==i||i.node.rowIndex<s.node.rowIndex)&&(i=s):(null==t||t.node.rowIndex>s.node.rowIndex)&&(t=s)})),i||t?{previousNode:i,nextNode:t}:null}getDisplayIndexFromStoreIndex(e){var t,i;const s=this.nodeMap.getBy("index",e);if(s)return s.node.rowIndex;let o,n;if(this.nodeMap.forEach((t=>{e>t.index?(null==n||n.index<t.index)&&(n=t):(null==o||o.index>t.index)&&(o=t)})),!o)return this.store.getDisplayIndexEnd()-(this.numberOfRows-e);if(!n)return this.store.getDisplayIndexStart()+e;const r=e-n.index;return(null!==(t=null===(i=n.node.childStore)||void 0===i?void 0:i.getDisplayIndexEnd())&&void 0!==t?t:n.node.rowIndex)+r}createRowAtIndex(e,t,i){const s=this.nodeMap.getBy("index",e);if(s){const{node:i}=s;if(i.__needsRefreshWhenVisible=!1,this.doesNodeMatch(t,i))return this.blockUtils.updateDataIntoRowNode(i,t),this.nodesToRefresh.delete(i),i;if(null==this.getRowIdFunc&&i.hasChildren()&&i.expanded)return this.nodesToRefresh.delete(i),i;this.destroyRowAtIndex(e)}if(t&&null!=this.getRowIdFunc){var o;const i=this.getRowId(t),s=i&&(null===(o=this.removedNodeCache)||void 0===o?void 0:o.get(i));var n;if(s)return null===(n=this.removedNodeCache)||void 0===n||n.delete(i),this.blockUtils.updateDataIntoRowNode(s,t),this.nodeMap.set({id:s.id,node:s,index:e}),this.nodesToRefresh.delete(s),s.__needsRefreshWhenVisible=!1,s;const r=this.nodeMap.getBy("id",i);if(r){this.nodeMap.delete(r);const{node:i,index:s}=r;return this.blockUtils.updateDataIntoRowNode(i,t),this.nodeMap.set({id:i.id,node:i,index:e}),this.nodesToRefresh.delete(i),i.__needsRefreshWhenVisible=!1,this.getBlockStartIndex(s)===this.getBlockStartIndex(e)?i:(this.markBlockForVerify(s),i)}}const r=this.blockUtils.createRowNode(this.store.getRowDetails());if(null!=t){const e=this.getPrefixedId(this.store.getIdSequence().next());this.blockUtils.setDataIntoRowNode(r,t,e,void 0),this.serverSideRowModel.setPaused(!0),this.blockUtils.checkOpenByDefault(r),this.serverSideRowModel.setPaused(!1),this.nodeManager.addRowNode(r)}return this.nodeMap.set({id:r.id,node:r,index:e}),i&&i(r),r}getBlockStates(){const e={},t={};this.nodeMap.forEach((i=>{let{node:s,index:o}=i;const n=this.getBlockStartIndex(o);var r;s.stub||s.failedLoad||(e[n]=(null!==(r=e[n])&&void 0!==r?r:0)+1);let l="loaded";s.failedLoad?l="failed":this.lazyBlockLoadingService.isRowLoading(this,n)?l="loading":(this.nodesToRefresh.has(s)||s.stub)&&(l="needsLoading"),t[n]||(t[n]=new Set),t[n].add(l)}));const i={loading:4,failed:3,needsLoading:2,loaded:1},s=this.blockUtils.createNodeIdPrefix(this.store.getParentNode()),o={};return Object.entries(t).forEach((t=>{var n;let[r,l]=t;const a=[...l].sort(((e,t)=>{var s,o;return(null!==(s=i[e])&&void 0!==s?s:0)-(null!==(o=i[t])&&void 0!==o?o:0)}))[0],d=Number(r)/this.getBlockSize(),c=s?"".concat(s,"-").concat(d):String(d);o[c]={blockNumber:d,startRow:Number(r),endRow:Number(r)+this.getBlockSize(),pageStatus:a,loadedRowCount:null!==(n=e[r])&&void 0!==n?n:0}})),o}destroyRowAtIndex(e){const t=this.nodeMap.getBy("index",e);t&&(this.nodeMap.delete(t),this.nodeDisplayIndexMap.delete(t.node.rowIndex),this.nodesToRefresh.size>0?this.removedNodeCache.set(t.node.id,t.node):this.blockUtils.destroyRowNode(t.node),this.nodesToRefresh.delete(t.node))}getSsrmParams(){return this.store.getSsrmParams()}getPrefixedId(e){return this.defaultNodeIdPrefix?this.defaultNodeIdPrefix+"-"+e:e.toString()}markBlockForVerify(e){const[t,i]=this.getBlockBounds(e);this.nodeMap.filter((e=>e.index>=t&&e.index<i)).forEach((e=>{let{node:t}=e;t.__needsRefreshWhenVisible=!0}))}doesNodeMatch(e,t){if(t.stub)return!1;const i=this.getRowId(e);return null===i?t.data===e:t.id===i}purgeStubsOutsideOfViewport(){const e=this.rowRenderer.getFirstVirtualRenderedRow(),t=this.rowRenderer.getLastVirtualRenderedRow(),i=this.getBlockStartIndex(e),[,s]=this.getBlockBounds(t);this.nodeMap.forEach((e=>{this.lazyBlockLoadingService.isRowLoading(this,e.index)||e.node.failedLoad||e.node.stub&&(e.index<i||e.index>s)&&this.destroyRowAtIndex(e.index)}))}getBlocksDistanceFromRow(e,t){const i={};return e.forEach((e=>{let{node:s,index:o}=e;const[n,r]=this.getBlockBounds(o);if(n in i)return;const l=Math.abs(s.rowIndex-t);let a;const d=this.nodeMap.getBy("index",[r-1]);d&&(a=Math.abs(d.node.rowIndex-t));const c=null==a||l<a?l:a;i[n]=c})),Object.entries(i)}purgeExcessRows(){var e;if(this.purgeStubsOutsideOfViewport(),null==this.store.getDisplayIndexEnd()||null==this.storeParams.maxBlocksInCache)return;const t=this.rowRenderer.getFirstVirtualRenderedRow(),i=this.rowRenderer.getLastVirtualRenderedRow(),s=new Set,o=new Set;this.nodeMap.forEach((e=>{let{index:n,node:r}=e;const l=this.getBlockStartIndex(n);s.add(l);r.rowIndex>=t&&r.rowIndex<=i&&o.add(l)}));const n=Math.max(o.size,null!==(e=this.storeParams.maxBlocksInCache)&&void 0!==e?e:0),r=s.size-n;if(r<=0)return;let l=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER;o.forEach((e=>{l>e&&(l=e),a<e&&(a=e)}));const d=this.nodeMap.filter((e=>{let{node:t,index:i}=e;const s=this.getBlockStartIndex(i);return!(s>=l&&s<=a)&&!this.isNodeCached(t)}));if(0===d.length)return;const c=t+(i-t)/2,u=this.getBlocksDistanceFromRow(d,c),h=this.getBlockSize();u.sort(((e,t)=>Math.sign(t[1]-e[1])));for(let p=0;p<Math.min(r,u.length);p++){const e=Number(u[p][0]);for(let t=e;t<e+h;t++){const e=this.nodeMap.getBy("index",t);e&&!this.isNodeCached(e.node)&&this.destroyRowAtIndex(t)}}}isNodeFocused(e){const t=this.focusService.getFocusCellToUseAfterRefresh();if(!t)return!1;if(null!=t.rowPinned)return!1;return t.rowIndex===e.rowIndex}isNodeCached(e){return e.isExpandable()&&e.expanded||this.isNodeFocused(e)}extractDuplicateIds(e){if(null==this.getRowIdFunc)return[];const t=new Set,i=new Set;return e.forEach((e=>{const s=this.getRowId(e);t.has(s)?i.add(s):t.add(s)})),[...i]}onLoadSuccess(e,t,i){if(!this.live)return;const o=i.groupLevelInfo;if(this.store.setStoreInfo(o),null!=this.getRowIdFunc){const o=this.extractDuplicateIds(i.rowData);if(o.length>0){const i=o.join(", ");return(0,s.Brh)("Unable to display rows as duplicate row ids (".concat(i,") were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids.")),void this.onLoadFailed(e,t)}}i.pivotResultFields&&this.serverSideRowModel.generateSecondaryColumns(i.pivotResultFields);const n=this.nodesToRefresh.size>0;if(i.rowData.forEach(((t,i)=>{var s;const o=e+i,n=this.nodeMap.getBy("index",o);if(null===n||void 0===n||null===(s=n.node)||void 0===s||!s.stub)return n&&this.doesNodeMatch(t,n.node)?(this.blockUtils.updateDataIntoRowNode(n.node,t),this.nodesToRefresh.delete(n.node),void(n.node.__needsRefreshWhenVisible=!1)):void this.createRowAtIndex(o,t);this.createRowAtIndex(o,t)})),void 0!=i.rowCount&&-1!==i.rowCount)this.numberOfRows=i.rowCount,this.isLastRowKnown=!0;else if(t>i.rowData.length)this.numberOfRows=e+i.rowData.length,this.isLastRowKnown=!0;else if(!this.isLastRowKnown){const t=e+i.rowData.length+1;t>this.numberOfRows&&(this.numberOfRows=t)}if(this.isLastRowKnown){this.nodeMap.filter((e=>e.index>=this.numberOfRows)).forEach((e=>this.destroyRowAtIndex(e.index)))}this.fireStoreUpdatedEvent();const r=0===this.nodesToRefresh.size;n&&r&&this.fireRefreshFinishedEvent()}fireRefreshFinishedEvent(){0===this.nodesToRefresh.size&&(this.removedNodeCache.forEach((e=>{this.blockUtils.destroyRowNode(e)})),this.removedNodeCache=new Map,this.store.fireRefreshFinishedEvent())}isStoreFullyLoaded(){const e=this.isLastRowKnown,t=this.nodeMap.getSize()===this.numberOfRows;if(!e||!t)return;if(this.nodesToRefresh.size>0)return;let i=-1;return null==this.nodeMap.find((e=>(i+=1,e.index!==i||(!!e.node.__needsRefreshWhenVisible||!!e.node.stub))))}isLastRowIndexKnown(){return this.isLastRowKnown}onLoadFailed(e,t){if(!this.live)return;const i=this.nodesToRefresh.size>0;for(let n=e;n<e+t&&n<this.getRowCount();n++){var s;let{node:e}=null!==(s=this.nodeMap.getBy("index",n))&&void 0!==s?s:{};e&&this.nodesToRefresh.delete(e),e&&e.stub||(e&&!e.stub&&this.destroyRowAtIndex(n),e=this.createRowAtIndex(n)),e.__needsRefreshWhenVisible=!1,e.failedLoad=!0}const o=0===this.nodesToRefresh.size;i&&o&&this.fireRefreshFinishedEvent(),this.fireStoreUpdatedEvent()}markNodesForRefresh(){this.nodeMap.forEach((e=>{e.node.stub&&!e.node.failedLoad||this.nodesToRefresh.add(e.node)})),this.lazyBlockLoadingService.queueLoadCheck(),this.isLastRowKnown&&0===this.numberOfRows&&(this.numberOfRows=1,this.isLastRowKnown=!1,this.fireStoreUpdatedEvent())}isNodeInCache(e){return!!this.nodeMap.getBy("id",e)}fireStoreUpdatedEvent(){this.live&&this.store.fireStoreUpdatedEvent()}getRowId(e){if(null==this.getRowIdFunc)return null;const{level:t}=this.store.getRowDetails(),i=this.store.getParentNode().getGroupKeys();return this.getRowIdFunc({data:e,parentKeys:i.length>0?i:void 0,level:t})}getOrderedNodeMap(){const e={};return this.nodeMap.forEach((t=>e[t.index]=t)),e}clearDisplayIndexes(){this.nodeDisplayIndexMap.clear()}clientSideSortRows(){const e=this.sortController.getSortOptions();if(!e.some((e=>null!=e.sort)))return;const t=new Array(this.nodeMap.getSize());this.nodeMap.forEach((e=>t[e.index]=e.node)),this.nodeMap.clear();this.rowNodeSorter.doFullSort(t,e).forEach(((e,t)=>{this.nodeMap.set({id:e.id,node:e,index:t})}))}updateRowNodes(e){if(null==this.getRowIdFunc)throw new Error("AG Grid: Transactions can only be applied when row ids are supplied.");const t=[];return e.forEach((e=>{const i=this.getRowId(e),s=this.nodeMap.getBy("id",i);s&&(this.blockUtils.updateDataIntoRowNode(s.node,e),t.push(s.node))})),t}insertRowNodes(e,t){const i=this.store.getRowCount()-(this.store.getParentNode().sibling?1:0),s=null==t&&this.isLastRowKnown?i:t;if(null==s||i<s)return[];if(null==this.getRowIdFunc)throw new Error("AG Grid: Transactions can only be applied when row ids are supplied.");const o={};e.forEach((e=>{const t=this.getRowId(e);t&&this.isNodeInCache(t)||(o[t]=e)}));const n=Object.values(o),r=n.length;if(0===r)return[];const l=this.nodeMap.filter((e=>e.index>=s));return l.forEach((e=>this.nodeMap.delete(e))),l.forEach((e=>{this.nodeMap.set({node:e.node,index:e.index+r,id:e.id})})),this.numberOfRows+=r,n.map(((e,t)=>this.createRowAtIndex(s+t,e)))}removeRowNodes(e){if(null==this.getRowIdFunc)throw new Error("AG Grid: Transactions can only be applied when row ids are supplied.");const t=[],i=[];let s=0;const o=[...e],n=this.getOrderedNodeMap();let r=-1;for(const l in n){r+=1;const e=n[l],a=o.findIndex((t=>t===e.id));if(-1!==a){o.splice(a,1),this.destroyRowAtIndex(Number(l)),t.push(e.node),s+=1;continue}if(0===s)continue;const d=Number(l);r!==d&&i.push(e.node),this.nodeMap.delete(n[l]),this.nodeMap.set({id:e.id,node:e.node,index:d-s})}return this.numberOfRows-=this.isLastRowIndexKnown()?e.length:s,o.length>0&&i.length>0&&(i.forEach((e=>e.__needsRefreshWhenVisible=!0)),this.lazyBlockLoadingService.queueLoadCheck()),t}getBlockSize(){return this.storeParams.cacheBlockSize||h.DEFAULT_BLOCK_SIZE}getBlockStartIndex(e){return e-e%this.getBlockSize()}getBlockBounds(e){const t=this.getBlockStartIndex(e);return[t,t+this.getBlockSize()]}},m=class extends s.AS9{constructor(e,t,i){super(),this.idSequence=new s.at1,this.ssrmParams=e,this.parentRowNode=i,this.storeParams=t,this.level=i.level+1,this.group=!!e.rowGroupCols&&this.level<e.rowGroupCols.length,this.leafGroup=!!e.rowGroupCols&&this.level===e.rowGroupCols.length-1,this.info={}}wireBeans(e){this.blockUtils=e.ssrmBlockUtils,this.storeUtils=e.ssrmStoreUtils,this.selectionService=e.selectionService,this.funcColsService=e.funcColsService}postConstruct(){let e=1;var t;0===this.level&&(e=null!==(t=this.storeUtils.getServerSideInitialRowCount())&&void 0!==t?t:1,this.eventService.dispatchEventOnce({type:"rowCountReady"}));this.cache=this.createManagedBean(new g(this,e,this.storeParams));if(!this.gos.get("treeData")&&this.group){const e=this.ssrmParams.rowGroupCols[this.level];this.groupField=e.field,this.rowGroupColumn=this.funcColsService.getRowGroupColumns()[this.level]}}destroy(){this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.destroyBean(this.cache),super.destroy()}applyRowData(e,t,i){this.cache.onLoadSuccess(t,i,e)}applyTransaction(e){var t,i,o,n,r;const l=this.gos.getRowIdCallback();if(!l)return(0,s.Brh)("getRowId callback must be implemented for transactions to work. Transaction was ignored."),{status:s.Qk6.Cancelled};const a=this.gos.getCallback("isApplyServerSideTransaction");if(a){if(!a({transaction:e,parentNode:this.parentRowNode,groupLevelInfo:this.info}))return{status:s.Qk6.Cancelled}}const d=this.cache.isStoreFullyLoaded();let c,u,h;if(null!==(t=e.update)&&void 0!==t&&t.length&&(c=this.cache.updateRowNodes(e.update)),null!==(i=e.add)&&void 0!==i&&i.length){let t=e.addIndex;null!=t&&t<0&&(t=void 0),u=this.cache.insertRowNodes(e.add,t)}if(null!==(o=e.remove)&&void 0!==o&&o.length){const t=e.remove.map((e=>l({level:this.level,parentKeys:this.parentRowNode.getGroupKeys(),data:e}))),i=[...new Set(t)];h=this.cache.removeRowNodes(i)}const p=this.gos.get("serverSideEnableClientSideSort"),g=(null===(n=c)||void 0===n?void 0:n.length)||(null===(r=u)||void 0===r?void 0:r.length);return d&&p&&g&&this.cache.clientSideSortRows(),this.updateSelectionAfterTransaction(c,h),{status:s.Qk6.Applied,update:c,add:u,remove:h}}updateSelectionAfterTransaction(e,t){const i=[];null===e||void 0===e||e.forEach((e=>{e.isSelected()&&!e.selectable&&i.push(e)})),null===t||void 0===t||t.forEach((e=>{e.isSelected()&&i.push(e)})),i.length&&this.selectionService.setNodesSelected({newValue:!1,clearSelection:!1,nodes:i,source:"rowDataChanged"})}clearDisplayIndexes(){this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.cache.getNodes().forEach((e=>this.blockUtils.clearDisplayIndex(e.node))),this.parentRowNode.sibling&&this.blockUtils.clearDisplayIndex(this.parentRowNode.sibling),this.cache.clearDisplayIndexes()}getDisplayIndexStart(){return this.displayIndexStart}getDisplayIndexEnd(){return this.displayIndexEnd}getRowCount(){return this.parentRowNode.sibling?this.cache.getRowCount()+1:this.cache.getRowCount()}setRowCount(e,t){this.cache.setRowCount(e,t)}isDisplayIndexInStore(e){return 0!==this.cache.getRowCount()&&(this.displayIndexStart<=e&&e<this.getDisplayIndexEnd())}setDisplayIndexes(e,t){this.displayIndexStart=e.peek(),this.topPx=t.value;const i=this.parentRowNode.level>-1&&this.gos.getGroupTotalRowCallback()({node:this.parentRowNode});i||this.parentRowNode.destroyFooter(),"top"===i&&(this.parentRowNode.createFooter(),this.blockUtils.setDisplayIndex(this.parentRowNode.sibling,e,t)),this.cache.setDisplayIndexes(e,t),"bottom"===i&&(this.parentRowNode.createFooter(),this.blockUtils.setDisplayIndex(this.parentRowNode.sibling,e,t)),this.displayIndexEnd=e.peek(),this.heightPx=t.value-this.topPx}forEachStoreDeep(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new s.at1;e(this,t.next()),this.cache.getNodes().forEach((i=>{const s=i.node.childStore;s&&s.forEachStoreDeep(e,t)}))}forEachNodeDeep(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new s.at1;this.cache.getNodes().forEach((i=>{e(i.node,t.next());const s=i.node.childStore;s&&s.forEachNodeDeep(e,t)}))}forEachNodeDeepAfterFilterAndSort(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new s.at1,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=this.parentRowNode.level>-1&&this.gos.getGroupTotalRowCallback()({node:this.parentRowNode});"top"===o&&e(this.parentRowNode.sibling,t.next());const n=this.cache.getOrderedNodeMap();for(const s in n){const o=n[s];e(o.node,t.next());const r=o.node.childStore;r&&r.forEachNodeDeepAfterFilterAndSort(e,t,i)}"bottom"===o&&e(this.parentRowNode.sibling,t.next())}retryLoads(){this.cache.getNodes().forEach((e=>{let{node:t}=e;t.failedLoad&&(t.failedLoad=!1,t.__needsRefreshWhenVisible=!0,t.stub=!0)})),this.forEachChildStoreShallow((e=>e.retryLoads())),this.fireStoreUpdatedEvent()}getRowUsingDisplayIndex(e){return this.parentRowNode.sibling&&e===this.parentRowNode.sibling.rowIndex?this.parentRowNode.sibling:this.cache.getRowByDisplayIndex(e)}getRowBounds(e){var t;if(!this.isDisplayIndexInStore(e))return null;const i=this.cache.getNodeCachedByDisplayIndex(e);if(i){const t=this.blockUtils.extractRowBounds(i,e);if(t)return t}const{previousNode:s,nextNode:o}=null!==(t=this.cache.getSurroundingNodesByDisplayIndex(e))&&void 0!==t?t:{};if(s){const t=this.blockUtils.extractRowBounds(s.node,e);if(null!=t)return t}const n=this.gos.getRowHeightAsNumber();if(o){const t=(o.node.rowIndex-e)*n;return{rowTop:o.node.rowTop-t,rowHeight:n}}return{rowTop:this.topPx+this.heightPx-(this.getDisplayIndexEnd()-e)*n,rowHeight:n}}isPixelInRange(e){return e>=this.topPx&&e<this.topPx+this.heightPx}getRowIndexAtPixel(e){if(e<this.topPx)return this.getDisplayIndexStart();if(e>=this.topPx+this.heightPx)return this.getDisplayIndexEnd()-1;if(this.parentRowNode.sibling&&e>this.parentRowNode.sibling.rowTop&&e<this.parentRowNode.sibling.rowTop+this.parentRowNode.sibling.rowHeight)return this.parentRowNode.sibling.rowIndex;let t=Number.MAX_SAFE_INTEGER,i=null,s=Number.MAX_SAFE_INTEGER,o=null;if(this.cache.getNodes().forEach((n=>{let{node:r}=n;const l=Math.abs(e-r.rowTop);r.rowTop<e?l<t&&(t=l,i=r):l<s&&(s=l,o=r)})),i){const t=this.blockUtils.getIndexAtPixel(i,e);if(null!=t)return t}const n=this.gos.getRowHeightAsNumber();if(o){const t=o.rowTop,i=Math.ceil((t-e)/n);return o.rowIndex-i}const r=this.topPx+this.heightPx,l=Math.floor((r-e)/n);return this.getDisplayIndexEnd()-l}getChildStore(e){return this.storeUtils.getChildStore(e,this,(e=>{const t=this.cache.getNodes().find((t=>t.node.key==e));return t?t.node:null}))}forEachChildStoreShallow(e){this.cache.getNodes().forEach((t=>{let{node:i}=t;i.childStore&&e(i.childStore)}))}refreshAfterSort(e){if(this.storeUtils.isServerSideSortAllLevels()||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e)){const e=this.cache.isStoreFullyLoaded(),t=this.gos.get("serverSideEnableClientSideSort");if(!(e&&t)){const e=this.cache.getRowCount();return this.destroyBean(this.cache),void(this.cache=this.createManagedBean(new g(this,e,this.storeParams)))}this.cache.clientSideSortRows()}this.forEachChildStoreShallow((t=>t.refreshAfterSort(e)))}refreshAfterFilter(e){!this.storeUtils.isServerSideOnlyRefreshFilteredGroups()||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,e)?this.refreshStore(!0):this.forEachChildStoreShallow((t=>t.refreshAfterFilter(e)))}refreshStore(e){if(e)return this.destroyBean(this.cache),this.cache=this.createManagedBean(new g(this,1,this.storeParams)),void this.fireStoreUpdatedEvent();this.cache.markNodesForRefresh()}getTopLevelRowDisplayedIndex(e){const t=this.cache.getDisplayIndexFromStoreIndex(e);return null!==t&&void 0!==t?t:e}isLastRowIndexKnown(){return this.cache.isLastRowIndexKnown()}getRowNodesInRange(e,t){return this.cache.getNodes().filter((i=>{let{node:s}=i;return s.rowIndex>=e.rowIndex&&s.rowIndex<=t.rowIndex})).map((e=>{let{node:t}=e;return t}))}addStoreStates(e){e.push({suppressInfiniteScroll:!1,route:this.parentRowNode.getGroupKeys(),rowCount:this.getRowCount(),lastRowIndexKnown:this.isLastRowIndexKnown(),info:this.info,maxBlocksInCache:this.storeParams.maxBlocksInCache,cacheBlockSize:this.storeParams.cacheBlockSize}),this.forEachChildStoreShallow((t=>t.addStoreStates(e)))}getIdSequence(){return this.idSequence}getParentNode(){return this.parentRowNode}getRowDetails(){return{field:this.groupField,group:this.group,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn}}getSsrmParams(){return this.ssrmParams}setStoreInfo(e){e&&Object.assign(this.info,e)}fireStoreUpdatedEvent(){this.eventService.dispatchEvent({type:"storeUpdated"})}fireRefreshFinishedEvent(){const e={type:"storeRefreshed",route:this.parentRowNode.getRoute()};this.eventService.dispatchEvent(e)}getBlockStates(){return this.cache.getBlockStates()}getStoreBounds(){return{topPx:this.topPx,heightPx:this.heightPx}}getCache(){return this.cache}},v=class extends s.AS9{constructor(){super(...arguments),this.beanName="rowModel",this.onRowHeightChanged_debounced=(0,s.eTz)(this.onRowHeightChanged.bind(this),100),this.pauseStoreUpdateListening=!1,this.started=!1,this.managingPivotResultColumns=!1}wireBeans(e){this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.pivotResultColsService=e.pivotResultColsService,this.funcColsService=e.funcColsService,this.filterManager=e.filterManager,this.sortController=e.sortController,this.rowRenderer=e.rowRenderer,this.nodeManager=e.ssrmNodeManager,this.storeFactory=e.ssrmStoreFactory,this.beans=e,this.pivotColDefService=e.pivotColDefService}ensureRowHeightsValid(){return!1}start(){this.started=!0,this.updateDatasource()}destroyDatasource(){this.datasource&&(this.datasource.destroy&&this.datasource.destroy(),this.rowRenderer.datasourceChanged(),this.datasource=void 0)}postConstruct(){const e=this.resetRootStore.bind(this);this.addManagedEventListeners({newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.onStoreUpdated.bind(this),columnValueChanged:e,columnPivotChanged:e,columnRowGroupChanged:e,columnPivotModeChanged:e}),this.addManagedPropertyListeners(["masterDetail","treeData","removePivotHeaderRowWhenSingleValueColumn","suppressServerSideInfiniteScroll","cacheBlockSize"],e),this.addManagedPropertyListener("rowHeight",(()=>this.resetRowHeights())),this.verifyProps(),this.addManagedPropertyListener("serverSideDatasource",(()=>this.updateDatasource()))}updateDatasource(){const e=this.gos.get("serverSideDatasource");e&&this.setDatasource(e)}verifyProps(){this.gos.exists("initialGroupOrderComparator")&&(0,s.Brh)("initialGroupOrderComparator cannot be used with Server Side Row Model."),this.gos.isRowSelection()&&!this.gos.exists("getRowId")&&(0,s.Brh)("getRowId callback must be provided for Server Side Row Model selection to work correctly.")}setDatasource(e){this.started&&(this.destroyDatasource(),this.datasource=e,this.resetRootStore())}applyRowData(e,t,i){const s=this.getRootStore();if(!s)return;const o=s.getChildStore(i);o&&(o instanceof m?o.applyRowData(e,t,e.rowData.length):o instanceof u&&o.processServerResult(e))}isLastRowIndexKnown(){const e=this.getRootStore();return!!e&&e.isLastRowIndexKnown()}onColumnEverything(){if(!this.storeParams)return void this.resetRootStore();const e=this.columnsToValueObjects(this.funcColsService.getRowGroupColumns()),t=this.columnsToValueObjects(this.funcColsService.getValueColumns()),i=this.columnsToValueObjects(this.funcColsService.getPivotColumns()),o=e=>{const t={};e.oldCols.forEach((e=>t[e.id]=e));const i=e.newCols.every((e=>{const i=t[e.id];return i&&delete t[e.id],i&&i.field===e.field&&i.aggFunc===e.aggFunc})),s=!e.allowRemovedColumns&&!!Object.values(t).length;return i&&!s},n=!(0,s.jHe)(this.storeParams.sortModel,this.sortController.getSortModel()),r=!o({oldCols:this.storeParams.rowGroupCols,newCols:e}),l=!o({oldCols:this.storeParams.pivotCols,newCols:i}),a=!(null===e||void 0===e||!e.length)&&!o({oldCols:this.storeParams.valueCols,newCols:t,allowRemovedColumns:!0});if(n||r||l||a)this.resetRootStore();else{const e=this.createStoreParams();this.storeParams.rowGroupCols=e.rowGroupCols,this.storeParams.pivotCols=e.pivotCols,this.storeParams.valueCols=e.valueCols}}destroyRootStore(){this.rootNode&&this.rootNode.childStore&&(this.rootNode.childStore=this.destroyBean(this.rootNode.childStore),this.nodeManager.clear())}refreshAfterSort(e,t){this.storeParams&&(this.storeParams.sortModel=e);const i=this.getRootStore();i&&(i.refreshAfterSort(t),this.onStoreUpdated())}generateSecondaryColumns(e){if(!this.pivotColDefService)return void s.O3h.__assertRegistered(s.GXE.RowGroupingModule,"pivotResultFields",this.gridId);const t=this.pivotColDefService.createColDefsFromFields(e);this.managingPivotResultColumns=!0,this.pivotResultColsService.setPivotResultCols(t,"rowModelUpdated")}resetRowHeights(){const e=this.resetRowHeightsForAllRowNodes(),t=this.gos.getRowHeightForNode(this.rootNode);if(this.rootNode.setRowHeight(t.height,t.estimated),this.rootNode.sibling){const e=this.gos.getRowHeightForNode(this.rootNode.sibling);this.rootNode.sibling.setRowHeight(e.height,e.estimated)}e&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode((t=>{const i=this.gos.getRowHeightForNode(t);t.setRowHeight(i.height,i.estimated);const s=t.detailNode;if(s){const e=this.gos.getRowHeightForNode(s);s.setRowHeight(e.height,e.estimated)}if(t.sibling){const e=this.gos.getRowHeightForNode(t.sibling);s.setRowHeight(e.height,e.estimated)}e=!0})),e}resetRootStore(){this.destroyRootStore(),this.rootNode=new s.Fxk(this.beans),this.rootNode.group=!0,this.rootNode.level=-1,this.datasource&&(this.storeParams=this.createStoreParams(),this.rootNode.childStore=this.createBean(this.storeFactory.createStore(this.storeParams,this.rootNode)),this.updateRowIndexesAndBounds()),this.managingPivotResultColumns&&(this.pivotResultColsService.setPivotResultCols(null,"api"),this.managingPivotResultColumns=!1),this.dispatchModelUpdated(!0)}columnsToValueObjects(e){return e.map((e=>({id:e.getId(),aggFunc:e.getAggFunc(),displayName:this.columnNameService.getDisplayNameForColumn(e,"model"),field:e.getColDef().field})))}createStoreParams(){var e,t,i,o;const n=this.columnsToValueObjects(this.funcColsService.getRowGroupColumns()),r=this.columnsToValueObjects(this.funcColsService.getValueColumns()),l=this.columnsToValueObjects(this.funcColsService.getPivotColumns()),a=this.gos.isGetRowHeightFunction();return{valueCols:r,rowGroupCols:n,pivotCols:l,pivotMode:this.columnModel.isPivotMode(),filterModel:null!==(e=this.filterManager)&&void 0!==e&&e.isAdvancedFilterEnabled()?null===(t=this.filterManager)||void 0===t?void 0:t.getAdvancedFilterModel():null!==(i=null===(o=this.filterManager)||void 0===o?void 0:o.getFilterModel())&&void 0!==i?i:{},sortModel:this.sortController.getSortModel(),datasource:this.datasource,lastAccessedSequence:new s.at1,dynamicRowHeight:a}}getParams(){return this.storeParams}dispatchModelUpdated(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t={type:"modelUpdated",animate:!e,keepRenderedRows:!e,newPage:!1,newData:!1};this.eventService.dispatchEvent(t)}onStoreUpdated(){this.pauseStoreUpdateListening||(this.updateRowIndexesAndBounds(),this.dispatchModelUpdated())}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}onRowHeightChanged(){this.updateRowIndexesAndBounds(),this.dispatchModelUpdated()}updateRowIndexesAndBounds(){const e=this.getRootStore();e&&e.setDisplayIndexes(new s.at1,{value:0})}retryLoads(){const e=this.getRootStore();e&&(e.retryLoads(),this.onStoreUpdated())}getRow(e){const t=this.getRootStore();if(t)return t.getRowUsingDisplayIndex(e)}setPaused(e){this.pauseStoreUpdateListening=e}expandAll(e){this.pauseStoreUpdateListening=!0,this.forEachNode((t=>{t.stub||t.hasChildren()&&t.setExpanded(e)})),this.pauseStoreUpdateListening=!1,this.onStoreUpdated()}refreshAfterFilter(e,t){this.storeParams&&(this.storeParams.filterModel=e);const i=this.getRootStore();i&&(i.refreshAfterFilter(t),this.onStoreUpdated())}getRootStore(){if(this.rootNode&&this.rootNode.childStore)return this.rootNode.childStore}getRowCount(){const e=this.getRootStore();return e?e.getDisplayIndexEnd():0}getTopLevelRowCount(){const e=this.getRootStore();return e?e.getRowCount():1}getTopLevelRowDisplayedIndex(e){const t=this.getRootStore();return t?t.getTopLevelRowDisplayedIndex(e):e}getRowBounds(e){const t=this.getRootStore();if(!t){return{rowTop:0,rowHeight:this.gos.getRowHeightAsNumber()}}return t.getRowBounds(e)}getBlockStates(){const e=this.getRootStore();if(!e)return;const t={};return e.forEachStoreDeep((e=>{if(e instanceof u){const{id:i,state:s}=e.getBlockStateJson();t[i]=s}else{if(!(e instanceof m))throw new Error("AG Grid: Unsupported store type");Object.entries(e.getBlockStates()).forEach((e=>{let[i,s]=e;t[i]=s}))}})),t}getRowIndexAtPixel(e){const t=this.getRootStore();return e<=0||!t?0:t.getRowIndexAtPixel(e)}isEmpty(){return!1}isRowsToRender(){return null!=this.getRootStore()&&this.getRowCount()>0}getType(){return"serverSide"}forEachNode(e){const t=this.getRootStore();t&&t.forEachNodeDeep(e)}forEachNodeAfterFilterAndSort(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.getRootStore();i&&i.forEachNodeDeepAfterFilterAndSort(e,void 0,t)}executeOnStore(e,t){if(!this.started)return!1;const i=this.getRootStore();if(!i)return!0;const s=i.getChildStore(e);return s&&t(s),!0}refreshStore(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.route?e.route:[];this.executeOnStore(t,(t=>t.refreshStore(1==e.purge)))}getStoreState(){const e=[],t=this.getRootStore();return t&&t.addStoreStates(e),e}getNodesInRangeForSelection(e,t){const i=e.rowIndex,s=t.rowIndex;if(null===i&&null===s)return[];if(null===s)return e?[e]:[];if(null===i)return[t];const o=[],[n,r]=[i,s].sort(((e,t)=>e-t));return this.forEachNode((e=>{const t=e.rowIndex;null==t||e.stub||t>=n&&t<=r&&o.push(e)})),o.length!==r-n+1?e?[e,t]:[]:o}getRowNode(e){let t;return this.forEachNode((i=>{i.id===e&&(t=i),i.detailNode&&i.detailNode.id===e&&(t=i.detailNode)})),t}isRowPresent(e){return!!this.getRowNode(e.id)}setRowCount(e,t){const i=this.getRootStore();if(i){if(i instanceof m)return void i.setRowCount(e,t);(0,s.AHw)("Infinite scrolling must be enabled in order to set the row count.")}}destroy(){this.destroyDatasource(),this.destroyRootStore(),super.destroy()}};var f=class extends s.rYX{constructor(){super(...arguments),this.beanName="expansionService",this.queuedRowIds=new Set}wireBeans(e){super.wireBeans(e),this.serverSideRowModel=e.rowModel}postConstruct(){super.postConstruct(),this.addManagedEventListeners({columnRowGroupChanged:()=>{this.queuedRowIds.clear()}})}checkOpenByDefault(e){if(!e.isExpandable())return;if(this.queuedRowIds.has(e.id))return this.queuedRowIds.delete(e.id),void e.setExpanded(!0);const t=this.gos.getCallback("isServerSideGroupOpenByDefault");if(!t)return;t({data:e.data,rowNode:e})&&e.setExpanded(!0)}expandRows(e){e.forEach((e=>{const t=this.serverSideRowModel.getRowNode(e);t?t.setExpanded(!0):this.queuedRowIds.add(e)}))}expandAll(e){this.serverSideRowModel.expandAll(e)}onGroupExpandedOrCollapsed(){}},C=class{constructor(){this.root=null,this.end=null,this.cachedRange=[]}init(e){this.rowModel=e}reset(){this.root=null,this.end=null,this.cachedRange.length=0}setRoot(e){this.root=e,this.end=null,this.cachedRange.length=0}setEndRange(e){this.end=e,this.cachedRange.length=0}getRoot(){return this.root}getRange(){if(0===this.cachedRange.length){const e=this.root?this.rowModel.getRowNode(this.root):void 0,t=this.end?this.rowModel.getRowNode(this.end):void 0;if(null==e||null==t)return this.cachedRange;this.cachedRange=this.rowModel.getNodesInRangeForSelection(e,t)}return this.cachedRange}isInRange(e){return null!==this.root&&this.getRange().some((t=>t.id===e))}truncate(e){const t=this.getRange();if(0===t.length)return{keep:[],discard:[]};const i=t[0].id===this.root,s=t.findIndex((t=>t.id===e));if(s>-1){const o=t.slice(0,s),n=t.slice(s+1);return this.setEndRange(e),i?{keep:o,discard:n}:{keep:n,discard:o}}return{keep:t,discard:[]}}extend(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==this.root){const i=this.getRange().slice(),s=this.rowModel.getRowNode(e);return s&&(t&&s.depthFirstSearch((e=>!e.group&&i.push(e))),i.push(s)),this.setRoot(e),{keep:i,discard:[]}}const i=this.rowModel.getRowNode(e),s=this.rowModel.getRowNode(this.root);if(null==i)return{keep:this.getRange(),discard:[]};if(null==s)return{keep:this.getRange().concat(i),discard:[]};if(this.rowModel.getNodesInRangeForSelection(s,i).find((e=>e.id===this.end)))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{const t=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:t}}}},w=class extends s.AS9{constructor(){super(...arguments),this.selectionCtx=new C,this.selectedState={selectAll:!1,toggledNodes:new Set},this.selectAllUsed=!1,this.selectedNodes={}}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.selectionCtx.init(this.rowModel),this.rowSelection=this.gos.get("rowSelection"),this.addManagedPropertyListener("rowSelection",(e=>{this.rowSelection=e.currentValue}))}getSelectedState(){return{selectAll:this.selectedState.selectAll,toggledNodes:[...this.selectedState.toggledNodes]}}setSelectedState(e){const t={selectAll:!1,toggledNodes:new Set};"object"===typeof e?"selectAll"in e&&"boolean"===typeof e.selectAll?(t.selectAll=e.selectAll,"toggledNodes"in e&&Array.isArray(e.toggledNodes)?(e.toggledNodes.forEach((e=>{"string"===typeof e?t.toggledNodes.add(e):(0,s.Brh)("Provided ids must be of string type. Invalid id provided: ".concat(e))})),this.selectedState=t):(0,s.Brh)("`toggledNodes` must be an array of string ids.")):(0,s.AHw)("Select all status should be of boolean type."):(0,s.AHw)("The provided selection state should be an object.")}deleteSelectionStateFromParent(e,t){if(0===this.selectedState.toggledNodes.size)return!1;let i=!1;return t.forEach((e=>{this.selectedState.toggledNodes.delete(e)&&(i=!0)})),i}overrideSelectionValue(e,t){var i;if(!(0,s.pPQ)(t))return e;const o=this.selectionCtx.getRoot(),n=o?this.rowModel.getRowNode(o):null;return!n||null!==(i=n.isSelected())&&void 0!==i&&i}setNodesSelected(e){var t=this;const{nodes:i,clearSelection:o,newValue:n,rangeSelect:r,source:l}=e;if(0===i.length)return 0;const a=o&&n&&!r;if("multiple"!==this.rowSelection||a){if(i.length>1)throw new Error("AG Grid: cannot select multiple rows when rowSelection is set to 'single'");const e=i[0];return n&&e.selectable?(this.selectedNodes={[e.id]:e},this.selectedState={selectAll:!1,toggledNodes:new Set([e.id])}):(this.selectedNodes={},this.selectedState={selectAll:!1,toggledNodes:new Set}),e.selectable&&this.selectionCtx.setRoot(e.id),1}const d=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;i&&e.selectable?t.selectedNodes[e.id]=e:delete t.selectedNodes[e.id];i===t.selectedState.selectAll||!e.selectable?t.selectedState.toggledNodes.delete(e.id):t.selectedState.toggledNodes.add(e.id)};if(r){if(i.length>1)throw new Error("AG Grid: cannot select multiple rows when using rangeSelect");const e=i[0],t=this.overrideSelectionValue(n,l);if(this.selectionCtx.isInRange(e.id)){const i=this.selectionCtx.truncate(e.id);t&&i.discard.forEach((e=>d(e,!1))),i.keep.forEach((e=>d(e,t)))}else{if(this.selectionCtx.getRoot()!==e.id){const i=this.selectionCtx.extend(e.id);t&&i.discard.forEach((e=>d(e,!1))),i.keep.forEach((e=>d(e,t)))}}return 1}return i.forEach((e=>d(e))),this.selectionCtx.setRoot((0,s._O9)(i).id),1}processNewRow(e){this.selectedNodes[e.id]&&(this.selectedNodes[e.id]=e)}isNodeSelected(e){const t=this.selectedState.toggledNodes.has(e.id);return this.selectedState.selectAll?!t:t}getSelectedNodes(){return this.selectAllUsed&&(0,s.Brh)("getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model.\n                Use `api.getServerSideSelectionState()` instead."),Object.values(this.selectedNodes)}getSelectedRows(){return this.getSelectedNodes().map((e=>e.data))}getSelectionCount(){return this.selectedState.selectAll?-1:this.selectedState.toggledNodes.size}clearOtherNodes(e,t){const i=this.selectedState.selectAll?1:this.selectedState.toggledNodes.size-1;this.selectedState={selectAll:!1,toggledNodes:new Set([e.id])},this.rowModel.forEachNode((i=>{i!==e&&i.selectThisNode(!1,void 0,t)}));const s={type:"selectionChanged",source:t};return this.eventService.dispatchEvent(s),i}isEmpty(){var e;return!this.selectedState.selectAll&&!(null!==(e=this.selectedState.toggledNodes)&&void 0!==e&&e.size)}selectAllRowNodes(){this.selectedState={selectAll:!0,toggledNodes:new Set},this.selectedNodes={},this.selectAllUsed=!0,this.selectionCtx.reset()}deselectAllRowNodes(){this.selectedState={selectAll:!1,toggledNodes:new Set},this.selectedNodes={},this.selectionCtx.reset()}getSelectAllState(){return this.selectedState.selectAll?!(this.selectedState.toggledNodes.size>0)||null:this.selectedState.toggledNodes.size>0&&null}},S=class extends s.AS9{constructor(){super(...arguments),this.selectionCtx=new C,this.selectedState={selectAllChildren:!1,toggledNodes:new Map}}wireBeans(e){this.rowModel=e.rowModel,this.funcColsService=e.funcColsService,this.filterManager=e.filterManager,this.selectionService=e.selectionService}postConstruct(){this.addManagedEventListeners({modelUpdated:()=>this.removeRedundantState(),columnRowGroupChanged:()=>this.selectionService.reset("rowGroupChanged")}),this.selectionCtx.init(this.rowModel)}getSelectedState(){const e=this.gos.get("treeData"),t=(i,s,o)=>{const n={nodeId:o};if((e||s<=this.funcColsService.getRowGroupColumns().length)&&(n.selectAllChildren=i.selectAllChildren),i.toggledNodes.size){const e=[];i.toggledNodes.forEach(((i,o)=>{const n=t(i,s+1,o);e.push(n)})),n.toggledNodes=e}return n};return t(this.selectedState,0)}setSelectedState(e){const t=(e,i)=>{var s,o;if("object"!==typeof e)throw new Error("AG Grid: Each provided state object must be an object.");if("selectAllChildren"in e&&"boolean"!==typeof e.selectAllChildren)throw new Error("AG Grid: `selectAllChildren` must be a boolean value or undefined.");if("toggledNodes"in e){if(!Array.isArray(e.toggledNodes))throw new Error("AG Grid: `toggledNodes` must be an array.");if(!e.toggledNodes.every((e=>"object"===typeof e&&"nodeId"in e&&"string"===typeof e.nodeId)))throw new Error("AG Grid: Every `toggledNode` requires an associated string id.")}const n=null!==(s=e.selectAllChildren)&&void 0!==s?s:!i,r=null===(o=e.toggledNodes)||void 0===o?void 0:o.map((e=>[e.nodeId,t(e,n)]));if(null===r||void 0===r?void 0:r.some((e=>{let[,t]=e;return n===t.selectAllChildren&&0===t.toggledNodes.size})))throw new Error("\n                    AG Grid: AG Grid: Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule.\n                    Please rebuild the selection state and reapply it.\n                ");return{selectAllChildren:n,toggledNodes:new Map(r)}};try{this.selectedState=t(e,!!e.selectAllChildren)}catch(i){(0,s.AHw)(i.message)}}deleteSelectionStateFromParent(e,t){let i=this.selectedState;const s=[...e];for(;i&&s.length;)i=i.toggledNodes.get(s.pop());if(!i)return!1;let o=!1;return t.forEach((e=>{var t;null!==(t=i)&&void 0!==t&&t.toggledNodes.delete(e)&&(o=!0)})),o&&this.removeRedundantState(),o}overrideSelectionValue(e,t){var i;if(!(0,s.pPQ)(t))return e;const o=this.selectionCtx.getRoot(),n=o?this.rowModel.getRowNode(o):null;return!n||null!==(i=n.isSelected())&&void 0!==i&&i}setNodesSelected(e){let{nodes:t,newValue:i,rangeSelect:o,clearSelection:n,source:r}=e;if(0===t.length)return 0;if(o){if(t.length>1)throw new Error("AG Grid: cannot select multiple rows when using rangeSelect");const e=t[0],s=this.overrideSelectionValue(i,r);if(this.selectionCtx.isInRange(e.id)){const t=this.selectionCtx.truncate(e.id);return s&&this.selectRange(t.discard,!1),this.selectRange(t.keep,s),1}if(this.selectionCtx.getRoot()!==e.id){const t=this.selectionCtx.extend(e.id,!0);return s&&this.selectRange(t.discard,!1),this.selectRange(t.keep,s),1}return 1}const l=n&&i&&!o;if("multiple"!==this.gos.get("rowSelection")||l){if(t.length>1)throw new Error("AG Grid: cannot select multiple rows when rowSelection is set to 'single'");this.deselectAllRowNodes()}return t.forEach((e=>{const t=this.getRouteToNode(e);this.recursivelySelectNode(t,this.selectedState,i)})),this.removeRedundantState(),this.selectionCtx.setRoot((0,s._O9)(t).id),1}selectRange(e,t){const i=e.map(this.getRouteToNode).sort(((e,t)=>t.length-e.length)),o=new Set;i.forEach((e=>{o.has((0,s._O9)(e))||(e.forEach((e=>o.add(e))),this.recursivelySelectNode(e,this.selectedState,t))})),this.removeRedundantState()}isNodeSelected(e){const t=this.getRouteToNode(e);return this.isNodePathSelected(t,this.selectedState)}isNodePathSelected(e,t){let[i,...s]=e;if(0===s.length){const e=t.toggledNodes.has(i.id);if(i.hasChildren()){const e=t.toggledNodes.get(i.id);if(e&&e.toggledNodes.size)return}return t.selectAllChildren?!e:e}if(t.toggledNodes.has(i.id)){const e=t.toggledNodes.get(i.id);if(e)return this.isNodePathSelected(s,e)}return t.selectAllChildren}getRouteToNode(e){const t=[];let i=e;for(;i.parent;)t.push(i),i=i.parent;return t.reverse()}removeRedundantState(){var e,t=this;if(null!==(e=this.filterManager)&&void 0!==e&&e.isAnyFilterPresent())return;const i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.selectedState,s=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;if(e.toggledNodes.forEach(((t,s)=>{i(t,s,e)})),s){const i=t.rowModel.getRowNode(s),o=null===i||void 0===i?void 0:i.childStore;if(null===o||void 0===o?void 0:o.isLastRowIndexKnown()){if(e.toggledNodes.size>=o.getRowCount()){for(const i of e.toggledNodes.entries()){const[e,s]=i;if(s.toggledNodes.size>0)return;if(!t.rowModel.getRowNode(e))return}e.selectAllChildren=!e.selectAllChildren,e.toggledNodes.clear()}}}const n=0===e.toggledNodes.size,r=(null===o||void 0===o?void 0:o.selectAllChildren)===e.selectAllChildren;n&&r&&(null===o||void 0===o||o.toggledNodes.delete(s))};i()}recursivelySelectNode(e,t,i){var s;let[o,...n]=e;if(!o)return;if(!n.length){const e=o.selectable;if(t.selectAllChildren===i||!e)return void t.toggledNodes.delete(o.id);const s={selectAllChildren:i,toggledNodes:new Map};return void t.toggledNodes.set(o.id,s)}const r=t.toggledNodes.has(o.id),l=null!==(s=t.toggledNodes.get(o.id))&&void 0!==s?s:{selectAllChildren:t.selectAllChildren,toggledNodes:new Map};r||t.toggledNodes.set(o.id,l),this.recursivelySelectNode(n,l,i),t.selectAllChildren===l.selectAllChildren&&0===l.toggledNodes.size&&t.toggledNodes.delete(o.id)}getSelectedNodes(){(0,s.Brh)("`getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model.\n            Use `api.getServerSideSelectionState()` instead.");const e=[];return this.rowModel.forEachNode((t=>{t.isSelected()&&e.push(t)})),e}processNewRow(){}getSelectedRows(){return this.getSelectedNodes().map((e=>e.data))}getSelectionCount(){return-1}isEmpty(){var e;return!this.selectedState.selectAllChildren&&!(null!==(e=this.selectedState.toggledNodes)&&void 0!==e&&e.size)}selectAllRowNodes(){this.selectedState={selectAllChildren:!0,toggledNodes:new Map},this.selectionCtx.reset()}deselectAllRowNodes(){this.selectedState={selectAllChildren:!1,toggledNodes:new Map},this.selectionCtx.reset()}getSelectAllState(){return this.selectedState.selectAllChildren?!(this.selectedState.toggledNodes.size>0)||null:this.selectedState.toggledNodes.size>0&&null}},y=class extends s.AS9{constructor(){super(...arguments),this.beanName="selectionService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){const e=this.gos.get("groupSelectsChildren");this.addManagedPropertyListener("groupSelectsChildren",(e=>{this.destroyBean(this.selectionStrategy);const t=e.currentValue?S:w;this.selectionStrategy=this.createManagedBean(new t),this.shotgunResetNodeSelectionState(),this.dispatchSelectionChanged("api")})),this.addManagedPropertyListener("rowSelection",(()=>this.deselectAllRowNodes({source:"api"})));const t=e?S:w;this.selectionStrategy=this.createManagedBean(new t)}getSelectionState(){return this.selectionStrategy.getSelectedState()}setSelectionState(e,t){Array.isArray(e)||(this.selectionStrategy.setSelectedState(e),this.shotgunResetNodeSelectionState(),this.dispatchSelectionChanged(t))}setNodesSelected(e){const{nodes:t,...i}=e,o=this.gos.get("rowSelection");if(t.length>1&&"multiple"!==o)return(0,s.Brh)("cannot multi select while rowSelection='single'"),0;if(t.length>1&&e.rangeSelect)return(0,s.Brh)("cannot use range selection when multi selecting rows"),0;const n={nodes:t.filter((e=>e.selectable)),...i};if(!n.nodes.length)return 0;const r=this.selectionStrategy.setNodesSelected(n);return this.shotgunResetNodeSelectionState(n.source),this.dispatchSelectionChanged(n.source),r}deleteSelectionStateFromParent(e,t){this.selectionStrategy.deleteSelectionStateFromParent(e,t)&&(this.shotgunResetNodeSelectionState(),this.dispatchSelectionChanged("api"))}shotgunResetNodeSelectionState(e){this.rowModel.forEachNode((t=>{if(t.stub)return;const i=this.selectionStrategy.isNodeSelected(t);i!==t.isSelected()&&t.selectThisNode(i,void 0,e)}))}getSelectedNodes(){return this.selectionStrategy.getSelectedNodes()}getSelectedRows(){return this.selectionStrategy.getSelectedRows()}getSelectionCount(){return this.selectionStrategy.getSelectionCount()}syncInRowNode(e){this.selectionStrategy.processNewRow(e);const t=this.selectionStrategy.isNodeSelected(e);if(0!=t&&!e.selectable)return this.selectionStrategy.setNodesSelected({nodes:[e],newValue:!1,source:"api"}),this.shotgunResetNodeSelectionState(),void this.dispatchSelectionChanged("api");e.setSelectedInitialValue(t)}reset(){this.selectionStrategy.deselectAllRowNodes({source:"api"})}isEmpty(){return this.selectionStrategy.isEmpty()}hasNodesToSelect(){return!0}selectAllRowNodes(e){b(e),this.selectionStrategy.selectAllRowNodes(e),this.rowModel.forEachNode((t=>{t.stub||t.selectThisNode(!0,void 0,e.source)})),this.dispatchSelectionChanged(e.source)}deselectAllRowNodes(e){b(e),this.selectionStrategy.deselectAllRowNodes(e),this.rowModel.forEachNode((t=>{t.stub||t.selectThisNode(!1,void 0,e.source)})),this.dispatchSelectionChanged(e.source)}getSelectAllState(e,t){return this.selectionStrategy.getSelectAllState(e,t)}updateGroupsFromChildrenSelections(){return!1}getBestCostNodeSelection(){(0,s.Brh)("calling gridApi.getBestCostNodeSelection() is only possible when using rowModelType=`clientSide`.")}filterFromSelection(){}dispatchSelectionChanged(e){const t={type:"selectionChanged",source:e};this.eventService.dispatchEvent(t)}};function b(e){(e.justCurrentPage||e.justFiltered)&&(0,s.Brh)("selecting just filtered only works when gridOptions.rowModelType='clientSide'")}var R=class extends s.AS9{constructor(){super(...arguments),this.beanName="ssrmStoreFactory"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService}createStore(e,t){const i=this.getStoreParams(e,t);return new(i.suppressInfiniteScroll?u:m)(e,i,t)}getStoreParams(e,t){const i=this.getLevelSpecificParams(t),s=this.isInfiniteScroll(i);return{suppressInfiniteScroll:!s,cacheBlockSize:this.getBlockSize(s,i),maxBlocksInCache:this.getMaxBlocksInCache(s,e,i)}}getMaxBlocksInCache(e,t,i){if(!e)return;const o=i&&null!=i.maxBlocksInCache?i.maxBlocksInCache:this.gos.get("maxBlocksInCache");if(null!=o&&o>=0)if(t.dynamicRowHeight){const e="Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.";(0,s.Brh)(e)}else{if(!this.columnModel.isAutoRowHeightActive())return o;{const e="Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.";(0,s.Brh)(e)}}}getBlockSize(e,t){if(!e)return;const i=t&&null!=t.cacheBlockSize?t.cacheBlockSize:this.gos.get("cacheBlockSize");return null!=i&&i>0?i:100}getLevelSpecificParams(e){const t=this.gos.getCallback("getServerSideGroupLevelParams");if(!t)return;return t({level:e.level+1,parentRowNode:e.level>=0?e:void 0,rowGroupColumns:this.funcColsService.getRowGroupColumns(),pivotColumns:this.funcColsService.getPivotColumns(),pivotMode:this.columnModel.isPivotMode()})}isInfiniteScroll(e){return!(e&&null!=e.suppressInfiniteScroll?e.suppressInfiniteScroll:this.isSuppressServerSideInfiniteScroll())}isSuppressServerSideInfiniteScroll(){return this.gos.get("suppressServerSideInfiniteScroll")}},F=class extends s.AS9{constructor(){super(...arguments),this.beanName="ssrmStoreUtils"}wireBeans(e){this.columnModel=e.columnModel,this.serverSideRowModel=e.rowModel,this.storeFactory=e.ssrmStoreFactory}loadFromDatasource(e){const{storeParams:t,parentBlock:i,parentNode:s}=e,o=s.getGroupKeys();if(!t.datasource)return;const n={startRow:e.startRow,endRow:e.endRow,rowGroupCols:t.rowGroupCols,valueCols:t.valueCols,pivotCols:t.pivotCols,pivotMode:t.pivotMode,groupKeys:o,filterModel:t.filterModel,sortModel:t.sortModel},r=this.gos.addGridCommonParams({success:e.success,fail:e.fail,request:n,parentNode:e.parentNode});window.setTimeout((()=>{t.datasource&&i.isAlive()?t.datasource.getRows(r):e.fail()}),0)}getChildStore(e,t,i){if((0,s.vfG)(e))return t;const o=i(e[0]);if(o){if(1===e.length&&!o.childStore){const e=this.serverSideRowModel.getParams();o.childStore=this.createBean(this.storeFactory.createStore(e,o))}const t=e.slice(1,e.length),i=o.childStore;return i?i.getChildStore(t):null}return null}isServerRefreshNeeded(e,t,i){if(i.valueColChanged||i.secondaryColChanged)return!0;const s=e.level+1;if(!(s<t.length))return!0;const o=t[s].id;if(i.changedColumns.indexOf(o)>-1)return!0;return this.columnModel.getCols().filter((e=>e.getColDef().showRowGroup&&i.changedColumns.includes(e.getId()))).map((e=>e.getColDef().showRowGroup)).some((e=>!0===e||e===o))}getServerSideInitialRowCount(){return this.gos.get("serverSideInitialRowCount")}assertRowModelIsServerSide(e){return!!this.gos.isRowModelType("serverSide")||((0,s.Brh)("The '".concat(e,"' property can only be used with the Server Side Row Model.")),!1)}assertNotTreeData(e){return!this.gos.get("treeData")||((0,s.Brh)("The '".concat(e,"' property cannot be used while using tree data.")),!1)}isServerSideSortAllLevels(){return this.gos.get("serverSideSortAllLevels")&&this.assertRowModelIsServerSide("serverSideSortAllLevels")}isServerSideOnlyRefreshFilteredGroups(){return this.gos.get("serverSideOnlyRefreshFilteredGroups")&&this.assertRowModelIsServerSide("serverSideOnlyRefreshFilteredGroups")}isServerSideSortOnServer(){return this.gos.get("serverSideSortOnServer")&&this.assertRowModelIsServerSide("serverSideSortOnServer")&&this.assertNotTreeData("serverSideSortOnServer")}isServerSideFilterOnServer(){return this.gos.get("serverSideFilterOnServer")&&this.assertRowModelIsServerSide("serverSideFilterOnServer")&&this.assertNotTreeData("serverSideFilterOnServer")}},E=class extends s.AS9{constructor(){super(...arguments),this.beanName="ssrmTransactionManager",this.asyncTransactions=[]}wireBeans(e){this.valueCache=e.valueCache,this.serverSideRowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){this.gos.isRowModelType("serverSide")}applyTransactionAsync(e,t){null==this.asyncTransactionsTimeout&&this.scheduleExecuteAsync(),this.asyncTransactions.push({transaction:e,callback:t})}scheduleExecuteAsync(){const e=this.gos.getAsyncTransactionWaitMillis();this.asyncTransactionsTimeout=window.setTimeout((()=>{this.executeAsyncTransactions()}),e)}executeAsyncTransactions(){if(!this.asyncTransactions)return;const e=[],t=[],i=[];let o=!1;if(this.asyncTransactions.forEach((n=>{let r;this.serverSideRowModel.executeOnStore(n.transaction.route,(e=>{r=e.applyTransaction(n.transaction)}))?void 0==r&&(r={status:s.Qk6.StoreNotFound}):r={status:s.Qk6.StoreNotStarted},t.push(r);r.status==s.Qk6.StoreLoading?i.push(n):(n.callback&&e.push((()=>n.callback(r))),r.status===s.Qk6.Applied&&(o=!0))})),e.length>0&&window.setTimeout((()=>{e.forEach((e=>e()))}),0),this.asyncTransactionsTimeout=void 0,this.asyncTransactions=i,o&&(this.valueCache.onDataChanged(),this.eventService.dispatchEvent({type:"storeUpdated"})),t.length>0){const e={type:"asyncTransactionsFlushed",results:t};this.eventService.dispatchEvent(e)}}flushAsyncTransactions(){null!=this.asyncTransactionsTimeout&&clearTimeout(this.asyncTransactionsTimeout),this.executeAsyncTransactions()}applyTransaction(e){let t;if(this.serverSideRowModel.executeOnStore(e.route,(i=>{t=i.applyTransaction(e)}))){if(t){if(this.valueCache.onDataChanged(),t.remove){const i=t.remove.map((e=>e.id));this.selectionService.deleteSelectionStateFromParent(e.route||[],i)}return this.eventService.dispatchEvent({type:"storeUpdated"}),t}return{status:s.Qk6.StoreNotFound}}return{status:s.Qk6.StoreNotStarted}}},x="32.0.1",P={version:x,moduleName:"".concat(s.GXE.ServerSideRowModelModule,"-core"),rowModel:"serverSide",beans:[v,r,d,F,n,c,E,l,R,a,y,f,h],dependantModules:[o.f$,s.fqf]},M={version:x,moduleName:"".concat(s.GXE.ServerSideRowModelModule,"-api"),beans:[s.iO9],apiFunctions:{getServerSideSelectionState:function(e){return e.selectionService.getSelectionState()},setServerSideSelectionState:function(e,t){e.selectionService.setSelectionState(t,"api")},applyServerSideTransaction:function(e,t){var i;return null===(i=e.ssrmTransactionManager)||void 0===i?void 0:i.applyTransaction(t)},applyServerSideTransactionAsync:function(e,t,i){var s;return null===(s=e.ssrmTransactionManager)||void 0===s?void 0:s.applyTransactionAsync(t,i)},applyServerSideRowData:function(e,t){var i,o,n;const r=null!==(i=t.startRow)&&void 0!==i?i:0,l=null!==(o=t.route)&&void 0!==o?o:[];r<0?(0,s.Brh)("invalid value ".concat(t.startRow," for startRow, the value should be >= 0")):null===(n=e.rowModelHelperService)||void 0===n||null===(n=n.getServerSideRowModel())||void 0===n||n.applyRowData(t.successParams,r,l)},retryServerSideLoads:function(e){var t;null===(t=e.rowModelHelperService)||void 0===t||null===(t=t.getServerSideRowModel())||void 0===t||t.retryLoads()},flushServerSideAsyncTransactions:function(e){var t;return null===(t=e.ssrmTransactionManager)||void 0===t?void 0:t.flushAsyncTransactions()},refreshServerSide:function(e,t){var i;null===(i=e.rowModelHelperService)||void 0===i||null===(i=i.getServerSideRowModel())||void 0===i||i.refreshStore(t)},getServerSideGroupLevelState:function(e){var t,i;return null!==(t=null===(i=e.rowModelHelperService)||void 0===i||null===(i=i.getServerSideRowModel())||void 0===i?void 0:i.getStoreState())&&void 0!==t?t:[]}},dependantModules:[P,s.GR0,s.Z0d]},D={version:x,moduleName:s.GXE.ServerSideRowModelModule,dependantModules:[P,M]}},87113:(e,t,i)=>{"use strict";i.d(t,{V:()=>p});var s=i(30845),o=i(8701),n=class extends s.wA2{constructor(){super('<div class="ag-status-name-value">\n            <span data-ref="eLabel"></span>:&nbsp;\n            <span data-ref="eValue" class="ag-status-name-value-value"></span>\n        </div>'),this.eLabel=s.CUI,this.eValue=s.CUI}setLabel(e,t){this.setDisplayed(!1);const i=this.localeService.getLocaleTextFunc();this.eLabel.innerHTML=i(e,t)}setValue(e){this.eValue.innerHTML=e}},r={selector:"AG-NAME-VALUE",component:n},l=class extends s.wA2{constructor(){super('<div class="ag-status-panel ag-status-panel-aggregations">\n            <ag-name-value data-ref="avgAggregationComp"></ag-name-value>\n            <ag-name-value data-ref="countAggregationComp"></ag-name-value>\n            <ag-name-value data-ref="minAggregationComp"></ag-name-value>\n            <ag-name-value data-ref="maxAggregationComp"></ag-name-value>\n            <ag-name-value data-ref="sumAggregationComp"></ag-name-value>\n        </div>',[r]),this.sumAggregationComp=s.CUI,this.countAggregationComp=s.CUI,this.minAggregationComp=s.CUI,this.maxAggregationComp=s.CUI,this.avgAggregationComp=s.CUI}wireBeans(e){this.valueService=e.valueService,this.cellNavigationService=e.cellNavigationService,this.rowModel=e.rowModel,this.cellPositionUtils=e.cellPositionUtils,this.rowPositionUtils=e.rowPositionUtils,this.rangeService=e.rangeService}destroy(){super.destroy()}postConstruct(){this.isValidRowModel()?(this.avgAggregationComp.setLabel("avg","Average"),this.countAggregationComp.setLabel("count","Count"),this.minAggregationComp.setLabel("min","Min"),this.maxAggregationComp.setLabel("max","Max"),this.sumAggregationComp.setLabel("sum","Sum"),this.addManagedEventListeners({rangeSelectionChanged:this.onRangeSelectionChanged.bind(this),modelUpdated:this.onRangeSelectionChanged.bind(this)})):(0,s.Brh)("agAggregationComponent should only be used with the client and server side row model.")}isValidRowModel(){const e=this.rowModel.getType();return"clientSide"===e||"serverSide"===e}init(e){this.params=e}refresh(e){return this.params=e,this.onRangeSelectionChanged(),!0}setAggregationComponentValue(e,t,i){const o=this.getAllowedAggregationValueComponent(e);if((0,s.fTC)(o)&&o){const e=this.localeService.getLocaleTextFunc(),n=e("thousandSeparator",","),r=e("decimalSeparator",".");o.setValue((0,s.N0I)(t,n,r)),o.setDisplayed(i)}else{var n;null===(n=this.getAggregationValueComponent(e))||void 0===n||n.setDisplayed(!1)}}getAllowedAggregationValueComponent(e){const{aggFuncs:t}=this.params;return!t||t.includes(e)?this.getAggregationValueComponent(e):null}getAggregationValueComponent(e){return this["".concat(e,"AggregationComp")]}onRangeSelectionChanged(){var e;const t=null===(e=this.rangeService)||void 0===e?void 0:e.getCellRanges();let i=0,o=0,n=0,r=null,l=null;const a={};if(t&&!(0,s.vfG)(t)&&this.rangeService)for(let u=0;u<t.length;u++){const e=t[u];let d=this.rangeService.getRangeStartRow(e);const c=this.rangeService.getRangeEndRow(e);for(;;){if((0,s.n92)(d)||!d||this.rowPositionUtils.before(c,d)||!d||!e.columns)break;e.columns.forEach((e=>{if(null===d)return;const t=this.cellPositionUtils.createId({rowPinned:d.rowPinned,column:e,rowIndex:d.rowIndex});if(a[t])return;a[t]=!0;const c=this.rowPositionUtils.getRowNode(d);if((0,s.n92)(c))return;let u=this.valueService.getValue(e,c);(0,s.n92)(u)||""===u||(o++,"object"===typeof u&&"value"in u&&(u=u.value,""===u)||("string"===typeof u&&(u=Number(u)),"number"!==typeof u||isNaN(u)||(i+=u,(null===l||u>l)&&(l=u),(null===r||u<r)&&(r=u),n++)))})),d=this.cellNavigationService.getRowBelow(d)}}const d=o>1,c=n>1;this.setAggregationComponentValue("count",o,d),this.setAggregationComponentValue("sum",i,c),this.setAggregationComponentValue("min",r,c),this.setAggregationComponentValue("max",l,c),this.setAggregationComponentValue("avg",i/n,c)}};var a={selector:"AG-STATUS-BAR",component:class extends s.wA2{constructor(){super('<div class="ag-status-bar">\n            <div data-ref="eStatusBarLeft" class="ag-status-bar-left" role="status"></div>\n            <div data-ref="eStatusBarCenter" class="ag-status-bar-center" role="status"></div>\n            <div data-ref="eStatusBarRight" class="ag-status-bar-right" role="status"></div>\n        </div>'),this.updateQueued=!1,this.panelsPromise=s.j_S.resolve(),this.eStatusBarLeft=s.CUI,this.eStatusBarCenter=s.CUI,this.eStatusBarRight=s.CUI,this.compDestroyFunctions={}}wireBeans(e){this.userComponentFactory=e.userComponentFactory,this.statusBarService=e.statusBarService}postConstruct(){this.processStatusPanels(new Map),this.addManagedPropertyListeners(["statusBar"],this.handleStatusBarChanged.bind(this))}processStatusPanels(e){var t;const i=null===(t=this.gos.get("statusBar"))||void 0===t?void 0:t.statusPanels;if(i){const t=i.filter((e=>"left"===e.align)),o=i.filter((e=>"center"===e.align)),n=i.filter((e=>!e.align||"right"===e.align));this.panelsPromise=s.j_S.all([this.createAndRenderComponents(t,this.eStatusBarLeft,e),this.createAndRenderComponents(o,this.eStatusBarCenter,e),this.createAndRenderComponents(n,this.eStatusBarRight,e)])}else this.setDisplayed(!1)}handleStatusBarChanged(){this.updateQueued||(this.updateQueued=!0,this.panelsPromise.then((()=>{this.updateStatusBar(),this.updateQueued=!1})))}updateStatusBar(){var e;const t=null===(e=this.gos.get("statusBar"))||void 0===e?void 0:e.statusPanels,i=Array.isArray(t)&&t.length>0;this.setDisplayed(i);const o=new Map;i&&t.forEach((e=>{var t;const i=null!==(t=e.key)&&void 0!==t?t:e.statusPanel,n=this.statusBarService.getStatusPanel(i);if(null!==n&&void 0!==n&&n.refresh){var r;const t=this.gos.addGridCommonParams(null!==(r=e.statusPanelParams)&&void 0!==r?r:{});n.refresh(t)&&(o.set(i,n),delete this.compDestroyFunctions[i],(0,s.taW)(n.getGui()))}})),this.resetStatusBar(),i&&this.processStatusPanels(o)}resetStatusBar(){this.eStatusBarLeft.innerHTML="",this.eStatusBarCenter.innerHTML="",this.eStatusBarRight.innerHTML="",this.destroyComponents(),this.statusBarService.unregisterAllComponents()}destroy(){this.destroyComponents(),super.destroy()}destroyComponents(){Object.values(this.compDestroyFunctions).forEach((e=>e())),this.compDestroyFunctions={}}createAndRenderComponents(e,t,i){const o=[];return e.forEach((e=>{const t=e.key||e.statusPanel,n=i.get(t);let r;if(n)r=s.j_S.resolve(n);else{const t={};if(r=this.userComponentFactory.getStatusPanelCompDetails(e,t).newAgStackInstance(),null==r)return}o.push({key:t,promise:r})})),s.j_S.all(o.map((e=>e.promise))).then((()=>{o.forEach((e=>{e.promise.then((i=>{const s=()=>{this.destroyBean(i)};this.isAlive()?(this.statusBarService.registerStatusPanel(e.key,i),t.appendChild(i.getGui()),this.compDestroyFunctions[e.key]=s):s()}))}))}))}}},d=class extends s.AS9{constructor(){super(),this.beanName="statusBarService",this.allComponents=new Map}registerStatusPanel(e,t){this.allComponents.set(e,t)}unregisterStatusPanel(e){this.allComponents.delete(e)}unregisterAllComponents(){this.allComponents.clear()}getStatusPanel(e){return this.allComponents.get(e)}getStatusPanelSelector(){return a}destroy(){this.unregisterAllComponents(),super.destroy()}},c="32.0.1",u={version:c,moduleName:"".concat(s.GXE.StatusBarModule,"-core"),beans:[d],userComponents:[{name:"agAggregationComponent",classImp:l},{name:"agSelectedRowCountComponent",classImp:class extends n{wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){if(!this.isValidRowModel())return void(0,s.Brh)("agSelectedRowCountComponent should only be used with the client and server side row model.");this.setLabel("selectedRows","Selected"),this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-selected-row-count"),this.onRowSelectionChanged();const e=this.onRowSelectionChanged.bind(this);this.addManagedEventListeners({modelUpdated:e,selectionChanged:e})}isValidRowModel(){const e=this.rowModel.getType();return"clientSide"===e||"serverSide"===e}onRowSelectionChanged(){const e=this.selectionService.getSelectionCount();if(e<0)return this.setValue("?"),void this.setDisplayed(!0);const t=this.localeService.getLocaleTextFunc(),i=t("thousandSeparator",","),o=t("decimalSeparator",".");this.setValue((0,s.cM1)(e,i,o)),this.setDisplayed(e>0)}init(){}refresh(){return!0}destroy(){super.destroy()}}},{name:"agTotalRowCountComponent",classImp:class extends n{wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.setLabel("totalRows","Total Rows"),"clientSide"===this.rowModel.getType()?(this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-total-row-count"),this.setDisplayed(!0),this.addManagedEventListeners({modelUpdated:this.onDataChanged.bind(this)}),this.onDataChanged()):(0,s.Brh)("agTotalRowCountComponent should only be used with the client side row model.")}onDataChanged(){const e=this.localeService.getLocaleTextFunc(),t=e("thousandSeparator",","),i=e("decimalSeparator",".");this.setValue((0,s.cM1)(this.getRowCountValue(),t,i))}getRowCountValue(){let e=0;return this.rowModel.forEachLeafNode((()=>e+=1)),e}init(){}refresh(){return!0}destroy(){super.destroy()}}},{name:"agFilteredRowCountComponent",classImp:class extends n{wireBeans(e){this.rowModel=e.rowModel}postConstruct(){if(this.setLabel("filteredRows","Filtered"),"clientSide"!==this.rowModel.getType())return void(0,s.Brh)("agFilteredRowCountComponent should only be used with the client side row model.");this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-filtered-row-count"),this.setDisplayed(!0);const e=this.onDataChanged.bind(this);this.addManagedEventListeners({modelUpdated:e}),e()}onDataChanged(){const e=this.getTotalRowCountValue(),t=this.getFilteredRowCountValue(),i=this.localeService.getLocaleTextFunc(),o=i("thousandSeparator",","),n=i("decimalSeparator",".");this.setValue((0,s.cM1)(t,o,n)),this.setDisplayed(e!==t)}getTotalRowCountValue(){let e=0;return this.rowModel.forEachNode((()=>e+=1)),e}getFilteredRowCountValue(){let e=0;return this.rowModel.forEachNodeAfterFilter((t=>{t.group||(e+=1)})),e}init(){}refresh(){return!0}destroy(){super.destroy()}}},{name:"agTotalAndFilteredRowCountComponent",classImp:class extends n{wireBeans(e){this.rowModel=e.rowModel}postConstruct(){"clientSide"===this.rowModel.getType()?(this.setLabel("totalAndFilteredRows","Rows"),this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-total-and-filtered-row-count"),this.setDisplayed(!0),this.addManagedEventListeners({modelUpdated:this.onDataChanged.bind(this)}),this.onDataChanged()):(0,s.Brh)("agTotalAndFilteredRowCountComponent should only be used with the client side row model.")}onDataChanged(){const e=this.localeService.getLocaleTextFunc(),t=e("thousandSeparator",","),i=e("decimalSeparator","."),o=(0,s.cM1)(this.getFilteredRowCountValue(),t,i),n=(0,s.cM1)(this.getTotalRowCount(),t,i);if(o===n)this.setValue(o);else{const e=this.localeService.getLocaleTextFunc();this.setValue("".concat(o," ").concat(e("of","of")," ").concat(n))}}getFilteredRowCountValue(){let e=0;return this.rowModel.forEachNodeAfterFilter((t=>{t.group||e++})),e}getTotalRowCount(){let e=0;return this.rowModel.forEachNode((t=>{t.group||e++})),e}init(){}refresh(){return!0}destroy(){super.destroy()}}}],dependantModules:[o.f$]},h={version:c,moduleName:"".concat(s.GXE.StatusBarModule,"-api"),apiFunctions:{getStatusPanel:function(e,t){const i=e.statusBarService.getStatusPanel(t);return(0,s.fKg)(i)}},dependantModules:[u]},p={version:c,moduleName:s.GXE.StatusBarModule,dependantModules:[u,h]}}}]);